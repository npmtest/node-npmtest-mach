{"/home/travis/build/npmtest/node-npmtest-mach/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_mach */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-mach/lib.npmtest_mach.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/lib.npmtest_mach.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":49}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":55}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_mach */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_mach = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_mach = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-mach/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":48}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":62},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-mach && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_mach */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_mach","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_mach.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_mach.rollup.js'] =","            local.assetsDict['/assets.npmtest_mach.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_mach.__dirname + '/lib.npmtest_mach.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/index.js","s":{"1":1,"2":1,"3":9,"4":9,"5":18,"6":18,"7":11,"8":11,"9":1},"b":{"1":[11,7]},"f":{"1":9},"fnMap":{"1":{"name":"extend","line":17,"loc":{"start":{"line":17,"column":10},"end":{"line":17,"column":28}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":20}},"2":{"start":{"line":9,"column":0},"end":{"line":29,"column":2}},"3":{"start":{"line":18,"column":4},"end":{"line":18,"column":18}},"4":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":20,"column":6},"end":{"line":20,"column":31}},"6":{"start":{"line":22,"column":6},"end":{"line":25,"column":7}},"7":{"start":{"line":23,"column":8},"end":{"line":23,"column":35}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":24}},"9":{"start":{"line":31,"column":0},"end":{"line":31,"column":45}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":6}},{"start":{"line":22,"column":6},"end":{"line":22,"column":6}}]}},"code":["\"use strict\";","","var EXTENSIONS = [];","","/*!"," * mach - HTTP for JavaScript"," * https://github.com/mjackson/mach"," */","var mach = module.exports = {","","  version: require(\"./version\"),","  Connection: require(\"./Connection\"),","  Header: require(\"./Header\"),","  Location: require(\"./Location\"),","  Message: require(\"./Message\"),","","  extend: function extend() {","    var extension;","    for (var i = 0, len = arguments.length; i < len; ++i) {","      extension = arguments[i];","","      if (EXTENSIONS.indexOf(extension) === -1) {","        EXTENSIONS.push(extension);","        extension(mach);","      }","    }","  }","","};","","mach.extend(require(\"./extensions/default\"));"],"l":{"3":1,"9":1,"18":9,"19":9,"20":18,"22":18,"23":11,"24":11,"31":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/version.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/version.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}}},"branchMap":{},"code":["\"use strict\";","","/**"," * The current version of mach."," */","module.exports = \"1.3.5\";"],"l":{"6":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Connection.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Connection.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":8,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"f":{"1":8,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"locationPropertyAlias","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":37}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":14},"end":{"line":14,"column":26}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":5},"end":{"line":16,"column":22}}},"4":{"name":"defaultErrorHandler","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":36}}},"5":{"name":"defaultCloseHandler","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":31}}},"6":{"name":"defaultApp","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":26}}},"7":{"name":"Connection","line":78,"loc":{"start":{"line":78,"column":0},"end":{"line":78,"column":29}}},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":15},"end":{"line":123,"column":27}}},"9":{"name":"(anonymous_9)","line":125,"loc":{"start":{"line":125,"column":5},"end":{"line":125,"column":22}}},"10":{"name":"(anonymous_10)","line":132,"loc":{"start":{"line":132,"column":17},"end":{"line":132,"column":29}}},"11":{"name":"(anonymous_11)","line":134,"loc":{"start":{"line":134,"column":5},"end":{"line":134,"column":22}}},"12":{"name":"(anonymous_12)","line":150,"loc":{"start":{"line":150,"column":14},"end":{"line":150,"column":26}}},"13":{"name":"(anonymous_13)","line":158,"loc":{"start":{"line":158,"column":13},"end":{"line":158,"column":25}}},"14":{"name":"(anonymous_14)","line":171,"loc":{"start":{"line":171,"column":5},"end":{"line":171,"column":22}}},"15":{"name":"(anonymous_15)","line":185,"loc":{"start":{"line":185,"column":17},"end":{"line":185,"column":29}}},"16":{"name":"(anonymous_16)","line":187,"loc":{"start":{"line":187,"column":5},"end":{"line":187,"column":22}}},"17":{"name":"(anonymous_17)","line":194,"loc":{"start":{"line":194,"column":13},"end":{"line":194,"column":25}}},"18":{"name":"(anonymous_18)","line":196,"loc":{"start":{"line":196,"column":5},"end":{"line":196,"column":22}}},"19":{"name":"(anonymous_19)","line":204,"loc":{"start":{"line":204,"column":10},"end":{"line":204,"column":25}}},"20":{"name":"(anonymous_20)","line":210,"loc":{"start":{"line":210,"column":45},"end":{"line":210,"column":62}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":55}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":37}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":35}},"9":{"start":{"line":13,"column":0},"end":{"line":19,"column":1}},"10":{"start":{"line":14,"column":2},"end":{"line":18,"column":5}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":31}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":32}},"13":{"start":{"line":21,"column":0},"end":{"line":27,"column":1}},"14":{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":49}},"16":{"start":{"line":25,"column":4},"end":{"line":25,"column":16}},"17":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}},"18":{"start":{"line":31,"column":0},"end":{"line":35,"column":1}},"19":{"start":{"line":32,"column":2},"end":{"line":32,"column":20}},"20":{"start":{"line":33,"column":2},"end":{"line":33,"column":43}},"21":{"start":{"line":34,"column":2},"end":{"line":34,"column":72}},"22":{"start":{"line":78,"column":0},"end":{"line":116,"column":1}},"23":{"start":{"line":79,"column":2},"end":{"line":79,"column":26}},"24":{"start":{"line":81,"column":2},"end":{"line":81,"column":15}},"25":{"start":{"line":82,"column":2},"end":{"line":88,"column":3}},"26":{"start":{"line":83,"column":4},"end":{"line":83,"column":23}},"27":{"start":{"line":84,"column":9},"end":{"line":88,"column":3}},"28":{"start":{"line":85,"column":4},"end":{"line":85,"column":47}},"29":{"start":{"line":86,"column":9},"end":{"line":88,"column":3}},"30":{"start":{"line":87,"column":4},"end":{"line":87,"column":36}},"31":{"start":{"line":90,"column":2},"end":{"line":90,"column":27}},"32":{"start":{"line":91,"column":2},"end":{"line":91,"column":42}},"33":{"start":{"line":92,"column":2},"end":{"line":92,"column":31}},"34":{"start":{"line":94,"column":2},"end":{"line":94,"column":69}},"35":{"start":{"line":95,"column":2},"end":{"line":95,"column":69}},"36":{"start":{"line":96,"column":2},"end":{"line":96,"column":63}},"37":{"start":{"line":97,"column":2},"end":{"line":97,"column":32}},"38":{"start":{"line":100,"column":2},"end":{"line":107,"column":3}},"39":{"start":{"line":101,"column":4},"end":{"line":106,"column":5}},"40":{"start":{"line":102,"column":6},"end":{"line":102,"column":34}},"41":{"start":{"line":104,"column":6},"end":{"line":104,"column":69}},"42":{"start":{"line":105,"column":6},"end":{"line":105,"column":60}},"43":{"start":{"line":109,"column":2},"end":{"line":109,"column":58}},"44":{"start":{"line":110,"column":2},"end":{"line":110,"column":47}},"45":{"start":{"line":111,"column":2},"end":{"line":111,"column":47}},"46":{"start":{"line":112,"column":2},"end":{"line":112,"column":21}},"47":{"start":{"line":114,"column":2},"end":{"line":114,"column":27}},"48":{"start":{"line":115,"column":2},"end":{"line":115,"column":20}},"49":{"start":{"line":118,"column":0},"end":{"line":230,"column":3}},"50":{"start":{"line":124,"column":4},"end":{"line":124,"column":24}},"51":{"start":{"line":126,"column":4},"end":{"line":126,"column":75}},"52":{"start":{"line":133,"column":4},"end":{"line":133,"column":26}},"53":{"start":{"line":135,"column":4},"end":{"line":135,"column":77}},"54":{"start":{"line":151,"column":4},"end":{"line":151,"column":38}},"55":{"start":{"line":159,"column":4},"end":{"line":159,"column":52}},"56":{"start":{"line":161,"column":4},"end":{"line":168,"column":5}},"57":{"start":{"line":162,"column":6},"end":{"line":162,"column":39}},"58":{"start":{"line":163,"column":6},"end":{"line":163,"column":28}},"59":{"start":{"line":165,"column":6},"end":{"line":165,"column":74}},"60":{"start":{"line":165,"column":44},"end":{"line":165,"column":74}},"61":{"start":{"line":167,"column":6},"end":{"line":167,"column":20}},"62":{"start":{"line":170,"column":4},"end":{"line":170,"column":30}},"63":{"start":{"line":172,"column":4},"end":{"line":172,"column":39}},"64":{"start":{"line":174,"column":4},"end":{"line":178,"column":5}},"65":{"start":{"line":175,"column":6},"end":{"line":175,"column":61}},"66":{"start":{"line":177,"column":6},"end":{"line":177,"column":35}},"67":{"start":{"line":186,"column":4},"end":{"line":186,"column":68}},"68":{"start":{"line":188,"column":4},"end":{"line":188,"column":51}},"69":{"start":{"line":195,"column":4},"end":{"line":195,"column":39}},"70":{"start":{"line":197,"column":4},"end":{"line":197,"column":47}},"71":{"start":{"line":205,"column":4},"end":{"line":205,"column":28}},"72":{"start":{"line":207,"column":4},"end":{"line":207,"column":20}},"73":{"start":{"line":209,"column":4},"end":{"line":227,"column":5}},"74":{"start":{"line":210,"column":6},"end":{"line":224,"column":9}},"75":{"start":{"line":211,"column":8},"end":{"line":211,"column":34}},"76":{"start":{"line":211,"column":27},"end":{"line":211,"column":34}},"77":{"start":{"line":213,"column":8},"end":{"line":223,"column":9}},"78":{"start":{"line":214,"column":10},"end":{"line":214,"column":30}},"79":{"start":{"line":215,"column":15},"end":{"line":223,"column":9}},"80":{"start":{"line":216,"column":10},"end":{"line":216,"column":40}},"81":{"start":{"line":218,"column":10},"end":{"line":218,"column":75}},"82":{"start":{"line":218,"column":37},"end":{"line":218,"column":75}},"83":{"start":{"line":220,"column":10},"end":{"line":220,"column":75}},"84":{"start":{"line":220,"column":37},"end":{"line":220,"column":75}},"85":{"start":{"line":222,"column":10},"end":{"line":222,"column":63}},"86":{"start":{"line":222,"column":36},"end":{"line":222,"column":63}},"87":{"start":{"line":226,"column":6},"end":{"line":226,"column":35}},"88":{"start":{"line":232,"column":0},"end":{"line":232,"column":28}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":22,"column":2}},{"start":{"line":22,"column":2},"end":{"line":22,"column":2}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":36}},{"start":{"line":22,"column":40},"end":{"line":22,"column":53}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":18},"end":{"line":23,"column":23}},{"start":{"line":23,"column":27},"end":{"line":23,"column":38}},{"start":{"line":23,"column":42},"end":{"line":23,"column":47}}]},"4":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":12},"end":{"line":79,"column":19}},{"start":{"line":79,"column":23},"end":{"line":79,"column":25}}]},"5":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":2},"end":{"line":82,"column":2}},{"start":{"line":82,"column":2},"end":{"line":82,"column":2}}]},"6":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":9},"end":{"line":84,"column":9}},{"start":{"line":84,"column":9},"end":{"line":84,"column":9}}]},"7":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":13},"end":{"line":84,"column":29}},{"start":{"line":84,"column":33},"end":{"line":84,"column":44}}]},"8":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":15},"end":{"line":85,"column":31}},{"start":{"line":85,"column":35},"end":{"line":85,"column":46}}]},"9":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":9},"end":{"line":86,"column":9}},{"start":{"line":86,"column":9},"end":{"line":86,"column":9}}]},"10":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":17},"end":{"line":91,"column":32}},{"start":{"line":91,"column":36},"end":{"line":91,"column":41}}]},"11":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":18},"end":{"line":94,"column":33}},{"start":{"line":94,"column":37},"end":{"line":94,"column":56}}]},"12":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":18},"end":{"line":95,"column":33}},{"start":{"line":95,"column":37},"end":{"line":95,"column":56}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":2},"end":{"line":100,"column":2}},{"start":{"line":100,"column":2},"end":{"line":100,"column":2}}]},"14":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"15":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":29}},{"start":{"line":101,"column":33},"end":{"line":101,"column":55}}]},"16":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":25},"end":{"line":109,"column":48}},{"start":{"line":109,"column":52},"end":{"line":109,"column":57}}]},"17":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":20},"end":{"line":110,"column":38}},{"start":{"line":110,"column":42},"end":{"line":110,"column":46}}]},"18":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":20},"end":{"line":111,"column":38}},{"start":{"line":111,"column":42},"end":{"line":111,"column":46}}]},"19":{"line":126,"type":"cond-expr","locations":[{"start":{"line":126,"column":47},"end":{"line":126,"column":66}},{"start":{"line":126,"column":69},"end":{"line":126,"column":74}}]},"20":{"line":135,"type":"cond-expr","locations":[{"start":{"line":135,"column":49},"end":{"line":135,"column":54}},{"start":{"line":135,"column":57},"end":{"line":135,"column":76}}]},"21":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"22":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":6},"end":{"line":165,"column":6}},{"start":{"line":165,"column":6},"end":{"line":165,"column":6}}]},"23":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":4},"end":{"line":174,"column":4}},{"start":{"line":174,"column":4},"end":{"line":174,"column":4}}]},"24":{"line":174,"type":"binary-expr","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":13}},{"start":{"line":174,"column":17},"end":{"line":174,"column":42}}]},"25":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":11},"end":{"line":186,"column":60}},{"start":{"line":186,"column":64},"end":{"line":186,"column":67}}]},"26":{"line":205,"type":"binary-expr","locations":[{"start":{"line":205,"column":10},"end":{"line":205,"column":13}},{"start":{"line":205,"column":17},"end":{"line":205,"column":27}}]},"27":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"28":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"29":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":15},"end":{"line":215,"column":15}},{"start":{"line":215,"column":15},"end":{"line":215,"column":15}}]},"30":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":19},"end":{"line":215,"column":44}},{"start":{"line":215,"column":48},"end":{"line":215,"column":63}},{"start":{"line":215,"column":67},"end":{"line":215,"column":99}}]},"31":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":10},"end":{"line":218,"column":10}},{"start":{"line":218,"column":10},"end":{"line":218,"column":10}}]},"32":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":10},"end":{"line":220,"column":10}},{"start":{"line":220,"column":10},"end":{"line":220,"column":10}}]},"33":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":10},"end":{"line":222,"column":10}},{"start":{"line":222,"column":10},"end":{"line":222,"column":10}}]}},"code":["\"use strict\";","","/* jshint -W058 */","var d = require(\"describe-property\");","var isBinary = require(\"bodec\").isBinary;","var decodeBase64 = require(\"./utils/decodeBase64\");","var encodeBase64 = require(\"./utils/encodeBase64\");","var stringifyQuery = require(\"./utils/stringifyQuery\");","var Promise = require(\"./utils/Promise\");","var Location = require(\"./Location\");","var Message = require(\"./Message\");","","function locationPropertyAlias(name) {","  return d.gs(function () {","    return this.location[name];","  }, function (value) {","    this.location[name] = value;","  });","}","","function defaultErrorHandler(error) {","  if (typeof console !== \"undefined\" && console.error) {","    console.error(error && error.stack || error);","  } else {","    throw error; // Don't silently swallow errors!","  }","}","","function defaultCloseHandler() {}","","function defaultApp(conn) {","  conn.status = 404;","  conn.response.contentType = \"text/plain\";","  conn.response.content = \"Not found: \" + conn.method + \" \" + conn.path;","}","","/**"," * An HTTP connection that acts as the asynchronous primitive for"," * the duration of the request/response cycle."," *"," * Important features are:"," *"," * - request        A Message representing the request being made. In"," *                  a server environment, this is an \"incoming\" message"," *                  that was probably generated by a web browser or some"," *                  other consumer. In a client environment, this is an"," *                  \"outgoing\" message that we send to a remote server."," * - response       A Message representing the response to the request."," *                  In a server environment, this is an \"outgoing\" message"," *                  that will be sent back to the client. In a client"," *                  environment, this is the response that was received"," *                  from the remote server."," * - method         The HTTP method that the request uses"," * - location       The URL of the request. In a server environment, this"," *                  is derived from the URL path used in the request as"," *                  well as a combination of the Host, X-Forwarded-* and"," *                  other relevant headers."," * - version        The version of HTTP used in the request"," * - status         The HTTP status code of the response"," * - statusText     The HTTP status text that corresponds to the status"," * - responseText   This is a special property that contains the entire"," *                  content of the response. It is present by default when"," *                  making client requests for convenience, but may also be"," *                  disabled when you need to stream the response."," *"," * Options may be any of the following:"," *"," * - content        The request content, defaults to \"\""," * - headers        The request headers, defaults to {}"," * - method         The request HTTP method, defaults to \"GET\""," * - location/url   The request Location or URL"," * - params         The request params"," * - onError        A function that is called when there is an error"," * - onClose        A function that is called when the request closes"," *"," * The options may also be a URL string to specify the URL."," */","function Connection(options) {","  options = options || {};","","  var location;","  if (typeof options === \"string\") {","    location = options; // options may be a URL string.","  } else if (options.location || options.url) {","    location = options.location || options.url;","  } else if (typeof window === \"object\") {","    location = window.location.href;","  }","","  this.location = location;","  this.version = options.version || \"1.1\";","  this.method = options.method;","","  this.onError = (options.onError || defaultErrorHandler).bind(this);","  this.onClose = (options.onClose || defaultCloseHandler).bind(this);","  this.request = new Message(options.content, options.headers);","  this.response = new Message();","","  // Params may be given as an object.","  if (options.params) {","    if (this.method === \"GET\" || this.method === \"HEAD\") {","      this.query = options.params;","    } else {","      this.request.contentType = \"application/x-www-form-urlencoded\";","      this.request.content = stringifyQuery(options.params);","    }","  }","","  this.withCredentials = options.withCredentials || false;","  this.remoteHost = options.remoteHost || null;","  this.remoteUser = options.remoteUser || null;","  this.basename = \"\";","","  this.responseText = null;","  this.status = 200;","}","","Object.defineProperties(Connection.prototype, {","","  /**","   * The method used in the request.","   */","  method: d.gs(function () {","    return this._method;","  }, function (value) {","    this._method = typeof value === \"string\" ? value.toUpperCase() : \"GET\";","  }),","","  /**","   * The Location of the request.","   */","  location: d.gs(function () {","    return this._location;","  }, function (value) {","    this._location = value instanceof Location ? value : new Location(value);","  }),","","  href: locationPropertyAlias(\"href\"),","  protocol: locationPropertyAlias(\"protocol\"),","  host: locationPropertyAlias(\"host\"),","  hostname: locationPropertyAlias(\"hostname\"),","  port: locationPropertyAlias(\"port\"),","  search: locationPropertyAlias(\"search\"),","  queryString: locationPropertyAlias(\"queryString\"),","  query: locationPropertyAlias(\"query\"),","","  /**","   * True if the request uses SSL, false otherwise.","   */","  isSSL: d.gs(function () {","    return this.protocol === \"https:\";","  }),","","  /**","   * The username:password used in the request, an empty string","   * if no auth was provided.","   */","  auth: d.gs(function () {","    var header = this.request.headers.Authorization;","","    if (header) {","      var parts = header.split(\" \", 2);","      var scheme = parts[0];","","      if (scheme.toLowerCase() === \"basic\") return decodeBase64(parts[1]);","","      return header;","    }","","    return this.location.auth;","  }, function (value) {","    var headers = this.request.headers;","","    if (value && typeof value === \"string\") {","      headers.Authorization = \"Basic \" + encodeBase64(value);","    } else {","      delete headers.Authorization;","    }","  }),","","  /**","   * The portion of the original URL path that is still relevant","   * for request processing.","   */","  pathname: d.gs(function () {","    return this.location.pathname.replace(this.basename, \"\") || \"/\";","  }, function (value) {","    this.location.pathname = this.basename + value;","  }),","","  /**","   * The URL path with query string.","   */","  path: d.gs(function () {","    return this.pathname + this.search;","  }, function (value) {","    this.location.path = this.basename + value;","  }),","","  /**","   * Calls the given `app` with this connection as the only argument.","   * as the first argument and returns a promise for a Response.","   */","  call: d(function (app) {","    app = app || defaultApp;","","    var conn = this;","","    try {","      return Promise.resolve(app(conn)).then(function (value) {","        if (value == null) return;","","        if (typeof value === \"number\") {","          conn.status = value;","        } else if (typeof value === \"string\" || isBinary(value) || typeof value.pipe === \"function\") {","          conn.response.content = value;","        } else {","          if (value.headers != null) conn.response.headers = value.headers;","","          if (value.content != null) conn.response.content = value.content;","","          if (value.status != null) conn.status = value.status;","        }","      });","    } catch (error) {","      return Promise.reject(error);","    }","  })","","});","","module.exports = Connection;"],"l":{"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":8,"15":0,"17":0,"21":1,"22":0,"23":0,"25":0,"29":1,"31":1,"32":0,"33":0,"34":0,"78":1,"79":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"90":0,"91":0,"92":0,"94":0,"95":0,"96":0,"97":0,"100":0,"101":0,"102":0,"104":0,"105":0,"109":0,"110":0,"111":0,"112":0,"114":0,"115":0,"118":1,"124":0,"126":0,"133":0,"135":0,"151":0,"159":0,"161":0,"162":0,"163":0,"165":0,"167":0,"170":0,"172":0,"174":0,"175":0,"177":0,"186":0,"188":0,"195":0,"197":0,"205":0,"207":0,"209":0,"210":0,"211":0,"213":0,"214":0,"215":0,"216":0,"218":0,"220":0,"222":0,"226":0,"232":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/decodeBase64.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/decodeBase64.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":47}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"bodec\").decodeBase64;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/encodeBase64.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/encodeBase64.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":47}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"bodec\").encodeBase64;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"qs\").stringify;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/Promise.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/Promise.js","s":{"1":1,"2":1,"3":1,"4":1},"b":{"1":[1,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":76}},"3":{"start":{"line":5,"column":43},"end":{"line":5,"column":76}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}}},"branchMap":{"1":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":0},"end":{"line":5,"column":0}},{"start":{"line":5,"column":0},"end":{"line":5,"column":0}}]}},"code":["\"use strict\";","","var Promise = require(\"when/lib/Promise\");","","if (process.env.NODE_ENV !== \"production\") require(\"when/monitor\")(Promise);","","module.exports = Promise;"],"l":{"3":1,"5":1,"7":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Location.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Location.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":5,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"f":{"1":5,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"propertyAlias","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":51}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":14},"end":{"line":18,"column":26}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":5},"end":{"line":20,"column":22}}},"4":{"name":"setProperties","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":45}}},"5":{"name":"Location","line":55,"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":27}}},"6":{"name":"(anonymous_6)","line":71,"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":32}}},"7":{"name":"(anonymous_7)","line":94,"loc":{"start":{"line":94,"column":13},"end":{"line":94,"column":25}}},"8":{"name":"(anonymous_8)","line":100,"loc":{"start":{"line":100,"column":5},"end":{"line":100,"column":22}}},"9":{"name":"(anonymous_9)","line":128,"loc":{"start":{"line":128,"column":13},"end":{"line":128,"column":25}}},"10":{"name":"(anonymous_10)","line":136,"loc":{"start":{"line":136,"column":5},"end":{"line":136,"column":22}}},"11":{"name":"(anonymous_11)","line":156,"loc":{"start":{"line":156,"column":13},"end":{"line":156,"column":25}}},"12":{"name":"(anonymous_12)","line":158,"loc":{"start":{"line":158,"column":5},"end":{"line":158,"column":22}}},"13":{"name":"(anonymous_13)","line":170,"loc":{"start":{"line":170,"column":13},"end":{"line":170,"column":25}}},"14":{"name":"(anonymous_14)","line":172,"loc":{"start":{"line":172,"column":5},"end":{"line":172,"column":22}}},"15":{"name":"(anonymous_15)","line":192,"loc":{"start":{"line":192,"column":20},"end":{"line":192,"column":32}}},"16":{"name":"(anonymous_16)","line":194,"loc":{"start":{"line":194,"column":5},"end":{"line":194,"column":22}}},"17":{"name":"(anonymous_17)","line":201,"loc":{"start":{"line":201,"column":14},"end":{"line":201,"column":26}}},"18":{"name":"(anonymous_18)","line":203,"loc":{"start":{"line":203,"column":5},"end":{"line":203,"column":22}}},"19":{"name":"(anonymous_19)","line":207,"loc":{"start":{"line":207,"column":12},"end":{"line":207,"column":24}}},"20":{"name":"(anonymous_20)","line":211,"loc":{"start":{"line":211,"column":14},"end":{"line":211,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":47}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":55}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":43}},"6":{"start":{"line":12,"column":0},"end":{"line":15,"column":2}},"7":{"start":{"line":17,"column":0},"end":{"line":23,"column":1}},"8":{"start":{"line":18,"column":2},"end":{"line":22,"column":5}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":89}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":42}},"11":{"start":{"line":26,"column":0},"end":{"line":26,"column":124}},"12":{"start":{"line":28,"column":0},"end":{"line":35,"column":1}},"13":{"start":{"line":29,"column":2},"end":{"line":29,"column":19}},"14":{"start":{"line":30,"column":2},"end":{"line":34,"column":3}},"15":{"start":{"line":31,"column":4},"end":{"line":31,"column":37}},"16":{"start":{"line":33,"column":4},"end":{"line":33,"column":127}},"17":{"start":{"line":33,"column":77},"end":{"line":33,"column":127}},"18":{"start":{"line":55,"column":0},"end":{"line":63,"column":1}},"19":{"start":{"line":56,"column":2},"end":{"line":56,"column":23}},"20":{"start":{"line":58,"column":2},"end":{"line":62,"column":3}},"21":{"start":{"line":59,"column":4},"end":{"line":59,"column":24}},"22":{"start":{"line":60,"column":9},"end":{"line":62,"column":3}},"23":{"start":{"line":61,"column":4},"end":{"line":61,"column":33}},"24":{"start":{"line":65,"column":0},"end":{"line":215,"column":3}},"25":{"start":{"line":72,"column":4},"end":{"line":72,"column":75}},"26":{"start":{"line":72,"column":41},"end":{"line":72,"column":75}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":33}},"28":{"start":{"line":75,"column":4},"end":{"line":75,"column":42}},"29":{"start":{"line":77,"column":4},"end":{"line":77,"column":108}},"30":{"start":{"line":77,"column":31},"end":{"line":77,"column":108}},"31":{"start":{"line":79,"column":4},"end":{"line":79,"column":55}},"32":{"start":{"line":81,"column":4},"end":{"line":88,"column":7}},"33":{"start":{"line":95,"column":4},"end":{"line":95,"column":25}},"34":{"start":{"line":96,"column":4},"end":{"line":96,"column":25}},"35":{"start":{"line":97,"column":4},"end":{"line":97,"column":25}},"36":{"start":{"line":99,"column":4},"end":{"line":99,"column":87}},"37":{"start":{"line":101,"column":4},"end":{"line":101,"column":33}},"38":{"start":{"line":103,"column":4},"end":{"line":110,"column":7}},"39":{"start":{"line":129,"column":4},"end":{"line":129,"column":33}},"40":{"start":{"line":130,"column":4},"end":{"line":130,"column":29}},"41":{"start":{"line":131,"column":4},"end":{"line":131,"column":25}},"42":{"start":{"line":133,"column":4},"end":{"line":133,"column":78}},"43":{"start":{"line":133,"column":59},"end":{"line":133,"column":78}},"44":{"start":{"line":135,"column":4},"end":{"line":135,"column":16}},"45":{"start":{"line":137,"column":4},"end":{"line":137,"column":14}},"46":{"start":{"line":139,"column":4},"end":{"line":145,"column":5}},"47":{"start":{"line":140,"column":6},"end":{"line":140,"column":48}},"48":{"start":{"line":141,"column":6},"end":{"line":141,"column":45}},"49":{"start":{"line":143,"column":6},"end":{"line":143,"column":28}},"50":{"start":{"line":144,"column":6},"end":{"line":144,"column":23}},"51":{"start":{"line":157,"column":4},"end":{"line":157,"column":90}},"52":{"start":{"line":159,"column":4},"end":{"line":159,"column":56}},"53":{"start":{"line":171,"column":4},"end":{"line":171,"column":39}},"54":{"start":{"line":173,"column":4},"end":{"line":173,"column":14}},"55":{"start":{"line":175,"column":4},"end":{"line":181,"column":5}},"56":{"start":{"line":176,"column":6},"end":{"line":176,"column":48}},"57":{"start":{"line":177,"column":6},"end":{"line":177,"column":43}},"58":{"start":{"line":179,"column":6},"end":{"line":179,"column":28}},"59":{"start":{"line":180,"column":6},"end":{"line":180,"column":25}},"60":{"start":{"line":193,"column":4},"end":{"line":193,"column":36}},"61":{"start":{"line":195,"column":4},"end":{"line":195,"column":39}},"62":{"start":{"line":202,"column":4},"end":{"line":202,"column":40}},"63":{"start":{"line":204,"column":4},"end":{"line":204,"column":45}},"64":{"start":{"line":208,"column":4},"end":{"line":208,"column":21}},"65":{"start":{"line":212,"column":4},"end":{"line":212,"column":21}},"66":{"start":{"line":217,"column":0},"end":{"line":217,"column":26}}},"branchMap":{"1":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":11},"end":{"line":19,"column":40}},{"start":{"line":19,"column":45},"end":{"line":19,"column":87}}]},"2":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":68},"end":{"line":19,"column":72}},{"start":{"line":19,"column":75},"end":{"line":19,"column":87}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":47}},{"start":{"line":33,"column":51},"end":{"line":33,"column":75}}]},"5":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":2},"end":{"line":58,"column":2}},{"start":{"line":58,"column":2},"end":{"line":58,"column":2}}]},"6":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":9},"end":{"line":60,"column":9}},{"start":{"line":60,"column":9},"end":{"line":60,"column":9}}]},"7":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"8":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":77,"column":4}},{"start":{"line":77,"column":4},"end":{"line":77,"column":4}}]},"9":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":16},"end":{"line":82,"column":33}},{"start":{"line":82,"column":37},"end":{"line":82,"column":50}}]},"10":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":25}},{"start":{"line":83,"column":29},"end":{"line":83,"column":38}}]},"11":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":16},"end":{"line":84,"column":33}},{"start":{"line":84,"column":37},"end":{"line":84,"column":50}}]},"12":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":25}},{"start":{"line":85,"column":29},"end":{"line":85,"column":38}}]},"13":{"line":99,"type":"cond-expr","locations":[{"start":{"line":99,"column":18},"end":{"line":99,"column":79}},{"start":{"line":99,"column":82},"end":{"line":99,"column":86}}]},"14":{"line":99,"type":"cond-expr","locations":[{"start":{"line":99,"column":49},"end":{"line":99,"column":59}},{"start":{"line":99,"column":62},"end":{"line":99,"column":64}}]},"15":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":133,"column":4}},{"start":{"line":133,"column":4},"end":{"line":133,"column":4}}]},"16":{"line":133,"type":"binary-expr","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":20}},{"start":{"line":133,"column":24},"end":{"line":133,"column":57}}]},"17":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":4}},{"start":{"line":139,"column":4},"end":{"line":139,"column":4}}]},"18":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":33}},{"start":{"line":139,"column":37},"end":{"line":139,"column":72}}]},"19":{"line":157,"type":"binary-expr","locations":[{"start":{"line":157,"column":11},"end":{"line":157,"column":31}},{"start":{"line":157,"column":36},"end":{"line":157,"column":88}}]},"20":{"line":157,"type":"cond-expr","locations":[{"start":{"line":157,"column":52},"end":{"line":157,"column":81}},{"start":{"line":157,"column":84},"end":{"line":157,"column":88}}]},"21":{"line":159,"type":"cond-expr","locations":[{"start":{"line":159,"column":35},"end":{"line":159,"column":48}},{"start":{"line":159,"column":51},"end":{"line":159,"column":55}}]},"22":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":4},"end":{"line":175,"column":4}},{"start":{"line":175,"column":4},"end":{"line":175,"column":4}}]},"23":{"line":175,"type":"binary-expr","locations":[{"start":{"line":175,"column":8},"end":{"line":175,"column":33}},{"start":{"line":175,"column":37},"end":{"line":175,"column":72}}]},"24":{"line":195,"type":"binary-expr","locations":[{"start":{"line":195,"column":18},"end":{"line":195,"column":23}},{"start":{"line":195,"column":27},"end":{"line":195,"column":38}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var mergeQuery = require(\"./utils/mergeQuery\");","var stringifyQuery = require(\"./utils/stringifyQuery\");","var parseQuery = require(\"./utils/parseQuery\");","var parseURL = require(\"./utils/parseURL\");","","/**"," * Standard ports for HTTP protocols."," */","var STANDARD_PORTS = {","  \"http:\": \"80\",","  \"https:\": \"443\"","};","","function propertyAlias(propertyName, defaultValue) {","  return d.gs(function () {","    return this.properties[propertyName] || (defaultValue == null ? null : defaultValue);","  }, function (value) {","    this.properties[propertyName] = value;","  });","}","","// Order is important here. Later properties take priority.","var PROPERTY_NAMES = [\"protocol\", \"auth\", \"hostname\", \"port\", \"host\", \"pathname\", \"search\", \"queryString\", \"query\", \"path\"];","","function setProperties(location, properties) {","  var propertyName;","  for (var i = 0, len = PROPERTY_NAMES.length; i < len; ++i) {","    propertyName = PROPERTY_NAMES[i];","","    if (properties.hasOwnProperty(propertyName) && propertyName in location) location[propertyName] = properties[propertyName];","  }","}","","/**"," * A URL location, analogous to window.location."," *"," * Options may be any of the following:"," *"," * - protocol"," * - auth"," * - hostname"," * - port"," * - host (overrides hostname and port)"," * - pathname"," * - search"," * - queryString (overrides search)"," * - query (overrides queryString/search)"," * - path (overrides pathname and query/queryString/search)"," *"," * Alternatively, options may be a URL string."," */","function Location(options) {","  this.properties = {};","","  if (typeof options === \"string\") {","    this.href = options;","  } else if (options) {","    setProperties(this, options);","  }","}","","Object.defineProperties(Location.prototype, {","","  /**","   * Creates and returns a new Location with the path and query of","   * the given location appended.","   */","  concat: d(function (location) {","    if (!(location instanceof Location)) location = new Location(location);","","    var pathname = this.pathname;","    var extraPathname = location.pathname;","","    if (extraPathname !== \"/\") pathname = pathname.replace(/\\/*$/, \"/\") + extraPathname.replace(/^\\/*/, \"\");","","    var query = mergeQuery(this.query, location.query);","","    return new Location({","      protocol: location.protocol || this.protocol,","      auth: location.auth || this.auth,","      hostname: location.hostname || this.hostname,","      port: location.port || this.port,","      pathname: pathname,","      query: query","    });","  }),","","  /**","   * The full URL.","   */","  href: d.gs(function () {","    var auth = this.auth;","    var host = this.host;","    var path = this.path;","","    return host ? this.protocol + \"//\" + (auth ? auth + \"@\" : \"\") + host + path : path;","  }, function (value) {","    var parsed = parseURL(value);","","    setProperties(this, {","      protocol: parsed.protocol,","      auth: parsed.auth,","      hostname: parsed.hostname,","      port: parsed.port,","      pathname: parsed.pathname,","      search: parsed.search","    });","  }),","","  /**","   * The portion of the URL that denotes the protocol, including the","   * trailing colon (e.g. \"http:\" or \"https:\").","   */","  protocol: propertyAlias(\"protocol\"),","","  /**","   * The username:password used in the URL, if any.","   */","  auth: propertyAlias(\"auth\", \"\"),","","  /**","   * The full name of the host, including the port number when using","   * a non-standard port.","   */","  host: d.gs(function () {","    var protocol = this.protocol;","    var host = this.hostname;","    var port = this.port;","","    if (port != null && port !== STANDARD_PORTS[protocol]) host += \":\" + port;","","    return host;","  }, function (value) {","    var index;","","    if (typeof value === \"string\" && (index = value.indexOf(\":\")) !== -1) {","      this.hostname = value.substring(0, index);","      this.port = value.substring(index + 1);","    } else {","      this.hostname = value;","      this.port = null;","    }","  }),","","  /**","   * The name of the host without the port.","   */","  hostname: propertyAlias(\"hostname\"),","","  /**","   * The port number as a string.","   */","  port: d.gs(function () {","    return this.properties.port || (this.protocol ? STANDARD_PORTS[this.protocol] : null);","  }, function (value) {","    this.properties.port = value ? String(value) : null;","  }),","","  /**","   * The URL path without the query string.","   */","  pathname: propertyAlias(\"pathname\", \"/\"),","","  /**","   * The URL path with query string.","   */","  path: d.gs(function () {","    return this.pathname + this.search;","  }, function (value) {","    var index;","","    if (typeof value === \"string\" && (index = value.indexOf(\"?\")) !== -1) {","      this.pathname = value.substring(0, index);","      this.search = value.substring(index);","    } else {","      this.pathname = value;","      this.search = null;","    }","  }),","","  /**","   * The query string, including the preceeding ?.","   */","  search: propertyAlias(\"search\", \"\"),","","  /**","   * The query string of the URL, without the preceeding ?.","   */","  queryString: d.gs(function () {","    return this.search.substring(1);","  }, function (value) {","    this.search = value && \"?\" + value;","  }),","","  /**","   * An object of data in the query string.","   */","  query: d.gs(function () {","    return parseQuery(this.queryString);","  }, function (value) {","    this.queryString = stringifyQuery(value);","  }),","","  toJSON: d(function () {","    return this.href;","  }),","","  toString: d(function () {","    return this.href;","  })","","});","","module.exports = Location;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"12":1,"17":1,"18":5,"19":0,"21":0,"26":1,"28":1,"29":0,"30":0,"31":0,"33":0,"55":1,"56":0,"58":0,"59":0,"60":0,"61":0,"65":1,"72":0,"74":0,"75":0,"77":0,"79":0,"81":0,"95":0,"96":0,"97":0,"99":0,"101":0,"103":0,"129":0,"130":0,"131":0,"133":0,"135":0,"137":0,"139":0,"140":0,"141":0,"143":0,"144":0,"157":0,"159":0,"171":0,"173":0,"175":0,"176":0,"177":0,"179":0,"180":0,"193":0,"195":0,"202":0,"204":0,"208":0,"212":0,"217":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/mergeQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/mergeQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":47}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"qs/lib/utils\").merge;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"qs\").parse;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseURL.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseURL.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"parseURL","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":23}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":5,"column":0},"end":{"line":17,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":29}},"4":{"start":{"line":8,"column":2},"end":{"line":16,"column":4}},"5":{"start":{"line":19,"column":0},"end":{"line":19,"column":26}}},"branchMap":{},"code":["\"use strict\";","","var urlParse = require(\"url\").parse;","","function parseURL(url) {","  var parsed = urlParse(url);","","  return {","    protocol: parsed.protocol,","    auth: parsed.auth,","    hostname: parsed.hostname,","    port: parsed.port,","    pathname: parsed.pathname,","    search: parsed.search,","    hash: parsed.hash","  };","}","","module.exports = parseURL;"],"l":{"3":1,"5":1,"6":0,"8":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Message.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Message.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"fnMap":{"1":{"name":"defaultParser","line":24,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":43}}},"2":{"name":"Message","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":35}}},"3":{"name":"(anonymous_3)","line":41,"loc":{"start":{"line":41,"column":26},"end":{"line":41,"column":56}}},"4":{"name":"(anonymous_4)","line":44,"loc":{"start":{"line":44,"column":43},"end":{"line":44,"column":73}}},"5":{"name":"(anonymous_5)","line":57,"loc":{"start":{"line":57,"column":16},"end":{"line":57,"column":28}}},"6":{"name":"(anonymous_6)","line":59,"loc":{"start":{"line":59,"column":5},"end":{"line":59,"column":22}}},"7":{"name":"(anonymous_7)","line":63,"loc":{"start":{"line":63,"column":50},"end":{"line":63,"column":66}}},"8":{"name":"(anonymous_8)","line":80,"loc":{"start":{"line":80,"column":15},"end":{"line":80,"column":37}}},"9":{"name":"(anonymous_9)","line":87,"loc":{"start":{"line":87,"column":15},"end":{"line":87,"column":44}}},"10":{"name":"(anonymous_10)","line":94,"loc":{"start":{"line":94,"column":15},"end":{"line":94,"column":44}}},"11":{"name":"(anonymous_11)","line":112,"loc":{"start":{"line":112,"column":16},"end":{"line":112,"column":28}}},"12":{"name":"(anonymous_12)","line":138,"loc":{"start":{"line":138,"column":20},"end":{"line":138,"column":32}}},"13":{"name":"(anonymous_13)","line":140,"loc":{"start":{"line":140,"column":5},"end":{"line":140,"column":22}}},"14":{"name":"(anonymous_14)","line":151,"loc":{"start":{"line":151,"column":18},"end":{"line":151,"column":30}}},"15":{"name":"(anonymous_15)","line":155,"loc":{"start":{"line":155,"column":5},"end":{"line":155,"column":22}}},"16":{"name":"(anonymous_16)","line":165,"loc":{"start":{"line":165,"column":16},"end":{"line":165,"column":28}}},"17":{"name":"(anonymous_17)","line":169,"loc":{"start":{"line":169,"column":5},"end":{"line":169,"column":22}}},"18":{"name":"(anonymous_18)","line":176,"loc":{"start":{"line":176,"column":16},"end":{"line":176,"column":28}}},"19":{"name":"(anonymous_19)","line":178,"loc":{"start":{"line":178,"column":5},"end":{"line":178,"column":22}}},"20":{"name":"(anonymous_20)","line":194,"loc":{"start":{"line":194,"column":19},"end":{"line":194,"column":31}}},"21":{"name":"(anonymous_21)","line":205,"loc":{"start":{"line":205,"column":19},"end":{"line":205,"column":40}}},"22":{"name":"(anonymous_22)","line":217,"loc":{"start":{"line":217,"column":22},"end":{"line":217,"column":53}}},"23":{"name":"(anonymous_23)","line":220,"loc":{"start":{"line":220,"column":46},"end":{"line":220,"column":63}}},"24":{"name":"(anonymous_24)","line":236,"loc":{"start":{"line":236,"column":18},"end":{"line":236,"column":39}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":65}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":49}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":43}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":49}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":37}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":28}},"12":{"start":{"line":24,"column":0},"end":{"line":26,"column":1}},"13":{"start":{"line":25,"column":2},"end":{"line":25,"column":45}},"14":{"start":{"line":31,"column":0},"end":{"line":34,"column":1}},"15":{"start":{"line":32,"column":2},"end":{"line":32,"column":25}},"16":{"start":{"line":33,"column":2},"end":{"line":33,"column":25}},"17":{"start":{"line":36,"column":0},"end":{"line":50,"column":3}},"18":{"start":{"line":42,"column":8},"end":{"line":42,"column":68}},"19":{"start":{"line":45,"column":8},"end":{"line":45,"column":68}},"20":{"start":{"line":52,"column":0},"end":{"line":247,"column":3}},"21":{"start":{"line":58,"column":4},"end":{"line":58,"column":25}},"22":{"start":{"line":60,"column":4},"end":{"line":60,"column":23}},"23":{"start":{"line":62,"column":4},"end":{"line":74,"column":5}},"24":{"start":{"line":63,"column":6},"end":{"line":71,"column":15}},"25":{"start":{"line":64,"column":8},"end":{"line":64,"column":51}},"26":{"start":{"line":66,"column":8},"end":{"line":70,"column":9}},"27":{"start":{"line":67,"column":10},"end":{"line":67,"column":37}},"28":{"start":{"line":69,"column":10},"end":{"line":69,"column":100}},"29":{"start":{"line":72,"column":11},"end":{"line":74,"column":5}},"30":{"start":{"line":73,"column":6},"end":{"line":73,"column":120}},"31":{"start":{"line":73,"column":36},"end":{"line":73,"column":120}},"32":{"start":{"line":73,"column":74},"end":{"line":73,"column":120}},"33":{"start":{"line":81,"column":4},"end":{"line":81,"column":57}},"34":{"start":{"line":88,"column":4},"end":{"line":88,"column":58}},"35":{"start":{"line":95,"column":4},"end":{"line":95,"column":49}},"36":{"start":{"line":97,"column":4},"end":{"line":97,"column":31}},"37":{"start":{"line":98,"column":4},"end":{"line":106,"column":5}},"38":{"start":{"line":99,"column":6},"end":{"line":103,"column":7}},"39":{"start":{"line":100,"column":8},"end":{"line":100,"column":40}},"40":{"start":{"line":102,"column":8},"end":{"line":102,"column":59}},"41":{"start":{"line":105,"column":6},"end":{"line":105,"column":34}},"42":{"start":{"line":113,"column":4},"end":{"line":130,"column":5}},"43":{"start":{"line":114,"column":6},"end":{"line":114,"column":39}},"44":{"start":{"line":116,"column":6},"end":{"line":129,"column":7}},"45":{"start":{"line":117,"column":8},"end":{"line":117,"column":42}},"46":{"start":{"line":124,"column":8},"end":{"line":124,"column":131}},"47":{"start":{"line":124,"column":40},"end":{"line":124,"column":131}},"48":{"start":{"line":124,"column":80},"end":{"line":124,"column":131}},"49":{"start":{"line":126,"column":8},"end":{"line":126,"column":32}},"50":{"start":{"line":128,"column":8},"end":{"line":128,"column":27}},"51":{"start":{"line":132,"column":4},"end":{"line":132,"column":25}},"52":{"start":{"line":139,"column":4},"end":{"line":139,"column":40}},"53":{"start":{"line":141,"column":4},"end":{"line":141,"column":41}},"54":{"start":{"line":152,"column":4},"end":{"line":153,"column":14}},"55":{"start":{"line":154,"column":4},"end":{"line":154,"column":99}},"56":{"start":{"line":156,"column":4},"end":{"line":156,"column":80}},"57":{"start":{"line":166,"column":4},"end":{"line":167,"column":14}},"58":{"start":{"line":168,"column":4},"end":{"line":168,"column":94}},"59":{"start":{"line":170,"column":4},"end":{"line":170,"column":75}},"60":{"start":{"line":177,"column":4},"end":{"line":177,"column":25}},"61":{"start":{"line":179,"column":4},"end":{"line":179,"column":47}},"62":{"start":{"line":179,"column":23},"end":{"line":179,"column":47}},"63":{"start":{"line":181,"column":4},"end":{"line":186,"column":5}},"64":{"start":{"line":182,"column":6},"end":{"line":182,"column":28}},"65":{"start":{"line":183,"column":6},"end":{"line":183,"column":20}},"66":{"start":{"line":185,"column":6},"end":{"line":185,"column":40}},"67":{"start":{"line":188,"column":4},"end":{"line":188,"column":33}},"68":{"start":{"line":195,"column":4},"end":{"line":195,"column":41}},"69":{"start":{"line":206,"column":4},"end":{"line":206,"column":101}},"70":{"start":{"line":206,"column":39},"end":{"line":206,"column":101}},"71":{"start":{"line":208,"column":4},"end":{"line":208,"column":33}},"72":{"start":{"line":218,"column":4},"end":{"line":218,"column":40}},"73":{"start":{"line":220,"column":4},"end":{"line":222,"column":7}},"74":{"start":{"line":221,"column":6},"end":{"line":221,"column":45}},"75":{"start":{"line":237,"column":4},"end":{"line":237,"column":56}},"76":{"start":{"line":237,"column":29},"end":{"line":237,"column":56}},"77":{"start":{"line":239,"column":4},"end":{"line":239,"column":78}},"78":{"start":{"line":239,"column":39},"end":{"line":239,"column":78}},"79":{"start":{"line":241,"column":4},"end":{"line":241,"column":66}},"80":{"start":{"line":242,"column":4},"end":{"line":242,"column":50}},"81":{"start":{"line":244,"column":4},"end":{"line":244,"column":31}},"82":{"start":{"line":249,"column":0},"end":{"line":249,"column":25}}},"branchMap":{"1":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"2":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"3":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":11},"end":{"line":72,"column":11}},{"start":{"line":72,"column":11},"end":{"line":72,"column":11}}]},"4":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":36},"end":{"line":73,"column":36}},{"start":{"line":73,"column":36},"end":{"line":73,"column":36}}]},"5":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"6":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":6}},{"start":{"line":99,"column":6},"end":{"line":99,"column":6}}]},"7":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"8":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":6},"end":{"line":116,"column":6}},{"start":{"line":116,"column":6},"end":{"line":116,"column":6}}]},"9":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":40},"end":{"line":124,"column":40}},{"start":{"line":124,"column":40},"end":{"line":124,"column":40}}]},"10":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":102},"end":{"line":124,"column":124}},{"start":{"line":124,"column":128},"end":{"line":124,"column":130}}]},"11":{"line":154,"type":"cond-expr","locations":[{"start":{"line":154,"column":69},"end":{"line":154,"column":91}},{"start":{"line":154,"column":94},"end":{"line":154,"column":98}}]},"12":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":11},"end":{"line":154,"column":22}},{"start":{"line":154,"column":27},"end":{"line":154,"column":65}}]},"13":{"line":156,"type":"cond-expr","locations":[{"start":{"line":156,"column":47},"end":{"line":156,"column":73}},{"start":{"line":156,"column":76},"end":{"line":156,"column":78}}]},"14":{"line":168,"type":"cond-expr","locations":[{"start":{"line":168,"column":78},"end":{"line":168,"column":86}},{"start":{"line":168,"column":89},"end":{"line":168,"column":93}}]},"15":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":11},"end":{"line":168,"column":22}},{"start":{"line":168,"column":27},"end":{"line":168,"column":74}}]},"16":{"line":170,"type":"cond-expr","locations":[{"start":{"line":170,"column":49},"end":{"line":170,"column":68}},{"start":{"line":170,"column":71},"end":{"line":170,"column":73}}]},"17":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":4},"end":{"line":179,"column":4}},{"start":{"line":179,"column":4},"end":{"line":179,"column":4}}]},"18":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"19":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":206,"column":4}},{"start":{"line":206,"column":4},"end":{"line":206,"column":4}}]},"20":{"line":218,"type":"binary-expr","locations":[{"start":{"line":218,"column":15},"end":{"line":218,"column":23}},{"start":{"line":218,"column":27},"end":{"line":218,"column":39}}]},"21":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":4}},{"start":{"line":237,"column":4},"end":{"line":237,"column":4}}]},"22":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":4},"end":{"line":239,"column":4}},{"start":{"line":239,"column":4},"end":{"line":239,"column":4}}]},"23":{"line":241,"type":"binary-expr","locations":[{"start":{"line":241,"column":17},"end":{"line":241,"column":48}},{"start":{"line":241,"column":52},"end":{"line":241,"column":65}}]}},"code":["\"use strict\";","","var bodec = require(\"bodec\");","var d = require(\"describe-property\");","var Stream = require(\"bufferedstream\");","var bufferStream = require(\"./utils/bufferStream\");","var normalizeHeaderName = require(\"./utils/normalizeHeaderName\");","var parseCookie = require(\"./utils/parseCookie\");","var parseQuery = require(\"./utils/parseQuery\");","","/**"," * The default content to use for new messages."," */","var DEFAULT_CONTENT = bodec.fromString(\"\");","","/**"," * The default maximum length (in bytes) to use in Message#parseContent."," */","var DEFAULT_MAX_CONTENT_LENGTH = Math.pow(2, 20); // 1M","","var HEADERS_LINE_SEPARATOR = /\\r?\\n/;","var HEADER_SEPARATOR = \": \";","","function defaultParser(message, maxLength) {","  return message.stringifyContent(maxLength);","}","","/**"," * An HTTP message."," */","function Message(content, headers) {","  this.headers = headers;","  this.content = content;","}","","Object.defineProperties(Message, {","","  PARSERS: d({","    enumerable: true,","    value: {","      \"application/json\": function (message, maxLength) {","        return message.stringifyContent(maxLength).then(JSON.parse);","      },","      \"application/x-www-form-urlencoded\": function (message, maxLength) {","        return message.stringifyContent(maxLength).then(parseQuery);","      }","    }","  })","","});","","Object.defineProperties(Message.prototype, {","","  /**","   * The headers of this message as { headerName, value }.","   */","  headers: d.gs(function () {","    return this._headers;","  }, function (value) {","    this._headers = {};","","    if (typeof value === \"string\") {","      value.split(HEADERS_LINE_SEPARATOR).forEach(function (line) {","        var index = line.indexOf(HEADER_SEPARATOR);","","        if (index === -1) {","          this.addHeader(line, true);","        } else {","          this.addHeader(line.substring(0, index), line.substring(index + HEADER_SEPARATOR.length));","        }","      }, this);","    } else if (value != null) {","      for (var headerName in value) if (value.hasOwnProperty(headerName)) this.addHeader(headerName, value[headerName]);","    }","  }),","","  /**","   * Returns the value of the header with the given name.","   */","  getHeader: d(function (headerName) {","    return this.headers[normalizeHeaderName(headerName)];","  }),","","  /**","   * Sets the value of the header with the given name.","   */","  setHeader: d(function (headerName, value) {","    this.headers[normalizeHeaderName(headerName)] = value;","  }),","","  /**","   * Adds the value to the header with the given name.","   */","  addHeader: d(function (headerName, value) {","    headerName = normalizeHeaderName(headerName);","","    var headers = this.headers;","    if (headerName in headers) {","      if (Array.isArray(headers[headerName])) {","        headers[headerName].push(value);","      } else {","        headers[headerName] = [headers[headerName], value];","      }","    } else {","      headers[headerName] = value;","    }","  }),","","  /**","   * An object containing cookies in this message, keyed by name.","   */","  cookies: d.gs(function () {","    if (!this._cookies) {","      var header = this.headers.Cookie;","","      if (header) {","        var cookies = parseCookie(header);","","        // From RFC 2109:","        // If multiple cookies satisfy the criteria above, they are ordered in","        // the Cookie header such that those with more specific Path attributes","        // precede those with less specific. Ordering with respect to other","        // attributes (e.g., Domain) is unspecified.","        for (var cookieName in cookies) if (Array.isArray(cookies[cookieName])) cookies[cookieName] = cookies[cookieName][0] || \"\";","","        this._cookies = cookies;","      } else {","        this._cookies = {};","      }","    }","","    return this._cookies;","  }),","","  /**","   * Gets/sets the value of the Content-Type header.","   */","  contentType: d.gs(function () {","    return this.headers[\"Content-Type\"];","  }, function (value) {","    this.headers[\"Content-Type\"] = value;","  }),","","  /**","   * The media type (type/subtype) portion of the Content-Type header without any","   * media type parameters. e.g. when Content-Type is \"text/plain;charset=utf-8\",","   * the mediaType is \"text/plain\".","   *","   * See http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7","   */","  mediaType: d.gs(function () {","    var contentType = this.contentType,","        match;","    return contentType && (match = contentType.match(/^([^;,]+)/)) ? match[1].toLowerCase() : null;","  }, function (value) {","    this.contentType = value + (this.charset ? \";charset=\" + this.charset : \"\");","  }),","","  /**","   * Returns the character set used to encode the content of this message. e.g.","   * when Content-Type is \"text/plain;charset=utf-8\", charset is \"utf-8\".","   *","   * See http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.4","   */","  charset: d.gs(function () {","    var contentType = this.contentType,","        match;","    return contentType && (match = contentType.match(/\\bcharset=([\\w-]+)/)) ? match[1] : null;","  }, function (value) {","    this.contentType = this.mediaType + (value ? \";charset=\" + value : \"\");","  }),","","  /**","   * The content of this message as a binary stream.","   */","  content: d.gs(function () {","    return this._content;","  }, function (value) {","    if (value == null) value = DEFAULT_CONTENT;","","    if (value instanceof Stream) {","      this._content = value;","      value.pause();","    } else {","      this._content = new Stream(value);","    }","","    delete this._bufferedContent;","  }),","","  /**","   * True if the content of this message is buffered, false otherwise.","   */","  isBuffered: d.gs(function () {","    return this._bufferedContent != null;","  }),","","  /**","   * Returns a binary representation of the content of this message up to","   * the given length. This is useful in applications that need to access the","   * entire message body at once, instead of as a stream.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  bufferContent: d(function (maxLength) {","    if (this._bufferedContent == null) this._bufferedContent = bufferStream(this.content, maxLength);","","    return this._bufferedContent;","  }),","","  /**","   * Returns the content of this message up to the given length as a string","   * with the given encoding.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  stringifyContent: d(function (maxLength, encoding) {","    encoding = encoding || this.charset;","","    return this.bufferContent(maxLength).then(function (chunk) {","      return bodec.toString(chunk, encoding);","    });","  }),","","  /**","   * Returns a promise for an object of data contained in the content body.","   *","   * The maxLength argument specifies the maximum length (in bytes) that the","   * parser will accept. If the content stream exceeds the maximum length, the","   * promise is rejected with a MaxLengthExceededError. The appropriate response","   * to send to the client in this case is 413 Request Entity Too Large, but","   * many HTTP clients including most web browsers may not understand it.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  parseContent: d(function (maxLength) {","    if (this._parsedContent) return this._parsedContent;","","    if (typeof maxLength !== \"number\") maxLength = DEFAULT_MAX_CONTENT_LENGTH;","","    var parser = Message.PARSERS[this.mediaType] || defaultParser;","    this._parsedContent = parser(this, maxLength);","","    return this._parsedContent;","  })","","});","","module.exports = Message;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"14":1,"19":1,"21":1,"22":1,"24":1,"25":0,"31":1,"32":0,"33":0,"36":1,"42":0,"45":0,"52":1,"58":0,"60":0,"62":0,"63":0,"64":0,"66":0,"67":0,"69":0,"72":0,"73":0,"81":0,"88":0,"95":0,"97":0,"98":0,"99":0,"100":0,"102":0,"105":0,"113":0,"114":0,"116":0,"117":0,"124":0,"126":0,"128":0,"132":0,"139":0,"141":0,"152":0,"154":0,"156":0,"166":0,"168":0,"170":0,"177":0,"179":0,"181":0,"182":0,"183":0,"185":0,"188":0,"195":0,"206":0,"208":0,"218":0,"220":0,"221":0,"237":0,"239":0,"241":0,"242":0,"244":0,"249":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/bufferStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/bufferStream.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"bufferStream","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":41}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":21},"end":{"line":16,"column":48}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":39}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":21},"end":{"line":32,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":65}},"4":{"start":{"line":11,"column":0},"end":{"line":38,"column":1}},"5":{"start":{"line":12,"column":2},"end":{"line":12,"column":36}},"6":{"start":{"line":14,"column":2},"end":{"line":14,"column":85}},"7":{"start":{"line":14,"column":24},"end":{"line":14,"column":85}},"8":{"start":{"line":16,"column":2},"end":{"line":37,"column":5}},"9":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"10":{"start":{"line":18,"column":4},"end":{"line":18,"column":19}},"11":{"start":{"line":20,"column":4},"end":{"line":20,"column":31}},"12":{"start":{"line":22,"column":4},"end":{"line":30,"column":7}},"13":{"start":{"line":23,"column":6},"end":{"line":23,"column":29}},"14":{"start":{"line":25,"column":6},"end":{"line":29,"column":7}},"15":{"start":{"line":26,"column":8},"end":{"line":26,"column":54}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":27}},"17":{"start":{"line":32,"column":4},"end":{"line":34,"column":7}},"18":{"start":{"line":33,"column":6},"end":{"line":33,"column":34}},"19":{"start":{"line":36,"column":4},"end":{"line":36,"column":61}},"20":{"start":{"line":36,"column":45},"end":{"line":36,"column":61}},"21":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}}},"branchMap":{"1":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":14},"end":{"line":12,"column":23}},{"start":{"line":12,"column":27},"end":{"line":12,"column":35}}]},"2":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]},"3":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]},"4":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]}},"code":["\"use strict\";","","var bodec = require(\"bodec\");","var Promise = require(\"./Promise\");","var MaxLengthExceededError = require(\"./MaxLengthExceededError\");","","/**"," * Returns a promise for a buffer of all content in the given stream up to"," * the given maximum length."," */","function bufferStream(stream, maxLength) {","  maxLength = maxLength || Infinity;","","  if (!stream.readable) throw new Error(\"Cannot buffer stream that is not readable\");","","  return new Promise(function (resolve, reject) {","    var chunks = [];","    var length = 0;","","    stream.on(\"error\", reject);","","    stream.on(\"data\", function (chunk) {","      length += chunk.length;","","      if (length > maxLength) {","        reject(new MaxLengthExceededError(maxLength));","      } else {","        chunks.push(chunk);","      }","    });","","    stream.on(\"end\", function () {","      resolve(bodec.join(chunks));","    });","","    if (typeof stream.resume === \"function\") stream.resume();","  });","}","","module.exports = bufferStream;"],"l":{"3":1,"4":1,"5":1,"11":1,"12":0,"14":0,"16":0,"17":0,"18":0,"20":0,"22":0,"23":0,"25":0,"26":0,"28":0,"32":0,"33":0,"36":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/MaxLengthExceededError.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/MaxLengthExceededError.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"MaxLengthExceededError","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":8,"column":0},"end":{"line":14,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":19}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":50}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":36}},"6":{"start":{"line":12,"column":2},"end":{"line":12,"column":43}},"7":{"start":{"line":13,"column":2},"end":{"line":13,"column":29}},"8":{"start":{"line":16,"column":0},"end":{"line":20,"column":3}},"9":{"start":{"line":22,"column":0},"end":{"line":22,"column":40}}},"branchMap":{},"code":["\"use strict\";","","var d = require(\"describe-property\");","","/**"," * An error indicating that some maximum length has been exceeded."," */","function MaxLengthExceededError(maxLength) {","  Error.call(this);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","  this.message = \"Maximum length exceeded\";","  this.maxLength = maxLength;","}","","MaxLengthExceededError.prototype = Object.create(Error.prototype, {","","  constructor: d(MaxLengthExceededError)","","});","","module.exports = MaxLengthExceededError;"],"l":{"3":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"16":1,"22":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/normalizeHeaderName.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/normalizeHeaderName.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"normalizeHeaderName","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":77}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":61}},"2":{"start":{"line":8,"column":0},"end":{"line":16,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":40}},"4":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":44}},"6":{"start":{"line":13,"column":3},"end":{"line":15,"column":5}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":39}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":37}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]}},"code":["\"use strict\";","","var IrregularHeaderNames = require(\"./IrregularHeaderNames\");","","/**"," * Normalizes HTTP header names according to RFC 2616."," */","function normalizeHeaderName(headerName) {","  headerName = headerName.toLowerCase();","","  if (headerName in IrregularHeaderNames) {","    return IrregularHeaderNames[headerName];","  }return headerName.replace(/(^|-)([a-z])/g, function (match, dash, letter) {","    return dash + letter.toUpperCase();","  });","}","","module.exports = normalizeHeaderName;"],"l":{"3":1,"8":1,"9":0,"11":0,"12":0,"13":0,"14":0,"18":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/IrregularHeaderNames.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/IrregularHeaderNames.js","s":{"1":1,"2":11,"3":11},"b":{},"f":{"1":11},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":175},"end":{"line":6,"column":202}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":9,"column":7}},"2":{"start":{"line":7,"column":2},"end":{"line":7,"column":45}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":13}}},"branchMap":{},"code":["\"use strict\";","","/**"," * A map of HTTP header names with irregular case."," */","module.exports = [\"Content-ID\", \"Content-MD5\", \"DNT\", \"ETag\", \"P3P\", \"TE\", \"WWW-Authenticate\", \"X-ATT-DeviceId\", \"X-UA-Compatible\", \"X-WebKit-CSP\", \"X-XSS-Protection\"].reduce(function (map, headerName) {","  map[headerName.toLowerCase()] = headerName;","  return map;","}, {});"],"l":{"6":1,"7":11,"8":11}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseCookie.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseCookie.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"parseCookie","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":53}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}}},"branchMap":{},"code":["\"use strict\";","","var parseQuery = require(\"./parseQuery\");","","function parseCookie(cookie) {","  return parseQuery(cookie, { delimiter: /[;,] */ });","}","","module.exports = parseCookie;"],"l":{"3":1,"5":1,"6":0,"9":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Header.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/Header.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":1,"20":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":72}}},"2":{"name":"(anonymous_2)","line":5,"loc":{"start":{"line":5,"column":22},"end":{"line":5,"column":55}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":26}}},"4":{"name":"Header","line":10,"loc":{"start":{"line":10,"column":2},"end":{"line":10,"column":31}}},"5":{"name":"(anonymous_5)","line":19,"loc":{"start":{"line":19,"column":11},"end":{"line":19,"column":23}}},"6":{"name":"(anonymous_6)","line":22,"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":28}}},"7":{"name":"toString","line":28,"loc":{"start":{"line":28,"column":13},"end":{"line":28,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":214}},"2":{"start":{"line":3,"column":74},"end":{"line":3,"column":135}},"3":{"start":{"line":3,"column":91},"end":{"line":3,"column":135}},"4":{"start":{"line":3,"column":136},"end":{"line":3,"column":211}},"5":{"start":{"line":3,"column":155},"end":{"line":3,"column":211}},"6":{"start":{"line":5,"column":0},"end":{"line":5,"column":161}},"7":{"start":{"line":5,"column":57},"end":{"line":5,"column":158}},"8":{"start":{"line":5,"column":99},"end":{"line":5,"column":156}},"9":{"start":{"line":7,"column":0},"end":{"line":7,"column":65}},"10":{"start":{"line":9,"column":0},"end":{"line":37,"column":5}},"11":{"start":{"line":10,"column":2},"end":{"line":15,"column":3}},"12":{"start":{"line":11,"column":4},"end":{"line":11,"column":34}},"13":{"start":{"line":13,"column":4},"end":{"line":13,"column":21}},"14":{"start":{"line":14,"column":4},"end":{"line":14,"column":23}},"15":{"start":{"line":17,"column":2},"end":{"line":34,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":26}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":48}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":45}},"19":{"start":{"line":36,"column":2},"end":{"line":36,"column":16}},"20":{"start":{"line":39,"column":0},"end":{"line":39,"column":24}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":74},"end":{"line":3,"column":74}},{"start":{"line":3,"column":74},"end":{"line":3,"column":74}}]},"2":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":136},"end":{"line":3,"column":136}},{"start":{"line":3,"column":136},"end":{"line":3,"column":136}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":57},"end":{"line":5,"column":57}},{"start":{"line":5,"column":57},"end":{"line":5,"column":57}}]}},"code":["\"use strict\";","","var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };","","var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };","","var normalizeHeaderName = require(\"./utils/normalizeHeaderName\");","","var Header = (function () {","  function Header(name, value) {","    _classCallCheck(this, Header);","","    this.name = name;","    this.value = value;","  }","","  _prototypeProperties(Header, null, {","    name: {","      get: function () {","        return this._name;","      },","      set: function (value) {","        this._name = normalizeHeaderName(value);","      },","      configurable: true","    },","    toString: {","      value: function toString() {","        return this.name + \": \" + this.value;","      },","      writable: true,","      configurable: true","    }","  });","","  return Header;","})();","","module.exports = Header;"],"l":{"3":1,"5":1,"7":1,"9":1,"10":1,"11":0,"13":0,"14":0,"17":1,"20":0,"23":0,"29":0,"36":1,"39":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/default.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/default.js","s":{"1":1,"2":1},"b":{},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":8,"column":2}},"2":{"start":{"line":7,"column":2},"end":{"line":7,"column":257}}},"branchMap":{},"code":["\"use strict\";","","/**"," * The default extension for node.js environments."," */","module.exports = function (mach) {","  mach.extend(require(\"./accept\"), require(\"./acceptCharset\"), require(\"./acceptEncoding\"), require(\"./acceptLanguage\"), require(\"./client\"), require(\"./middleware\"), require(\"./multipart\"), require(\"./proxy\"), require(\"./server\"), require(\"./statusText\"));","};"],"l":{"6":1,"7":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/accept.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/accept.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":36}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":15},"end":{"line":24,"column":36}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":42}},"3":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"4":{"start":{"line":7,"column":2},"end":{"line":17,"column":5}},"5":{"start":{"line":14,"column":6},"end":{"line":14,"column":45}},"6":{"start":{"line":19,"column":2},"end":{"line":30,"column":5}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":84}},"8":{"start":{"line":25,"column":31},"end":{"line":25,"column":84}},"9":{"start":{"line":27,"column":6},"end":{"line":27,"column":51}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var Accept = require(\"../headers/Accept\");","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given media type.","     */","    accepts: d(function (mediaType) {","      return this.request.accepts(mediaType);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given media type.","     */","    accepts: d(function (mediaType) {","      if (!this._acceptHeader) this._acceptHeader = new Accept(this.headers.Accept);","","      return this._acceptHeader.accepts(mediaType);","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"14":0,"19":1,"25":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/Accept.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/Accept.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":1,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":1,"42":1,"43":0,"44":0,"45":1,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,1],"9":[1,0],"10":[1,1],"11":[1,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0,0,0],"19":[0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":72}}},"2":{"name":"get","line":5,"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":52}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":48}}},"4":{"name":"(anonymous_4)","line":9,"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}}},"5":{"name":"paramsMatchIgnoringQualityFactor","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":63}}},"6":{"name":"byHighestPrecedence","line":24,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}}},"7":{"name":"(anonymous_7)","line":43,"loc":{"start":{"line":43,"column":14},"end":{"line":43,"column":32}}},"8":{"name":"Accept","line":44,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":25}}},"9":{"name":"(anonymous_9)","line":59,"loc":{"start":{"line":59,"column":11},"end":{"line":59,"column":23}}},"10":{"name":"(anonymous_10)","line":62,"loc":{"start":{"line":62,"column":11},"end":{"line":62,"column":28}}},"11":{"name":"accepts","line":73,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":41}}},"12":{"name":"qualityFactorForMediaType","line":85,"loc":{"start":{"line":85,"column":13},"end":{"line":85,"column":59}}},"13":{"name":"(anonymous_13)","line":91,"loc":{"start":{"line":91,"column":43},"end":{"line":91,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":214}},"2":{"start":{"line":3,"column":74},"end":{"line":3,"column":135}},"3":{"start":{"line":3,"column":91},"end":{"line":3,"column":135}},"4":{"start":{"line":3,"column":136},"end":{"line":3,"column":211}},"5":{"start":{"line":3,"column":155},"end":{"line":3,"column":211}},"6":{"start":{"line":5,"column":0},"end":{"line":5,"column":458}},"7":{"start":{"line":5,"column":54},"end":{"line":5,"column":115}},"8":{"start":{"line":5,"column":116},"end":{"line":5,"column":455}},"9":{"start":{"line":5,"column":142},"end":{"line":5,"column":185}},"10":{"start":{"line":5,"column":186},"end":{"line":5,"column":277}},"11":{"start":{"line":5,"column":209},"end":{"line":5,"column":226}},"12":{"start":{"line":5,"column":236},"end":{"line":5,"column":275}},"13":{"start":{"line":5,"column":285},"end":{"line":5,"column":455}},"14":{"start":{"line":5,"column":325},"end":{"line":5,"column":343}},"15":{"start":{"line":5,"column":353},"end":{"line":5,"column":375}},"16":{"start":{"line":5,"column":376},"end":{"line":5,"column":423}},"17":{"start":{"line":5,"column":404},"end":{"line":5,"column":421}},"18":{"start":{"line":5,"column":424},"end":{"line":5,"column":453}},"19":{"start":{"line":7,"column":0},"end":{"line":7,"column":432}},"20":{"start":{"line":7,"column":50},"end":{"line":7,"column":215}},"21":{"start":{"line":7,"column":113},"end":{"line":7,"column":213}},"22":{"start":{"line":7,"column":216},"end":{"line":7,"column":380}},"23":{"start":{"line":7,"column":381},"end":{"line":7,"column":429}},"24":{"start":{"line":7,"column":397},"end":{"line":7,"column":429}},"25":{"start":{"line":9,"column":0},"end":{"line":9,"column":161}},"26":{"start":{"line":9,"column":57},"end":{"line":9,"column":158}},"27":{"start":{"line":9,"column":99},"end":{"line":9,"column":156}},"28":{"start":{"line":11,"column":0},"end":{"line":11,"column":58}},"29":{"start":{"line":12,"column":0},"end":{"line":12,"column":60}},"30":{"start":{"line":13,"column":0},"end":{"line":13,"column":80}},"31":{"start":{"line":14,"column":0},"end":{"line":14,"column":68}},"32":{"start":{"line":15,"column":0},"end":{"line":15,"column":106}},"33":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"34":{"start":{"line":18,"column":0},"end":{"line":22,"column":1}},"35":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"36":{"start":{"line":19,"column":32},"end":{"line":21,"column":3}},"37":{"start":{"line":20,"column":4},"end":{"line":20,"column":17}},"38":{"start":{"line":21,"column":3},"end":{"line":21,"column":15}},"39":{"start":{"line":24,"column":0},"end":{"line":34,"column":1}},"40":{"start":{"line":33,"column":2},"end":{"line":33,"column":111}},"41":{"start":{"line":43,"column":0},"end":{"line":105,"column":11}},"42":{"start":{"line":44,"column":2},"end":{"line":48,"column":3}},"43":{"start":{"line":45,"column":4},"end":{"line":45,"column":34}},"44":{"start":{"line":47,"column":4},"end":{"line":47,"column":99}},"45":{"start":{"line":50,"column":2},"end":{"line":50,"column":28}},"46":{"start":{"line":52,"column":2},"end":{"line":102,"column":5}},"47":{"start":{"line":60,"column":8},"end":{"line":60,"column":64}},"48":{"start":{"line":63,"column":8},"end":{"line":63,"column":65}},"49":{"start":{"line":74,"column":8},"end":{"line":74,"column":63}},"50":{"start":{"line":86,"column":8},"end":{"line":86,"column":39}},"51":{"start":{"line":88,"column":8},"end":{"line":90,"column":9}},"52":{"start":{"line":89,"column":10},"end":{"line":89,"column":19}},"53":{"start":{"line":90,"column":9},"end":{"line":90,"column":53}},"54":{"start":{"line":91,"column":8},"end":{"line":93,"column":37}},"55":{"start":{"line":92,"column":10},"end":{"line":92,"column":208}},"56":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"57":{"start":{"line":96,"column":10},"end":{"line":96,"column":19}},"58":{"start":{"line":97,"column":9},"end":{"line":97,"column":62}},"59":{"start":{"line":104,"column":2},"end":{"line":104,"column":16}},"60":{"start":{"line":107,"column":0},"end":{"line":107,"column":24}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":74},"end":{"line":3,"column":74}},{"start":{"line":3,"column":74},"end":{"line":3,"column":74}}]},"2":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":136},"end":{"line":3,"column":136}},{"start":{"line":3,"column":136},"end":{"line":3,"column":136}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":116},"end":{"line":5,"column":116}},{"start":{"line":5,"column":116},"end":{"line":5,"column":116}}]},"4":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":186},"end":{"line":5,"column":186}},{"start":{"line":5,"column":186},"end":{"line":5,"column":186}}]},"5":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":285},"end":{"line":5,"column":285}},{"start":{"line":5,"column":285},"end":{"line":5,"column":285}}]},"6":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":289},"end":{"line":5,"column":304}},{"start":{"line":5,"column":308},"end":{"line":5,"column":321}}]},"7":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":376},"end":{"line":5,"column":376}},{"start":{"line":5,"column":376},"end":{"line":5,"column":376}}]},"8":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":50},"end":{"line":7,"column":50}},{"start":{"line":7,"column":50},"end":{"line":7,"column":50}}]},"9":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":54},"end":{"line":7,"column":86}},{"start":{"line":7,"column":90},"end":{"line":7,"column":109}}]},"10":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":251},"end":{"line":7,"column":261}},{"start":{"line":7,"column":265},"end":{"line":7,"column":285}}]},"11":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":381},"end":{"line":7,"column":381}},{"start":{"line":7,"column":381},"end":{"line":7,"column":381}}]},"12":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":57},"end":{"line":9,"column":57}},{"start":{"line":9,"column":57},"end":{"line":9,"column":57}}]},"13":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":32},"end":{"line":19,"column":32}},{"start":{"line":19,"column":32},"end":{"line":19,"column":32}}]},"14":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":36},"end":{"line":19,"column":68}},{"start":{"line":19,"column":72},"end":{"line":19,"column":89}},{"start":{"line":19,"column":93},"end":{"line":19,"column":137}}]},"15":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":15},"end":{"line":60,"column":54}},{"start":{"line":60,"column":58},"end":{"line":60,"column":63}}]},"16":{"line":63,"type":"cond-expr","locations":[{"start":{"line":63,"column":36},"end":{"line":63,"column":59}},{"start":{"line":63,"column":62},"end":{"line":63,"column":64}}]},"17":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"18":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":18},"end":{"line":92,"column":36}},{"start":{"line":92,"column":40},"end":{"line":92,"column":70}},{"start":{"line":92,"column":76},"end":{"line":92,"column":97}},{"start":{"line":92,"column":101},"end":{"line":92,"column":137}},{"start":{"line":92,"column":142},"end":{"line":92,"column":207}}]},"19":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]}},"code":["\"use strict\";","","var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };","","var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };","","var _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };","","var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };","","var parseMediaValue = require(\"../utils/parseMediaValue\");","var parseMediaValues = require(\"../utils/parseMediaValues\");","var qualityFactorForMediaValue = require(\"../utils/qualityFactorForMediaValue\");","var stringifyMediaValues = require(\"../utils/stringifyMediaValues\");","var stringifyMediaValueWithoutQualityFactor = require(\"../utils/stringifyMediaValueWithoutQualityFactor\");","var Header = require(\"../Header\");","","function paramsMatchIgnoringQualityFactor(params, givenParams) {","  for (var paramName in params) if (params.hasOwnProperty(paramName) && paramName !== \"q\" && givenParams[paramName] !== params[paramName]) {","    return false;","  }return true;","}","","function byHighestPrecedence(a, b) {","  //   Accept: text/*, text/html, text/html;level=1, */*","  //","  // have the following precedence:","  //","  //   1) text/html;level=1","  //   2) text/html","  //   3) text/*","  //   4) */*","  return stringifyMediaValueWithoutQualityFactor(b).length - stringifyMediaValueWithoutQualityFactor(a).length;","}","","/**"," * Represents an HTTP Accept header and provides several methods for"," * determining acceptable media types."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1"," */","","var Accept = (function (Header) {","  function Accept(value) {","    _classCallCheck(this, Accept);","","    _get(Object.getPrototypeOf(Accept.prototype), \"constructor\", this).call(this, \"Accept\", value);","  }","","  _inherits(Accept, Header);","","  _prototypeProperties(Accept, null, {","    value: {","","      /**","       * Returns the value of this header as a string.","       */","","      get: function () {","        return stringifyMediaValues(this._mediaValues) || \"*/*\";","      },","      set: function (value) {","        this._mediaValues = value ? parseMediaValues(value) : [];","      },","      configurable: true","    },","    accepts: {","","      /**","       * Returns true if the given media type is acceptable.","       */","","      value: function accepts(mediaType) {","        return this.qualityFactorForMediaType(mediaType) !== 0;","      },","      writable: true,","      configurable: true","    },","    qualityFactorForMediaType: {","","      /**","       * Returns the quality factor for the given media type.","       */","","      value: function qualityFactorForMediaType(mediaType) {","        var values = this._mediaValues;","","        if (!values.length) {","          return 1;","        }var givenValue = parseMediaValue(mediaType);","        var matchingValues = values.filter(function (value) {","          return (value.type === \"*\" || value.type === givenValue.type) && (value.subtype === \"*\" || value.subtype === givenValue.subtype) && paramsMatchIgnoringQualityFactor(value.params, givenValue.params);","        }).sort(byHighestPrecedence);","","        if (!matchingValues.length) {","          return 0;","        }return qualityFactorForMediaValue(matchingValues[0]);","      },","      writable: true,","      configurable: true","    }","  });","","  return Accept;","})(Header);","","module.exports = Accept;"],"l":{"3":1,"5":1,"7":1,"9":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":0,"20":0,"21":0,"24":1,"33":0,"43":1,"44":1,"45":0,"47":0,"50":1,"52":1,"60":0,"63":0,"74":0,"86":0,"88":0,"89":0,"90":0,"91":0,"92":0,"95":0,"96":0,"97":0,"104":1,"107":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseMediaValue.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"parseMediaValue","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":47}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":28},"end":{"line":27,"column":50}}}},"statementMap":{"1":{"start":{"line":22,"column":0},"end":{"line":38,"column":1}},"2":{"start":{"line":23,"column":2},"end":{"line":23,"column":39}},"3":{"start":{"line":25,"column":2},"end":{"line":25,"column":37}},"4":{"start":{"line":26,"column":2},"end":{"line":26,"column":57}},"5":{"start":{"line":27,"column":2},"end":{"line":31,"column":9}},"6":{"start":{"line":28,"column":4},"end":{"line":28,"column":39}},"7":{"start":{"line":29,"column":4},"end":{"line":29,"column":38}},"8":{"start":{"line":30,"column":4},"end":{"line":30,"column":16}},"9":{"start":{"line":33,"column":2},"end":{"line":37,"column":4}},"10":{"start":{"line":40,"column":0},"end":{"line":40,"column":33}}},"branchMap":{"1":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":18},"end":{"line":23,"column":31}},{"start":{"line":23,"column":35},"end":{"line":23,"column":38}}]}},"code":["\"use strict\";","","/**"," * Parses a media value string including parameters and returns an object"," * containing the type, subtype, and an object of parameters."," *"," *   parseMediaValue(\"text/html;level=2;q=0.4\") =>"," *     { type: 'text',"," *       subtype: 'html', "," *       params: { level: '2', q: '0.4' } }"," *"," *   parseMediaValue(\"en-gb;q=0.8\", \"-\") =>"," *     { type: 'en',"," *       subtype: 'gb',"," *       params: { q: '0.8' } }"," *"," *   parseMediaValue(\"unicode-1-1;q=0.8\") =>"," *     { type: 'unicode-1-1',"," *       subtype: undefined,"," *       params: { q: '0.8' } }"," */","function parseMediaValue(value, typeSeparator) {","  typeSeparator = typeSeparator || \"/\";","","  var parts = value.split(/\\s*;\\s*/);","  var mediaTypes = parts.shift().split(typeSeparator, 2);","  var params = parts.reduce(function (memo, part) {","    var nameValue = part.split(\"=\", 2);","    memo[nameValue[0]] = nameValue[1];","    return memo;","  }, {});","","  return {","    type: mediaTypes[0],","    subtype: mediaTypes[1],","    params: params","  };","}","","module.exports = parseMediaValue;"],"l":{"22":1,"23":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"33":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseMediaValues.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/parseMediaValues.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"parseMediaValues","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":48}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":36},"end":{"line":11,"column":58}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"2":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"3":{"start":{"line":11,"column":2},"end":{"line":13,"column":5}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":54}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}}},"branchMap":{},"code":["\"use strict\";","","var parseMediaValue = require(\"./parseMediaValue\");","","/**"," * Parses a string containing multiple media values and returns an array"," * of objects containing data about each value. Such strings are used as"," * the values of the Accept* family of HTTP headers."," */","function parseMediaValues(value, typeSeparator) {","  return value.split(/\\s*,\\s*/).map(function (mediaValue) {","    return parseMediaValue(mediaValue, typeSeparator);","  });","}","","module.exports = parseMediaValues;"],"l":{"3":1,"10":1,"11":0,"12":0,"16":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/qualityFactorForMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/qualityFactorForMediaValue.js","s":{"1":1,"2":0,"3":0,"4":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"qualityFactorForMediaValue","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},"2":{"start":{"line":7,"column":2},"end":{"line":7,"column":53}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":55}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":44}}},"branchMap":{"1":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":22},"end":{"line":7,"column":34}},{"start":{"line":7,"column":38},"end":{"line":7,"column":52}}]},"2":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":25},"end":{"line":8,"column":50}},{"start":{"line":8,"column":53},"end":{"line":8,"column":54}}]}},"code":["\"use strict\";","","/**"," * Returns the quality factor for the given media value object."," */","function qualityFactorForMediaValue(value) {","  var qualityFactor = value.params && value.params.q;","  return qualityFactor ? parseFloat(qualityFactor) : 1;","}","","module.exports = qualityFactorForMediaValue;"],"l":{"6":1,"7":0,"8":0,"11":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValues.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValues.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"stringifyMediaValues","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":53}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":20},"end":{"line":10,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":59}},"2":{"start":{"line":9,"column":0},"end":{"line":13,"column":1}},"3":{"start":{"line":10,"column":2},"end":{"line":12,"column":16}},"4":{"start":{"line":11,"column":4},"end":{"line":11,"column":58}},"5":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}}},"branchMap":{},"code":["\"use strict\";","","var stringifyMediaValue = require(\"./stringifyMediaValue\");","","/**"," * Creates a string from objects containing media values. Such a string may"," * be used as the value of the Accept* family of HTTP headers."," */","function stringifyMediaValues(values, typeSeparator) {","  return values.map(function (mediaValue) {","    return stringifyMediaValue(mediaValue, typeSeparator);","  }).join(\", \");","}","","module.exports = stringifyMediaValues;"],"l":{"3":1,"9":1,"10":0,"11":0,"15":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValue.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stringifyMediaValue","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":51}}}},"statementMap":{"1":{"start":{"line":16,"column":0},"end":{"line":36,"column":1}},"2":{"start":{"line":17,"column":2},"end":{"line":17,"column":39}},"3":{"start":{"line":19,"column":2},"end":{"line":19,"column":33}},"4":{"start":{"line":21,"column":2},"end":{"line":21,"column":61}},"5":{"start":{"line":21,"column":21},"end":{"line":21,"column":61}},"6":{"start":{"line":23,"column":2},"end":{"line":33,"column":3}},"7":{"start":{"line":24,"column":4},"end":{"line":24,"column":30}},"8":{"start":{"line":26,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":27,"column":6},"end":{"line":31,"column":7}},"10":{"start":{"line":28,"column":8},"end":{"line":28,"column":34}},"11":{"start":{"line":30,"column":8},"end":{"line":30,"column":73}},"12":{"start":{"line":30,"column":39},"end":{"line":30,"column":73}},"13":{"start":{"line":35,"column":2},"end":{"line":35,"column":16}},"14":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}}},"branchMap":{"1":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":18},"end":{"line":17,"column":31}},{"start":{"line":17,"column":35},"end":{"line":17,"column":38}}]},"2":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":15},"end":{"line":19,"column":25}},{"start":{"line":19,"column":29},"end":{"line":19,"column":32}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"5":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"6":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]}},"code":["\"use strict\";","","/**"," * Creates a string from an object containing a media value. This object may"," * have properties containing the type, subtype, and parameters."," *"," *   stringifyMediaValue({ type: 'text', subtype: 'html', params: { level: '2', q: '0.4' } }) =>"," *     \"text/html;level=2;q=0.4\""," *"," *   stringifyMediaValue({ type: 'en', subtype: 'gb', params: { q: '0.8' } }, \"-\") =>"," *     \"en-gb;q=0.8\""," *"," *   stringifyMediaValue({ type: 'unicode-1-1', params: { q: '0.8' } }) =>"," *     \"unicode-1-1;q=0.8\""," */","function stringifyMediaValue(value, typeSeparator) {","  typeSeparator = typeSeparator || \"/\";","","  var string = value.type || \"*\";","","  if (value.subtype) string += typeSeparator + value.subtype;","","  if (value.params) {","    var params = value.params;","","    for (var paramName in params) {","      if (params.hasOwnProperty(paramName)) {","        string += \";\" + paramName;","","        if (params[paramName] != null) string += \"=\" + params[paramName];","      }","    }","  }","","  return string;","}","","module.exports = stringifyMediaValue;"],"l":{"16":1,"17":0,"19":0,"21":0,"23":0,"24":0,"26":0,"27":0,"28":0,"30":0,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValueWithoutQualityFactor.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyMediaValueWithoutQualityFactor.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"cloneParamsWithoutQualityFactor","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}}},"2":{"name":"stringifyMediaValueWithoutQualityFactor","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":71}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":59}},"2":{"start":{"line":5,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":17}},"4":{"start":{"line":8,"column":2},"end":{"line":8,"column":128}},"5":{"start":{"line":8,"column":32},"end":{"line":8,"column":128}},"6":{"start":{"line":8,"column":91},"end":{"line":8,"column":128}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":15}},"8":{"start":{"line":17,"column":0},"end":{"line":23,"column":1}},"9":{"start":{"line":18,"column":2},"end":{"line":22,"column":20}},"10":{"start":{"line":25,"column":0},"end":{"line":25,"column":57}}},"branchMap":{"1":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":32},"end":{"line":8,"column":32}},{"start":{"line":8,"column":32},"end":{"line":8,"column":32}}]},"2":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":36},"end":{"line":8,"column":68}},{"start":{"line":8,"column":72},"end":{"line":8,"column":89}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},{"start":{"line":21,"column":28},"end":{"line":21,"column":73}}]}},"code":["\"use strict\";","","var stringifyMediaValue = require(\"./stringifyMediaValue\");","","function cloneParamsWithoutQualityFactor(params) {","  var clone = {};","","  for (var paramName in params) if (params.hasOwnProperty(paramName) && paramName !== \"q\") clone[paramName] = params[paramName];","","  return clone;","}","","/**"," * Creates a string from an object containing a media value,"," * ignoring any \"q\" value parameters."," */","function stringifyMediaValueWithoutQualityFactor(value, typeSeparator) {","  return stringifyMediaValue({","    type: value.type,","    subtype: value.subtype,","    params: value.params && cloneParamsWithoutQualityFactor(value.params)","  }, typeSeparator);","}","","module.exports = stringifyMediaValueWithoutQualityFactor;"],"l":{"3":1,"5":1,"6":0,"8":0,"10":0,"17":1,"18":0,"25":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptCharset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptCharset.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":22},"end":{"line":13,"column":41}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":22},"end":{"line":24,"column":41}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":56}},"3":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"4":{"start":{"line":7,"column":2},"end":{"line":17,"column":5}},"5":{"start":{"line":14,"column":6},"end":{"line":14,"column":50}},"6":{"start":{"line":19,"column":2},"end":{"line":30,"column":5}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":116}},"8":{"start":{"line":25,"column":38},"end":{"line":25,"column":116}},"9":{"start":{"line":27,"column":6},"end":{"line":27,"column":56}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var AcceptCharset = require(\"../headers/AcceptCharset\");","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given character set.","     */","    acceptsCharset: d(function (charset) {","      return this.request.acceptsCharset(charset);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given character set.","     */","    acceptsCharset: d(function (charset) {","      if (!this._acceptCharsetHeader) this._acceptCharsetHeader = new AcceptCharset(this.headers[\"Accept-Charset\"]);","","      return this._acceptCharsetHeader.accepts(charset);","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"14":0,"19":1,"25":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptCharset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptCharset.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":1,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":0,"35":1,"36":1,"37":0,"38":0,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,1],"9":[1,0],"10":[1,1],"11":[1,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":72}}},"2":{"name":"get","line":5,"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":52}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":48}}},"4":{"name":"(anonymous_4)","line":9,"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}}},"5":{"name":"byHighestPrecedence","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}}},"6":{"name":"(anonymous_6)","line":29,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":39}}},"7":{"name":"AcceptCharset","line":30,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":32}}},"8":{"name":"(anonymous_8)","line":45,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":23}}},"9":{"name":"(anonymous_9)","line":48,"loc":{"start":{"line":48,"column":11},"end":{"line":48,"column":28}}},"10":{"name":"accepts","line":59,"loc":{"start":{"line":59,"column":13},"end":{"line":59,"column":39}}},"11":{"name":"qualityFactorForCharset","line":71,"loc":{"start":{"line":71,"column":13},"end":{"line":71,"column":55}}},"12":{"name":"(anonymous_12)","line":75,"loc":{"start":{"line":75,"column":43},"end":{"line":75,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":214}},"2":{"start":{"line":3,"column":74},"end":{"line":3,"column":135}},"3":{"start":{"line":3,"column":91},"end":{"line":3,"column":135}},"4":{"start":{"line":3,"column":136},"end":{"line":3,"column":211}},"5":{"start":{"line":3,"column":155},"end":{"line":3,"column":211}},"6":{"start":{"line":5,"column":0},"end":{"line":5,"column":458}},"7":{"start":{"line":5,"column":54},"end":{"line":5,"column":115}},"8":{"start":{"line":5,"column":116},"end":{"line":5,"column":455}},"9":{"start":{"line":5,"column":142},"end":{"line":5,"column":185}},"10":{"start":{"line":5,"column":186},"end":{"line":5,"column":277}},"11":{"start":{"line":5,"column":209},"end":{"line":5,"column":226}},"12":{"start":{"line":5,"column":236},"end":{"line":5,"column":275}},"13":{"start":{"line":5,"column":285},"end":{"line":5,"column":455}},"14":{"start":{"line":5,"column":325},"end":{"line":5,"column":343}},"15":{"start":{"line":5,"column":353},"end":{"line":5,"column":375}},"16":{"start":{"line":5,"column":376},"end":{"line":5,"column":423}},"17":{"start":{"line":5,"column":404},"end":{"line":5,"column":421}},"18":{"start":{"line":5,"column":424},"end":{"line":5,"column":453}},"19":{"start":{"line":7,"column":0},"end":{"line":7,"column":432}},"20":{"start":{"line":7,"column":50},"end":{"line":7,"column":215}},"21":{"start":{"line":7,"column":113},"end":{"line":7,"column":213}},"22":{"start":{"line":7,"column":216},"end":{"line":7,"column":380}},"23":{"start":{"line":7,"column":381},"end":{"line":7,"column":429}},"24":{"start":{"line":7,"column":397},"end":{"line":7,"column":429}},"25":{"start":{"line":9,"column":0},"end":{"line":9,"column":161}},"26":{"start":{"line":9,"column":57},"end":{"line":9,"column":158}},"27":{"start":{"line":9,"column":99},"end":{"line":9,"column":156}},"28":{"start":{"line":11,"column":0},"end":{"line":11,"column":58}},"29":{"start":{"line":12,"column":0},"end":{"line":12,"column":60}},"30":{"start":{"line":13,"column":0},"end":{"line":13,"column":80}},"31":{"start":{"line":14,"column":0},"end":{"line":14,"column":68}},"32":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"33":{"start":{"line":17,"column":0},"end":{"line":20,"column":1}},"34":{"start":{"line":19,"column":2},"end":{"line":19,"column":44}},"35":{"start":{"line":29,"column":0},"end":{"line":103,"column":11}},"36":{"start":{"line":30,"column":2},"end":{"line":34,"column":3}},"37":{"start":{"line":31,"column":4},"end":{"line":31,"column":41}},"38":{"start":{"line":33,"column":4},"end":{"line":33,"column":114}},"39":{"start":{"line":36,"column":2},"end":{"line":36,"column":35}},"40":{"start":{"line":38,"column":2},"end":{"line":100,"column":5}},"41":{"start":{"line":46,"column":8},"end":{"line":46,"column":61}},"42":{"start":{"line":49,"column":8},"end":{"line":49,"column":65}},"43":{"start":{"line":60,"column":8},"end":{"line":60,"column":59}},"44":{"start":{"line":72,"column":8},"end":{"line":72,"column":39}},"45":{"start":{"line":74,"column":8},"end":{"line":74,"column":50}},"46":{"start":{"line":75,"column":8},"end":{"line":79,"column":37}},"47":{"start":{"line":76,"column":10},"end":{"line":76,"column":46}},"48":{"start":{"line":76,"column":34},"end":{"line":76,"column":46}},"49":{"start":{"line":78,"column":10},"end":{"line":78,"column":48}},"50":{"start":{"line":87,"column":8},"end":{"line":91,"column":9}},"51":{"start":{"line":88,"column":10},"end":{"line":90,"column":11}},"52":{"start":{"line":89,"column":12},"end":{"line":89,"column":65}},"53":{"start":{"line":90,"column":11},"end":{"line":90,"column":20}},"54":{"start":{"line":93,"column":8},"end":{"line":95,"column":9}},"55":{"start":{"line":94,"column":10},"end":{"line":94,"column":19}},"56":{"start":{"line":95,"column":9},"end":{"line":95,"column":62}},"57":{"start":{"line":102,"column":2},"end":{"line":102,"column":23}},"58":{"start":{"line":105,"column":0},"end":{"line":105,"column":31}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":74},"end":{"line":3,"column":74}},{"start":{"line":3,"column":74},"end":{"line":3,"column":74}}]},"2":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":136},"end":{"line":3,"column":136}},{"start":{"line":3,"column":136},"end":{"line":3,"column":136}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":116},"end":{"line":5,"column":116}},{"start":{"line":5,"column":116},"end":{"line":5,"column":116}}]},"4":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":186},"end":{"line":5,"column":186}},{"start":{"line":5,"column":186},"end":{"line":5,"column":186}}]},"5":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":285},"end":{"line":5,"column":285}},{"start":{"line":5,"column":285},"end":{"line":5,"column":285}}]},"6":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":289},"end":{"line":5,"column":304}},{"start":{"line":5,"column":308},"end":{"line":5,"column":321}}]},"7":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":376},"end":{"line":5,"column":376}},{"start":{"line":5,"column":376},"end":{"line":5,"column":376}}]},"8":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":50},"end":{"line":7,"column":50}},{"start":{"line":7,"column":50},"end":{"line":7,"column":50}}]},"9":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":54},"end":{"line":7,"column":86}},{"start":{"line":7,"column":90},"end":{"line":7,"column":109}}]},"10":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":251},"end":{"line":7,"column":261}},{"start":{"line":7,"column":265},"end":{"line":7,"column":285}}]},"11":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":381},"end":{"line":7,"column":381}},{"start":{"line":7,"column":381},"end":{"line":7,"column":381}}]},"12":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":57},"end":{"line":9,"column":57}},{"start":{"line":9,"column":57},"end":{"line":9,"column":57}}]},"13":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":21},"end":{"line":19,"column":23}},{"start":{"line":19,"column":26},"end":{"line":19,"column":43}}]},"14":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":38},"end":{"line":19,"column":39}},{"start":{"line":19,"column":42},"end":{"line":19,"column":43}}]},"15":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":15},"end":{"line":46,"column":54}},{"start":{"line":46,"column":58},"end":{"line":46,"column":60}}]},"16":{"line":49,"type":"cond-expr","locations":[{"start":{"line":49,"column":36},"end":{"line":49,"column":59}},{"start":{"line":49,"column":62},"end":{"line":49,"column":64}}]},"17":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":10},"end":{"line":76,"column":10}},{"start":{"line":76,"column":10},"end":{"line":76,"column":10}}]},"18":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"19":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":10},"end":{"line":88,"column":10}},{"start":{"line":88,"column":10},"end":{"line":88,"column":10}}]},"20":{"line":88,"type":"binary-expr","locations":[{"start":{"line":88,"column":14},"end":{"line":88,"column":35}},{"start":{"line":88,"column":39},"end":{"line":88,"column":78}}]},"21":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]}},"code":["\"use strict\";","","var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };","","var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };","","var _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };","","var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };","","var parseMediaValue = require(\"../utils/parseMediaValue\");","var parseMediaValues = require(\"../utils/parseMediaValues\");","var qualityFactorForMediaValue = require(\"../utils/qualityFactorForMediaValue\");","var stringifyMediaValues = require(\"../utils/stringifyMediaValues\");","var Header = require(\"../Header\");","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are equal","  return a === \"*\" ? -1 : b === \"*\" ? 1 : 0;","}","","/**"," * Represents an HTTP Accept-Charset header and provides several methods"," * for determining acceptable content character sets."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2"," */","","var AcceptCharset = (function (Header) {","  function AcceptCharset(value) {","    _classCallCheck(this, AcceptCharset);","","    _get(Object.getPrototypeOf(AcceptCharset.prototype), \"constructor\", this).call(this, \"Accept-Charset\", value);","  }","","  _inherits(AcceptCharset, Header);","","  _prototypeProperties(AcceptCharset, null, {","    value: {","","      /**","       * Returns the value of this header as a string.","       */","","      get: function () {","        return stringifyMediaValues(this._mediaValues) || \"\";","      },","      set: function (value) {","        this._mediaValues = value ? parseMediaValues(value) : [];","      },","      configurable: true","    },","    accepts: {","","      /**","       * Returns true if the given charset is acceptable.","       */","","      value: function accepts(charset) {","        return this.qualityFactorForCharset(charset) !== 0;","      },","      writable: true,","      configurable: true","    },","    qualityFactorForCharset: {","","      /**","       * Returns the quality factor for the given charset.","       */","","      value: function qualityFactorForCharset(charset) {","        var values = this._mediaValues;","","        var givenValue = parseMediaValue(charset);","        var matchingValues = values.filter(function (value) {","          if (value.type === \"*\") return true;","","          return value.type === givenValue.type;","        }).sort(byHighestPrecedence);","","        // From RFC 2616:","        // The special value \"*\", if present in the Accept-Charset field, matches every character","        // set (including ISO-8859-1) which is not mentioned elsewhere in the Accept-Charset field.","        // If no \"*\" is present in an Accept-Charset field, then all character sets not explicitly","        // mentioned get a quality value of 0, except for ISO-8859-1, which gets a quality value of","        // 1 if not explicitly mentioned.","        if (givenValue.type === \"iso-8859-1\") {","          if (matchingValues.length && matchingValues[0].type === \"iso-8859-1\") {","            return qualityFactorForMediaValue(matchingValues[0]);","          }return 1;","        }","","        if (!matchingValues.length) {","          return 0;","        }return qualityFactorForMediaValue(matchingValues[0]);","      },","      writable: true,","      configurable: true","    }","  });","","  return AcceptCharset;","})(Header);","","module.exports = AcceptCharset;"],"l":{"3":1,"5":1,"7":1,"9":1,"11":1,"12":1,"13":1,"14":1,"15":1,"17":1,"19":0,"29":1,"30":1,"31":0,"33":0,"36":1,"38":1,"46":0,"49":0,"60":0,"72":0,"74":0,"75":0,"76":0,"78":0,"87":0,"88":0,"89":0,"90":0,"93":0,"94":0,"95":0,"102":1,"105":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptEncoding.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptEncoding.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":43}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":58}},"3":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"4":{"start":{"line":7,"column":2},"end":{"line":17,"column":5}},"5":{"start":{"line":14,"column":6},"end":{"line":14,"column":52}},"6":{"start":{"line":19,"column":2},"end":{"line":30,"column":5}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":120}},"8":{"start":{"line":25,"column":39},"end":{"line":25,"column":120}},"9":{"start":{"line":27,"column":6},"end":{"line":27,"column":58}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var AcceptEncoding = require(\"../headers/AcceptEncoding\");","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given content encoding.","     */","    acceptsEncoding: d(function (encoding) {","      return this.request.acceptsEncoding(encoding);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given content encoding.","     */","    acceptsEncoding: d(function (encoding) {","      if (!this._acceptEncodingHeader) this._acceptEncodingHeader = new AcceptEncoding(this.headers[\"Accept-Encoding\"]);","","      return this._acceptEncodingHeader.accepts(encoding);","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"14":0,"19":1,"25":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptEncoding.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptEncoding.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":1,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":0,"35":1,"36":1,"37":0,"38":0,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,1],"9":[1,0],"10":[1,1],"11":[1,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":72}}},"2":{"name":"get","line":5,"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":52}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":48}}},"4":{"name":"(anonymous_4)","line":9,"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}}},"5":{"name":"byHighestPrecedence","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}}},"6":{"name":"(anonymous_6)","line":29,"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":40}}},"7":{"name":"AcceptEncoding","line":30,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":33}}},"8":{"name":"(anonymous_8)","line":45,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":23}}},"9":{"name":"(anonymous_9)","line":48,"loc":{"start":{"line":48,"column":11},"end":{"line":48,"column":28}}},"10":{"name":"accepts","line":59,"loc":{"start":{"line":59,"column":13},"end":{"line":59,"column":40}}},"11":{"name":"qualityFactorForEncoding","line":71,"loc":{"start":{"line":71,"column":13},"end":{"line":71,"column":57}}},"12":{"name":"(anonymous_12)","line":75,"loc":{"start":{"line":75,"column":43},"end":{"line":75,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":214}},"2":{"start":{"line":3,"column":74},"end":{"line":3,"column":135}},"3":{"start":{"line":3,"column":91},"end":{"line":3,"column":135}},"4":{"start":{"line":3,"column":136},"end":{"line":3,"column":211}},"5":{"start":{"line":3,"column":155},"end":{"line":3,"column":211}},"6":{"start":{"line":5,"column":0},"end":{"line":5,"column":458}},"7":{"start":{"line":5,"column":54},"end":{"line":5,"column":115}},"8":{"start":{"line":5,"column":116},"end":{"line":5,"column":455}},"9":{"start":{"line":5,"column":142},"end":{"line":5,"column":185}},"10":{"start":{"line":5,"column":186},"end":{"line":5,"column":277}},"11":{"start":{"line":5,"column":209},"end":{"line":5,"column":226}},"12":{"start":{"line":5,"column":236},"end":{"line":5,"column":275}},"13":{"start":{"line":5,"column":285},"end":{"line":5,"column":455}},"14":{"start":{"line":5,"column":325},"end":{"line":5,"column":343}},"15":{"start":{"line":5,"column":353},"end":{"line":5,"column":375}},"16":{"start":{"line":5,"column":376},"end":{"line":5,"column":423}},"17":{"start":{"line":5,"column":404},"end":{"line":5,"column":421}},"18":{"start":{"line":5,"column":424},"end":{"line":5,"column":453}},"19":{"start":{"line":7,"column":0},"end":{"line":7,"column":432}},"20":{"start":{"line":7,"column":50},"end":{"line":7,"column":215}},"21":{"start":{"line":7,"column":113},"end":{"line":7,"column":213}},"22":{"start":{"line":7,"column":216},"end":{"line":7,"column":380}},"23":{"start":{"line":7,"column":381},"end":{"line":7,"column":429}},"24":{"start":{"line":7,"column":397},"end":{"line":7,"column":429}},"25":{"start":{"line":9,"column":0},"end":{"line":9,"column":161}},"26":{"start":{"line":9,"column":57},"end":{"line":9,"column":158}},"27":{"start":{"line":9,"column":99},"end":{"line":9,"column":156}},"28":{"start":{"line":11,"column":0},"end":{"line":11,"column":58}},"29":{"start":{"line":12,"column":0},"end":{"line":12,"column":60}},"30":{"start":{"line":13,"column":0},"end":{"line":13,"column":80}},"31":{"start":{"line":14,"column":0},"end":{"line":14,"column":68}},"32":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"33":{"start":{"line":17,"column":0},"end":{"line":20,"column":1}},"34":{"start":{"line":19,"column":2},"end":{"line":19,"column":44}},"35":{"start":{"line":29,"column":0},"end":{"line":104,"column":11}},"36":{"start":{"line":30,"column":2},"end":{"line":34,"column":3}},"37":{"start":{"line":31,"column":4},"end":{"line":31,"column":42}},"38":{"start":{"line":33,"column":4},"end":{"line":33,"column":116}},"39":{"start":{"line":36,"column":2},"end":{"line":36,"column":36}},"40":{"start":{"line":38,"column":2},"end":{"line":101,"column":5}},"41":{"start":{"line":46,"column":8},"end":{"line":46,"column":61}},"42":{"start":{"line":49,"column":8},"end":{"line":49,"column":65}},"43":{"start":{"line":60,"column":8},"end":{"line":60,"column":61}},"44":{"start":{"line":72,"column":8},"end":{"line":72,"column":39}},"45":{"start":{"line":74,"column":8},"end":{"line":74,"column":51}},"46":{"start":{"line":75,"column":8},"end":{"line":79,"column":37}},"47":{"start":{"line":76,"column":10},"end":{"line":76,"column":46}},"48":{"start":{"line":76,"column":34},"end":{"line":76,"column":46}},"49":{"start":{"line":78,"column":10},"end":{"line":78,"column":48}},"50":{"start":{"line":88,"column":8},"end":{"line":92,"column":9}},"51":{"start":{"line":89,"column":10},"end":{"line":91,"column":11}},"52":{"start":{"line":90,"column":12},"end":{"line":90,"column":65}},"53":{"start":{"line":91,"column":11},"end":{"line":91,"column":20}},"54":{"start":{"line":94,"column":8},"end":{"line":96,"column":9}},"55":{"start":{"line":95,"column":10},"end":{"line":95,"column":19}},"56":{"start":{"line":96,"column":9},"end":{"line":96,"column":62}},"57":{"start":{"line":103,"column":2},"end":{"line":103,"column":24}},"58":{"start":{"line":106,"column":0},"end":{"line":106,"column":32}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":74},"end":{"line":3,"column":74}},{"start":{"line":3,"column":74},"end":{"line":3,"column":74}}]},"2":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":136},"end":{"line":3,"column":136}},{"start":{"line":3,"column":136},"end":{"line":3,"column":136}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":116},"end":{"line":5,"column":116}},{"start":{"line":5,"column":116},"end":{"line":5,"column":116}}]},"4":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":186},"end":{"line":5,"column":186}},{"start":{"line":5,"column":186},"end":{"line":5,"column":186}}]},"5":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":285},"end":{"line":5,"column":285}},{"start":{"line":5,"column":285},"end":{"line":5,"column":285}}]},"6":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":289},"end":{"line":5,"column":304}},{"start":{"line":5,"column":308},"end":{"line":5,"column":321}}]},"7":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":376},"end":{"line":5,"column":376}},{"start":{"line":5,"column":376},"end":{"line":5,"column":376}}]},"8":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":50},"end":{"line":7,"column":50}},{"start":{"line":7,"column":50},"end":{"line":7,"column":50}}]},"9":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":54},"end":{"line":7,"column":86}},{"start":{"line":7,"column":90},"end":{"line":7,"column":109}}]},"10":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":251},"end":{"line":7,"column":261}},{"start":{"line":7,"column":265},"end":{"line":7,"column":285}}]},"11":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":381},"end":{"line":7,"column":381}},{"start":{"line":7,"column":381},"end":{"line":7,"column":381}}]},"12":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":57},"end":{"line":9,"column":57}},{"start":{"line":9,"column":57},"end":{"line":9,"column":57}}]},"13":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":21},"end":{"line":19,"column":23}},{"start":{"line":19,"column":26},"end":{"line":19,"column":43}}]},"14":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":38},"end":{"line":19,"column":39}},{"start":{"line":19,"column":42},"end":{"line":19,"column":43}}]},"15":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":15},"end":{"line":46,"column":54}},{"start":{"line":46,"column":58},"end":{"line":46,"column":60}}]},"16":{"line":49,"type":"cond-expr","locations":[{"start":{"line":49,"column":36},"end":{"line":49,"column":59}},{"start":{"line":49,"column":62},"end":{"line":49,"column":64}}]},"17":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":10},"end":{"line":76,"column":10}},{"start":{"line":76,"column":10},"end":{"line":76,"column":10}}]},"18":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"19":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":10},"end":{"line":89,"column":10}},{"start":{"line":89,"column":10},"end":{"line":89,"column":10}}]},"20":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":14},"end":{"line":89,"column":35}},{"start":{"line":89,"column":39},"end":{"line":89,"column":76}}]},"21":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},{"start":{"line":94,"column":8},"end":{"line":94,"column":8}}]}},"code":["\"use strict\";","","var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };","","var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };","","var _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };","","var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };","","var parseMediaValue = require(\"../utils/parseMediaValue\");","var parseMediaValues = require(\"../utils/parseMediaValues\");","var qualityFactorForMediaValue = require(\"../utils/qualityFactorForMediaValue\");","var stringifyMediaValues = require(\"../utils/stringifyMediaValues\");","var Header = require(\"../Header\");","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are equal","  return a === \"*\" ? -1 : b === \"*\" ? 1 : 0;","}","","/**"," * Represents an HTTP Accept-Encoding header and provides several methods"," * for determining acceptable content encodings."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3"," */","","var AcceptEncoding = (function (Header) {","  function AcceptEncoding(value) {","    _classCallCheck(this, AcceptEncoding);","","    _get(Object.getPrototypeOf(AcceptEncoding.prototype), \"constructor\", this).call(this, \"Accept-Encoding\", value);","  }","","  _inherits(AcceptEncoding, Header);","","  _prototypeProperties(AcceptEncoding, null, {","    value: {","","      /**","       * Returns the value of this header as a string.","       */","","      get: function () {","        return stringifyMediaValues(this._mediaValues) || \"\";","      },","      set: function (value) {","        this._mediaValues = value ? parseMediaValues(value) : [];","      },","      configurable: true","    },","    accepts: {","","      /**","       * Returns true if the given encoding is acceptable.","       */","","      value: function accepts(encoding) {","        return this.qualityFactorForEncoding(encoding) !== 0;","      },","      writable: true,","      configurable: true","    },","    qualityFactorForEncoding: {","","      /**","       * Returns the quality factor for the given encoding.","       */","","      value: function qualityFactorForEncoding(encoding) {","        var values = this._mediaValues;","","        var givenValue = parseMediaValue(encoding);","        var matchingValues = values.filter(function (value) {","          if (value.type === \"*\") return true;","","          return value.type === givenValue.type;","        }).sort(byHighestPrecedence);","","        // From RFC 2616:","        // The \"identity\" content-coding is always acceptable, unless","        // specifically refused because the Accept-Encoding field includes","        // \"identity;q=0\", or because the field includes \"*;q=0\" and does","        // not explicitly include the \"identity\" content-coding. If the","        // Accept-Encoding field-value is empty, then only the \"identity\"","        // encoding is acceptable.","        if (givenValue.type === \"identity\") {","          if (matchingValues.length && matchingValues[0].type === \"identity\") {","            return qualityFactorForMediaValue(matchingValues[0]);","          }return 1;","        }","","        if (!matchingValues.length) {","          return 0;","        }return qualityFactorForMediaValue(matchingValues[0]);","      },","      writable: true,","      configurable: true","    }","  });","","  return AcceptEncoding;","})(Header);","","module.exports = AcceptEncoding;"],"l":{"3":1,"5":1,"7":1,"9":1,"11":1,"12":1,"13":1,"14":1,"15":1,"17":1,"19":0,"29":1,"30":1,"31":0,"33":0,"36":1,"38":1,"46":0,"49":0,"60":0,"72":0,"74":0,"75":0,"76":0,"78":0,"88":0,"89":0,"90":0,"91":0,"94":0,"95":0,"96":0,"103":1,"106":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptLanguage.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/acceptLanguage.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":43}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":58}},"3":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"4":{"start":{"line":7,"column":2},"end":{"line":17,"column":5}},"5":{"start":{"line":14,"column":6},"end":{"line":14,"column":52}},"6":{"start":{"line":19,"column":2},"end":{"line":30,"column":5}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":120}},"8":{"start":{"line":25,"column":39},"end":{"line":25,"column":120}},"9":{"start":{"line":27,"column":6},"end":{"line":27,"column":58}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var AcceptLanguage = require(\"../headers/AcceptLanguage\");","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given content language.","     */","    acceptsLanguage: d(function (language) {","      return this.request.acceptsLanguage(language);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given content language.","     */","    acceptsLanguage: d(function (language) {","      if (!this._acceptLanguageHeader) this._acceptLanguageHeader = new AcceptLanguage(this.headers[\"Accept-Language\"]);","","      return this._acceptLanguageHeader.accepts(language);","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"14":0,"19":1,"25":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptLanguage.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/headers/AcceptLanguage.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":1,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":1,"37":0,"38":1,"39":1,"40":0,"41":0,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,1],"9":[1,0],"10":[1,1],"11":[1,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":72}}},"2":{"name":"get","line":5,"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":52}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":48}}},"4":{"name":"(anonymous_4)","line":9,"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}}},"5":{"name":"byHighestPrecedence","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":35}}},"6":{"name":"byMostSpecific","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}}},"7":{"name":"(anonymous_7)","line":34,"loc":{"start":{"line":34,"column":22},"end":{"line":34,"column":40}}},"8":{"name":"AcceptLanguage","line":35,"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":33}}},"9":{"name":"(anonymous_9)","line":50,"loc":{"start":{"line":50,"column":11},"end":{"line":50,"column":23}}},"10":{"name":"(anonymous_10)","line":53,"loc":{"start":{"line":53,"column":11},"end":{"line":53,"column":28}}},"11":{"name":"accepts","line":64,"loc":{"start":{"line":64,"column":13},"end":{"line":64,"column":40}}},"12":{"name":"qualityFactorForLanguage","line":76,"loc":{"start":{"line":76,"column":13},"end":{"line":76,"column":57}}},"13":{"name":"(anonymous_13)","line":82,"loc":{"start":{"line":82,"column":43},"end":{"line":82,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":214}},"2":{"start":{"line":3,"column":74},"end":{"line":3,"column":135}},"3":{"start":{"line":3,"column":91},"end":{"line":3,"column":135}},"4":{"start":{"line":3,"column":136},"end":{"line":3,"column":211}},"5":{"start":{"line":3,"column":155},"end":{"line":3,"column":211}},"6":{"start":{"line":5,"column":0},"end":{"line":5,"column":458}},"7":{"start":{"line":5,"column":54},"end":{"line":5,"column":115}},"8":{"start":{"line":5,"column":116},"end":{"line":5,"column":455}},"9":{"start":{"line":5,"column":142},"end":{"line":5,"column":185}},"10":{"start":{"line":5,"column":186},"end":{"line":5,"column":277}},"11":{"start":{"line":5,"column":209},"end":{"line":5,"column":226}},"12":{"start":{"line":5,"column":236},"end":{"line":5,"column":275}},"13":{"start":{"line":5,"column":285},"end":{"line":5,"column":455}},"14":{"start":{"line":5,"column":325},"end":{"line":5,"column":343}},"15":{"start":{"line":5,"column":353},"end":{"line":5,"column":375}},"16":{"start":{"line":5,"column":376},"end":{"line":5,"column":423}},"17":{"start":{"line":5,"column":404},"end":{"line":5,"column":421}},"18":{"start":{"line":5,"column":424},"end":{"line":5,"column":453}},"19":{"start":{"line":7,"column":0},"end":{"line":7,"column":432}},"20":{"start":{"line":7,"column":50},"end":{"line":7,"column":215}},"21":{"start":{"line":7,"column":113},"end":{"line":7,"column":213}},"22":{"start":{"line":7,"column":216},"end":{"line":7,"column":380}},"23":{"start":{"line":7,"column":381},"end":{"line":7,"column":429}},"24":{"start":{"line":7,"column":397},"end":{"line":7,"column":429}},"25":{"start":{"line":9,"column":0},"end":{"line":9,"column":161}},"26":{"start":{"line":9,"column":57},"end":{"line":9,"column":158}},"27":{"start":{"line":9,"column":99},"end":{"line":9,"column":156}},"28":{"start":{"line":11,"column":0},"end":{"line":11,"column":58}},"29":{"start":{"line":12,"column":0},"end":{"line":12,"column":60}},"30":{"start":{"line":13,"column":0},"end":{"line":13,"column":80}},"31":{"start":{"line":14,"column":0},"end":{"line":14,"column":68}},"32":{"start":{"line":15,"column":0},"end":{"line":15,"column":106}},"33":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"34":{"start":{"line":18,"column":0},"end":{"line":21,"column":1}},"35":{"start":{"line":20,"column":2},"end":{"line":20,"column":63}},"36":{"start":{"line":23,"column":0},"end":{"line":25,"column":1}},"37":{"start":{"line":24,"column":2},"end":{"line":24,"column":111}},"38":{"start":{"line":34,"column":0},"end":{"line":100,"column":11}},"39":{"start":{"line":35,"column":2},"end":{"line":39,"column":3}},"40":{"start":{"line":36,"column":4},"end":{"line":36,"column":42}},"41":{"start":{"line":38,"column":4},"end":{"line":38,"column":116}},"42":{"start":{"line":41,"column":2},"end":{"line":41,"column":36}},"43":{"start":{"line":43,"column":2},"end":{"line":97,"column":5}},"44":{"start":{"line":51,"column":8},"end":{"line":51,"column":66}},"45":{"start":{"line":54,"column":8},"end":{"line":54,"column":70}},"46":{"start":{"line":65,"column":8},"end":{"line":65,"column":61}},"47":{"start":{"line":77,"column":8},"end":{"line":77,"column":39}},"48":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"49":{"start":{"line":80,"column":10},"end":{"line":80,"column":19}},"50":{"start":{"line":81,"column":9},"end":{"line":81,"column":57}},"51":{"start":{"line":82,"column":8},"end":{"line":88,"column":37}},"52":{"start":{"line":83,"column":10},"end":{"line":83,"column":46}},"53":{"start":{"line":83,"column":34},"end":{"line":83,"column":46}},"54":{"start":{"line":85,"column":10},"end":{"line":85,"column":82}},"55":{"start":{"line":85,"column":69},"end":{"line":85,"column":82}},"56":{"start":{"line":87,"column":10},"end":{"line":87,"column":48}},"57":{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},"58":{"start":{"line":91,"column":10},"end":{"line":91,"column":19}},"59":{"start":{"line":92,"column":9},"end":{"line":92,"column":62}},"60":{"start":{"line":99,"column":2},"end":{"line":99,"column":24}},"61":{"start":{"line":102,"column":0},"end":{"line":102,"column":32}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":74},"end":{"line":3,"column":74}},{"start":{"line":3,"column":74},"end":{"line":3,"column":74}}]},"2":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":136},"end":{"line":3,"column":136}},{"start":{"line":3,"column":136},"end":{"line":3,"column":136}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":116},"end":{"line":5,"column":116}},{"start":{"line":5,"column":116},"end":{"line":5,"column":116}}]},"4":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":186},"end":{"line":5,"column":186}},{"start":{"line":5,"column":186},"end":{"line":5,"column":186}}]},"5":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":285},"end":{"line":5,"column":285}},{"start":{"line":5,"column":285},"end":{"line":5,"column":285}}]},"6":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":289},"end":{"line":5,"column":304}},{"start":{"line":5,"column":308},"end":{"line":5,"column":321}}]},"7":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":376},"end":{"line":5,"column":376}},{"start":{"line":5,"column":376},"end":{"line":5,"column":376}}]},"8":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":50},"end":{"line":7,"column":50}},{"start":{"line":7,"column":50},"end":{"line":7,"column":50}}]},"9":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":54},"end":{"line":7,"column":86}},{"start":{"line":7,"column":90},"end":{"line":7,"column":109}}]},"10":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":251},"end":{"line":7,"column":261}},{"start":{"line":7,"column":265},"end":{"line":7,"column":285}}]},"11":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":381},"end":{"line":7,"column":381}},{"start":{"line":7,"column":381},"end":{"line":7,"column":381}}]},"12":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":57},"end":{"line":9,"column":57}},{"start":{"line":9,"column":57},"end":{"line":9,"column":57}}]},"13":{"line":20,"type":"cond-expr","locations":[{"start":{"line":20,"column":21},"end":{"line":20,"column":23}},{"start":{"line":20,"column":26},"end":{"line":20,"column":62}}]},"14":{"line":20,"type":"cond-expr","locations":[{"start":{"line":20,"column":38},"end":{"line":20,"column":39}},{"start":{"line":20,"column":42},"end":{"line":20,"column":62}}]},"15":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":15},"end":{"line":51,"column":59}},{"start":{"line":51,"column":63},"end":{"line":51,"column":65}}]},"16":{"line":54,"type":"cond-expr","locations":[{"start":{"line":54,"column":36},"end":{"line":54,"column":64}},{"start":{"line":54,"column":67},"end":{"line":54,"column":69}}]},"17":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":8}},{"start":{"line":79,"column":8},"end":{"line":79,"column":8}}]},"18":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":10},"end":{"line":83,"column":10}},{"start":{"line":83,"column":10},"end":{"line":83,"column":10}}]},"19":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":10},"end":{"line":85,"column":10}},{"start":{"line":85,"column":10},"end":{"line":85,"column":10}}]},"20":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":14},"end":{"line":85,"column":27}},{"start":{"line":85,"column":31},"end":{"line":85,"column":67}}]},"21":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":90,"column":8}},{"start":{"line":90,"column":8},"end":{"line":90,"column":8}}]}},"code":["\"use strict\";","","var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };","","var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };","","var _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };","","var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };","","var parseMediaValue = require(\"../utils/parseMediaValue\");","var parseMediaValues = require(\"../utils/parseMediaValues\");","var qualityFactorForMediaValue = require(\"../utils/qualityFactorForMediaValue\");","var stringifyMediaValues = require(\"../utils/stringifyMediaValues\");","var stringifyMediaValueWithoutQualityFactor = require(\"../utils/stringifyMediaValueWithoutQualityFactor\");","var Header = require(\"../Header\");","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are compared by specificity","  return a === \"*\" ? -1 : b === \"*\" ? 1 : byMostSpecific(a, b);","}","","function byMostSpecific(a, b) {","  return stringifyMediaValueWithoutQualityFactor(b).length - stringifyMediaValueWithoutQualityFactor(a).length;","}","","/**"," * Represents an HTTP Accept-Language header and provides several methods"," * for determining acceptable content languages."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4"," */","","var AcceptLanguage = (function (Header) {","  function AcceptLanguage(value) {","    _classCallCheck(this, AcceptLanguage);","","    _get(Object.getPrototypeOf(AcceptLanguage.prototype), \"constructor\", this).call(this, \"Accept-Language\", value);","  }","","  _inherits(AcceptLanguage, Header);","","  _prototypeProperties(AcceptLanguage, null, {","    value: {","","      /**","       * Returns the value of this header as a string.","       */","","      get: function () {","        return stringifyMediaValues(this._mediaValues, \"-\") || \"\";","      },","      set: function (value) {","        this._mediaValues = value ? parseMediaValues(value, \"-\") : [];","      },","      configurable: true","    },","    accepts: {","","      /**","       * Returns true if the given language is acceptable.","       */","","      value: function accepts(language) {","        return this.qualityFactorForLanguage(language) !== 0;","      },","      writable: true,","      configurable: true","    },","    qualityFactorForLanguage: {","","      /**","       * Returns the quality factor for the given language.","       */","","      value: function qualityFactorForLanguage(language) {","        var values = this._mediaValues;","","        if (!values.length) {","          return 1;","        }var givenValue = parseMediaValue(language, \"-\");","        var matchingValues = values.filter(function (value) {","          if (value.type === \"*\") return true;","","          if (value.subtype && value.subtype !== givenValue.subtype) return false;","","          return value.type === givenValue.type;","        }).sort(byHighestPrecedence);","","        if (!matchingValues.length) {","          return 0;","        }return qualityFactorForMediaValue(matchingValues[0]);","      },","      writable: true,","      configurable: true","    }","  });","","  return AcceptLanguage;","})(Header);","","module.exports = AcceptLanguage;"],"l":{"3":1,"5":1,"7":1,"9":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"20":0,"23":1,"24":0,"34":1,"35":1,"36":0,"38":0,"41":1,"43":1,"51":0,"54":0,"65":0,"77":0,"79":0,"80":0,"81":0,"82":0,"83":0,"85":0,"87":0,"90":0,"91":0,"92":0,"99":1,"102":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/client.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/client.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":7,"10":7,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":1,"3":7,"4":0},"fnMap":{"1":{"name":"defaultApp","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":33}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":71},"end":{"line":14,"column":89}}},"4":{"name":"(anonymous_4)","line":17,"loc":{"start":{"line":17,"column":21},"end":{"line":17,"column":55}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":38}},"4":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":42}},"6":{"start":{"line":11,"column":0},"end":{"line":53,"column":2}},"7":{"start":{"line":12,"column":2},"end":{"line":12,"column":42}},"8":{"start":{"line":14,"column":2},"end":{"line":52,"column":5}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":40}},"10":{"start":{"line":17,"column":4},"end":{"line":51,"column":6}},"11":{"start":{"line":18,"column":6},"end":{"line":46,"column":7}},"12":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"13":{"start":{"line":21,"column":8},"end":{"line":30,"column":9}},"14":{"start":{"line":23,"column":10},"end":{"line":23,"column":33}},"15":{"start":{"line":24,"column":15},"end":{"line":30,"column":9}},"16":{"start":{"line":26,"column":10},"end":{"line":26,"column":38}},"17":{"start":{"line":29,"column":10},"end":{"line":29,"column":48}},"18":{"start":{"line":32,"column":8},"end":{"line":32,"column":25}},"19":{"start":{"line":33,"column":13},"end":{"line":46,"column":7}},"20":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"21":{"start":{"line":36,"column":13},"end":{"line":46,"column":7}},"22":{"start":{"line":38,"column":8},"end":{"line":38,"column":40}},"23":{"start":{"line":39,"column":13},"end":{"line":46,"column":7}},"24":{"start":{"line":41,"column":8},"end":{"line":41,"column":27}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":21}},"26":{"start":{"line":45,"column":8},"end":{"line":45,"column":50}},"27":{"start":{"line":48,"column":6},"end":{"line":48,"column":30}},"28":{"start":{"line":50,"column":6},"end":{"line":50,"column":47}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":6},"end":{"line":18,"column":6}},{"start":{"line":18,"column":6},"end":{"line":18,"column":6}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":15},"end":{"line":24,"column":15}},{"start":{"line":24,"column":15},"end":{"line":24,"column":15}}]},"4":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":37},"end":{"line":29,"column":40}},{"start":{"line":29,"column":44},"end":{"line":29,"column":46}}]},"5":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":13},"end":{"line":33,"column":13}},{"start":{"line":33,"column":13},"end":{"line":33,"column":13}}]},"6":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":13},"end":{"line":36,"column":13}},{"start":{"line":36,"column":13},"end":{"line":36,"column":13}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":13},"end":{"line":39,"column":13}},{"start":{"line":39,"column":13},"end":{"line":39,"column":13}}]},"8":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":35},"end":{"line":45,"column":42}},{"start":{"line":45,"column":46},"end":{"line":45,"column":48}}]}},"code":["\"use strict\";","","var objectAssign = require(\"object-assign\");","var sendRequest = require(\"../utils/sendRequest\");","var Location = require(\"../Location\");","","function defaultApp(conn) {","  return sendRequest(conn, conn.location);","}","","module.exports = function (mach) {","  mach.call = require(\"../utils/callApp\");","","  [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\", \"TRACE\"].forEach(function (method) {","    var property = method.toLowerCase();","","    mach[property] = function (app, options, modifier) {","      if (typeof app !== \"function\") {","        modifier = options;","","        if (typeof app === \"string\") {","          // get(url, modifier)","          options = { url: app };","        } else if (app instanceof Location) {","          // get(location, modifier)","          options = { location: app };","        } else {","          // get(options, modifier)","          options = objectAssign({}, app || {});","        }","","        app = defaultApp;","      } else if (typeof options === \"string\") {","        // get(app, url, modifier)","        options = { url: options };","      } else if (options instanceof Location) {","        // get(app, location, modifier)","        options = { location: options };","      } else if (typeof options !== \"object\") {","        // get(app, modifier)","        modifier = options;","        options = {};","      } else {","        // get(app, options, modifier)","        options = objectAssign({}, options || {});","      }","","      options.method = method;","","      return mach.call(app, options, modifier);","    };","  });","};"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"11":1,"12":1,"14":1,"15":7,"17":7,"18":0,"19":0,"21":0,"23":0,"24":0,"26":0,"29":0,"32":0,"33":0,"35":0,"36":0,"38":0,"39":0,"41":0,"42":0,"45":0,"48":0,"50":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/sendRequest.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/sendRequest.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"sendRequest","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":37}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":66}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":31},"end":{"line":21,"column":55}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":53}},"4":{"start":{"line":7,"column":0},"end":{"line":37,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":64}},"6":{"start":{"line":10,"column":2},"end":{"line":36,"column":5}},"7":{"start":{"line":11,"column":4},"end":{"line":19,"column":7}},"8":{"start":{"line":21,"column":4},"end":{"line":26,"column":7}},"9":{"start":{"line":22,"column":6},"end":{"line":22,"column":44}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":51}},"11":{"start":{"line":24,"column":6},"end":{"line":24,"column":43}},"12":{"start":{"line":25,"column":6},"end":{"line":25,"column":20}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":36}},"14":{"start":{"line":30,"column":4},"end":{"line":33,"column":7}},"15":{"start":{"line":31,"column":6},"end":{"line":31,"column":26}},"16":{"start":{"line":32,"column":6},"end":{"line":32,"column":16}},"17":{"start":{"line":35,"column":4},"end":{"line":35,"column":43}},"18":{"start":{"line":39,"column":0},"end":{"line":39,"column":29}}},"branchMap":{"1":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":56}},{"start":{"line":8,"column":59},"end":{"line":8,"column":63}}]}},"code":["\"use strict\";","","var http = require(\"http\");","var https = require(\"https\");","var AbortablePromise = require(\"./AbortablePromise\");","","function sendRequest(conn, location) {","  var transport = location.protocol === \"https:\" ? https : http;","","  return new AbortablePromise(function (resolve, reject, onAbort) {","    var nodeRequest = transport.request({","      method: conn.method,","      protocol: location.protocol,","      auth: location.auth,","      hostname: location.hostname,","      port: location.port,","      path: location.path,","      headers: conn.request.headers","    });","","    nodeRequest.on(\"response\", function (nodeResponse) {","      conn.status = nodeResponse.statusCode;","      conn.response.headers = nodeResponse.headers;","      conn.response.content = nodeResponse;","      resolve(conn);","    });","","    nodeRequest.on(\"error\", reject);","","    onAbort(function () {","      nodeRequest.abort();","      resolve();","    });","","    conn.request.content.pipe(nodeRequest);","  });","}","","module.exports = sendRequest;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"21":0,"22":0,"23":0,"24":0,"25":0,"28":0,"30":0,"31":0,"32":0,"35":0,"39":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/AbortablePromise.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/AbortablePromise.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"makeAbortable","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":17},"end":{"line":10,"column":29}}},"3":{"name":"AbortablePromise","line":44,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":36}}},"4":{"name":"(anonymous_4)","line":48,"loc":{"start":{"line":48,"column":28},"end":{"line":48,"column":55}}},"5":{"name":"(anonymous_5)","line":51,"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":24}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":13},"end":{"line":64,"column":30}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":7},"end":{"line":72,"column":19}}},"8":{"name":"(anonymous_8)","line":75,"loc":{"start":{"line":75,"column":7},"end":{"line":75,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":5,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":24}},"4":{"start":{"line":9,"column":2},"end":{"line":9,"column":27}},"5":{"start":{"line":10,"column":2},"end":{"line":12,"column":4}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":65}},"7":{"start":{"line":14,"column":2},"end":{"line":14,"column":17}},"8":{"start":{"line":44,"column":0},"end":{"line":83,"column":1}},"9":{"start":{"line":45,"column":2},"end":{"line":45,"column":100}},"10":{"start":{"line":45,"column":38},"end":{"line":45,"column":100}},"11":{"start":{"line":47,"column":2},"end":{"line":47,"column":12}},"12":{"start":{"line":48,"column":2},"end":{"line":80,"column":5}},"13":{"start":{"line":49,"column":4},"end":{"line":49,"column":16}},"14":{"start":{"line":51,"column":4},"end":{"line":62,"column":6}},"15":{"start":{"line":52,"column":6},"end":{"line":52,"column":34}},"16":{"start":{"line":52,"column":27},"end":{"line":52,"column":34}},"17":{"start":{"line":54,"column":6},"end":{"line":54,"column":23}},"18":{"start":{"line":55,"column":6},"end":{"line":55,"column":21}},"19":{"start":{"line":57,"column":6},"end":{"line":61,"column":7}},"20":{"start":{"line":58,"column":8},"end":{"line":58,"column":41}},"21":{"start":{"line":60,"column":8},"end":{"line":60,"column":22}},"22":{"start":{"line":64,"column":4},"end":{"line":79,"column":7}},"23":{"start":{"line":65,"column":6},"end":{"line":69,"column":7}},"24":{"start":{"line":66,"column":8},"end":{"line":66,"column":30}},"25":{"start":{"line":68,"column":8},"end":{"line":68,"column":23}},"26":{"start":{"line":71,"column":6},"end":{"line":71,"column":37}},"27":{"start":{"line":73,"column":6},"end":{"line":73,"column":21}},"28":{"start":{"line":74,"column":6},"end":{"line":74,"column":36}},"29":{"start":{"line":76,"column":6},"end":{"line":76,"column":80}},"30":{"start":{"line":76,"column":36},"end":{"line":76,"column":80}},"31":{"start":{"line":78,"column":6},"end":{"line":78,"column":19}},"32":{"start":{"line":82,"column":2},"end":{"line":82,"column":39}},"33":{"start":{"line":85,"column":0},"end":{"line":85,"column":34}}},"branchMap":{"1":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":45,"column":2}},{"start":{"line":45,"column":2},"end":{"line":45,"column":2}}]},"2":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":6},"end":{"line":52,"column":6}},{"start":{"line":52,"column":6},"end":{"line":52,"column":6}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":6},"end":{"line":65,"column":6}},{"start":{"line":65,"column":6},"end":{"line":65,"column":6}}]},"4":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":10},"end":{"line":65,"column":15}},{"start":{"line":65,"column":19},"end":{"line":65,"column":52}}]},"5":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":6}},{"start":{"line":76,"column":6},"end":{"line":76,"column":6}}]}},"code":["\"use strict\";","","var Promise = require(\"./Promise\");","","function makeAbortable(promise, abort) {","  promise.abort = abort;","","  // Hijack promise.then so it returns an abortable promise.","  var _then = promise.then;","  promise.then = function () {","    return makeAbortable(_then.apply(promise, arguments), abort);","  };","","  return promise;","}","","/**"," * A Promise class with an abort() method that calls the onAbort function"," * provided by the resolver."," *"," * Example:"," *"," *   var promise = new AbortablePromise(function (resolve, reject, onAbort) {"," *     // Use resolve & reject as you normally would."," *     var request = makeRequest( ... , function (error, response) {"," *       if (error) {"," *         reject(error);"," *       } else {"," *         resolve(response);"," *       }"," *     });"," *   "," *     // Use onAbort to register a promise.abort() function. It is the"," *     // responsibility of this function to abort the execution of the"," *     // promise and resolve/reject as needed."," *     onAbort(function () {"," *       request.abort();"," *       reject(new Error('Request was aborted'));"," *     });"," *   });"," *"," *   promise.abort(); // Calls the onAbort handler."," */","function AbortablePromise(resolver) {","  if (typeof resolver !== \"function\") throw new Error(\"AbortablePromise needs a resolver function\");","","  var abort;","  var promise = new Promise(function (resolve, reject) {","    var aborter;","","    abort = function () {","      if (aborter == null) return;","","      var fn = aborter;","      aborter = null;","","      try {","        return fn.apply(this, arguments);","      } catch (error) {","        reject(error);","      }","    };","","    resolver(function (child) {","      if (child && typeof child.abort === \"function\") {","        aborter = child.abort;","      } else {","        aborter = null;","      }","","      resolve.apply(this, arguments);","    }, function () {","      aborter = null;","      reject.apply(this, arguments);","    }, function (fn) {","      if (typeof fn !== \"function\") throw new Error(\"onAbort needs a function\");","","      aborter = fn;","    });","  });","","  return makeAbortable(promise, abort);","}","","module.exports = AbortablePromise;"],"l":{"3":1,"5":1,"6":0,"9":0,"10":0,"11":0,"14":0,"44":1,"45":0,"47":0,"48":0,"49":0,"51":0,"52":0,"54":0,"55":0,"57":0,"58":0,"60":0,"64":0,"65":0,"66":0,"68":0,"71":0,"73":0,"74":0,"76":0,"78":0,"82":0,"85":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/middleware.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/middleware.js","s":{"1":1,"2":1,"3":1,"4":18,"5":18},"b":{"1":[18,0]},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":114}},"4":{"start":{"line":6,"column":35},"end":{"line":6,"column":114}},"5":{"start":{"line":6,"column":76},"end":{"line":6,"column":114}}},"branchMap":{"1":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":35},"end":{"line":6,"column":35}},{"start":{"line":6,"column":35},"end":{"line":6,"column":35}}]}},"code":["\"use strict\";","","var middleware = require(\"../middleware\");","","module.exports = function (mach) {","  for (var property in middleware) if (middleware.hasOwnProperty(property)) mach[property] = middleware[property];","};"],"l":{"3":1,"5":1,"6":18}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":22,"column":2}}},"branchMap":{},"code":["\"use strict\";","","module.exports = {","  basicAuth: require(\"./basicAuth\"),","  \"catch\": require(\"./catch\"),","  charset: require(\"./charset\"),","  contentType: require(\"./contentType\"),","  favicon: require(\"./favicon\"),","  file: require(\"./file\"),","  gzip: require(\"./gzip\"),","  logger: require(\"./logger\"),","  mapper: require(\"./mapper\"),","  methodOverride: require(\"./methodOverride\"),","  modified: require(\"./modified\"),","  params: require(\"./params\"),","  proxy: require(\"./proxy\"),","  rewrite: require(\"./rewrite\"),","  router: require(\"./router\"),","  session: require(\"./session\"),","  stack: require(\"./stack\"),","  token: require(\"./token\")","};"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/basicAuth.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/basicAuth.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"basicAuth","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}}},"2":{"name":"(anonymous_2)","line":42,"loc":{"start":{"line":42,"column":9},"end":{"line":42,"column":25}}},"3":{"name":"(anonymous_3)","line":49,"loc":{"start":{"line":49,"column":70},"end":{"line":49,"column":86}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":42}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":45}},"4":{"start":{"line":33,"column":0},"end":{"line":59,"column":1}},"5":{"start":{"line":34,"column":2},"end":{"line":34,"column":26}},"6":{"start":{"line":36,"column":2},"end":{"line":36,"column":69}},"7":{"start":{"line":36,"column":37},"end":{"line":36,"column":69}},"8":{"start":{"line":38,"column":2},"end":{"line":38,"column":108}},"9":{"start":{"line":38,"column":46},"end":{"line":38,"column":108}},"10":{"start":{"line":40,"column":2},"end":{"line":40,"column":56}},"11":{"start":{"line":42,"column":2},"end":{"line":58,"column":4}},"12":{"start":{"line":43,"column":4},"end":{"line":43,"column":47}},"13":{"start":{"line":43,"column":25},"end":{"line":43,"column":47}},"14":{"start":{"line":45,"column":4},"end":{"line":45,"column":46}},"15":{"start":{"line":46,"column":4},"end":{"line":47,"column":34}},"16":{"start":{"line":49,"column":4},"end":{"line":57,"column":7}},"17":{"start":{"line":50,"column":6},"end":{"line":53,"column":7}},"18":{"start":{"line":51,"column":8},"end":{"line":51,"column":58}},"19":{"start":{"line":52,"column":8},"end":{"line":52,"column":30}},"20":{"start":{"line":55,"column":6},"end":{"line":55,"column":82}},"21":{"start":{"line":56,"column":6},"end":{"line":56,"column":39}},"22":{"start":{"line":61,"column":0},"end":{"line":61,"column":27}}},"branchMap":{"1":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":19}},{"start":{"line":34,"column":23},"end":{"line":34,"column":25}}]},"2":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":36,"column":2}},{"start":{"line":36,"column":2},"end":{"line":36,"column":2}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"4":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":14},"end":{"line":40,"column":27}},{"start":{"line":40,"column":31},"end":{"line":40,"column":55}}]},"5":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"6":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":6},"end":{"line":50,"column":6}},{"start":{"line":50,"column":6},"end":{"line":50,"column":6}}]},"7":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":42},"end":{"line":51,"column":50}},{"start":{"line":51,"column":53},"end":{"line":51,"column":57}}]}},"code":["\"use strict\";","","var mach = require(\"../index\");","var Promise = require(\"../utils/Promise\");","","mach.extend(require(\"../extensions/server\"));","","/**"," * A middleware that performs basic auth on the incoming request before passing"," * it downstream."," *"," * The `validate` argument must be a function that accepts two arguments: the"," * username and password given in the request. It must return the username to"," * use for the request (or simply `true` to indicate the given username is"," * valid) or a promise for such a value. The validated username is stored in the"," * `remoteUser` request variable."," *"," * When authorization fails, the client automatically receives a 401 Unauthorized"," * response with the appropriate challenge in the WWW-Authenticate header."," *"," * Example:"," *"," *   mach.basicAuth(app, function (user, pass) {"," *     // Return a boolean value to indicate the given credentials are valid."," *     return (user === 'admin' && pass === 'secret');"," *   });"," *"," *   mach.basicAuth(app, function (user, pass) {"," *     // Return a promise for the actual username to use."," *     return query('SELECT username FROM users WHERE handle=? AND password=?', user, pass);"," *   });"," */","function basicAuth(app, options) {","  options = options || {};","","  if (typeof options === \"function\") options = { validate: options };","","  if (typeof options.validate !== \"function\") throw new Error(\"mach.basicAuth needs a validation function\");","","  var realm = options.realm || \"Authorization Required\";","","  return function (conn) {","    if (conn.remoteUser) return conn.call(app); // Don't overwrite existing remoteUser.","","    var credentials = conn.auth.split(\":\", 2);","    var username = credentials[0],","        password = credentials[1];","","    return Promise.resolve(options.validate(username, password)).then(function (user) {","      if (user) {","        conn.remoteUser = user === true ? username : user;","        return conn.call(app);","      }","","      conn.response.headers[\"WWW-Authenticate\"] = \"Basic realm=\\\"\" + realm + \"\\\"\";","      conn.text(401, \"Not Authorized\");","    });","  };","}","","module.exports = basicAuth;"],"l":{"3":1,"4":1,"6":1,"33":1,"34":0,"36":0,"38":0,"40":0,"42":0,"43":0,"45":0,"46":0,"49":0,"50":0,"51":0,"52":0,"55":0,"56":0,"61":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/server.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/server.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":1,"62":1,"63":0,"64":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":33}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":16},"end":{"line":21,"column":28}}},"3":{"name":"(anonymous_3)","line":65,"loc":{"start":{"line":65,"column":17},"end":{"line":65,"column":50}}},"4":{"name":"(anonymous_4)","line":74,"loc":{"start":{"line":74,"column":50},"end":{"line":74,"column":75}}},"5":{"name":"(anonymous_5)","line":85,"loc":{"start":{"line":85,"column":16},"end":{"line":85,"column":44}}},"6":{"name":"(anonymous_6)","line":99,"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":32}}},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":39}}},"8":{"name":"(anonymous_8)","line":126,"loc":{"start":{"line":126,"column":12},"end":{"line":126,"column":36}}},"9":{"name":"(anonymous_9)","line":134,"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":36}}},"10":{"name":"(anonymous_10)","line":142,"loc":{"start":{"line":142,"column":12},"end":{"line":142,"column":36}}},"11":{"name":"(anonymous_11)","line":170,"loc":{"start":{"line":170,"column":12},"end":{"line":170,"column":39}}},"12":{"name":"(anonymous_12)","line":209,"loc":{"start":{"line":209,"column":17},"end":{"line":209,"column":42}}},"13":{"name":"(anonymous_13)","line":217,"loc":{"start":{"line":217,"column":18},"end":{"line":217,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":58}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":48}},"8":{"start":{"line":11,"column":0},"end":{"line":222,"column":2}},"9":{"start":{"line":12,"column":2},"end":{"line":12,"column":42}},"10":{"start":{"line":13,"column":2},"end":{"line":13,"column":63}},"11":{"start":{"line":14,"column":2},"end":{"line":14,"column":44}},"12":{"start":{"line":16,"column":2},"end":{"line":198,"column":5}},"13":{"start":{"line":22,"column":6},"end":{"line":22,"column":75}},"14":{"start":{"line":66,"column":6},"end":{"line":69,"column":7}},"15":{"start":{"line":67,"column":8},"end":{"line":67,"column":31}},"16":{"start":{"line":68,"column":8},"end":{"line":68,"column":26}},"17":{"start":{"line":71,"column":6},"end":{"line":71,"column":33}},"18":{"start":{"line":72,"column":6},"end":{"line":72,"column":53}},"19":{"start":{"line":74,"column":6},"end":{"line":78,"column":9}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":62}},"21":{"start":{"line":77,"column":8},"end":{"line":77,"column":74}},"22":{"start":{"line":86,"column":6},"end":{"line":89,"column":7}},"23":{"start":{"line":87,"column":8},"end":{"line":87,"column":26}},"24":{"start":{"line":88,"column":8},"end":{"line":88,"column":21}},"25":{"start":{"line":91,"column":6},"end":{"line":91,"column":27}},"26":{"start":{"line":92,"column":6},"end":{"line":92,"column":48}},"27":{"start":{"line":100,"column":6},"end":{"line":100,"column":69}},"28":{"start":{"line":114,"column":6},"end":{"line":118,"column":7}},"29":{"start":{"line":115,"column":8},"end":{"line":115,"column":29}},"30":{"start":{"line":117,"column":8},"end":{"line":117,"column":25}},"31":{"start":{"line":120,"column":6},"end":{"line":120,"column":59}},"32":{"start":{"line":120,"column":27},"end":{"line":120,"column":59}},"33":{"start":{"line":127,"column":6},"end":{"line":127,"column":47}},"34":{"start":{"line":128,"column":6},"end":{"line":128,"column":30}},"35":{"start":{"line":135,"column":6},"end":{"line":135,"column":46}},"36":{"start":{"line":136,"column":6},"end":{"line":136,"column":30}},"37":{"start":{"line":143,"column":6},"end":{"line":143,"column":53}},"38":{"start":{"line":145,"column":6},"end":{"line":149,"column":7}},"39":{"start":{"line":146,"column":8},"end":{"line":146,"column":29}},"40":{"start":{"line":148,"column":8},"end":{"line":148,"column":22}},"41":{"start":{"line":151,"column":6},"end":{"line":151,"column":103}},"42":{"start":{"line":151,"column":24},"end":{"line":151,"column":103}},"43":{"start":{"line":171,"column":6},"end":{"line":175,"column":7}},"44":{"start":{"line":172,"column":8},"end":{"line":172,"column":29}},"45":{"start":{"line":174,"column":8},"end":{"line":174,"column":25}},"46":{"start":{"line":177,"column":6},"end":{"line":177,"column":35}},"47":{"start":{"line":179,"column":6},"end":{"line":179,"column":67}},"48":{"start":{"line":179,"column":39},"end":{"line":179,"column":67}},"49":{"start":{"line":181,"column":6},"end":{"line":187,"column":7}},"50":{"start":{"line":182,"column":8},"end":{"line":182,"column":43}},"51":{"start":{"line":183,"column":13},"end":{"line":187,"column":7}},"52":{"start":{"line":184,"column":8},"end":{"line":184,"column":61}},"53":{"start":{"line":186,"column":8},"end":{"line":186,"column":53}},"54":{"start":{"line":189,"column":6},"end":{"line":189,"column":117}},"55":{"start":{"line":189,"column":40},"end":{"line":189,"column":117}},"56":{"start":{"line":191,"column":6},"end":{"line":195,"column":7}},"57":{"start":{"line":192,"column":8},"end":{"line":192,"column":76}},"58":{"start":{"line":193,"column":13},"end":{"line":195,"column":7}},"59":{"start":{"line":194,"column":8},"end":{"line":194,"column":76}},"60":{"start":{"line":200,"column":2},"end":{"line":200,"column":38}},"61":{"start":{"line":202,"column":2},"end":{"line":202,"column":54}},"62":{"start":{"line":204,"column":2},"end":{"line":221,"column":5}},"63":{"start":{"line":210,"column":6},"end":{"line":210,"column":67}},"64":{"start":{"line":218,"column":6},"end":{"line":218,"column":98}}},"branchMap":{"1":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":6},"end":{"line":66,"column":6}},{"start":{"line":66,"column":6},"end":{"line":66,"column":6}}]},"2":{"line":77,"type":"cond-expr","locations":[{"start":{"line":77,"column":28},"end":{"line":77,"column":64}},{"start":{"line":77,"column":67},"end":{"line":77,"column":73}}]},"3":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":6},"end":{"line":86,"column":6}},{"start":{"line":86,"column":6},"end":{"line":86,"column":6}}]},"4":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":20},"end":{"line":100,"column":48}},{"start":{"line":100,"column":52},"end":{"line":100,"column":60}},{"start":{"line":100,"column":64},"end":{"line":100,"column":67}}]},"5":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":6},"end":{"line":114,"column":6}},{"start":{"line":114,"column":6},"end":{"line":114,"column":6}}]},"6":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":6},"end":{"line":120,"column":6}},{"start":{"line":120,"column":6},"end":{"line":120,"column":6}}]},"7":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":6},"end":{"line":145,"column":6}},{"start":{"line":145,"column":6},"end":{"line":145,"column":6}}]},"8":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":6},"end":{"line":151,"column":6}},{"start":{"line":151,"column":6},"end":{"line":151,"column":6}}]},"9":{"line":151,"type":"cond-expr","locations":[{"start":{"line":151,"column":75},"end":{"line":151,"column":79}},{"start":{"line":151,"column":82},"end":{"line":151,"column":102}}]},"10":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":6},"end":{"line":171,"column":6}},{"start":{"line":171,"column":6},"end":{"line":171,"column":6}}]},"11":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":6},"end":{"line":179,"column":6}},{"start":{"line":179,"column":6},"end":{"line":179,"column":6}}]},"12":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":6},"end":{"line":181,"column":6}},{"start":{"line":181,"column":6},"end":{"line":181,"column":6}}]},"13":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":13},"end":{"line":183,"column":13}},{"start":{"line":183,"column":13},"end":{"line":183,"column":13}}]},"14":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":6},"end":{"line":189,"column":6}},{"start":{"line":189,"column":6},"end":{"line":189,"column":6}}]},"15":{"line":189,"type":"binary-expr","locations":[{"start":{"line":189,"column":10},"end":{"line":189,"column":22}},{"start":{"line":189,"column":26},"end":{"line":189,"column":38}}]},"16":{"line":189,"type":"binary-expr","locations":[{"start":{"line":189,"column":75},"end":{"line":189,"column":87}},{"start":{"line":189,"column":91},"end":{"line":189,"column":116}}]},"17":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":6},"end":{"line":191,"column":6}},{"start":{"line":191,"column":6},"end":{"line":191,"column":6}}]},"18":{"line":191,"type":"binary-expr","locations":[{"start":{"line":191,"column":10},"end":{"line":191,"column":24}},{"start":{"line":191,"column":28},"end":{"line":191,"column":40}}]},"19":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":45},"end":{"line":192,"column":59}},{"start":{"line":192,"column":63},"end":{"line":192,"column":75}}]},"20":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":13},"end":{"line":193,"column":13}},{"start":{"line":193,"column":13},"end":{"line":193,"column":13}}]},"21":{"line":218,"type":"cond-expr","locations":[{"start":{"line":218,"column":29},"end":{"line":218,"column":60}},{"start":{"line":218,"column":63},"end":{"line":218,"column":97}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var d = require(\"describe-property\");","var objectAssign = require(\"object-assign\");","var getMimeType = require(\"../utils/getMimeType\");","var filterProperties = require(\"../utils/filterProperties\");","var stringifyCookie = require(\"../utils/stringifyCookie\");","var saveToDisk = require(\"../utils/saveToDisk\");","","module.exports = function (mach) {","  mach.bind = require(\"../utils/bindApp\");","  mach.createConnection = require(\"../utils/createConnection\");","  mach.serve = require(\"../utils/serveApp\");","","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * True if the request uses XMLHttpRequest, false otherwise.","     */","    isXHR: d.gs(function () {","      return this.request.headers[\"X-Requested-With\"] === \"XMLHttpRequest\";","    }),","","    /**","     * A high-level method that returns a promise for an object that is the","     * union of parameters contained in the request body and query string.","     *","     * The paramTypes argument may be used to filter parameters. It functions","     * like a whitelist of acceptable parameters and increases the security of","     * your app by not returning any parameters that you do not specify.","     *","     *   // This function parses a list of comma-separated values in","     *   // a request parameter into an array.","     *   function parseList(value) {","     *     return value.split(',');","     *   }","     *","     *   function app(conn) {","     *     return conn.getParams({","     *       name: String,","     *       age: Number,","     *       hobbies: parseList","     *     }).then(function (params) {","     *       // params.name will be a string, params.age a number, and","     *       // params.hobbies an array if they were provided in the","     *       // request. params won't contain any other properties.","     *     });","     *   }","     *","     * Of course, paramTypes may be omitted entirely to get a hash of all parameters.","     * ","     * The maxLength argument is passed directly to the request's parseContent method.","     *","     *   var maxUploadLimit = Math.pow(2, 20); // 1 mb","     *","     *   function app(conn) {","     *     return conn.getParams(maxUploadLimit).then(function (params) {","     *       // params is the union of query and request content params","     *     });","     *   }","     *","     * Note: Content parameters take precedence over query parameters with the same name.","     */","    getParams: d(function (paramTypes, maxLength) {","      if (typeof paramTypes !== \"object\") {","        maxLength = paramTypes;","        paramTypes = null;","      }","","      var request = this.request;","      var queryParams = objectAssign({}, this.query);","","      return request.parseContent(maxLength).then(function (contentParams) {","        // Content params take precedence over query params.","        var params = objectAssign(queryParams, contentParams);","        return paramTypes ? filterProperties(params, paramTypes) : params;","      });","    }),","","    /**","     * Redirects the client to the given location. If status is not","     * given, it defaults to 302 Found.","     */","    redirect: d(function (status, location) {","      if (typeof status !== \"number\") {","        location = status;","        status = 302;","      }","","      this.status = status;","      this.response.headers.Location = location;","    }),","","    /**","     * Redirects the client back to the URL they just came from, or","     * to the given location if it isn't known.","     */","    back: d(function (location) {","      this.redirect(this.request.headers.Referer || location || \"/\");","    }),","","    /**","     * A quick way to write the status and/or content to the response.","     *","     * Examples:","     *","     *   conn.send(404);","     *   conn.send(404, 'Not Found');","     *   conn.send('Hello world');","     *   conn.send(fs.createReadStream('welcome.txt'));","     */","    send: d(function (status, content) {","      if (typeof status === \"number\") {","        this.status = status;","      } else {","        content = status;","      }","","      if (content != null) this.response.content = content;","    }),","","    /**","     * Sends the given text in a text/plain response.","     */","    text: d(function (status, text) {","      this.response.contentType = \"text/plain\";","      this.send(status, text);","    }),","","    /**","     * Sends the given HTML in a text/html response.","     */","    html: d(function (status, html) {","      this.response.contentType = \"text/html\";","      this.send(status, html);","    }),","","    /**","     * Sends the given JSON in an application/json response.","     */","    json: d(function (status, json) {","      this.response.contentType = \"application/json\";","","      if (typeof status === \"number\") {","        this.status = status;","      } else {","        json = status;","      }","","      if (json != null) this.response.content = typeof json === \"string\" ? json : JSON.stringify(json);","    }),","","    /**","     * Sends a file to the client with the given options. The following","     * options are available:","     *","     * - content/path   The raw file content as a string, Buffer, stream, or","     *                  path to a file on disk","     * - type           The Content-Type of the file. Defaults to a guess based","     *                  on the file extension when a file path is given","     * - length/size    The Content-Length of the file, if it's known. Defaults","     *                  to the size of the file when a file path is given","     *","     * Examples:","     *","     *   response.file('path/to/file.txt');","     *   response.file(200, 'path/to/file.txt');","     */","    file: d(function (status, options) {","      if (typeof status === \"number\") {","        this.status = status;","      } else {","        options = status;","      }","","      var response = this.response;","","      if (typeof options === \"string\") options = { path: options };","","      if (options.content) {","        response.content = options.content;","      } else if (typeof options.path === \"string\") {","        response.content = fs.createReadStream(options.path);","      } else {","        throw new Error(\"Missing file content/path\");","      }","","      if (options.type || options.path) response.headers[\"Content-Type\"] = options.type || getMimeType(options.path);","","      if (options.length || options.size) {","        response.headers[\"Content-Length\"] = options.length || options.size;","      } else if (typeof options.path === \"string\") {","        response.headers[\"Content-Length\"] = fs.statSync(options.path).size;","      }","    })","","  });","","  mach.extend(require(\"./multipart\"));","","  var _handlePart = mach.Message.prototype.handlePart;","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Sets a cookie with the given name and options.","     */","    setCookie: d(function (name, options) {","      this.addHeader(\"Set-Cookie\", stringifyCookie(name, options));","    }),","","    /**","     * Override the multipart extension's Message#handlePart to enable","     * streaming file uploads to disk when parsing multipart messages.","     */","    handlePart: d(function (part) {","      return part.filename ? saveToDisk(part, \"MachUpload-\") : _handlePart.apply(this, arguments);","    })","","  });","};"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":1,"13":1,"14":1,"16":1,"22":0,"66":0,"67":0,"68":0,"71":0,"72":0,"74":0,"76":0,"77":0,"86":0,"87":0,"88":0,"91":0,"92":0,"100":0,"114":0,"115":0,"117":0,"120":0,"127":0,"128":0,"135":0,"136":0,"143":0,"145":0,"146":0,"148":0,"151":0,"171":0,"172":0,"174":0,"177":0,"179":0,"181":0,"182":0,"183":0,"184":0,"186":0,"189":0,"191":0,"192":0,"193":0,"194":0,"200":1,"202":1,"204":1,"210":0,"218":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/getMimeType.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/getMimeType.js","s":{"1":1,"2":1,"3":1,"4":75,"5":103,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1},"b":{"1":[0,0,0,0]},"f":{"1":75,"2":103,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":31},"end":{"line":6,"column":47}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":26},"end":{"line":7,"column":41}}},"3":{"name":"getMimeType","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":40}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":18}},"3":{"start":{"line":6,"column":0},"end":{"line":10,"column":3}},"4":{"start":{"line":7,"column":2},"end":{"line":9,"column":5}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":25}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":46}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":29}},"8":{"start":{"line":15,"column":0},"end":{"line":18,"column":1}},"9":{"start":{"line":16,"column":2},"end":{"line":16,"column":38}},"10":{"start":{"line":17,"column":2},"end":{"line":17,"column":68}},"11":{"start":{"line":20,"column":0},"end":{"line":20,"column":29}}},"branchMap":{"1":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":9},"end":{"line":17,"column":14}},{"start":{"line":17,"column":18},"end":{"line":17,"column":36}},{"start":{"line":17,"column":40},"end":{"line":17,"column":51}},{"start":{"line":17,"column":55},"end":{"line":17,"column":67}}]}},"code":["\"use strict\";","","var MimeTypes = require(\"../MimeTypes\");","var ExtTypes = {};","","Object.keys(MimeTypes).forEach(function (type) {","  MimeTypes[type].forEach(function (ext) {","    ExtTypes[ext] = type;","  });","});","","var DEFAULT_TYPE = \"application/octet-stream\";","var EXT_MATCHER = /\\.(\\w+)$/;","","function getMimeType(file, defaultType) {","  var match = file.match(EXT_MATCHER);","  return match && ExtTypes[match[1]] || defaultType || DEFAULT_TYPE;","}","","module.exports = getMimeType;"],"l":{"3":1,"4":1,"6":1,"7":75,"8":103,"12":1,"13":1,"15":1,"16":0,"17":0,"20":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/MimeTypes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/MimeTypes.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":89,"column":2}}},"branchMap":{},"code":["\"use strict\";","","/**"," * A map of MIME types to file extensions that correspond to that type."," */","module.exports = {","  \"text/html\": [\"html\", \"htm\", \"shtml\"],","  \"text/css\": [\"css\"],","  \"text/xml\": [\"xml\"],","  \"image/gif\": [\"gif\"],","  \"image/jpeg\": [\"jpeg\", \"jpg\"],","  \"application/javascript\": [\"js\"],","  \"application/atom+xml\": [\"atom\"],","  \"application/rss+xml\": [\"rss\"],","","  \"text/mathml\": [\"mml\"],","  \"text/plain\": [\"txt\"],","  \"text/vnd.sun.j2me.app-descriptor\": [\"jad\"],","  \"text/vnd.wap.wml\": [\"wml\"],","  \"text/x-component\": [\"htc\"],","","  \"image/png\": [\"png\"],","  \"image/tiff\": [\"tif\", \"tiff\"],","  \"image/vnd.wap.wbmp\": [\"wbmp\"],","  \"image/x-icon\": [\"ico\"],","  \"image/x-jng\": [\"jng\"],","  \"image/x-ms-bmp\": [\"bmp\"],","  \"image/svg+xml\": [\"svg\", \"svgz\"],","  \"image/webp\": [\"webp\"],","","  \"application/font-woff\": [\"woff\"],","  \"application/java-archive\": [\"jar\", \"war\", \"ear\"],","  \"application/json\": [\"json\"],","  \"application/mac-binhex40\": [\"hqx\"],","  \"application/msword\": [\"doc\"],","  \"application/pdf\": [\"pdf\"],","  \"application/postscript\": [\"ps\", \"eps\", \"ai\"],","  \"application/rtf\": [\"rtf\"],","  \"application/vnd.apple.mpegurl\": [\"m3u8\"],","  \"application/vnd.ms-excel\": [\"xls\"],","  \"application/vnd.ms-fontobject\": [\"eot\"],","  \"application/vnd.ms-powerpoint\": [\"ppt\"],","  \"application/vnd.wap.wmlc\": [\"wmlc\"],","  \"application/vnd.google-earth.kml+xml\": [\"kml\"],","  \"application/vnd.google-earth.kmz\": [\"kmz\"],","  \"application/x-7z-compressed\": [\"7z\"],","  \"application/x-cocoa\": [\"cco\"],","  \"application/x-java-archive-diff\": [\"jardiff\"],","  \"application/x-java-jnlp-file\": [\"jnlp\"],","  \"application/x-makeself\": [\"run\"],","  \"application/x-perl\": [\"pl\", \"pm\"],","  \"application/x-pilot\": [\"prc\", \"pdb\"],","  \"application/x-rar-compressed\": [\"rar\"],","  \"application/x-redhat-package-manager\": [\"rpm\"],","  \"application/x-sea\": [\"sea\"],","  \"application/x-shockwave-flash\": [\"swf\"],","  \"application/x-stuffit\": [\"sit\"],","  \"application/x-tcl\": [\"tcl\", \"tk\"],","  \"application/x-x509-ca-cert\": [\"der\", \"pem\", \"crt\"],","  \"application/x-xpinstall\": [\"xpi\"],","  \"application/xhtml+xml\": [\"xhtml\"],","  \"application/xspf+xml\": [\"xspf\"],","  \"application/zip\": [\"zip\"],","","  \"application/octet-stream\": [\"bin\", \"exe\", \"dll\", \"deb\", \"dmg\", \"iso\", \"img\", \"msi\", \"msp\", \"msm\"],","","  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": [\"docx\"],","  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\": [\"xlsx\"],","  \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": [\"pptx\"],","","  \"audio/midi\": [\"mid\", \"midi\", \"kar\"],","  \"audio/mpeg\": [\"mp3\"],","  \"audio/ogg\": [\"ogg\"],","  \"audio/x-m4a\": [\"m4a\"],","  \"audio/x-realaudio\": [\"ra\"],","","  \"video/3gpp\": [\"3gpp\", \"3gp\"],","  \"video/mp2t\": [\"ts\"],","  \"video/mp4\": [\"mp4\"],","  \"video/mpeg\": [\"mpeg\", \"mpg\"],","  \"video/quicktime\": [\"mov\"],","  \"video/webm\": [\"webm\"],","  \"video/x-flv\": [\"flv\"],","  \"video/x-m4v\": [\"m4v\"],","  \"video/x-mng\": [\"mng\"],","  \"video/x-ms-asf\": [\"asx\", \"asf\"],","  \"video/x-ms-wmv\": [\"wmv\"],","  \"video/x-msvideo\": [\"avi\"]","};"],"l":{"6":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/filterProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/filterProperties.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"filterProperties","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":49}}}},"statementMap":{"1":{"start":{"line":7,"column":0},"end":{"line":22,"column":1}},"2":{"start":{"line":8,"column":2},"end":{"line":8,"column":22}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":18}},"4":{"start":{"line":11,"column":2},"end":{"line":19,"column":3}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":35}},"6":{"start":{"line":14,"column":4},"end":{"line":18,"column":5}},"7":{"start":{"line":15,"column":6},"end":{"line":15,"column":37}},"8":{"start":{"line":17,"column":6},"end":{"line":17,"column":60}},"9":{"start":{"line":17,"column":31},"end":{"line":17,"column":60}},"10":{"start":{"line":21,"column":2},"end":{"line":21,"column":20}},"11":{"start":{"line":24,"column":0},"end":{"line":24,"column":34}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]},"2":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":34}},{"start":{"line":14,"column":38},"end":{"line":14,"column":69}}]},"3":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":6}},{"start":{"line":17,"column":6},"end":{"line":17,"column":6}}]}},"code":["\"use strict\";","","/**"," * Returns a shallow copy of the properties of the given object,"," * filtered by the functions in propertyTypes."," */","function filterProperties(object, propertyTypes) {","  var properties = {};","","  var type, value;","  for (var property in object) {","    type = propertyTypes[property];","","    if (typeof type === \"function\" && object.hasOwnProperty(property)) {","      value = type(object[property]);","","      if (value !== undefined) properties[property] = value;","    }","  }","","  return properties;","}","","module.exports = filterProperties;"],"l":{"7":1,"8":0,"10":0,"11":0,"12":0,"14":0,"15":0,"17":0,"21":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyCookie.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stringifyCookie.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stringifyCookie","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":40}}}},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":32,"column":1}},"2":{"start":{"line":15,"column":2},"end":{"line":15,"column":26}},"3":{"start":{"line":17,"column":2},"end":{"line":17,"column":64}},"4":{"start":{"line":17,"column":35},"end":{"line":17,"column":64}},"5":{"start":{"line":19,"column":2},"end":{"line":19,"column":88}},"6":{"start":{"line":21,"column":2},"end":{"line":21,"column":61}},"7":{"start":{"line":21,"column":22},"end":{"line":21,"column":61}},"8":{"start":{"line":23,"column":2},"end":{"line":23,"column":55}},"9":{"start":{"line":23,"column":20},"end":{"line":23,"column":55}},"10":{"start":{"line":25,"column":2},"end":{"line":25,"column":132}},"11":{"start":{"line":25,"column":23},"end":{"line":25,"column":132}},"12":{"start":{"line":27,"column":2},"end":{"line":27,"column":43}},"13":{"start":{"line":27,"column":22},"end":{"line":27,"column":43}},"14":{"start":{"line":29,"column":2},"end":{"line":29,"column":67}},"15":{"start":{"line":29,"column":44},"end":{"line":29,"column":67}},"16":{"start":{"line":31,"column":2},"end":{"line":31,"column":16}},"17":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":12},"end":{"line":15,"column":19}},{"start":{"line":15,"column":23},"end":{"line":15,"column":25}}]},"2":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":2}},{"start":{"line":17,"column":2},"end":{"line":17,"column":2}}]},"3":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":67},"end":{"line":19,"column":80}},{"start":{"line":19,"column":84},"end":{"line":19,"column":86}}]},"4":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"5":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"6":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"7":{"line":25,"type":"cond-expr","locations":[{"start":{"line":25,"column":84},"end":{"line":25,"column":113}},{"start":{"line":25,"column":116},"end":{"line":25,"column":131}}]},"8":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":2}},{"start":{"line":27,"column":2},"end":{"line":27,"column":2}}]},"9":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":29,"column":2}},{"start":{"line":29,"column":2},"end":{"line":29,"column":2}}]},"10":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":6},"end":{"line":29,"column":22}},{"start":{"line":29,"column":26},"end":{"line":29,"column":42}}]}},"code":["\"use strict\";","","/**"," * Creates a cookie string using the given options, which may be any of"," * the following:"," *"," * - value"," * - domain"," * - path"," * - expires"," * - secure"," * - httpOnly or HttpOnly"," */","function stringifyCookie(name, options) {","  options = options || {};","","  if (typeof options === \"string\") options = { value: options };","","  var cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(options.value || \"\");","","  if (options.domain) cookie += \"; domain=\" + options.domain;","","  if (options.path) cookie += \"; path=\" + options.path;","","  if (options.expires) cookie += \"; expires=\" + (options.expires instanceof Date) ? options.expires.toUTCString() : options.expires;","","  if (options.secure) cookie += \"; secure\";","","  if (options.httpOnly || options.HttpOnly) cookie += \"; HttpOnly\";","","  return cookie;","}","","module.exports = stringifyCookie;"],"l":{"14":1,"15":0,"17":0,"19":0,"21":0,"23":0,"25":0,"27":0,"29":0,"31":0,"34":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/saveToDisk.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/saveToDisk.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"saveToDisk","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":48}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":40}}},"4":{"name":"(anonymous_4)","line":22,"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":34}}},"5":{"name":"(anonymous_5)","line":23,"loc":{"start":{"line":23,"column":17},"end":{"line":23,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"5":{"start":{"line":8,"column":0},"end":{"line":35,"column":1}},"6":{"start":{"line":9,"column":2},"end":{"line":34,"column":5}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":34}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":45}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":44}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":17}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":32}},"12":{"start":{"line":17,"column":4},"end":{"line":20,"column":7}},"13":{"start":{"line":18,"column":6},"end":{"line":18,"column":27}},"14":{"start":{"line":19,"column":6},"end":{"line":19,"column":26}},"15":{"start":{"line":22,"column":4},"end":{"line":31,"column":7}},"16":{"start":{"line":23,"column":6},"end":{"line":30,"column":9}},"17":{"start":{"line":24,"column":8},"end":{"line":29,"column":12}},"18":{"start":{"line":33,"column":4},"end":{"line":33,"column":63}},"19":{"start":{"line":33,"column":46},"end":{"line":33,"column":63}},"20":{"start":{"line":37,"column":0},"end":{"line":37,"column":28}}},"branchMap":{"1":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var File = require(\"./File\");","var Promise = require(\"./Promise\");","var makeTemporaryPath = require(\"./makeTemporaryPath\");","","function saveToDisk(message, filePrefix) {","  return new Promise(function (resolve, reject) {","    var content = message.content;","    var path = makeTemporaryPath(filePrefix);","    var stream = fs.createWriteStream(path);","    var size = 0;","","    content.on(\"error\", reject);","","    content.on(\"data\", function (chunk) {","      size += chunk.length;","      stream.write(chunk);","    });","","    content.on(\"end\", function () {","      stream.end(function () {","        resolve(new File({","          path: path,","          name: message.filename,","          type: message.mediaType,","          size: size","        }));","      });","    });","","    if (typeof content.resume === \"function\") content.resume();","  });","}","","module.exports = saveToDisk;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"15":0,"17":0,"18":0,"19":0,"22":0,"23":0,"24":0,"33":0,"37":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/File.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/File.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"File","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":8,"column":1}},"2":{"start":{"line":4,"column":2},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":2},"end":{"line":5,"column":30}},"4":{"start":{"line":6,"column":2},"end":{"line":6,"column":30}},"5":{"start":{"line":7,"column":2},"end":{"line":7,"column":30}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":22}}},"branchMap":{},"code":["\"use strict\";","","function File(properties) {","  this.path = properties.path;","  this.name = properties.name;","  this.type = properties.type;","  this.size = properties.size;","}","","module.exports = File;"],"l":{"3":1,"4":0,"5":0,"6":0,"7":0,"10":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeTemporaryPath.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeTemporaryPath.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"makeTemporaryPath","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":6,"column":0},"end":{"line":15,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":2},"end":{"line":9,"column":61}},"6":{"start":{"line":10,"column":2},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":2},"end":{"line":11,"column":65}},"8":{"start":{"line":12,"column":2},"end":{"line":12,"column":68}},"9":{"start":{"line":14,"column":2},"end":{"line":14,"column":34}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}}},"branchMap":{"1":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":11},"end":{"line":7,"column":17}},{"start":{"line":7,"column":21},"end":{"line":7,"column":23}}]}},"code":["\"use strict\";","","var path = require(\"path\");","var TMP_DIR = require(\"os\").tmpDir();","","function makeTemporaryPath(prefix) {","  prefix = prefix || \"\";","","  var random = (Math.random() * 4294967296 + 1).toString(36);","  var now = new Date();","  var date = \"\" + now.getYear() + now.getMonth() + now.getDate();","  var name = [prefix, date, \"-\", process.pid, \"-\", random].join(\"\");","","  return path.join(TMP_DIR, name);","}","","module.exports = makeTemporaryPath;"],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"12":0,"14":0,"17":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/bindApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/bindApp.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"bindApp","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":61}},"2":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"3":{"start":{"line":11,"column":2},"end":{"line":11,"column":49}},"4":{"start":{"line":12,"column":2},"end":{"line":12,"column":43}},"5":{"start":{"line":13,"column":2},"end":{"line":13,"column":24}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}}},"branchMap":{},"code":["\"use strict\";","","var createRequestHandler = require(\"./createRequestHandler\");","","/**"," * Binds the given app to the \"request\" event of the given node HTTP server"," * so that it is called whenever the server receives a new request. Returns"," * the request handler function."," */","function bindApp(app, nodeServer) {","  var requestHandler = createRequestHandler(app);","  nodeServer.on(\"request\", requestHandler);","  return requestHandler;","}","","module.exports = bindApp;"],"l":{"3":1,"10":1,"11":0,"12":0,"13":0,"16":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createRequestHandler.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createRequestHandler.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"createRequestHandler","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}}},"2":{"name":"(anonymous_2)","line":23,"loc":{"start":{"line":23,"column":9},"end":{"line":23,"column":46}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":36}}},"4":{"name":"(anonymous_4)","line":45,"loc":{"start":{"line":45,"column":7},"end":{"line":45,"column":24}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":53}},"2":{"start":{"line":9,"column":0},"end":{"line":14,"column":2}},"3":{"start":{"line":22,"column":0},"end":{"line":51,"column":1}},"4":{"start":{"line":23,"column":2},"end":{"line":50,"column":4}},"5":{"start":{"line":24,"column":4},"end":{"line":24,"column":45}},"6":{"start":{"line":26,"column":4},"end":{"line":49,"column":7}},"7":{"start":{"line":27,"column":6},"end":{"line":27,"column":42}},"8":{"start":{"line":28,"column":6},"end":{"line":28,"column":75}},"9":{"start":{"line":29,"column":6},"end":{"line":29,"column":42}},"10":{"start":{"line":30,"column":6},"end":{"line":30,"column":42}},"11":{"start":{"line":32,"column":6},"end":{"line":32,"column":60}},"12":{"start":{"line":32,"column":30},"end":{"line":32,"column":60}},"13":{"start":{"line":34,"column":6},"end":{"line":34,"column":65}},"14":{"start":{"line":34,"column":25},"end":{"line":34,"column":65}},"15":{"start":{"line":36,"column":6},"end":{"line":36,"column":51}},"16":{"start":{"line":38,"column":6},"end":{"line":44,"column":7}},"17":{"start":{"line":39,"column":8},"end":{"line":39,"column":27}},"18":{"start":{"line":41,"column":8},"end":{"line":41,"column":69}},"19":{"start":{"line":41,"column":51},"end":{"line":41,"column":69}},"20":{"start":{"line":43,"column":8},"end":{"line":43,"column":35}},"21":{"start":{"line":46,"column":6},"end":{"line":46,"column":26}},"22":{"start":{"line":47,"column":6},"end":{"line":47,"column":68}},"23":{"start":{"line":48,"column":6},"end":{"line":48,"column":48}},"24":{"start":{"line":53,"column":0},"end":{"line":53,"column":38}}},"branchMap":{"1":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":26}},{"start":{"line":28,"column":30},"end":{"line":28,"column":74}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":6},"end":{"line":32,"column":6}},{"start":{"line":32,"column":6},"end":{"line":32,"column":6}}]},"3":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":10},"end":{"line":32,"column":17}},{"start":{"line":32,"column":21},"end":{"line":32,"column":28}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":6},"end":{"line":34,"column":6}},{"start":{"line":34,"column":6},"end":{"line":34,"column":6}}]},"5":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":38,"column":6}},{"start":{"line":38,"column":6},"end":{"line":38,"column":6}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]}},"code":["\"use strict\";","","/* jshint -W058 */","var createConnection = require(\"./createConnection\");","","/**"," * HTTP status codes that don't have entities."," */","var STATUS_WITHOUT_CONTENT = {","  100: true,","  101: true,","  204: true,","  304: true","};","","/**"," * Binds the given app to the \"request\" event of the given node HTTP server"," * so that it is called whenever the server receives a new request."," *"," * Returns the request handler function."," */","function createRequestHandler(app) {","  return function (nodeRequest, nodeResponse) {","    var conn = createConnection(nodeRequest);","","    conn.call(app).then(function () {","      var isHead = conn.method === \"HEAD\";","      var isEmpty = isHead || STATUS_WITHOUT_CONTENT[conn.status] === true;","      var headers = conn.response.headers;","      var content = conn.response.content;","","      if (isEmpty && !isHead) headers[\"Content-Length\"] = 0;","","      if (!headers.Date) headers.Date = new Date().toUTCString();","","      nodeResponse.writeHead(conn.status, headers);","","      if (isEmpty) {","        nodeResponse.end();","","        if (typeof content.destroy === \"function\") content.destroy();","      } else {","        content.pipe(nodeResponse);","      }","    }, function (error) {","      conn.onError(error);","      nodeResponse.writeHead(500, { \"Content-Type\": \"text/plain\" });","      nodeResponse.end(\"Internal Server Error\");","    });","  };","}","","module.exports = createRequestHandler;"],"l":{"4":1,"9":1,"22":1,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"30":0,"32":0,"34":0,"36":0,"38":0,"39":0,"41":0,"43":0,"46":0,"47":0,"48":0,"53":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createConnection.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createConnection.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"ensureTrailingColon","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}}},"2":{"name":"createLocation","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":37}}},"3":{"name":"createConnection","line":74,"loc":{"start":{"line":74,"column":0},"end":{"line":74,"column":39}}},"4":{"name":"(anonymous_4)","line":85,"loc":{"start":{"line":85,"column":26},"end":{"line":85,"column":38}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"3":{"start":{"line":9,"column":0},"end":{"line":12,"column":2}},"4":{"start":{"line":14,"column":0},"end":{"line":16,"column":1}},"5":{"start":{"line":15,"column":2},"end":{"line":15,"column":67}},"6":{"start":{"line":21,"column":0},"end":{"line":67,"column":1}},"7":{"start":{"line":22,"column":2},"end":{"line":22,"column":36}},"8":{"start":{"line":24,"column":2},"end":{"line":24,"column":15}},"9":{"start":{"line":25,"column":2},"end":{"line":35,"column":3}},"10":{"start":{"line":26,"column":4},"end":{"line":26,"column":24}},"11":{"start":{"line":27,"column":9},"end":{"line":35,"column":3}},"12":{"start":{"line":28,"column":4},"end":{"line":28,"column":60}},"13":{"start":{"line":29,"column":9},"end":{"line":35,"column":3}},"14":{"start":{"line":30,"column":4},"end":{"line":30,"column":82}},"15":{"start":{"line":31,"column":9},"end":{"line":35,"column":3}},"16":{"start":{"line":32,"column":4},"end":{"line":32,"column":79}},"17":{"start":{"line":34,"column":4},"end":{"line":34,"column":23}},"18":{"start":{"line":37,"column":2},"end":{"line":37,"column":11}},"19":{"start":{"line":38,"column":2},"end":{"line":45,"column":3}},"20":{"start":{"line":39,"column":4},"end":{"line":39,"column":58}},"21":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"22":{"start":{"line":41,"column":9},"end":{"line":45,"column":3}},"23":{"start":{"line":42,"column":4},"end":{"line":42,"column":24}},"24":{"start":{"line":43,"column":9},"end":{"line":45,"column":3}},"25":{"start":{"line":44,"column":4},"end":{"line":44,"column":35}},"26":{"start":{"line":47,"column":2},"end":{"line":47,"column":37}},"27":{"start":{"line":48,"column":2},"end":{"line":48,"column":30}},"28":{"start":{"line":49,"column":2},"end":{"line":49,"column":57}},"29":{"start":{"line":51,"column":2},"end":{"line":57,"column":3}},"30":{"start":{"line":52,"column":4},"end":{"line":56,"column":5}},"31":{"start":{"line":53,"column":6},"end":{"line":53,"column":38}},"32":{"start":{"line":54,"column":11},"end":{"line":56,"column":5}},"33":{"start":{"line":55,"column":6},"end":{"line":55,"column":72}},"34":{"start":{"line":59,"column":2},"end":{"line":59,"column":29}},"35":{"start":{"line":61,"column":2},"end":{"line":66,"column":5}},"36":{"start":{"line":74,"column":0},"end":{"line":90,"column":1}},"37":{"start":{"line":75,"column":2},"end":{"line":83,"column":5}},"38":{"start":{"line":85,"column":2},"end":{"line":87,"column":5}},"39":{"start":{"line":86,"column":4},"end":{"line":86,"column":19}},"40":{"start":{"line":89,"column":2},"end":{"line":89,"column":14}},"41":{"start":{"line":92,"column":0},"end":{"line":92,"column":34}}},"branchMap":{"1":{"line":15,"type":"cond-expr","locations":[{"start":{"line":15,"column":45},"end":{"line":15,"column":51}},{"start":{"line":15,"column":54},"end":{"line":15,"column":66}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"3":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":32}},{"start":{"line":25,"column":36},"end":{"line":25,"column":71}},{"start":{"line":25,"column":75},"end":{"line":25,"column":109}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":9},"end":{"line":27,"column":9}},{"start":{"line":27,"column":9},"end":{"line":27,"column":9}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":9},"end":{"line":29,"column":9}},{"start":{"line":29,"column":9},"end":{"line":29,"column":9}}]},"6":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":9},"end":{"line":31,"column":9}},{"start":{"line":31,"column":9},"end":{"line":31,"column":9}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"8":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":9},"end":{"line":41,"column":9}},{"start":{"line":41,"column":9},"end":{"line":41,"column":9}}]},"9":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":9},"end":{"line":43,"column":9}},{"start":{"line":43,"column":9},"end":{"line":43,"column":9}}]},"10":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":13},"end":{"line":49,"column":25}},{"start":{"line":49,"column":29},"end":{"line":49,"column":56}}]},"11":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":2},"end":{"line":51,"column":2}},{"start":{"line":51,"column":2},"end":{"line":51,"column":2}}]},"12":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"13":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":11},"end":{"line":54,"column":11}},{"start":{"line":54,"column":11},"end":{"line":54,"column":11}}]}},"code":["\"use strict\";","","var Connection = require(\"../Connection\");","var Location = require(\"../Location\");","","/**"," * Standard ports for HTTP protocols."," */","var STANDARD_PORTS = {","  \"http:\": \"80\",","  \"https:\": \"443\"","};","","function ensureTrailingColon(string) {","  return string[string.length - 1] === \":\" ? string : string + \":\";","}","","/**"," * Creates a new Location object that is reverse-proxy aware."," */","function createLocation(nodeRequest) {","  var headers = nodeRequest.headers;","","  var protocol;","  if (process.env.HTTPS === \"on\" || headers[\"x-forwarded-ssl\"] === \"on\" || headers[\"font-end-https\"] === \"on\") {","    protocol = \"https:\";","  } else if (headers[\"x-url-scheme\"]) {","    protocol = ensureTrailingColon(headers[\"x-url-scheme\"]);","  } else if (headers[\"x-forwarded-protocol\"]) {","    protocol = ensureTrailingColon(headers[\"x-forwarded-protocol\"].split(\",\")[0]);","  } else if (headers[\"x-forwarded-proto\"]) {","    protocol = ensureTrailingColon(headers[\"x-forwarded-proto\"].split(\",\")[0]);","  } else {","    protocol = \"http:\";","  }","","  var host;","  if (headers[\"x-forwarded-host\"]) {","    var hosts = headers[\"x-forwarded-host\"].split(/,\\s?/);","    host = hosts[hosts.length - 1];","  } else if (headers.host) {","    host = headers.host;","  } else if (process.env.SERVER_NAME) {","    host = process.env.SERVER_NAME;","  }","","  var hostParts = host.split(\":\", 2);","  var hostname = hostParts[0];","  var port = hostParts[1] || headers[\"x-forwarded-port\"];","","  if (port == null) {","    if (headers[\"x-forwarded-host\"]) {","      port = STANDARD_PORTS[protocol];","    } else if (headers[\"x-forwarded-proto\"]) {","      port = STANDARD_PORTS[headers[\"x-forwarded-proto\"].split(\",\")[0]];","    }","  }","","  var path = nodeRequest.url;","","  return new Location({","    protocol: protocol,","    hostname: hostname,","    port: port,","    path: path","  });","}","","/**"," * Creates a mach.Connection from the given node.js HTTP request and"," * server (optional) objects. This is a low-level method that is not"," * generally needed by application-level code."," */","function createConnection(nodeRequest) {","  var conn = new Connection({","    version: nodeRequest.httpVersion,","    method: nodeRequest.method,","    location: createLocation(nodeRequest),","    headers: nodeRequest.headers,","    content: nodeRequest,","    remoteHost: nodeRequest.connection.remoteAddress,","    remotePort: nodeRequest.connection.remotePort","  });","","  nodeRequest.on(\"close\", function () {","    conn.onClose();","  });","","  return conn;","}","","module.exports = createConnection;"],"l":{"3":1,"4":1,"9":1,"14":1,"15":0,"21":1,"22":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"34":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"54":0,"55":0,"59":0,"61":0,"74":1,"75":0,"85":0,"86":0,"89":0,"92":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/serveApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/serveApp.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"serveApp","line":37,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":32}}},"2":{"name":"shutdown","line":53,"loc":{"start":{"line":53,"column":2},"end":{"line":53,"column":22}}},"3":{"name":"(anonymous_3)","line":58,"loc":{"start":{"line":58,"column":27},"end":{"line":58,"column":39}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":31},"end":{"line":70,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":24}},"5":{"start":{"line":37,"column":0},"end":{"line":101,"column":1}},"6":{"start":{"line":38,"column":2},"end":{"line":38,"column":26}},"7":{"start":{"line":40,"column":2},"end":{"line":44,"column":3}},"8":{"start":{"line":41,"column":4},"end":{"line":41,"column":32}},"9":{"start":{"line":42,"column":9},"end":{"line":44,"column":3}},"10":{"start":{"line":43,"column":4},"end":{"line":43,"column":34}},"11":{"start":{"line":46,"column":2},"end":{"line":46,"column":17}},"12":{"start":{"line":47,"column":2},"end":{"line":51,"column":3}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":78}},"14":{"start":{"line":50,"column":4},"end":{"line":50,"column":37}},"15":{"start":{"line":53,"column":2},"end":{"line":68,"column":3}},"16":{"start":{"line":54,"column":4},"end":{"line":54,"column":59}},"17":{"start":{"line":54,"column":24},"end":{"line":54,"column":59}},"18":{"start":{"line":58,"column":4},"end":{"line":62,"column":31}},"19":{"start":{"line":59,"column":6},"end":{"line":59,"column":52}},"20":{"start":{"line":59,"column":26},"end":{"line":59,"column":52}},"21":{"start":{"line":61,"column":6},"end":{"line":61,"column":22}},"22":{"start":{"line":65,"column":4},"end":{"line":65,"column":18}},"23":{"start":{"line":67,"column":4},"end":{"line":67,"column":23}},"24":{"start":{"line":70,"column":2},"end":{"line":92,"column":5}},"25":{"start":{"line":71,"column":4},"end":{"line":71,"column":29}},"26":{"start":{"line":73,"column":4},"end":{"line":73,"column":37}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":38}},"28":{"start":{"line":76,"column":4},"end":{"line":91,"column":5}},"29":{"start":{"line":77,"column":6},"end":{"line":77,"column":41}},"30":{"start":{"line":78,"column":6},"end":{"line":78,"column":89}},"31":{"start":{"line":80,"column":6},"end":{"line":86,"column":7}},"32":{"start":{"line":81,"column":8},"end":{"line":81,"column":48}},"33":{"start":{"line":83,"column":8},"end":{"line":83,"column":56}},"34":{"start":{"line":85,"column":8},"end":{"line":85,"column":56}},"35":{"start":{"line":85,"column":26},"end":{"line":85,"column":56}},"36":{"start":{"line":88,"column":6},"end":{"line":88,"column":40}},"37":{"start":{"line":90,"column":6},"end":{"line":90,"column":27}},"38":{"start":{"line":94,"column":2},"end":{"line":98,"column":3}},"39":{"start":{"line":95,"column":4},"end":{"line":95,"column":38}},"40":{"start":{"line":97,"column":4},"end":{"line":97,"column":66}},"41":{"start":{"line":100,"column":2},"end":{"line":100,"column":20}},"42":{"start":{"line":103,"column":0},"end":{"line":103,"column":26}}},"branchMap":{"1":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":19}},{"start":{"line":38,"column":23},"end":{"line":38,"column":25}}]},"2":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"3":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":9},"end":{"line":42,"column":9}},{"start":{"line":42,"column":9},"end":{"line":42,"column":9}}]},"4":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":2},"end":{"line":47,"column":2}},{"start":{"line":47,"column":2},"end":{"line":47,"column":2}}]},"5":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":6},"end":{"line":47,"column":17}},{"start":{"line":47,"column":21},"end":{"line":47,"column":33}}]},"6":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":6},"end":{"line":59,"column":6}},{"start":{"line":59,"column":6},"end":{"line":59,"column":6}}]},"8":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":7},"end":{"line":62,"column":22}},{"start":{"line":62,"column":26},"end":{"line":62,"column":29}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"10":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"11":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"12":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":2},"end":{"line":94,"column":2}},{"start":{"line":94,"column":2},"end":{"line":94,"column":2}}]},"13":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":22},"end":{"line":97,"column":34}},{"start":{"line":97,"column":38},"end":{"line":97,"column":50}}]}},"code":["\"use strict\";","","var http = require(\"http\");","var https = require(\"https\");","var bindApp = require(\"./bindApp\");","","/**"," * The default port that node servers bind to."," */","var DEFAULT_PORT = 5000;","","/**"," * Creates and starts a node HTTP server that serves the given app."," *"," * Options may be any of the following:"," *"," * - host     The host name to accept connections on. Defaults to INADDR_ANY"," * - port     The port to listen on. Defaults to 5000"," * - socket   Unix socket file to listen on (trumps host/port)"," * - quiet    Set true to prevent the server from writing startup/shutdown"," *            messages to the console. Defaults to false"," * - timeout  The timeout to use when gracefully shutting down servers when"," *            SIGINT or SIGTERM are received. If a server doesn't close within"," *            this time (probably because it has open persistent connections)"," *            it is forecefully stopped when the process exits. Defaults to 100,"," *            meaning that servers forcefully shutdown after 100ms"," * - key      Private key to use for SSL (HTTPS only)"," * - cert     Public X509 certificate to use (HTTPS only)"," *"," * Note: When setting the timeout, be careful not to exceed any hard timeouts"," * specified by your PaaS. For example, Heroku's dyno manager will not permit"," * a timeout longer than ten seconds. See"," * https://devcenter.heroku.com/articles/dynos#graceful-shutdown-with-sigterm"," *"," * Returns the node HTTP server instance."," */","function serveApp(app, options) {","  options = options || {};","","  if (typeof options === \"number\") {","    options = { port: options };","  } else if (typeof options === \"string\") {","    options = { socket: options };","  }","","  var nodeServer;","  if (options.key && options.cert) {","    nodeServer = https.createServer({ key: options.key, cert: options.cert });","  } else {","    nodeServer = http.createServer();","  }","","  function shutdown() {","    if (!options.quiet) console.log(\">> Shutting down...\");","","    // Force the process to exit if the server doesn't","    // close all connections within the given timeout.","    var timer = setTimeout(function () {","      if (!options.quiet) console.log(\">> Exiting\");","","      process.exit(0);","    }, options.timeout || 100);","","    // Don't let this timer keep the event loop running.","    timer.unref();","","    nodeServer.close();","  }","","  nodeServer.once(\"listening\", function () {","    bindApp(app, nodeServer);","","    process.once(\"SIGINT\", shutdown);","    process.once(\"SIGTERM\", shutdown);","","    if (!options.quiet) {","      var address = nodeServer.address();","      var message = \">> mach web server started on node \" + process.versions.node + \"\\n\";","","      if (typeof address === \"string\") {","        message += \">> Listening on \" + address;","      } else {","        message += \">> Listening on \" + address.address;","","        if (address.port) message += \":\" + address.port;","      }","","      message += \", use CTRL+C to stop\";","","      console.log(message);","    }","  });","","  if (options.socket) {","    nodeServer.listen(options.socket);","  } else {","    nodeServer.listen(options.port || DEFAULT_PORT, options.host);","  }","","  return nodeServer;","}","","module.exports = serveApp;"],"l":{"3":1,"4":1,"5":1,"10":1,"37":1,"38":0,"40":0,"41":0,"42":0,"43":0,"46":0,"47":0,"48":0,"50":0,"53":1,"54":0,"58":0,"59":0,"61":0,"65":0,"67":0,"70":0,"71":0,"73":0,"74":0,"76":0,"77":0,"78":0,"80":0,"81":0,"83":0,"85":0,"88":0,"90":0,"94":0,"95":0,"97":0,"100":0,"103":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/multipart.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/multipart.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":17},"end":{"line":9,"column":33}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":48},"end":{"line":10,"column":78}}},"3":{"name":"partHandler","line":11,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":31}}},"4":{"name":"(anonymous_4)","line":17,"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":61}}},"5":{"name":"(anonymous_5)","line":31,"loc":{"start":{"line":31,"column":28},"end":{"line":31,"column":40}}},"6":{"name":"(anonymous_6)","line":42,"loc":{"start":{"line":42,"column":15},"end":{"line":42,"column":27}}},"7":{"name":"(anonymous_7)","line":53,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":31}}},"8":{"name":"(anonymous_8)","line":91,"loc":{"start":{"line":91,"column":18},"end":{"line":91,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":56}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":72}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"5":{"start":{"line":9,"column":0},"end":{"line":96,"column":2}},"6":{"start":{"line":10,"column":2},"end":{"line":23,"column":4}},"7":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"8":{"start":{"line":12,"column":6},"end":{"line":12,"column":38}},"9":{"start":{"line":16,"column":4},"end":{"line":20,"column":5}},"10":{"start":{"line":17,"column":6},"end":{"line":19,"column":9}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":88}},"12":{"start":{"line":22,"column":4},"end":{"line":22,"column":92}},"13":{"start":{"line":25,"column":2},"end":{"line":95,"column":5}},"14":{"start":{"line":32,"column":6},"end":{"line":33,"column":16}},"15":{"start":{"line":34,"column":6},"end":{"line":34,"column":104}},"16":{"start":{"line":43,"column":6},"end":{"line":44,"column":16}},"17":{"start":{"line":45,"column":6},"end":{"line":45,"column":124}},"18":{"start":{"line":54,"column":6},"end":{"line":54,"column":67}},"19":{"start":{"line":56,"column":6},"end":{"line":75,"column":7}},"20":{"start":{"line":58,"column":8},"end":{"line":58,"column":68}},"21":{"start":{"line":60,"column":8},"end":{"line":60,"column":21}},"22":{"start":{"line":61,"column":8},"end":{"line":68,"column":9}},"23":{"start":{"line":62,"column":10},"end":{"line":62,"column":72}},"24":{"start":{"line":65,"column":10},"end":{"line":65,"column":64}},"25":{"start":{"line":67,"column":10},"end":{"line":67,"column":61}},"26":{"start":{"line":67,"column":21},"end":{"line":67,"column":61}},"27":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"28":{"start":{"line":73,"column":10},"end":{"line":73,"column":65}},"29":{"start":{"line":77,"column":6},"end":{"line":77,"column":18}},"30":{"start":{"line":92,"column":6},"end":{"line":92,"column":76}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"2":{"line":34,"type":"cond-expr","locations":[{"start":{"line":34,"column":76},"end":{"line":34,"column":96}},{"start":{"line":34,"column":99},"end":{"line":34,"column":103}}]},"3":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":13},"end":{"line":34,"column":24}},{"start":{"line":34,"column":29},"end":{"line":34,"column":72}}]},"4":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":76},"end":{"line":34,"column":84}},{"start":{"line":34,"column":88},"end":{"line":34,"column":96}}]},"5":{"line":45,"type":"cond-expr","locations":[{"start":{"line":45,"column":86},"end":{"line":45,"column":94}},{"start":{"line":45,"column":97},"end":{"line":45,"column":123}}]},"6":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":13},"end":{"line":45,"column":31}},{"start":{"line":45,"column":36},"end":{"line":45,"column":82}}]},"7":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":6},"end":{"line":56,"column":6}},{"start":{"line":56,"column":6},"end":{"line":56,"column":6}}]},"8":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"9":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":10},"end":{"line":67,"column":10}},{"start":{"line":67,"column":10},"end":{"line":67,"column":10}}]},"10":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":8}},{"start":{"line":70,"column":8},"end":{"line":70,"column":8}}]},"11":{"line":92,"type":"cond-expr","locations":[{"start":{"line":92,"column":29},"end":{"line":92,"column":49}},{"start":{"line":92,"column":52},"end":{"line":92,"column":75}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var parseContent = require(\"../multipart/parseContent\");","","var BOUNDARY_MATCHER = /^multipart\\/.*boundary=(?:\"([^\"]+)\"|([^;]+))/im;","var NAME_MATCHER = /\\bname=\"([^\"]+)\"/i;","","module.exports = function (mach) {","  mach.Message.PARSERS[\"multipart/form-data\"] = function (message, maxLength) {","    function partHandler(part) {","      return message.handlePart(part);","    }","","    // If the content has been buffered, use the buffer.","    if (message.isBuffered) {","      return message.bufferContent().then(function (content) {","        return parseContent(content, message.multipartBoundary, maxLength, partHandler);","      });","    }","","    return parseContent(message.content, message.multipartBoundary, maxLength, partHandler);","  };","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * The value that was used as the boundary for multipart content. This","     * is present only in multipart messages.","     */","    multipartBoundary: d.gs(function () {","      var contentType = this.contentType,","          match;","      return contentType && (match = contentType.match(BOUNDARY_MATCHER)) ? match[1] || match[2] : null;","    }),","","    /**","     * The unique \"name\" or ID of this message, as given in its Content-Disposition","     * header. This is usually present only on messages that are part of a larger,","     * multipart message.","     */","    name: d.gs(function () {","      var contentDisposition = this.headers[\"Content-Disposition\"],","          match;","      return contentDisposition && (match = contentDisposition.match(NAME_MATCHER)) ? match[1] : this.headers[\"Content-ID\"];","    }),","","    /**","     * The filename of this message, as given in its Content-Disposition header.","     * This is usually present only on messages that are part of a larger, multipart","     * message and that originate from a file upload.","     */","    filename: d.gs(function () {","      var contentDisposition = this.headers[\"Content-Disposition\"];","","      if (contentDisposition) {","        // Match quoted filenames.","        var match = contentDisposition.match(/filename=\"([^;]*)\"/i);","","        var filename;","        if (match) {","          filename = decodeURIComponent(match[1].replace(/\\\\\"/g, \"\\\"\"));","        } else {","          // Match unquoted filenames.","          match = contentDisposition.match(/filename=([^;]+)/i);","","          if (match) filename = decodeURIComponent(match[1]);","        }","","        if (filename) {","          // Take the last part of the filename. This handles full Windows","          // paths given by IE (and possibly other dumb clients).","          return filename.substr(filename.lastIndexOf(\"\\\\\") + 1);","        }","      }","","      return null;","    }),","","    /**","     * A low-level hook responsible for handling Message objects embedded as multipart","     * objects inside this message. It should return the value to use for the given","     * message in the parameters hash. By default parts that originate from file uploads","     * are buffered and all others are converted to strings.","     *","     * This should be overridden if you want to specify some kind of custom handling","     * for multipart data, such as streaming it directly to a network file storage.","     * For example, the server extension overrides this method to save uploaded files","     * to a temporary location on disk.","     */","    handlePart: d(function (part) {","      return part.filename ? part.bufferContent() : part.stringifyContent();","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"9":1,"10":1,"11":1,"12":0,"16":0,"17":0,"18":0,"22":0,"25":1,"32":0,"34":0,"43":0,"45":0,"54":0,"56":0,"58":0,"60":0,"61":0,"62":0,"65":0,"67":0,"70":0,"73":0,"77":0,"92":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/multipart/parseContent.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/multipart/parseContent.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"defaultPartHandler","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":34}}},"2":{"name":"parseContent","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":65}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":48}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":38},"end":{"line":34,"column":54}}},"5":{"name":"(anonymous_5)","line":40,"loc":{"start":{"line":40,"column":23},"end":{"line":40,"column":40}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":72}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":42}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":33}},"6":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":29}},"8":{"start":{"line":19,"column":0},"end":{"line":64,"column":1}},"9":{"start":{"line":20,"column":2},"end":{"line":23,"column":3}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":28}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":21}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":50}},"13":{"start":{"line":26,"column":2},"end":{"line":26,"column":36}},"14":{"start":{"line":28,"column":2},"end":{"line":63,"column":5}},"15":{"start":{"line":29,"column":4},"end":{"line":29,"column":68}},"16":{"start":{"line":29,"column":38},"end":{"line":29,"column":68}},"17":{"start":{"line":31,"column":4},"end":{"line":31,"column":19}},"18":{"start":{"line":32,"column":4},"end":{"line":32,"column":26}},"19":{"start":{"line":34,"column":4},"end":{"line":36,"column":7}},"20":{"start":{"line":35,"column":6},"end":{"line":35,"column":43}},"21":{"start":{"line":38,"column":4},"end":{"line":38,"column":32}},"22":{"start":{"line":40,"column":4},"end":{"line":51,"column":7}},"23":{"start":{"line":41,"column":6},"end":{"line":41,"column":32}},"24":{"start":{"line":42,"column":6},"end":{"line":42,"column":30}},"25":{"start":{"line":44,"column":6},"end":{"line":50,"column":7}},"26":{"start":{"line":45,"column":8},"end":{"line":45,"column":54}},"27":{"start":{"line":47,"column":8},"end":{"line":47,"column":49}},"28":{"start":{"line":49,"column":8},"end":{"line":49,"column":140}},"29":{"start":{"line":49,"column":37},"end":{"line":49,"column":140}},"30":{"start":{"line":53,"column":4},"end":{"line":60,"column":7}},"31":{"start":{"line":54,"column":6},"end":{"line":59,"column":7}},"32":{"start":{"line":55,"column":8},"end":{"line":55,"column":24}},"33":{"start":{"line":56,"column":8},"end":{"line":56,"column":42}},"34":{"start":{"line":58,"column":8},"end":{"line":58,"column":76}},"35":{"start":{"line":62,"column":4},"end":{"line":62,"column":21}},"36":{"start":{"line":66,"column":0},"end":{"line":66,"column":30}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"2":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":16},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":25,"column":49}}]},"3":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":14},"end":{"line":26,"column":23}},{"start":{"line":26,"column":27},"end":{"line":26,"column":35}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":6},"end":{"line":44,"column":6}},{"start":{"line":44,"column":6},"end":{"line":44,"column":6}}]},"6":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":10},"end":{"line":44,"column":19}},{"start":{"line":44,"column":23},"end":{"line":44,"column":48}}]},"7":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]}},"code":["\"use strict\";","","var Stream = require(\"bufferedstream\");","var MaxLengthExceededError = require(\"../utils/MaxLengthExceededError\");","var resolveProperties = require(\"../utils/resolveProperties\");","var Promise = require(\"../utils/Promise\");","var Parser = require(\"./Parser\");","","function defaultPartHandler(part) {","  return part.parseContent();","}","","/**"," * Parses a multipart message and returns a promise for an object of"," * the parts it contains, keyed by the name of that part. The partHandler"," * argument is a function that should be used to resolve the value of"," * a part. It defaults to collecting all the content in a buffer."," */","function parseContent(content, boundary, maxLength, partHandler) {","  if (typeof maxLength === \"function\") {","    partHandler = maxLength;","    maxLength = null;","  }","","  partHandler = partHandler || defaultPartHandler;","  maxLength = maxLength || Infinity;","","  return new Promise(function (resolve, reject) {","    if (!(content instanceof Stream)) content = new Stream(content);","","    var parts = {};","    var contentLength = 0;","","    var parser = new Parser(boundary, function (part) {","      parts[part.name] = partHandler(part);","    });","","    content.on(\"error\", reject);","","    content.on(\"data\", function (chunk) {","      var length = chunk.length;","      contentLength += length;","","      if (maxLength && contentLength > maxLength) {","        reject(new MaxLengthExceededError(maxLength));","      } else {","        var parsedLength = parser.execute(chunk);","","        if (parsedLength !== length) reject(new Error(\"Error parsing multipart body: \" + parsedLength + \" of \" + length + \" bytes parsed\"));","      }","    });","","    content.on(\"end\", function () {","      try {","        parser.finish();","        resolve(resolveProperties(parts));","      } catch (error) {","        reject(new Error(\"Error parsing multipart body: \" + error.message));","      }","    });","","    content.resume();","  });","}","","module.exports = parseContent;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"19":1,"20":0,"21":0,"22":0,"25":0,"26":0,"28":0,"29":0,"31":0,"32":0,"34":0,"35":0,"38":0,"40":0,"41":0,"42":0,"44":0,"45":0,"47":0,"49":0,"53":0,"54":0,"55":0,"56":0,"58":0,"62":0,"66":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/resolveProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/resolveProperties.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"resolveProperties","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":30},"end":{"line":8,"column":45}}},"3":{"name":"(anonymous_3)","line":10,"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":29}}},"4":{"name":"(anonymous_4)","line":11,"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":39}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":5,"column":0},"end":{"line":17,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":33}},"4":{"start":{"line":8,"column":2},"end":{"line":16,"column":5}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":23}},"6":{"start":{"line":11,"column":4},"end":{"line":13,"column":7}},"7":{"start":{"line":12,"column":6},"end":{"line":12,"column":34}},"8":{"start":{"line":15,"column":4},"end":{"line":15,"column":18}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":35}}},"branchMap":{},"code":["\"use strict\";","","var Promise = require(\"./Promise\");","","function resolveProperties(object) {","  var keys = Object.keys(object);","","  return Promise.all(keys.map(function (key) {","    return object[key];","  })).then(function (values) {","    keys.forEach(function (key, index) {","      object[key] = values[index];","    });","","    return object;","  });","}","","module.exports = resolveProperties;"],"l":{"3":1,"5":1,"6":0,"8":0,"9":0,"11":0,"12":0,"15":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/multipart/Parser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/multipart/Parser.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":1,"145":0,"146":1,"147":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"154":1,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":1,"168":0,"169":1,"170":0,"171":1,"172":0,"173":0,"174":0,"175":1,"176":0,"177":1,"178":0,"179":1,"180":0,"181":1},"b":{"1":[0,0],"2":[0,0,0,0,0,0,0,0,0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"Parser","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":39}}},"2":{"name":"(anonymous_2)","line":56,"loc":{"start":{"line":56,"column":27},"end":{"line":56,"column":44}}},"3":{"name":"(anonymous_3)","line":256,"loc":{"start":{"line":256,"column":26},"end":{"line":256,"column":38}}},"4":{"name":"(anonymous_4)","line":260,"loc":{"start":{"line":260,"column":25},"end":{"line":260,"column":44}}},"5":{"name":"(anonymous_5)","line":264,"loc":{"start":{"line":264,"column":26},"end":{"line":264,"column":42}}},"6":{"name":"(anonymous_6)","line":268,"loc":{"start":{"line":268,"column":29},"end":{"line":268,"column":64}}},"7":{"name":"(anonymous_7)","line":276,"loc":{"start":{"line":276,"column":33},"end":{"line":276,"column":66}}},"8":{"name":"(anonymous_8)","line":290,"loc":{"start":{"line":290,"column":31},"end":{"line":290,"column":43}}},"9":{"name":"(anonymous_9)","line":297,"loc":{"start":{"line":297,"column":32},"end":{"line":297,"column":61}}},"10":{"name":"(anonymous_10)","line":301,"loc":{"start":{"line":301,"column":33},"end":{"line":301,"column":62}}},"11":{"name":"(anonymous_11)","line":305,"loc":{"start":{"line":305,"column":31},"end":{"line":305,"column":43}}},"12":{"name":"(anonymous_12)","line":311,"loc":{"start":{"line":311,"column":32},"end":{"line":311,"column":44}}},"13":{"name":"(anonymous_13)","line":315,"loc":{"start":{"line":315,"column":30},"end":{"line":315,"column":59}}},"14":{"name":"(anonymous_14)","line":319,"loc":{"start":{"line":319,"column":29},"end":{"line":319,"column":41}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":10}},"5":{"start":{"line":12,"column":0},"end":{"line":25,"column":2}},"6":{"start":{"line":27,"column":0},"end":{"line":27,"column":10}},"7":{"start":{"line":28,"column":0},"end":{"line":31,"column":2}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":12}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":12}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":15}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":16}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":15}},"13":{"start":{"line":39,"column":0},"end":{"line":54,"column":1}},"14":{"start":{"line":40,"column":2},"end":{"line":40,"column":53}},"15":{"start":{"line":41,"column":2},"end":{"line":41,"column":59}},"16":{"start":{"line":42,"column":2},"end":{"line":42,"column":26}},"17":{"start":{"line":44,"column":2},"end":{"line":44,"column":31}},"18":{"start":{"line":45,"column":2},"end":{"line":45,"column":58}},"19":{"start":{"line":45,"column":12},"end":{"line":45,"column":58}},"20":{"start":{"line":47,"column":2},"end":{"line":47,"column":23}},"21":{"start":{"line":48,"column":2},"end":{"line":48,"column":20}},"22":{"start":{"line":49,"column":2},"end":{"line":49,"column":17}},"23":{"start":{"line":51,"column":2},"end":{"line":51,"column":98}},"24":{"start":{"line":51,"column":41},"end":{"line":51,"column":98}},"25":{"start":{"line":53,"column":2},"end":{"line":53,"column":28}},"26":{"start":{"line":56,"column":0},"end":{"line":254,"column":2}},"27":{"start":{"line":57,"column":2},"end":{"line":68,"column":9}},"28":{"start":{"line":70,"column":2},"end":{"line":243,"column":3}},"29":{"start":{"line":71,"column":4},"end":{"line":71,"column":17}},"30":{"start":{"line":73,"column":4},"end":{"line":242,"column":5}},"31":{"start":{"line":75,"column":8},"end":{"line":75,"column":18}},"32":{"start":{"line":76,"column":8},"end":{"line":76,"column":33}},"33":{"start":{"line":79,"column":8},"end":{"line":93,"column":9}},"34":{"start":{"line":80,"column":10},"end":{"line":82,"column":11}},"35":{"start":{"line":81,"column":12},"end":{"line":81,"column":21}},"36":{"start":{"line":83,"column":10},"end":{"line":83,"column":18}},"37":{"start":{"line":84,"column":10},"end":{"line":84,"column":16}},"38":{"start":{"line":85,"column":15},"end":{"line":93,"column":9}},"39":{"start":{"line":86,"column":10},"end":{"line":88,"column":11}},"40":{"start":{"line":87,"column":12},"end":{"line":87,"column":21}},"41":{"start":{"line":89,"column":10},"end":{"line":89,"column":20}},"42":{"start":{"line":90,"column":10},"end":{"line":90,"column":38}},"43":{"start":{"line":91,"column":10},"end":{"line":91,"column":39}},"44":{"start":{"line":92,"column":10},"end":{"line":92,"column":16}},"45":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"46":{"start":{"line":96,"column":10},"end":{"line":96,"column":19}},"47":{"start":{"line":98,"column":8},"end":{"line":98,"column":16}},"48":{"start":{"line":99,"column":8},"end":{"line":99,"column":14}},"49":{"start":{"line":101,"column":8},"end":{"line":101,"column":31}},"50":{"start":{"line":102,"column":8},"end":{"line":102,"column":36}},"51":{"start":{"line":103,"column":8},"end":{"line":103,"column":18}},"52":{"start":{"line":106,"column":8},"end":{"line":110,"column":9}},"53":{"start":{"line":107,"column":10},"end":{"line":107,"column":36}},"54":{"start":{"line":108,"column":10},"end":{"line":108,"column":40}},"55":{"start":{"line":109,"column":10},"end":{"line":109,"column":16}},"56":{"start":{"line":112,"column":8},"end":{"line":112,"column":16}},"57":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"58":{"start":{"line":114,"column":10},"end":{"line":114,"column":16}},"59":{"start":{"line":117,"column":8},"end":{"line":125,"column":9}},"60":{"start":{"line":118,"column":10},"end":{"line":121,"column":11}},"61":{"start":{"line":120,"column":12},"end":{"line":120,"column":21}},"62":{"start":{"line":122,"column":10},"end":{"line":122,"column":59}},"63":{"start":{"line":123,"column":10},"end":{"line":123,"column":39}},"64":{"start":{"line":124,"column":10},"end":{"line":124,"column":16}},"65":{"start":{"line":127,"column":8},"end":{"line":127,"column":20}},"66":{"start":{"line":128,"column":8},"end":{"line":131,"column":9}},"67":{"start":{"line":130,"column":10},"end":{"line":130,"column":19}},"68":{"start":{"line":132,"column":8},"end":{"line":132,"column":14}},"69":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"70":{"start":{"line":135,"column":10},"end":{"line":135,"column":16}},"71":{"start":{"line":137,"column":8},"end":{"line":137,"column":37}},"72":{"start":{"line":138,"column":8},"end":{"line":138,"column":31}},"73":{"start":{"line":141,"column":8},"end":{"line":145,"column":9}},"74":{"start":{"line":142,"column":10},"end":{"line":142,"column":60}},"75":{"start":{"line":143,"column":10},"end":{"line":143,"column":38}},"76":{"start":{"line":144,"column":10},"end":{"line":144,"column":45}},"77":{"start":{"line":146,"column":8},"end":{"line":146,"column":14}},"78":{"start":{"line":148,"column":8},"end":{"line":150,"column":9}},"79":{"start":{"line":149,"column":10},"end":{"line":149,"column":19}},"80":{"start":{"line":151,"column":8},"end":{"line":151,"column":37}},"81":{"start":{"line":152,"column":8},"end":{"line":152,"column":14}},"82":{"start":{"line":154,"column":8},"end":{"line":156,"column":9}},"83":{"start":{"line":155,"column":10},"end":{"line":155,"column":19}},"84":{"start":{"line":157,"column":8},"end":{"line":157,"column":37}},"85":{"start":{"line":158,"column":8},"end":{"line":158,"column":34}},"86":{"start":{"line":159,"column":8},"end":{"line":159,"column":14}},"87":{"start":{"line":161,"column":8},"end":{"line":161,"column":28}},"88":{"start":{"line":162,"column":8},"end":{"line":162,"column":34}},"89":{"start":{"line":165,"column":8},"end":{"line":165,"column":26}},"90":{"start":{"line":167,"column":8},"end":{"line":175,"column":9}},"91":{"start":{"line":169,"column":10},"end":{"line":169,"column":27}},"92":{"start":{"line":170,"column":10},"end":{"line":172,"column":11}},"93":{"start":{"line":171,"column":12},"end":{"line":171,"column":32}},"94":{"start":{"line":173,"column":10},"end":{"line":173,"column":27}},"95":{"start":{"line":174,"column":10},"end":{"line":174,"column":23}},"96":{"start":{"line":177,"column":8},"end":{"line":219,"column":9}},"97":{"start":{"line":178,"column":10},"end":{"line":185,"column":11}},"98":{"start":{"line":179,"column":12},"end":{"line":181,"column":13}},"99":{"start":{"line":180,"column":14},"end":{"line":180,"column":61}},"100":{"start":{"line":182,"column":12},"end":{"line":182,"column":20}},"101":{"start":{"line":184,"column":12},"end":{"line":184,"column":22}},"102":{"start":{"line":186,"column":15},"end":{"line":219,"column":9}},"103":{"start":{"line":187,"column":10},"end":{"line":187,"column":18}},"104":{"start":{"line":188,"column":10},"end":{"line":196,"column":11}},"105":{"start":{"line":190,"column":12},"end":{"line":190,"column":37}},"106":{"start":{"line":191,"column":17},"end":{"line":196,"column":11}},"107":{"start":{"line":193,"column":12},"end":{"line":193,"column":37}},"108":{"start":{"line":195,"column":12},"end":{"line":195,"column":22}},"109":{"start":{"line":197,"column":15},"end":{"line":219,"column":9}},"110":{"start":{"line":198,"column":10},"end":{"line":218,"column":11}},"111":{"start":{"line":199,"column":12},"end":{"line":199,"column":22}},"112":{"start":{"line":200,"column":12},"end":{"line":207,"column":13}},"113":{"start":{"line":202,"column":14},"end":{"line":202,"column":40}},"114":{"start":{"line":203,"column":14},"end":{"line":203,"column":40}},"115":{"start":{"line":204,"column":14},"end":{"line":204,"column":42}},"116":{"start":{"line":205,"column":14},"end":{"line":205,"column":43}},"117":{"start":{"line":206,"column":14},"end":{"line":206,"column":20}},"118":{"start":{"line":208,"column":17},"end":{"line":218,"column":11}},"119":{"start":{"line":209,"column":12},"end":{"line":215,"column":13}},"120":{"start":{"line":210,"column":14},"end":{"line":210,"column":40}},"121":{"start":{"line":212,"column":14},"end":{"line":212,"column":28}},"122":{"start":{"line":214,"column":14},"end":{"line":214,"column":24}},"123":{"start":{"line":217,"column":12},"end":{"line":217,"column":22}},"124":{"start":{"line":221,"column":8},"end":{"line":235,"column":9}},"125":{"start":{"line":224,"column":10},"end":{"line":224,"column":36}},"126":{"start":{"line":225,"column":15},"end":{"line":235,"column":9}},"127":{"start":{"line":228,"column":10},"end":{"line":228,"column":63}},"128":{"start":{"line":229,"column":10},"end":{"line":229,"column":24}},"129":{"start":{"line":230,"column":10},"end":{"line":230,"column":36}},"130":{"start":{"line":234,"column":10},"end":{"line":234,"column":14}},"131":{"start":{"line":237,"column":8},"end":{"line":237,"column":14}},"132":{"start":{"line":239,"column":8},"end":{"line":239,"column":14}},"133":{"start":{"line":241,"column":8},"end":{"line":241,"column":17}},"134":{"start":{"line":245,"column":2},"end":{"line":245,"column":42}},"135":{"start":{"line":246,"column":2},"end":{"line":246,"column":43}},"136":{"start":{"line":247,"column":2},"end":{"line":247,"column":40}},"137":{"start":{"line":249,"column":2},"end":{"line":249,"column":21}},"138":{"start":{"line":250,"column":2},"end":{"line":250,"column":21}},"139":{"start":{"line":251,"column":2},"end":{"line":251,"column":21}},"140":{"start":{"line":253,"column":2},"end":{"line":253,"column":21}},"141":{"start":{"line":256,"column":0},"end":{"line":258,"column":2}},"142":{"start":{"line":257,"column":2},"end":{"line":257,"column":101}},"143":{"start":{"line":257,"column":28},"end":{"line":257,"column":101}},"144":{"start":{"line":260,"column":0},"end":{"line":262,"column":2}},"145":{"start":{"line":261,"column":2},"end":{"line":261,"column":26}},"146":{"start":{"line":264,"column":0},"end":{"line":266,"column":2}},"147":{"start":{"line":265,"column":2},"end":{"line":265,"column":29}},"148":{"start":{"line":268,"column":0},"end":{"line":274,"column":2}},"149":{"start":{"line":269,"column":2},"end":{"line":269,"column":51}},"150":{"start":{"line":269,"column":44},"end":{"line":269,"column":51}},"151":{"start":{"line":271,"column":2},"end":{"line":271,"column":69}},"152":{"start":{"line":273,"column":2},"end":{"line":273,"column":50}},"153":{"start":{"line":273,"column":20},"end":{"line":273,"column":50}},"154":{"start":{"line":276,"column":0},"end":{"line":288,"column":2}},"155":{"start":{"line":277,"column":2},"end":{"line":277,"column":27}},"156":{"start":{"line":279,"column":2},"end":{"line":287,"column":3}},"157":{"start":{"line":280,"column":4},"end":{"line":286,"column":5}},"158":{"start":{"line":281,"column":6},"end":{"line":281,"column":60}},"159":{"start":{"line":282,"column":6},"end":{"line":282,"column":21}},"160":{"start":{"line":284,"column":6},"end":{"line":284,"column":49}},"161":{"start":{"line":285,"column":6},"end":{"line":285,"column":24}},"162":{"start":{"line":290,"column":0},"end":{"line":295,"column":2}},"163":{"start":{"line":291,"column":2},"end":{"line":291,"column":30}},"164":{"start":{"line":292,"column":2},"end":{"line":292,"column":41}},"165":{"start":{"line":293,"column":2},"end":{"line":293,"column":24}},"166":{"start":{"line":294,"column":2},"end":{"line":294,"column":25}},"167":{"start":{"line":297,"column":0},"end":{"line":299,"column":2}},"168":{"start":{"line":298,"column":2},"end":{"line":298,"column":57}},"169":{"start":{"line":301,"column":0},"end":{"line":303,"column":2}},"170":{"start":{"line":302,"column":2},"end":{"line":302,"column":58}},"171":{"start":{"line":305,"column":0},"end":{"line":309,"column":2}},"172":{"start":{"line":306,"column":2},"end":{"line":306,"column":60}},"173":{"start":{"line":307,"column":2},"end":{"line":307,"column":24}},"174":{"start":{"line":308,"column":2},"end":{"line":308,"column":25}},"175":{"start":{"line":311,"column":0},"end":{"line":313,"column":2}},"176":{"start":{"line":312,"column":2},"end":{"line":312,"column":26}},"177":{"start":{"line":315,"column":0},"end":{"line":317,"column":2}},"178":{"start":{"line":316,"column":2},"end":{"line":316,"column":53}},"179":{"start":{"line":319,"column":0},"end":{"line":321,"column":2}},"180":{"start":{"line":320,"column":2},"end":{"line":320,"column":21}},"181":{"start":{"line":323,"column":0},"end":{"line":323,"column":24}}},"branchMap":{"1":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":2},"end":{"line":51,"column":2}},{"start":{"line":51,"column":2},"end":{"line":51,"column":2}}]},"2":{"line":73,"type":"switch","locations":[{"start":{"line":74,"column":6},"end":{"line":76,"column":33}},{"start":{"line":78,"column":6},"end":{"line":99,"column":14}},{"start":{"line":100,"column":6},"end":{"line":103,"column":18}},{"start":{"line":105,"column":6},"end":{"line":132,"column":14}},{"start":{"line":133,"column":6},"end":{"line":138,"column":31}},{"start":{"line":140,"column":6},"end":{"line":146,"column":14}},{"start":{"line":147,"column":6},"end":{"line":152,"column":14}},{"start":{"line":153,"column":6},"end":{"line":159,"column":14}},{"start":{"line":160,"column":6},"end":{"line":162,"column":34}},{"start":{"line":164,"column":6},"end":{"line":237,"column":14}},{"start":{"line":238,"column":6},"end":{"line":239,"column":14}},{"start":{"line":240,"column":6},"end":{"line":241,"column":17}}]},"3":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":8}},{"start":{"line":79,"column":8},"end":{"line":79,"column":8}}]},"4":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":10},"end":{"line":80,"column":10}},{"start":{"line":80,"column":10},"end":{"line":80,"column":10}}]},"5":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":15},"end":{"line":85,"column":15}},{"start":{"line":85,"column":15},"end":{"line":85,"column":15}}]},"6":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":10},"end":{"line":86,"column":10}},{"start":{"line":86,"column":10},"end":{"line":86,"column":10}}]},"7":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]},"8":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"9":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"10":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":117,"column":8}},{"start":{"line":117,"column":8},"end":{"line":117,"column":8}}]},"11":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":10},"end":{"line":118,"column":10}},{"start":{"line":118,"column":10},"end":{"line":118,"column":10}}]},"12":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"13":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":12},"end":{"line":128,"column":19}},{"start":{"line":128,"column":23},"end":{"line":128,"column":31}}]},"14":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":8}},{"start":{"line":134,"column":8},"end":{"line":134,"column":8}}]},"15":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"16":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":8},"end":{"line":148,"column":8}},{"start":{"line":148,"column":8},"end":{"line":148,"column":8}}]},"17":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"18":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":8}},{"start":{"line":167,"column":8},"end":{"line":167,"column":8}}]},"19":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":17},"end":{"line":170,"column":32}},{"start":{"line":170,"column":36},"end":{"line":170,"column":64}}]},"20":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":8}},{"start":{"line":177,"column":8},"end":{"line":177,"column":8}}]},"21":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":10},"end":{"line":178,"column":10}},{"start":{"line":178,"column":10},"end":{"line":178,"column":10}}]},"22":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":12}},{"start":{"line":179,"column":12},"end":{"line":179,"column":12}}]},"23":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":15},"end":{"line":186,"column":15}},{"start":{"line":186,"column":15},"end":{"line":186,"column":15}}]},"24":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":10},"end":{"line":188,"column":10}},{"start":{"line":188,"column":10},"end":{"line":188,"column":10}}]},"25":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":17},"end":{"line":191,"column":17}},{"start":{"line":191,"column":17},"end":{"line":191,"column":17}}]},"26":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":15},"end":{"line":197,"column":15}},{"start":{"line":197,"column":15},"end":{"line":197,"column":15}}]},"27":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":10},"end":{"line":198,"column":10}},{"start":{"line":198,"column":10},"end":{"line":198,"column":10}}]},"28":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":12},"end":{"line":200,"column":12}},{"start":{"line":200,"column":12},"end":{"line":200,"column":12}}]},"29":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":17},"end":{"line":208,"column":17}},{"start":{"line":208,"column":17},"end":{"line":208,"column":17}}]},"30":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":12},"end":{"line":209,"column":12}},{"start":{"line":209,"column":12},"end":{"line":209,"column":12}}]},"31":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":8},"end":{"line":221,"column":8}},{"start":{"line":221,"column":8},"end":{"line":221,"column":8}}]},"32":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":15},"end":{"line":225,"column":15}},{"start":{"line":225,"column":15},"end":{"line":225,"column":15}}]},"33":{"line":257,"type":"if","locations":[{"start":{"line":257,"column":2},"end":{"line":257,"column":2}},{"start":{"line":257,"column":2},"end":{"line":257,"column":2}}]},"34":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":2},"end":{"line":269,"column":2}},{"start":{"line":269,"column":2},"end":{"line":269,"column":2}}]},"35":{"line":269,"type":"binary-expr","locations":[{"start":{"line":269,"column":6},"end":{"line":269,"column":25}},{"start":{"line":269,"column":29},"end":{"line":269,"column":42}}]},"36":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":2},"end":{"line":273,"column":2}},{"start":{"line":273,"column":2},"end":{"line":273,"column":2}}]},"37":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":2},"end":{"line":279,"column":2}},{"start":{"line":279,"column":2},"end":{"line":279,"column":2}}]},"38":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":4},"end":{"line":280,"column":4}},{"start":{"line":280,"column":4},"end":{"line":280,"column":4}}]}},"code":["\"use strict\";","","/* jshint -W058 */","var bodec = require(\"bodec\");","var Stream = require(\"bufferedstream\");","var Message = require(\"../Message\");","","// This parser is modified from the one in the node-formidable","// project, written by Felix Geisendrfer. MIT licensed.","","var s = 0;","var S = {","  START: s++,","  START_BOUNDARY: s++,","  HEADER_FIELD_START: s++,","  HEADER_FIELD: s++,","  HEADER_VALUE_START: s++,","  HEADER_VALUE: s++,","  HEADER_VALUE_ALMOST_DONE: s++,","  HEADERS_ALMOST_DONE: s++,","  PART_DATA_START: s++,","  PART_DATA: s++,","  PART_END: s++,","  END: s++","};","","var f = 1;","var F = {","  PART_BOUNDARY: f,","  LAST_BOUNDARY: f *= 2","};","","var LF = 10;","var CR = 13;","var SPACE = 32;","var HYPHEN = 45;","var COLON = 58;","","function Parser(boundary, partHandler) {","  this.boundary = bodec.fromRaw(\"\\r\\n--\" + boundary);","  this.lookBehind = bodec.create(this.boundary.length + 8);","  this.boundaryChars = {};","","  var i = this.boundary.length;","  while (i) this.boundaryChars[this.boundary[--i]] = true;","","  this.state = S.START;","  this.index = null;","  this.flags = 0;","","  if (typeof partHandler !== \"function\") throw new Error(\"multipart.Parser needs a part handler\");","","  this.onPart = partHandler;","}","","Parser.prototype.execute = function (chunk) {","  var chunkLength = chunk.length,","      prevIndex = this.index,","      index = this.index,","      state = this.state,","      flags = this.flags,","      lookBehind = this.lookBehind,","      boundary = this.boundary,","      boundaryChars = this.boundaryChars,","      boundaryLength = boundary.length,","      boundaryEnd = boundaryLength - 1,","      c,","      cl;","","  for (var i = 0; i < chunkLength; ++i) {","    c = chunk[i];","","    switch (state) {","      case S.START:","        index = 0;","        state = S.START_BOUNDARY;","      /* falls through */","      case S.START_BOUNDARY:","        if (index == boundaryLength - 2) {","          if (c != CR) {","            return i;","          }","          index++;","          break;","        } else if (index == boundaryLength - 1) {","          if (c != LF) {","            return i;","          }","          index = 0;","          this._callback(\"partBegin\");","          state = S.HEADER_FIELD_START;","          break;","        }","","        if (c != boundary[index + 2]) {","          return i;","        }","        index++;","        break;","      case S.HEADER_FIELD_START:","        state = S.HEADER_FIELD;","        this._mark(\"headerName\", i);","        index = 0;","      /* falls through */","      case S.HEADER_FIELD:","        if (c == CR) {","          this._clear(\"headerName\");","          state = S.HEADERS_ALMOST_DONE;","          break;","        }","","        index++;","        if (c == HYPHEN) {","          break;","        }","","        if (c == COLON) {","          if (index == 1) {","            // empty header field","            return i;","          }","          this._dataCallback(\"headerName\", chunk, true, i);","          state = S.HEADER_VALUE_START;","          break;","        }","","        cl = c | 32; // lower-case","        if (cl < 97 || cl > 122) {","          // not between \"a\" and \"z\"","          return i;","        }","        break;","      case S.HEADER_VALUE_START:","        if (c == SPACE) {","          break;","        }","        this._mark(\"headerValue\", i);","        state = S.HEADER_VALUE;","      /* falls through */","      case S.HEADER_VALUE:","        if (c == CR) {","          this._dataCallback(\"headerValue\", chunk, true, i);","          this._callback(\"headerEnd\");","          state = S.HEADER_VALUE_ALMOST_DONE;","        }","        break;","      case S.HEADER_VALUE_ALMOST_DONE:","        if (c != LF) {","          return i;","        }","        state = S.HEADER_FIELD_START;","        break;","      case S.HEADERS_ALMOST_DONE:","        if (c != LF) {","          return i;","        }","        this._callback(\"headersEnd\");","        state = S.PART_DATA_START;","        break;","      case S.PART_DATA_START:","        state = S.PART_DATA;","        this._mark(\"partData\", i);","      /* falls through */","      case S.PART_DATA:","        prevIndex = index;","","        if (index === 0) {","          // boyer-moore derrived algorithm to safely skip non-boundary data","          i += boundaryEnd;","          while (i < chunkLength && !(chunk[i] in boundaryChars)) {","            i += boundaryLength;","          }","          i -= boundaryEnd;","          c = chunk[i];","        }","","        if (index < boundaryLength) {","          if (boundary[index] == c) {","            if (index === 0) {","              this._dataCallback(\"partData\", chunk, true, i);","            }","            index++;","          } else {","            index = 0;","          }","        } else if (index == boundaryLength) {","          index++;","          if (c == CR) {","            // CR = part boundary","            flags |= F.PART_BOUNDARY;","          } else if (c == HYPHEN) {","            // HYPHEN = end boundary","            flags |= F.LAST_BOUNDARY;","          } else {","            index = 0;","          }","        } else if (index - 1 == boundaryLength) {","          if (flags & F.PART_BOUNDARY) {","            index = 0;","            if (c == LF) {","              // unset the PART_BOUNDARY flag","              flags &= ~F.PART_BOUNDARY;","              this._callback(\"partEnd\");","              this._callback(\"partBegin\");","              state = S.HEADER_FIELD_START;","              break;","            }","          } else if (flags & F.LAST_BOUNDARY) {","            if (c == HYPHEN) {","              this._callback(\"partEnd\");","              // this._callback('end');","              state = S.END;","            } else {","              index = 0;","            }","          } else {","            index = 0;","          }","        }","","        if (index > 0) {","          // when matching a possible boundary, keep a lookBehind","          // reference in case it turns out to be a false lead","          lookBehind[index - 1] = c;","        } else if (prevIndex > 0) {","          // if our boundary turned out to be rubbish, the captured","          // lookBehind belongs to partData","          this._callback(\"partData\", lookBehind, 0, prevIndex);","          prevIndex = 0;","          this._mark(\"partData\", i);","","          // reconsider the current character even so it interrupted the","          // sequence it could be the beginning of a new sequence","          i--;","        }","","        break;","      case S.END:","        break;","      default:","        return i;","    }","  }","","  this._dataCallback(\"headerName\", chunk);","  this._dataCallback(\"headerValue\", chunk);","  this._dataCallback(\"partData\", chunk);","","  this.index = index;","  this.state = state;","  this.flags = flags;","","  return chunkLength;","};","","Parser.prototype.finish = function () {","  if (this.state !== S.END) throw new Error(\"Stream ended unexpectedly (state: \" + this.state + \")\");","};","","Parser.prototype._mark = function (name, i) {","  this[name + \"Mark\"] = i;","};","","Parser.prototype._clear = function (name) {","  delete this[name + \"Mark\"];","};","","Parser.prototype._callback = function (name, chunk, start, end) {","  if (start !== undefined && start === end) return;","","  var prop = \"on\" + name.substr(0, 1).toUpperCase() + name.substr(1);","","  if (prop in this) this[prop](chunk, start, end);","};","","Parser.prototype._dataCallback = function (name, chunk, clear, i) {","  var prop = name + \"Mark\";","","  if (prop in this) {","    if (!clear) {","      this._callback(name, chunk, this[prop], chunk.length);","      this[prop] = 0;","    } else {","      this._callback(name, chunk, this[prop], i);","      delete this[prop];","    }","  }","};","","Parser.prototype.onPartBegin = function () {","  this._stream = new Stream();","  this._part = new Message(this._stream);","  this._headerName = \"\";","  this._headerValue = \"\";","};","","Parser.prototype.onHeaderName = function (chunk, start, end) {","  this._headerName += bodec.toUnicode(chunk, start, end);","};","","Parser.prototype.onHeaderValue = function (chunk, start, end) {","  this._headerValue += bodec.toUnicode(chunk, start, end);","};","","Parser.prototype.onHeaderEnd = function () {","  this._part.setHeader(this._headerName, this._headerValue);","  this._headerName = \"\";","  this._headerValue = \"\";","};","","Parser.prototype.onHeadersEnd = function () {","  this.onPart(this._part);","};","","Parser.prototype.onPartData = function (chunk, start, end) {","  this._stream.write(bodec.slice(chunk, start, end));","};","","Parser.prototype.onPartEnd = function () {","  this._stream.end();","};","","module.exports = Parser;"],"l":{"4":1,"5":1,"6":1,"11":1,"12":1,"27":1,"28":1,"33":1,"34":1,"35":1,"36":1,"37":1,"39":1,"40":0,"41":0,"42":0,"44":0,"45":0,"47":0,"48":0,"49":0,"51":0,"53":0,"56":1,"57":0,"70":0,"71":0,"73":0,"75":0,"76":0,"79":0,"80":0,"81":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"92":0,"95":0,"96":0,"98":0,"99":0,"101":0,"102":0,"103":0,"106":0,"107":0,"108":0,"109":0,"112":0,"113":0,"114":0,"117":0,"118":0,"120":0,"122":0,"123":0,"124":0,"127":0,"128":0,"130":0,"132":0,"134":0,"135":0,"137":0,"138":0,"141":0,"142":0,"143":0,"144":0,"146":0,"148":0,"149":0,"151":0,"152":0,"154":0,"155":0,"157":0,"158":0,"159":0,"161":0,"162":0,"165":0,"167":0,"169":0,"170":0,"171":0,"173":0,"174":0,"177":0,"178":0,"179":0,"180":0,"182":0,"184":0,"186":0,"187":0,"188":0,"190":0,"191":0,"193":0,"195":0,"197":0,"198":0,"199":0,"200":0,"202":0,"203":0,"204":0,"205":0,"206":0,"208":0,"209":0,"210":0,"212":0,"214":0,"217":0,"221":0,"224":0,"225":0,"228":0,"229":0,"230":0,"234":0,"237":0,"239":0,"241":0,"245":0,"246":0,"247":0,"249":0,"250":0,"251":0,"253":0,"256":1,"257":0,"260":1,"261":0,"264":1,"265":0,"268":1,"269":0,"271":0,"273":0,"276":1,"277":0,"279":0,"280":0,"281":0,"282":0,"284":0,"285":0,"290":1,"291":0,"292":0,"293":0,"294":0,"297":1,"298":0,"301":1,"302":0,"305":1,"306":0,"307":0,"308":0,"311":1,"312":0,"315":1,"316":0,"319":1,"320":0,"323":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/catch.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/catch.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"catchError","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":9},"end":{"line":15,"column":25}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":42},"end":{"line":16,"column":60}}}},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":22,"column":1}},"2":{"start":{"line":15,"column":2},"end":{"line":21,"column":4}},"3":{"start":{"line":16,"column":4},"end":{"line":20,"column":7}},"4":{"start":{"line":17,"column":6},"end":{"line":17,"column":48}},"5":{"start":{"line":17,"column":35},"end":{"line":17,"column":48}},"6":{"start":{"line":19,"column":6},"end":{"line":19,"column":20}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":6}},{"start":{"line":17,"column":6},"end":{"line":17,"column":6}}]}},"code":["\"use strict\";","","/**"," * A middleware that \"catches\" non-Errors that are thrown from the downstream"," * app and returns them instead. This can be useful for breaking out of a"," * nested promise chain, for example."," *"," * Example:"," *"," *   mach.catch(function (conn) {"," *     throw 200;"," *   });"," */","function catchError(app) {","  return function (conn) {","    return conn.call(app).then(undefined, function (reason) {","      if (reason instanceof Error) throw reason;","","      return reason;","    });","  };","}","","module.exports = catchError;"],"l":{"14":1,"15":0,"16":0,"17":0,"19":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/charset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/charset.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"charset","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":25}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":31},"end":{"line":11,"column":43}}}},"statementMap":{"1":{"start":{"line":7,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":8,"column":2},"end":{"line":8,"column":45}},"3":{"start":{"line":10,"column":2},"end":{"line":16,"column":4}},"4":{"start":{"line":11,"column":4},"end":{"line":15,"column":7}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":35}},"6":{"start":{"line":14,"column":6},"end":{"line":14,"column":94}},"7":{"start":{"line":14,"column":60},"end":{"line":14,"column":94}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":25}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":19},"end":{"line":8,"column":33}},{"start":{"line":8,"column":37},"end":{"line":8,"column":44}}]},"2":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":6}},{"start":{"line":14,"column":6},"end":{"line":14,"column":6}}]},"3":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":10},"end":{"line":14,"column":30}},{"start":{"line":14,"column":34},"end":{"line":14,"column":58}}]}},"code":["\"use strict\";","","/**"," * A middleware that sets a default character set in the Content-Type"," * header of the response if none is already specified."," */","function charset(app, defaultCharset) {","  defaultCharset = defaultCharset || \"utf-8\";","","  return function (conn) {","    return conn.call(app).then(function () {","      var response = conn.response;","","      if (response.contentType && response.charset == null) response.charset = defaultCharset;","    });","  };","}","","module.exports = charset;"],"l":{"7":1,"8":0,"10":0,"11":0,"12":0,"14":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/contentType.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/contentType.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"contentType","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":25}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":31},"end":{"line":11,"column":43}}}},"statementMap":{"1":{"start":{"line":7,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":8,"column":2},"end":{"line":8,"column":43}},"3":{"start":{"line":10,"column":2},"end":{"line":16,"column":4}},"4":{"start":{"line":11,"column":4},"end":{"line":15,"column":7}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":42}},"6":{"start":{"line":14,"column":6},"end":{"line":14,"column":74}},"7":{"start":{"line":14,"column":36},"end":{"line":14,"column":74}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":29}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":16},"end":{"line":8,"column":27}},{"start":{"line":8,"column":31},"end":{"line":8,"column":42}}]},"2":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":6}},{"start":{"line":14,"column":6},"end":{"line":14,"column":6}}]}},"code":["\"use strict\";","","/**"," * A middleware that sets a default Content-Type header in case one hasn't"," * already been set in a downstream app."," */","function contentType(app, defaultType) {","  defaultType = defaultType || \"text/html\";","","  return function (conn) {","    return conn.call(app).then(function () {","      var headers = conn.response.headers;","","      if (!headers[\"Content-Type\"]) headers[\"Content-Type\"] = defaultType;","    });","  };","}","","module.exports = contentType;"],"l":{"7":1,"8":0,"10":0,"11":0,"12":0,"14":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/favicon.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/favicon.js","s":{"1":1,"2":0,"3":0,"4":0,"5":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"favicon","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":25}}}},"statementMap":{"1":{"start":{"line":7,"column":0},"end":{"line":13,"column":1}},"2":{"start":{"line":8,"column":2},"end":{"line":8,"column":29}},"3":{"start":{"line":10,"column":2},"end":{"line":12,"column":4}},"4":{"start":{"line":11,"column":4},"end":{"line":11,"column":72}},"5":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":13},"end":{"line":8,"column":21}},{"start":{"line":8,"column":25},"end":{"line":8,"column":28}}]},"2":{"line":11,"type":"cond-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":54}},{"start":{"line":11,"column":57},"end":{"line":11,"column":71}}]}},"code":["\"use strict\";","","/**"," * A middleware that returns the given response to requests for \"/favicon.ico\"."," * Defaults to returning an empty 404."," */","function favicon(app, response) {","  response = response || 404;","","  return function (conn) {","    return conn.pathname === \"/favicon.ico\" ? response : conn.call(app);","  };","}","","module.exports = favicon;"],"l":{"7":1,"8":0,"10":0,"11":0,"15":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/file.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/file.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"file","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":28}}},"2":{"name":"sendFile","line":92,"loc":{"start":{"line":92,"column":2},"end":{"line":92,"column":39}}},"3":{"name":"(anonymous_3)","line":101,"loc":{"start":{"line":101,"column":37},"end":{"line":101,"column":53}}},"4":{"name":"(anonymous_4)","line":107,"loc":{"start":{"line":107,"column":9},"end":{"line":107,"column":25}}},"5":{"name":"(anonymous_5)","line":117,"loc":{"start":{"line":117,"column":35},"end":{"line":117,"column":52}}},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":54}}},"7":{"name":"(anonymous_7)","line":127,"loc":{"start":{"line":127,"column":60},"end":{"line":127,"column":77}}},"8":{"name":"(anonymous_8)","line":136,"loc":{"start":{"line":136,"column":65},"end":{"line":136,"column":81}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":42}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":54}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":46}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":45}},"9":{"start":{"line":65,"column":0},"end":{"line":142,"column":1}},"10":{"start":{"line":67,"column":2},"end":{"line":70,"column":3}},"11":{"start":{"line":68,"column":4},"end":{"line":68,"column":18}},"12":{"start":{"line":69,"column":4},"end":{"line":69,"column":15}},"13":{"start":{"line":72,"column":2},"end":{"line":72,"column":26}},"14":{"start":{"line":75,"column":2},"end":{"line":75,"column":63}},"15":{"start":{"line":75,"column":35},"end":{"line":75,"column":63}},"16":{"start":{"line":77,"column":2},"end":{"line":77,"column":26}},"17":{"start":{"line":78,"column":2},"end":{"line":78,"column":143}},"18":{"start":{"line":78,"column":92},"end":{"line":78,"column":143}},"19":{"start":{"line":80,"column":2},"end":{"line":80,"column":34}},"20":{"start":{"line":81,"column":2},"end":{"line":87,"column":3}},"21":{"start":{"line":82,"column":4},"end":{"line":86,"column":5}},"22":{"start":{"line":83,"column":6},"end":{"line":83,"column":22}},"23":{"start":{"line":84,"column":11},"end":{"line":86,"column":5}},"24":{"start":{"line":85,"column":6},"end":{"line":85,"column":29}},"25":{"start":{"line":89,"column":2},"end":{"line":89,"column":88}},"26":{"start":{"line":90,"column":2},"end":{"line":90,"column":34}},"27":{"start":{"line":92,"column":2},"end":{"line":105,"column":3}},"28":{"start":{"line":93,"column":4},"end":{"line":96,"column":7}},"29":{"start":{"line":98,"column":4},"end":{"line":98,"column":92}},"30":{"start":{"line":98,"column":25},"end":{"line":98,"column":92}},"31":{"start":{"line":100,"column":4},"end":{"line":104,"column":5}},"32":{"start":{"line":101,"column":6},"end":{"line":103,"column":9}},"33":{"start":{"line":102,"column":8},"end":{"line":102,"column":42}},"34":{"start":{"line":107,"column":2},"end":{"line":141,"column":4}},"35":{"start":{"line":108,"column":4},"end":{"line":108,"column":79}},"36":{"start":{"line":108,"column":57},"end":{"line":108,"column":79}},"37":{"start":{"line":110,"column":4},"end":{"line":110,"column":33}},"38":{"start":{"line":113,"column":4},"end":{"line":113,"column":74}},"39":{"start":{"line":113,"column":39},"end":{"line":113,"column":74}},"40":{"start":{"line":115,"column":4},"end":{"line":115,"column":41}},"41":{"start":{"line":117,"column":4},"end":{"line":140,"column":7}},"42":{"start":{"line":118,"column":6},"end":{"line":118,"column":70}},"43":{"start":{"line":118,"column":35},"end":{"line":118,"column":70}},"44":{"start":{"line":120,"column":6},"end":{"line":120,"column":64}},"45":{"start":{"line":120,"column":42},"end":{"line":120,"column":64}},"46":{"start":{"line":123,"column":6},"end":{"line":125,"column":9}},"47":{"start":{"line":124,"column":8},"end":{"line":124,"column":42}},"48":{"start":{"line":127,"column":6},"end":{"line":139,"column":9}},"49":{"start":{"line":128,"column":8},"end":{"line":128,"column":119}},"50":{"start":{"line":128,"column":58},"end":{"line":128,"column":119}},"51":{"start":{"line":128,"column":72},"end":{"line":128,"column":119}},"52":{"start":{"line":130,"column":8},"end":{"line":130,"column":54}},"53":{"start":{"line":130,"column":32},"end":{"line":130,"column":54}},"54":{"start":{"line":133,"column":8},"end":{"line":133,"column":72}},"55":{"start":{"line":133,"column":35},"end":{"line":133,"column":72}},"56":{"start":{"line":136,"column":8},"end":{"line":138,"column":11}},"57":{"start":{"line":137,"column":10},"end":{"line":137,"column":26}},"58":{"start":{"line":144,"column":0},"end":{"line":144,"column":22}}},"branchMap":{"1":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":2},"end":{"line":67,"column":2}},{"start":{"line":67,"column":2},"end":{"line":67,"column":2}}]},"2":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":6},"end":{"line":67,"column":29}},{"start":{"line":67,"column":33},"end":{"line":67,"column":56}}]},"3":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":19}},{"start":{"line":72,"column":23},"end":{"line":72,"column":25}}]},"4":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":2}},{"start":{"line":75,"column":2},"end":{"line":75,"column":2}}]},"5":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":2},"end":{"line":78,"column":2}},{"start":{"line":78,"column":2},"end":{"line":78,"column":2}}]},"6":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":6},"end":{"line":78,"column":30}},{"start":{"line":78,"column":34},"end":{"line":78,"column":54}},{"start":{"line":78,"column":58},"end":{"line":78,"column":90}}]},"7":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":14},"end":{"line":80,"column":27}},{"start":{"line":80,"column":31},"end":{"line":80,"column":33}}]},"8":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":2},"end":{"line":81,"column":2}},{"start":{"line":81,"column":2},"end":{"line":81,"column":2}}]},"9":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"10":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":11},"end":{"line":84,"column":11}},{"start":{"line":84,"column":11},"end":{"line":84,"column":11}}]},"11":{"line":89,"type":"cond-expr","locations":[{"start":{"line":89,"column":55},"end":{"line":89,"column":80}},{"start":{"line":89,"column":83},"end":{"line":89,"column":87}}]},"12":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"14":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":4},"end":{"line":108,"column":4}},{"start":{"line":108,"column":4},"end":{"line":108,"column":4}}]},"15":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":29}},{"start":{"line":108,"column":33},"end":{"line":108,"column":55}}]},"16":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"17":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":6},"end":{"line":118,"column":6}},{"start":{"line":118,"column":6},"end":{"line":118,"column":6}}]},"18":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":10},"end":{"line":118,"column":15}},{"start":{"line":118,"column":19},"end":{"line":118,"column":33}}]},"19":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":6},"end":{"line":120,"column":6}},{"start":{"line":120,"column":6},"end":{"line":120,"column":6}}]},"20":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":16}},{"start":{"line":120,"column":20},"end":{"line":120,"column":40}}]},"21":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":58},"end":{"line":128,"column":58}},{"start":{"line":128,"column":58},"end":{"line":128,"column":58}}]},"22":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":130,"column":8}},{"start":{"line":130,"column":8},"end":{"line":130,"column":8}}]},"23":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var mach = require(\"../index\");","var Promise = require(\"../utils/Promise\");","var getFileStats = require(\"../utils/getFileStats\");","var generateETag = require(\"../utils/generateETag\");","var generateIndex = require(\"../utils/generateIndex\");","var joinPaths = require(\"../utils/joinPaths\");","","mach.extend(require(\"../extensions/server\"));","","/**"," * A middleware for serving files efficiently from the file system according"," * to the path specified in the `pathname` variable."," *"," * Options may be any of the following:"," *"," * - root               The path to the root directory to serve files from"," * - index              An array of file names to try and serve when the"," *                      request targets a directory (e.g. [\"index.html\", \"index.htm\"])."," *                      May simply be truthy to use [\"index.html\"]"," * - autoIndex          Set this true to automatically generate an index page"," *                      listing a directory's contents when the request targets"," *                      a directory with no index file"," * - useLastModified    Set this true to include the Last-Modified header"," *                      based on the mtime of the file. Defaults to true"," * - useETag            Set this true to include the ETag header based on"," *                      the MD5 checksum of the file. Defaults to false"," *"," * Alternatively, options may be a file path to the root directory."," *"," * If a matching file cannot be found, the request is forwarded to the"," * downstream app. Otherwise, the file is streamed through to the response."," *"," * Examples:"," *"," *   // Use the root directory name directly."," *   app.use(mach.file, '/public');"," *"," *   // Serve static files out of /public, and automatically"," *   // serve an index.htm from any directory that has one."," *   app.use(mach.file, {"," *     root: '/public',"," *     index: 'index.htm',"," *     useETag: true"," *   });"," *"," *   // Serve static files out of /public, and automatically"," *   // serve an index.html from any directory that has one."," *   // Also, automatically generate a directory listing for"," *   // any directory without an index.html file."," *   app.use(mach.file, {"," *     root: '/public',"," *     index: true,"," *     autoIndex: true"," *   });"," *"," * This function may also be used outside of the context of a middleware"," * stack to create a standalone app."," *"," *   var app = mach.file('/public');"," *   mach.serve(app);"," */","function file(app, options) {","  // Allow mach.file(path|options)","  if (typeof app === \"string\" || typeof app === \"object\") {","    options = app;","    app = null;","  }","","  options = options || {};","","  // Allow mach.file(path) and app.use(mach.file, path)","  if (typeof options === \"string\") options = { root: options };","","  var root = options.root;","  if (typeof root !== \"string\" || !fs.existsSync(root) || !fs.statSync(root).isDirectory()) throw new Error(\"Invalid root directory: \" + root);","","  var index = options.index || [];","  if (index) {","    if (typeof index === \"string\") {","      index = [index];","    } else if (!Array.isArray(index)) {","      index = [\"index.html\"];","    }","  }","","  var useLastModified = \"useLastModified\" in options ? !!options.useLastModified : true;","  var useETag = !!options.useETag;","","  function sendFile(conn, path, stats) {","    conn.file({","      path: path,","      size: stats.size","    });","","    if (useLastModified) conn.response.headers[\"Last-Modified\"] = stats.mtime.toUTCString();","","    if (useETag) {","      return generateETag(path).then(function (etag) {","        conn.response.headers.ETag = etag;","      });","    }","  }","","  return function (conn) {","    if (conn.method !== \"GET\" && conn.method !== \"HEAD\") return conn.call(app);","","    var pathname = conn.pathname;","","    // Reject paths that contain \"..\".","    if (pathname.indexOf(\"..\") !== -1) return conn.text(403, \"Forbidden\");","","    var path = joinPaths(root, pathname);","","    return getFileStats(path).then(function (stats) {","      if (stats && stats.isFile()) return sendFile(conn, path, stats);","","      if (!stats || !stats.isDirectory()) return conn.call(app);","","      // Try to serve one of the index files.","      var indexPaths = index.map(function (indexPath) {","        return joinPaths(path, indexPath);","      });","","      return Promise.all(indexPaths.map(getFileStats)).then(function (stats) {","        for (var i = 0, len = stats.length; i < len; ++i) if (stats[i]) return sendFile(conn, indexPaths[i], stats[i]);","","        if (!options.autoIndex) return conn.call(app);","","        // Redirect /images => /images/","        if (!/\\/$/.test(pathname)) return conn.redirect(pathname + \"/\");","","        // Automatically generate and serve an index file.","        return generateIndex(root, pathname, conn.basename).then(function (html) {","          conn.html(html);","        });","      });","    });","  };","}","","module.exports = file;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"65":1,"67":0,"68":0,"69":0,"72":0,"75":0,"77":0,"78":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"89":0,"90":0,"92":1,"93":0,"98":0,"100":0,"101":0,"102":0,"107":0,"108":0,"110":0,"113":0,"115":0,"117":0,"118":0,"120":0,"123":0,"124":0,"127":0,"128":0,"130":0,"133":0,"136":0,"137":0,"144":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/getFileStats.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/getFileStats.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"getFileStats","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":28}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":48}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":18},"end":{"line":11,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":9,"column":0},"end":{"line":19,"column":1}},"4":{"start":{"line":10,"column":2},"end":{"line":18,"column":5}},"5":{"start":{"line":11,"column":4},"end":{"line":17,"column":7}},"6":{"start":{"line":12,"column":6},"end":{"line":16,"column":7}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":22}},"8":{"start":{"line":15,"column":8},"end":{"line":15,"column":31}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":30}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":6}},{"start":{"line":12,"column":6},"end":{"line":12,"column":6}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":10},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":42}}]},"3":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":16},"end":{"line":15,"column":21}},{"start":{"line":15,"column":25},"end":{"line":15,"column":29}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var Promise = require(\"./Promise\");","","/**"," * Returns stats for the given file or null if it doesn't exist."," */","function getFileStats(path) {","  return new Promise(function (resolve, reject) {","    fs.stat(path, function (error, stats) {","      if (error && error.code !== \"ENOENT\") {","        reject(error);","      } else {","        resolve(stats || null);","      }","    });","  });","}","","module.exports = getFileStats;"],"l":{"3":1,"4":1,"9":1,"10":0,"11":0,"12":0,"13":0,"15":0,"21":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/generateETag.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/generateETag.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"generateETag","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":21},"end":{"line":8,"column":48}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":45}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"4":{"start":{"line":7,"column":0},"end":{"line":17,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":16,"column":5}},"6":{"start":{"line":9,"column":4},"end":{"line":15,"column":7}},"7":{"start":{"line":10,"column":6},"end":{"line":14,"column":7}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":22}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":83}},"10":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":6},"end":{"line":10,"column":6}},{"start":{"line":10,"column":6},"end":{"line":10,"column":6}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var crypto = require(\"crypto\");","var Promise = require(\"./Promise\");","","function generateETag(path) {","  return new Promise(function (resolve, reject) {","    fs.readFile(path, function (error, data) {","      if (error) {","        reject(error);","      } else {","        resolve(\"\\\"\" + crypto.createHash(\"md5\").update(data).digest(\"hex\") + \"\\\"\");","      }","    });","  });","}","","module.exports = generateETag;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"9":0,"10":0,"11":0,"13":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/generateIndex.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/generateIndex.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"generateIndex","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":49}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":48}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":21},"end":{"line":21,"column":45}}},"4":{"name":"(anonymous_4)","line":24,"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":47}}},"5":{"name":"(anonymous_5)","line":28,"loc":{"start":{"line":28,"column":33},"end":{"line":28,"column":55}}},"6":{"name":"(anonymous_6)","line":32,"loc":{"start":{"line":32,"column":27},"end":{"line":32,"column":51}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":49}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":39}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":41}},"9":{"start":{"line":13,"column":0},"end":{"line":13,"column":797}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":209}},"11":{"start":{"line":17,"column":0},"end":{"line":62,"column":1}},"12":{"start":{"line":18,"column":2},"end":{"line":61,"column":5}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":41}},"14":{"start":{"line":21,"column":4},"end":{"line":60,"column":7}},"15":{"start":{"line":22,"column":6},"end":{"line":22,"column":38}},"16":{"start":{"line":22,"column":17},"end":{"line":22,"column":38}},"17":{"start":{"line":24,"column":6},"end":{"line":26,"column":9}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":51}},"19":{"start":{"line":28,"column":6},"end":{"line":59,"column":17}},"20":{"start":{"line":29,"column":8},"end":{"line":29,"column":89}},"21":{"start":{"line":30,"column":8},"end":{"line":30,"column":31}},"22":{"start":{"line":32,"column":8},"end":{"line":53,"column":11}},"23":{"start":{"line":33,"column":10},"end":{"line":33,"column":36}},"24":{"start":{"line":33,"column":29},"end":{"line":33,"column":36}},"25":{"start":{"line":35,"column":10},"end":{"line":35,"column":34}},"26":{"start":{"line":36,"column":10},"end":{"line":36,"column":47}},"27":{"start":{"line":37,"column":10},"end":{"line":37,"column":34}},"28":{"start":{"line":39,"column":10},"end":{"line":39,"column":25}},"29":{"start":{"line":40,"column":10},"end":{"line":48,"column":11}},"30":{"start":{"line":41,"column":12},"end":{"line":41,"column":23}},"31":{"start":{"line":42,"column":12},"end":{"line":42,"column":31}},"32":{"start":{"line":43,"column":12},"end":{"line":43,"column":23}},"33":{"start":{"line":44,"column":12},"end":{"line":44,"column":24}},"34":{"start":{"line":46,"column":12},"end":{"line":46,"column":46}},"35":{"start":{"line":47,"column":12},"end":{"line":47,"column":37}},"36":{"start":{"line":50,"column":10},"end":{"line":50,"column":93}},"37":{"start":{"line":52,"column":10},"end":{"line":52,"column":60}},"38":{"start":{"line":55,"column":8},"end":{"line":55,"column":54}},"39":{"start":{"line":56,"column":8},"end":{"line":56,"column":92}},"40":{"start":{"line":58,"column":8},"end":{"line":58,"column":25}},"41":{"start":{"line":64,"column":0},"end":{"line":64,"column":31}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":6}},{"start":{"line":22,"column":6},"end":{"line":22,"column":6}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":10},"end":{"line":33,"column":10}},{"start":{"line":33,"column":10},"end":{"line":33,"column":10}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":10},"end":{"line":40,"column":10}},{"start":{"line":40,"column":10},"end":{"line":40,"column":10}}]},"4":{"line":52,"type":"cond-expr","locations":[{"start":{"line":52,"column":45},"end":{"line":52,"column":50}},{"start":{"line":52,"column":53},"end":{"line":52,"column":59}}]}},"code":["\"use strict\";","","var fs = require(\"fs\");","var Promise = require(\"./Promise\");","var getFileStats = require(\"./getFileStats\");","var getMimeType = require(\"./getMimeType\");","var formatByteSize = require(\"./formatByteSize\");","var formatString = require(\"util\").format;","var joinPaths = require(\"./joinPaths\");","","var MACH_VERSION = require(\"../version\");","","var PAGE_TEMPLATE = [\"<html>\", \"<head>\", \"<meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=utf-8\\\" />\", \"<title>%s</title>\", \"<style type=\\\"text/css\\\">\", \"  body { font: 14px Helvetica, Arial, sans-serif; padding: 0 10px; }\", \"  address { text-align: right; font-style: italic; }\", \"  table { width: 100%; }\", \"  tr.even { background: #f3f3f3; }\", \"  .name { text-align: left; }\", \"  .size, .type, .mtime { text-align: right; }\", \"</style>\", \"</head>\", \"<body>\", \"<h1>%s</h1>\", \"<hr>\", \"<table cellspacing=\\\"0\\\" cellpadding=\\\"3\\\">\", \"<tr>\", \"  <th class=\\\"name\\\">Name</th>\", \"  <th class=\\\"size\\\">Size</th>\", \"  <th class=\\\"type\\\">Type</th>\", \"  <th class=\\\"mtime\\\">Last Modified</th>\", \"</tr>\", \"%s\", \"</table>\", \"<hr>\", \"<address>%s/%s</address>\", \"</body>\", \"</html>\"].join(\"\\n\");","","var ROW_TEMPLATE = [\"<tr class=\\\"%s\\\">\", \"  <td class=\\\"name\\\"><a href=\\\"%s\\\">%s</a></td>\", \"  <td class=\\\"size\\\">%s</td>\", \"  <td class=\\\"type\\\">%s</td>\", \"  <td class=\\\"mtime\\\">%s</td>\", \"</tr>\"].join(\"\\n\");","","function generateIndex(root, pathname, basename) {","  return new Promise(function (resolve, reject) {","    var path = joinPaths(root, pathname);","","    fs.readdir(path, function (error, files) {","      if (error) return reject(error);","","      var promises = files.map(function (file) {","        return getFileStats(joinPaths(path, file));","      });","","      Promise.all(promises).then(function (statsArray) {","        var rows = formatString(ROW_TEMPLATE, \"\", \"../\", \"Parent Directory\", \"\", \"\", \"\");","        var className = \"even\";","","        statsArray.forEach(function (stats, index) {","          if (stats == null) return; // Ignore broken symlinks!","","          var file = files[index];","          var url = basename + pathname + file;","          var mtime = stats.mtime;","","          var size, type;","          if (stats.isDirectory()) {","            size = \"-\";","            type = \"directory\";","            url += \"/\";","            file += \"/\";","          } else {","            size = formatByteSize(stats.size);","            type = getMimeType(file);","          }","","          rows += \"\\n\" + formatString(ROW_TEMPLATE, className, url, file, size, type, mtime);","","          className = className === \"even\" ? \"odd\" : \"even\";","        });","","        var title = \"Index of \" + basename + pathname;","        var content = formatString(PAGE_TEMPLATE, title, title, rows, \"mach\", MACH_VERSION);","","        resolve(content);","      }, reject);","    });","  });","}","","module.exports = generateIndex;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"13":1,"15":1,"17":1,"18":0,"19":0,"21":0,"22":0,"24":0,"25":0,"28":0,"29":0,"30":0,"32":0,"33":0,"35":0,"36":0,"37":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"46":0,"47":0,"50":0,"52":0,"55":0,"56":0,"58":0,"64":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/formatByteSize.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/formatByteSize.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"formatByteSize","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":5,"column":0},"end":{"line":12,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":72}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":38}},"5":{"start":{"line":9,"column":2},"end":{"line":9,"column":44}},"6":{"start":{"line":9,"column":16},"end":{"line":9,"column":44}},"7":{"start":{"line":11,"column":2},"end":{"line":11,"column":36}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}}},"branchMap":{"1":{"line":6,"type":"cond-expr","locations":[{"start":{"line":6,"column":24},"end":{"line":6,"column":67}},{"start":{"line":6,"column":70},"end":{"line":6,"column":71}}]},"2":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":9,"column":2}},{"start":{"line":9,"column":2},"end":{"line":9,"column":2}}]}},"code":["\"use strict\";","","var SUFFIXES = [\"B\", \"K\", \"M\", \"G\", \"T\"];","","function formatByteSize(size) {","  var tier = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;","  var n = size / Math.pow(1024, tier);","","  if (tier > 0) n = Math.floor(n * 10) / 10; // Preserve only 1 digit after decimal.","","  return String(n) + SUFFIXES[tier];","}","","module.exports = formatByteSize;"],"l":{"3":1,"5":1,"6":0,"7":0,"9":0,"11":0,"14":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/joinPaths.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/joinPaths.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}}},"branchMap":{},"code":["\"use strict\";","","module.exports = require(\"path\").join;"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/gzip.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/gzip.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"shouldGzipContentType","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}}},"2":{"name":"gzip","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":28}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":9},"end":{"line":21,"column":25}}},"4":{"name":"(anonymous_4)","line":22,"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":53}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":43}},"5":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"6":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":17}},"8":{"start":{"line":13,"column":3},"end":{"line":13,"column":41}},"9":{"start":{"line":20,"column":0},"end":{"line":35,"column":1}},"10":{"start":{"line":21,"column":2},"end":{"line":34,"column":4}},"11":{"start":{"line":22,"column":4},"end":{"line":33,"column":7}},"12":{"start":{"line":23,"column":6},"end":{"line":23,"column":35}},"13":{"start":{"line":24,"column":6},"end":{"line":24,"column":37}},"14":{"start":{"line":26,"column":6},"end":{"line":32,"column":7}},"15":{"start":{"line":27,"column":8},"end":{"line":27,"column":75}},"16":{"start":{"line":29,"column":8},"end":{"line":29,"column":41}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":45}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":41}},"19":{"start":{"line":37,"column":0},"end":{"line":37,"column":22}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]},"2":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":6},"end":{"line":11,"column":18}},{"start":{"line":11,"column":22},"end":{"line":11,"column":57}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":6}},{"start":{"line":26,"column":6},"end":{"line":26,"column":6}}]},"4":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":10},"end":{"line":26,"column":56}},{"start":{"line":26,"column":60},"end":{"line":26,"column":88}}]}},"code":["\"use strict\";","","var zlib = require(\"zlib\");","var mach = require(\"../index\");","","mach.extend(require(\"../extensions/acceptEncoding\"));","","var GZIP_MATCHER = /text|javascript|json/i;","","function shouldGzipContentType(contentType) {","  if (!contentType || contentType === \"text/event-stream\") {","    return false;","  }return GZIP_MATCHER.test(contentType);","}","","/**"," * A middleware that gzip's the response content (see http://www.gzip.org/)."," * Options may be any of node's zlib options (see http://nodejs.org/api/zlib.html)."," */","function gzip(app, options) {","  return function (conn) {","    return conn.call(app).then(function () {","      var response = conn.response;","      var headers = response.headers;","","      if (shouldGzipContentType(headers[\"Content-Type\"]) && conn.acceptsEncoding(\"gzip\")) {","        response.content = response.content.pipe(zlib.createGzip(options));","","        delete headers[\"Content-Length\"];","        headers[\"Content-Encoding\"] = \"gzip\";","        headers.Vary = \"Accept-Encoding\";","      }","    });","  };","}","","module.exports = gzip;"],"l":{"3":1,"4":1,"6":1,"8":1,"10":1,"11":0,"12":0,"13":0,"20":1,"21":0,"22":0,"23":0,"24":0,"26":0,"27":0,"29":0,"30":0,"31":0,"37":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/logger.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/logger.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"defaultMessageHandler","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":40}}},"2":{"name":"logger","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":37}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":25}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":31},"end":{"line":21,"column":43}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"2":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":74}},"4":{"start":{"line":7,"column":53},"end":{"line":7,"column":74}},"5":{"start":{"line":15,"column":0},"end":{"line":35,"column":1}},"6":{"start":{"line":16,"column":2},"end":{"line":16,"column":59}},"7":{"start":{"line":18,"column":2},"end":{"line":34,"column":4}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":31}},"9":{"start":{"line":21,"column":4},"end":{"line":33,"column":7}},"10":{"start":{"line":22,"column":6},"end":{"line":22,"column":47}},"11":{"start":{"line":23,"column":6},"end":{"line":23,"column":66}},"12":{"start":{"line":25,"column":6},"end":{"line":25,"column":53}},"13":{"start":{"line":25,"column":33},"end":{"line":25,"column":53}},"14":{"start":{"line":27,"column":6},"end":{"line":27,"column":46}},"15":{"start":{"line":28,"column":6},"end":{"line":28,"column":71}},"16":{"start":{"line":31,"column":6},"end":{"line":32,"column":243}},"17":{"start":{"line":37,"column":0},"end":{"line":37,"column":24}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":2},"end":{"line":7,"column":2}},{"start":{"line":7,"column":2},"end":{"line":7,"column":2}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":6},"end":{"line":7,"column":36}},{"start":{"line":7,"column":40},"end":{"line":7,"column":51}}]},"3":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":19},"end":{"line":16,"column":33}},{"start":{"line":16,"column":37},"end":{"line":16,"column":58}}]},"4":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]},"5":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":21},"end":{"line":27,"column":34}},{"start":{"line":27,"column":38},"end":{"line":27,"column":45}}]},"6":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":22},"end":{"line":31,"column":37}},{"start":{"line":31,"column":41},"end":{"line":31,"column":44}}]},"7":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":6},"end":{"line":32,"column":21}},{"start":{"line":32,"column":25},"end":{"line":32,"column":28}}]}},"code":["\"use strict\";","","/* jshint -W058 */","var strftime = require(\"strftime\").strftime;","","function defaultMessageHandler(message) {","  if (typeof console !== \"undefined\" && console.log) console.log(message);","}","","/**"," * A middleware that writes log entry data about the response to a given stream."," * Log entries are formatted similarly to Apache httpd's Common Log Format"," * (see http://httpd.apache.org/docs/1.3/logs.html#common)."," */","function logger(app, messageHandler) {","  messageHandler = messageHandler || defaultMessageHandler;","","  return function (conn) {","    var startTime = Date.now();","","    return conn.call(app).then(function () {","      var elapsedTime = Date.now() - startTime;","      var contentLength = conn.response.headers[\"Content-Length\"];","","      if (contentLength == null) contentLength = \"-\";","","      var protocol = conn.protocol || \"http:\";","      protocol = protocol.substr(0, protocol.length - 1).toUpperCase();","","      // 127.0.0.1 - frank [10/Oct/2000 13:55:36] \"GET /apache_pb.gif HTTP/1.0\" 200 2326 0.003","      messageHandler([conn.remoteHost || \"-\", \"-\", // RFC 1413 identity of the client","      conn.remoteUser || \"-\", \"[\" + strftime(\"%d/%b/%Y %H:%M:%S\", new Date()) + \"]\", \"\\\"\" + conn.method + \" \" + conn.basename + conn.path + \" \" + protocol + \"/\" + conn.version + \"\\\"\", conn.status, contentLength, elapsedTime / 1000].join(\" \"));","    });","  };","}","","module.exports = logger;"],"l":{"4":1,"6":1,"7":0,"15":1,"16":0,"18":0,"19":0,"21":0,"22":0,"23":0,"25":0,"27":0,"28":0,"31":0,"37":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/mapper.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/mapper.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"byMostSpecific","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}}},"2":{"name":"createMapper","line":52,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":32}}},"3":{"name":"mapper","line":61,"loc":{"start":{"line":61,"column":2},"end":{"line":61,"column":24}}},"4":{"name":"(anonymous_4)","line":93,"loc":{"start":{"line":93,"column":11},"end":{"line":93,"column":36}}},"5":{"name":"(anonymous_5)","line":124,"loc":{"start":{"line":124,"column":11},"end":{"line":124,"column":36}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":52}},"3":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":88}},"5":{"start":{"line":52,"column":0},"end":{"line":134,"column":1}},"6":{"start":{"line":54,"column":2},"end":{"line":57,"column":3}},"7":{"start":{"line":55,"column":4},"end":{"line":55,"column":14}},"8":{"start":{"line":56,"column":4},"end":{"line":56,"column":15}},"9":{"start":{"line":59,"column":2},"end":{"line":59,"column":20}},"10":{"start":{"line":61,"column":2},"end":{"line":85,"column":3}},"11":{"start":{"line":62,"column":4},"end":{"line":62,"column":33}},"12":{"start":{"line":63,"column":4},"end":{"line":63,"column":33}},"13":{"start":{"line":65,"column":4},"end":{"line":65,"column":38}},"14":{"start":{"line":66,"column":4},"end":{"line":82,"column":5}},"15":{"start":{"line":67,"column":6},"end":{"line":67,"column":28}},"16":{"start":{"line":70,"column":6},"end":{"line":70,"column":70}},"17":{"start":{"line":70,"column":61},"end":{"line":70,"column":70}},"18":{"start":{"line":73,"column":6},"end":{"line":73,"column":63}},"19":{"start":{"line":73,"column":54},"end":{"line":73,"column":63}},"20":{"start":{"line":76,"column":6},"end":{"line":76,"column":31}},"21":{"start":{"line":77,"column":6},"end":{"line":77,"column":73}},"22":{"start":{"line":77,"column":64},"end":{"line":77,"column":73}},"23":{"start":{"line":79,"column":6},"end":{"line":79,"column":36}},"24":{"start":{"line":81,"column":6},"end":{"line":81,"column":36}},"25":{"start":{"line":84,"column":4},"end":{"line":84,"column":26}},"26":{"start":{"line":87,"column":2},"end":{"line":128,"column":5}},"27":{"start":{"line":94,"column":6},"end":{"line":94,"column":25}},"28":{"start":{"line":97,"column":6},"end":{"line":97,"column":60}},"29":{"start":{"line":98,"column":6},"end":{"line":103,"column":7}},"30":{"start":{"line":99,"column":8},"end":{"line":99,"column":49}},"31":{"start":{"line":100,"column":8},"end":{"line":100,"column":24}},"32":{"start":{"line":102,"column":8},"end":{"line":102,"column":24}},"33":{"start":{"line":105,"column":6},"end":{"line":105,"column":110}},"34":{"start":{"line":105,"column":34},"end":{"line":105,"column":110}},"35":{"start":{"line":107,"column":6},"end":{"line":107,"column":37}},"36":{"start":{"line":109,"column":6},"end":{"line":109,"column":88}},"37":{"start":{"line":111,"column":6},"end":{"line":116,"column":9}},"38":{"start":{"line":118,"column":6},"end":{"line":118,"column":36}},"39":{"start":{"line":125,"column":6},"end":{"line":125,"column":26}},"40":{"start":{"line":131,"column":2},"end":{"line":131,"column":127}},"41":{"start":{"line":131,"column":31},"end":{"line":131,"column":127}},"42":{"start":{"line":131,"column":57},"end":{"line":131,"column":127}},"43":{"start":{"line":131,"column":91},"end":{"line":131,"column":127}},"44":{"start":{"line":133,"column":2},"end":{"line":133,"column":16}},"45":{"start":{"line":136,"column":0},"end":{"line":136,"column":30}}},"branchMap":{"1":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":9},"end":{"line":7,"column":38}},{"start":{"line":7,"column":42},"end":{"line":7,"column":87}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":43},"end":{"line":7,"column":49}},{"start":{"line":7,"column":53},"end":{"line":7,"column":55}}]},"3":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":67},"end":{"line":7,"column":73}},{"start":{"line":7,"column":77},"end":{"line":7,"column":79}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":2},"end":{"line":54,"column":2}},{"start":{"line":54,"column":2},"end":{"line":54,"column":2}}]},"5":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":70,"column":6}},{"start":{"line":70,"column":6},"end":{"line":70,"column":6}}]},"6":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":10},"end":{"line":70,"column":26}},{"start":{"line":70,"column":30},"end":{"line":70,"column":59}}]},"7":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":6},"end":{"line":73,"column":6}},{"start":{"line":73,"column":6},"end":{"line":73,"column":6}}]},"8":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":6},"end":{"line":77,"column":6}},{"start":{"line":77,"column":6},"end":{"line":77,"column":6}}]},"9":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":10},"end":{"line":77,"column":34}},{"start":{"line":77,"column":38},"end":{"line":77,"column":62}}]},"10":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":6},"end":{"line":98,"column":6}},{"start":{"line":98,"column":6},"end":{"line":98,"column":6}}]},"11":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":6},"end":{"line":105,"column":6}},{"start":{"line":105,"column":6},"end":{"line":105,"column":6}}]},"12":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":2},"end":{"line":131,"column":2}},{"start":{"line":131,"column":2},"end":{"line":131,"column":2}}]},"13":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":57},"end":{"line":131,"column":57}},{"start":{"line":131,"column":57},"end":{"line":131,"column":57}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var escapeRegExp = require(\"../utils/escapeRegExp\");","","function byMostSpecific(a, b) {","  return b.path.length - a.path.length || (b.host || \"\").length - (a.host || \"\").length;","}","","/**"," * A middleware that provides host and/or location-based routing. Modifies"," * the `basename` connection variable for all downstream apps such that only"," * the portion relevant for dispatch remains in `pathname`."," *"," *   app.use(mach.mapper, {"," *"," *     'http://example.com/images': function (conn) {"," *       // The hostname used in the request was example.com, and"," *       // the URL path started with \"/images\". If the request was"," *       // GET /images/avatar.jpg, then conn.pathname is /avatar.jpg"," *     },"," *"," *     '/images': function (conn) {"," *       // The URL path started with \"/images\""," *     }"," *"," *   });"," *"," * This function may also be used outside of the context of a middleware"," * stack to create a standalone app. You can either provide mappings one"," * at a time:"," *"," *   var app = mach.mapper();"," *"," *   app.map('/images', function (conn) {"," *     // ..."," *   });"," *"," * Or all at once:"," *"," *   var app = mach.mapper({"," *"," *     '/images': function (conn) {"," *       // ..."," *     }"," *"," *   });"," *"," * Note: Dispatch is done in such a way that the longest paths are tried first"," * since they are the most specific."," */","function createMapper(app, map) {","  // Allow mach.mapper(map)","  if (typeof app === \"object\") {","    map = app;","    app = null;","  }","","  var mappings = [];","","  function mapper(conn) {","    var hostname = conn.hostname;","    var pathname = conn.pathname;","","    var mapping, match, remainingPath;","    for (var i = 0, len = mappings.length; i < len; ++i) {","      mapping = mappings[i];","","      // Try to match the hostname.","      if (mapping.hostname && mapping.hostname !== hostname) continue;","","      // Try to match the path.","      if (!(match = pathname.match(mapping.pattern))) continue;","","      // Skip if the remaining path doesn't start with a \"/\".","      remainingPath = match[1];","      if (remainingPath.length > 0 && remainingPath[0] !== \"/\") continue;","","      conn.basename += mapping.path;","","      return conn.call(mapping.app);","    }","","    return conn.call(app);","  }","","  Object.defineProperties(mapper, {","","    /**","     * Adds a new mapping that runs the given app when the location used in the","     * request matches the given location.","     */","    map: d(function (location, app) {","      var hostname, path;","","      // If the location is a fully qualified URL use the host as well.","      var match = location.match(/^https?:\\/\\/(.*?)(\\/.*)/);","      if (match) {","        hostname = match[1].replace(/:\\d+$/, \"\"); // Strip the port.","        path = match[2];","      } else {","        path = location;","      }","","      if (path.charAt(0) !== \"/\") throw new Error(\"Mapping path must start with \\\"/\\\", was \\\"\" + path + \"\\\"\");","","      path = path.replace(/\\/$/, \"\");","","      var pattern = new RegExp(\"^\" + escapeRegExp(path).replace(/\\/+/g, \"/+\") + \"(.*)\");","","      mappings.push({","        hostname: hostname,","        path: path,","        pattern: pattern,","        app: app","      });","","      mappings.sort(byMostSpecific);","    }),","","    /**","     * Sets the given app as the default for this mapper.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","    })","","  });","","  // Allow app.use(mach.mapper, map)","  if (typeof map === \"object\") for (var location in map) if (map.hasOwnProperty(location)) mapper.map(location, map[location]);","","  return mapper;","}","","module.exports = createMapper;"],"l":{"3":1,"4":1,"6":1,"7":0,"52":1,"54":0,"55":0,"56":0,"59":0,"61":1,"62":0,"63":0,"65":0,"66":0,"67":0,"70":0,"73":0,"76":0,"77":0,"79":0,"81":0,"84":0,"87":0,"94":0,"97":0,"98":0,"99":0,"100":0,"102":0,"105":0,"107":0,"109":0,"111":0,"118":0,"125":0,"131":0,"133":0,"136":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/escapeRegExp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/escapeRegExp.js","s":{"1":1,"2":0,"3":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"escapeRegExp","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"2":{"start":{"line":7,"column":2},"end":{"line":7,"column":65}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":30}}},"branchMap":{},"code":["\"use strict\";","","/**"," * Escapes all special RegExp characters in the given string."," */","function escapeRegExp(string) {","  return String(string).replace(/([.?*+^$[\\]\\\\(){}-])/g, \"\\\\$1\");","}","","module.exports = escapeRegExp;"],"l":{"6":1,"7":0,"10":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/methodOverride.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/methodOverride.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"methodOverride","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":38}}},"2":{"name":"(anonymous_2)","line":46,"loc":{"start":{"line":46,"column":9},"end":{"line":46,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":66}},"2":{"start":{"line":38,"column":0},"end":{"line":63,"column":1}},"3":{"start":{"line":39,"column":2},"end":{"line":39,"column":26}},"4":{"start":{"line":41,"column":2},"end":{"line":41,"column":68}},"5":{"start":{"line":41,"column":35},"end":{"line":41,"column":68}},"6":{"start":{"line":43,"column":2},"end":{"line":43,"column":49}},"7":{"start":{"line":44,"column":2},"end":{"line":44,"column":87}},"8":{"start":{"line":46,"column":2},"end":{"line":62,"column":4}},"9":{"start":{"line":47,"column":4},"end":{"line":47,"column":15}},"10":{"start":{"line":48,"column":4},"end":{"line":57,"column":5}},"11":{"start":{"line":49,"column":6},"end":{"line":49,"column":48}},"12":{"start":{"line":50,"column":11},"end":{"line":57,"column":5}},"13":{"start":{"line":51,"column":6},"end":{"line":51,"column":92}},"14":{"start":{"line":52,"column":11},"end":{"line":57,"column":5}},"15":{"start":{"line":53,"column":6},"end":{"line":53,"column":38}},"16":{"start":{"line":56,"column":6},"end":{"line":56,"column":68}},"17":{"start":{"line":56,"column":33},"end":{"line":56,"column":68}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":51}},"19":{"start":{"line":59,"column":16},"end":{"line":59,"column":51}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":26}},"21":{"start":{"line":65,"column":0},"end":{"line":65,"column":32}}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":19}},{"start":{"line":39,"column":23},"end":{"line":39,"column":25}}]},"2":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"3":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":18},"end":{"line":43,"column":35}},{"start":{"line":43,"column":39},"end":{"line":43,"column":48}}]},"4":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":39},"end":{"line":44,"column":57}},{"start":{"line":44,"column":61},"end":{"line":44,"column":85}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":48,"column":4}},{"start":{"line":48,"column":4},"end":{"line":48,"column":4}}]},"6":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":11},"end":{"line":50,"column":11}},{"start":{"line":50,"column":11},"end":{"line":50,"column":11}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":11},"end":{"line":52,"column":11}},{"start":{"line":52,"column":11},"end":{"line":52,"column":11}}]},"8":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":6},"end":{"line":56,"column":6}},{"start":{"line":56,"column":6},"end":{"line":56,"column":6}}]},"9":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]}},"code":["\"use strict\";","","var normalizeHeaderName = require(\"../utils/normalizeHeaderName\");","","/**"," * A middleware that overrides the method of the request to a value that was"," * given either in a request parameter or a request header. Can be useful when"," * you need to use HTTP methods other than GET and POST with clients that don't"," * support them, like web browsers."," *"," * For example, you could use the following HTML form:"," *"," *   <form method=\"POST\" action=\"/\">"," *     <input type=\"hidden\" name=\"_method\" value=\"PUT\">"," *   </form>"," *"," * with an app that uses methodOverride:"," *"," *   var app = mach.stack();"," *   app.use(mach.params);"," *   app.use(mach.methodOverride);"," *   app.run(function (request) {"," *     return request.method; // PUT"," *   });"," *"," * Note: When using mach.methodOverride with POST parameters you need to put"," * mach.params in front of it so that the request parameters will be available."," *"," * Options may be any of the following:"," *"," * - paramName        The name of the request param that contains the"," *                    request method. Defaults to \"_method\""," * - headerName       The name of the HTTP header that will contain the"," *                    request method. This allows you to put the request"," *                    method in an HTTP header instead of a request param."," *                    Defaults to \"X-Http-Method-Override\""," */","function methodOverride(app, options) {","  options = options || {};","","  if (typeof options === \"string\") options = { paramName: options };","","  var paramName = options.paramName || \"_method\";","  var headerName = normalizeHeaderName(options.headerName || \"X-Http-Method-Override\");","","  return function (conn) {","    var method;","    if (conn.request.headers[headerName]) {","      method = conn.request.headers[headerName];","    } else if (!conn.params) {","      conn.onError(new Error(\"No params! Use mach.params in front of mach.methodOverride\"));","    } else if (conn.params[paramName]) {","      method = conn.params[paramName];","","      // If multiple _method parameters were used, use the last one.","      if (Array.isArray(method)) method = method[method.length - 1];","    }","","    if (method) conn.method = method.toUpperCase();","","    return conn.call(app);","  };","}","","module.exports = methodOverride;"],"l":{"3":1,"38":1,"39":0,"41":0,"43":0,"44":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"56":0,"59":0,"61":0,"65":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/modified.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/modified.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"modified","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":23}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":9},"end":{"line":22,"column":25}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":31},"end":{"line":23,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":21,"column":0},"end":{"line":49,"column":1}},"3":{"start":{"line":22,"column":2},"end":{"line":48,"column":4}},"4":{"start":{"line":23,"column":4},"end":{"line":47,"column":7}},"5":{"start":{"line":24,"column":6},"end":{"line":25,"column":35}},"6":{"start":{"line":27,"column":6},"end":{"line":27,"column":57}},"7":{"start":{"line":28,"column":6},"end":{"line":28,"column":39}},"8":{"start":{"line":30,"column":6},"end":{"line":34,"column":7}},"9":{"start":{"line":31,"column":8},"end":{"line":31,"column":26}},"10":{"start":{"line":32,"column":8},"end":{"line":32,"column":30}},"11":{"start":{"line":33,"column":8},"end":{"line":33,"column":15}},"12":{"start":{"line":36,"column":6},"end":{"line":36,"column":65}},"13":{"start":{"line":37,"column":6},"end":{"line":37,"column":59}},"14":{"start":{"line":39,"column":6},"end":{"line":46,"column":7}},"15":{"start":{"line":40,"column":8},"end":{"line":40,"column":86}},"16":{"start":{"line":40,"column":46},"end":{"line":40,"column":86}},"17":{"start":{"line":42,"column":8},"end":{"line":45,"column":9}},"18":{"start":{"line":43,"column":10},"end":{"line":43,"column":28}},"19":{"start":{"line":44,"column":10},"end":{"line":44,"column":32}},"20":{"start":{"line":51,"column":0},"end":{"line":51,"column":26}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":30,"column":6}},{"start":{"line":30,"column":6},"end":{"line":30,"column":6}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":10},"end":{"line":30,"column":21}},{"start":{"line":30,"column":25},"end":{"line":30,"column":29}},{"start":{"line":30,"column":33},"end":{"line":30,"column":66}}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":6},"end":{"line":39,"column":6}},{"start":{"line":39,"column":6},"end":{"line":39,"column":6}}]},"4":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":10},"end":{"line":39,"column":25}},{"start":{"line":39,"column":29},"end":{"line":39,"column":41}}]},"5":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]},"6":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":42,"column":8}},{"start":{"line":42,"column":8},"end":{"line":42,"column":8}}]}},"code":["\"use strict\";","","var stripQuotes = require(\"../utils/stripQuotes\");","","/**"," * A middleware that automatically performs content-based HTTP caching in"," * response to requests that use the If-None-Match and/or If-Modified-Since"," * headers. In order to work effectively, downstream apps must use the ETag"," * and/or Last-Modified headers."," *"," * Example:"," *"," *   app.use(mach.modified);"," *"," *   // Send Last-Modified and ETag headers with static files."," *   app.use(mach.file, {"," *     useLastModified: true, // this is the default"," *     useETag: true"," *   });"," */","function modified(app) {","  return function (conn) {","    return conn.call(app).then(function () {","      var request = conn.request,","          response = conn.response;","","      var ifNoneMatch = request.headers[\"If-None-Match\"];","      var etag = response.headers.ETag;","","      if (ifNoneMatch && etag && etag === stripQuotes(ifNoneMatch)) {","        conn.status = 304;","        response.content = \"\";","        return;","      }","","      var ifModifiedSince = request.headers[\"If-Modified-Since\"];","      var lastModified = response.headers[\"Last-Modified\"];","","      if (ifModifiedSince && lastModified) {","        if (typeof lastModified === \"string\") lastModified = Date.parse(lastModified);","","        if (lastModified <= Date.parse(ifModifiedSince)) {","          conn.status = 304;","          response.content = \"\";","        }","      }","    });","  };","}","","module.exports = modified;"],"l":{"3":1,"21":1,"22":0,"23":0,"24":0,"27":0,"28":0,"30":0,"31":0,"32":0,"33":0,"36":0,"37":0,"39":0,"40":0,"42":0,"43":0,"44":0,"51":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stripQuotes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/stripQuotes.js","s":{"1":1,"2":0,"3":0,"4":0,"5":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stripQuotes","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":7,"column":1}},"2":{"start":{"line":4,"column":2},"end":{"line":6,"column":3}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":3},"end":{"line":6,"column":17}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}}},"branchMap":{"1":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":2},"end":{"line":4,"column":2}},{"start":{"line":4,"column":2},"end":{"line":4,"column":2}}]}},"code":["\"use strict\";","","function stripQuotes(string) {","  if (string.substring(0, 1) === \"\\\"\") {","    return string.replace(/^\"|\"$/g, \"\");","  }return string;","}","","module.exports = stripQuotes;"],"l":{"3":1,"4":0,"5":0,"6":0,"9":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/params.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/params.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"parseParams","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":35}}},"2":{"name":"(anonymous_2)","line":32,"loc":{"start":{"line":32,"column":9},"end":{"line":32,"column":25}}},"3":{"name":"(anonymous_3)","line":33,"loc":{"start":{"line":33,"column":42},"end":{"line":33,"column":60}}},"4":{"name":"(anonymous_4)","line":42,"loc":{"start":{"line":42,"column":7},"end":{"line":42,"column":24}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":72}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":45}},"5":{"start":{"line":25,"column":0},"end":{"line":48,"column":1}},"6":{"start":{"line":26,"column":2},"end":{"line":26,"column":26}},"7":{"start":{"line":28,"column":2},"end":{"line":28,"column":68}},"8":{"start":{"line":28,"column":35},"end":{"line":28,"column":68}},"9":{"start":{"line":30,"column":2},"end":{"line":30,"column":36}},"10":{"start":{"line":32,"column":2},"end":{"line":47,"column":4}},"11":{"start":{"line":33,"column":4},"end":{"line":46,"column":7}},"12":{"start":{"line":34,"column":6},"end":{"line":39,"column":7}},"13":{"start":{"line":36,"column":8},"end":{"line":36,"column":56}},"14":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"15":{"start":{"line":41,"column":6},"end":{"line":41,"column":28}},"16":{"start":{"line":43,"column":6},"end":{"line":43,"column":101}},"17":{"start":{"line":43,"column":51},"end":{"line":43,"column":101}},"18":{"start":{"line":45,"column":6},"end":{"line":45,"column":18}},"19":{"start":{"line":50,"column":0},"end":{"line":50,"column":29}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},{"start":{"line":26,"column":23},"end":{"line":26,"column":25}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":28,"column":2}},{"start":{"line":28,"column":2},"end":{"line":28,"column":2}}]},"3":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":6},"end":{"line":34,"column":6}},{"start":{"line":34,"column":6},"end":{"line":34,"column":6}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":6}},{"start":{"line":43,"column":6},"end":{"line":43,"column":6}}]}},"code":["\"use strict\";","","var objectAssign = require(\"object-assign\");","var mach = require(\"../index\");","var MaxLengthExceededError = require(\"../utils/MaxLengthExceededError\");","","mach.extend(require(\"../extensions/server\"));","","/**"," * Automatically parses all request parameters and stores them in conn.params."," * This is the union of all GET (query string) and POST (content) parameters,"," * such that all POST parameters with the same name take precedence."," *"," * Valid options are:"," *"," * - maxLength          The maximum length (in bytes) of the request content"," *"," * If the maximum allowed length is exceeded, this middleware returns a"," * 413 Request Entity Too Large response."," *"," * Note: This middleware parses all request parameters for all downstream apps. If"," * you'd prefer to only do this work on some requests and not all, you can use"," * conn.getParams inside your app instead."," */","function parseParams(app, options) {","  options = options || {};","","  if (typeof options === \"number\") options = { maxLength: options };","","  var maxLength = options.maxLength;","","  return function (conn) {","    return conn.getParams(maxLength).then(function (params) {","      if (conn.params) {","        // Route params take precedence over content params.","        conn.params = objectAssign(params, conn.params);","      } else {","        conn.params = params;","      }","","      return conn.call(app);","    }, function (error) {","      if (error instanceof MaxLengthExceededError) return conn.text(413, \"Request Entity Too Large\");","","      throw error;","    });","  };","}","","module.exports = parseParams;"],"l":{"3":1,"4":1,"5":1,"7":1,"25":1,"26":0,"28":0,"30":0,"32":0,"33":0,"34":0,"36":0,"38":0,"41":0,"43":0,"45":0,"50":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/proxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/proxy.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"returnTrue","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":22}}},"2":{"name":"proxy","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":34}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":11},"end":{"line":34,"column":27}}},"4":{"name":"(anonymous_4)","line":50,"loc":{"start":{"line":50,"column":9},"end":{"line":50,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"4":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":14}},"6":{"start":{"line":29,"column":0},"end":{"line":53,"column":1}},"7":{"start":{"line":30,"column":2},"end":{"line":30,"column":28}},"8":{"start":{"line":32,"column":2},"end":{"line":39,"column":3}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":23}},"10":{"start":{"line":34,"column":4},"end":{"line":36,"column":6}},"11":{"start":{"line":35,"column":6},"end":{"line":35,"column":37}},"12":{"start":{"line":37,"column":9},"end":{"line":39,"column":3}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":56}},"14":{"start":{"line":41,"column":2},"end":{"line":41,"column":16}},"15":{"start":{"line":42,"column":2},"end":{"line":48,"column":3}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":23}},"17":{"start":{"line":44,"column":9},"end":{"line":48,"column":3}},"18":{"start":{"line":45,"column":4},"end":{"line":45,"column":36}},"19":{"start":{"line":47,"column":4},"end":{"line":47,"column":53}},"20":{"start":{"line":50,"column":2},"end":{"line":52,"column":4}},"21":{"start":{"line":51,"column":4},"end":{"line":51,"column":51}},"22":{"start":{"line":55,"column":0},"end":{"line":55,"column":23}}},"branchMap":{"1":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":9},"end":{"line":30,"column":13}},{"start":{"line":30,"column":17},"end":{"line":30,"column":27}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":2}},{"start":{"line":32,"column":2},"end":{"line":32,"column":2}}]},"3":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":9},"end":{"line":37,"column":9}},{"start":{"line":37,"column":9},"end":{"line":37,"column":9}}]},"4":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":42,"column":2}},{"start":{"line":42,"column":2},"end":{"line":42,"column":2}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":9},"end":{"line":44,"column":9}},{"start":{"line":44,"column":9},"end":{"line":44,"column":9}}]},"6":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":13},"end":{"line":44,"column":39}},{"start":{"line":44,"column":43},"end":{"line":44,"column":69}}]},"7":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":34},"end":{"line":51,"column":43}},{"start":{"line":51,"column":46},"end":{"line":51,"column":49}}]}},"code":["\"use strict\";","","var Location = require(\"../Location\");","var createProxy = require(\"../utils/createProxy\");","var isRegExp = require(\"../utils/isRegExp\");","","function returnTrue() {","  return true;","}","","/**"," * A middleware that forwards requests that pass the given test function"," * to the given target. If the target is not an app, it should be a string"," * or options hash that is used to create a proxy."," *"," * Example:"," *"," *   var mach = require('mach');"," *   var app = mach.stack();"," *"," *   // Forward all requests to example.com."," *   app.use(mach.proxy, 'http://www.example.com');"," *"," *   // Forward all requests that match \"/images/*.jpg\" to S3."," *   app.use(mach.proxy, 'http://s3.amazon.com/my-bucket', /\\/images/*.jpg/);"," *   "," *   mach.serve(app);"," */","function proxy(app, target, test) {","  test = test || returnTrue;","","  if (isRegExp(test)) {","    var pattern = test;","    test = function (conn) {","      return pattern.test(conn.href);","    };","  } else if (typeof test !== \"function\") {","    throw new Error(\"mach.proxy needs a test function\");","  }","","  var targetApp;","  if (typeof target === \"function\") {","    targetApp = target;","  } else if (typeof target === \"string\" || target instanceof Location) {","    targetApp = createProxy(target);","  } else {","    throw new Error(\"mach.proxy needs a target app\");","  }","","  return function (conn) {","    return conn.call(test(conn) ? targetApp : app);","  };","}","","module.exports = proxy;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"29":1,"30":0,"32":0,"33":0,"34":0,"35":0,"37":0,"38":0,"41":0,"42":0,"43":0,"44":0,"45":0,"47":0,"50":0,"51":0,"55":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createProxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/createProxy.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"createProxy","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":31}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":9},"end":{"line":16,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"3":{"start":{"line":13,"column":0},"end":{"line":23,"column":1}},"4":{"start":{"line":14,"column":2},"end":{"line":14,"column":73}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":73}},"6":{"start":{"line":16,"column":2},"end":{"line":22,"column":4}},"7":{"start":{"line":19,"column":4},"end":{"line":19,"column":52}},"8":{"start":{"line":21,"column":4},"end":{"line":21,"column":49}},"9":{"start":{"line":25,"column":0},"end":{"line":25,"column":29}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]}},"code":["\"use strict\";","","var Location = require(\"../Location\");","var sendRequest = require(\"./sendRequest\");","","/**"," * A proxy is a function that is used to forward a request to"," * a different location and return the response."," *"," * This function is part of the low-level API and can generally be"," * used more conveniently through the mach.proxy middleware."," */","function createProxy(location) {","  if (!(location instanceof Location)) location = new Location(location);","","  return function (conn) {","    // Only concat the path from the connection so the protocol,","    // auth, and host from the original location are preserved.","    conn.proxyLocation = location.concat(conn.path);","","    return sendRequest(conn, conn.proxyLocation);","  };","}","","module.exports = createProxy;"],"l":{"3":1,"4":1,"13":1,"14":0,"16":0,"19":0,"21":0,"25":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/isRegExp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/isRegExp.js","s":{"1":1,"2":0,"3":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"isRegExp","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":1}},"2":{"start":{"line":4,"column":2},"end":{"line":4,"column":88}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"branchMap":{"1":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":9},"end":{"line":4,"column":23}},{"start":{"line":4,"column":27},"end":{"line":4,"column":87}}]}},"code":["\"use strict\";","","function isRegExp(object) {","  return object != null && Object.prototype.toString.call(object) === \"[object RegExp]\";","}","","module.exports = isRegExp;"],"l":{"3":1,"4":0,"7":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/rewrite.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/rewrite.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"rewrite","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":44}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":52}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"3":{"start":{"line":11,"column":0},"end":{"line":26,"column":1}},"4":{"start":{"line":12,"column":2},"end":{"line":12,"column":91}},"5":{"start":{"line":12,"column":35},"end":{"line":12,"column":91}},"6":{"start":{"line":14,"column":2},"end":{"line":14,"column":88}},"7":{"start":{"line":14,"column":26},"end":{"line":14,"column":88}},"8":{"start":{"line":16,"column":2},"end":{"line":16,"column":34}},"9":{"start":{"line":18,"column":2},"end":{"line":25,"column":4}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":123}},"12":{"start":{"line":22,"column":32},"end":{"line":22,"column":123}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":26}},"14":{"start":{"line":28,"column":0},"end":{"line":28,"column":25}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"2":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]},"3":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":16},"end":{"line":16,"column":27}},{"start":{"line":16,"column":31},"end":{"line":16,"column":33}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]}},"code":["\"use strict\";","","var escapeRegExp = require(\"../utils/escapeRegExp\");","var isRegExp = require(\"../utils/isRegExp\");","","/**"," * A middleware that provides URL rewriting behavior similar to Apache's"," * mod_rewrite. The pathname of requests that match the given pattern is"," * overwritten with the replacement using a simple String#replace."," */","function rewrite(app, pattern, replacement) {","  if (typeof pattern === \"string\") pattern = new RegExp(\"^\" + escapeRegExp(pattern) + \"$\");","","  if (!isRegExp(pattern)) throw new Error(\"Rewrite pattern must be a RegExp or String\");","","  replacement = replacement || \"\";","","  return function (conn) {","    var pathname = conn.pathname;","","    // Modify the pathname if the pattern matches.","    if (pattern.test(pathname)) conn.location.properties.pathname = conn.basename + pathname.replace(pattern, replacement);","","    return conn.call(app);","  };","}","","module.exports = rewrite;"],"l":{"3":1,"4":1,"11":1,"12":0,"14":0,"16":0,"18":0,"19":0,"22":0,"24":0,"28":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/router.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/router.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"createRouter","line":67,"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":32}}},"2":{"name":"router","line":76,"loc":{"start":{"line":76,"column":2},"end":{"line":76,"column":24}}},"3":{"name":"(anonymous_3)","line":114,"loc":{"start":{"line":114,"column":13},"end":{"line":114,"column":46}}},"4":{"name":"(anonymous_4)","line":147,"loc":{"start":{"line":147,"column":22},"end":{"line":147,"column":40}}},"5":{"name":"(anonymous_5)","line":161,"loc":{"start":{"line":161,"column":11},"end":{"line":161,"column":36}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":52}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":48}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":62}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":86}},"8":{"start":{"line":67,"column":0},"end":{"line":173,"column":1}},"9":{"start":{"line":69,"column":2},"end":{"line":72,"column":3}},"10":{"start":{"line":70,"column":4},"end":{"line":70,"column":14}},"11":{"start":{"line":71,"column":4},"end":{"line":71,"column":15}},"12":{"start":{"line":74,"column":2},"end":{"line":74,"column":18}},"13":{"start":{"line":76,"column":2},"end":{"line":100,"column":3}},"14":{"start":{"line":77,"column":4},"end":{"line":77,"column":29}},"15":{"start":{"line":78,"column":4},"end":{"line":78,"column":70}},"16":{"start":{"line":80,"column":4},"end":{"line":80,"column":21}},"17":{"start":{"line":81,"column":4},"end":{"line":97,"column":5}},"18":{"start":{"line":82,"column":6},"end":{"line":82,"column":29}},"19":{"start":{"line":85,"column":6},"end":{"line":96,"column":7}},"20":{"start":{"line":86,"column":8},"end":{"line":86,"column":82}},"21":{"start":{"line":88,"column":8},"end":{"line":93,"column":9}},"22":{"start":{"line":90,"column":10},"end":{"line":90,"column":44}},"23":{"start":{"line":92,"column":10},"end":{"line":92,"column":31}},"24":{"start":{"line":95,"column":8},"end":{"line":95,"column":36}},"25":{"start":{"line":99,"column":4},"end":{"line":99,"column":26}},"26":{"start":{"line":102,"column":2},"end":{"line":165,"column":5}},"27":{"start":{"line":115,"column":6},"end":{"line":118,"column":7}},"28":{"start":{"line":116,"column":8},"end":{"line":116,"column":22}},"29":{"start":{"line":117,"column":8},"end":{"line":117,"column":23}},"30":{"start":{"line":120,"column":6},"end":{"line":120,"column":75}},"31":{"start":{"line":120,"column":37},"end":{"line":120,"column":75}},"32":{"start":{"line":122,"column":6},"end":{"line":126,"column":7}},"33":{"start":{"line":123,"column":8},"end":{"line":123,"column":28}},"34":{"start":{"line":124,"column":13},"end":{"line":126,"column":7}},"35":{"start":{"line":125,"column":8},"end":{"line":125,"column":21}},"36":{"start":{"line":128,"column":6},"end":{"line":128,"column":20}},"37":{"start":{"line":130,"column":6},"end":{"line":139,"column":7}},"38":{"start":{"line":131,"column":8},"end":{"line":131,"column":18}},"39":{"start":{"line":133,"column":8},"end":{"line":136,"column":9}},"40":{"start":{"line":134,"column":10},"end":{"line":134,"column":33}},"41":{"start":{"line":135,"column":10},"end":{"line":135,"column":29}},"42":{"start":{"line":138,"column":8},"end":{"line":138,"column":46}},"43":{"start":{"line":141,"column":6},"end":{"line":141,"column":80}},"44":{"start":{"line":141,"column":30},"end":{"line":141,"column":80}},"45":{"start":{"line":143,"column":6},"end":{"line":143,"column":61}},"46":{"start":{"line":145,"column":6},"end":{"line":145,"column":52}},"47":{"start":{"line":145,"column":32},"end":{"line":145,"column":52}},"48":{"start":{"line":147,"column":6},"end":{"line":155,"column":9}},"49":{"start":{"line":148,"column":8},"end":{"line":148,"column":47}},"50":{"start":{"line":150,"column":8},"end":{"line":154,"column":9}},"51":{"start":{"line":151,"column":10},"end":{"line":151,"column":42}},"52":{"start":{"line":153,"column":10},"end":{"line":153,"column":40}},"53":{"start":{"line":162,"column":6},"end":{"line":162,"column":26}},"54":{"start":{"line":168,"column":2},"end":{"line":168,"column":117}},"55":{"start":{"line":168,"column":31},"end":{"line":168,"column":117}},"56":{"start":{"line":168,"column":54},"end":{"line":168,"column":117}},"57":{"start":{"line":168,"column":85},"end":{"line":168,"column":117}},"58":{"start":{"line":170,"column":2},"end":{"line":170,"column":53}},"59":{"start":{"line":172,"column":2},"end":{"line":172,"column":16}},"60":{"start":{"line":175,"column":0},"end":{"line":175,"column":30}}},"branchMap":{"1":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":69,"column":2}},{"start":{"line":69,"column":2},"end":{"line":69,"column":2}}]},"2":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":23},"end":{"line":78,"column":37}},{"start":{"line":78,"column":41},"end":{"line":78,"column":43}}]},"3":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":52},"end":{"line":78,"column":62}},{"start":{"line":78,"column":66},"end":{"line":78,"column":68}}]},"4":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":6},"end":{"line":85,"column":6}},{"start":{"line":85,"column":6},"end":{"line":85,"column":6}}]},"5":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"6":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":6},"end":{"line":115,"column":6}},{"start":{"line":115,"column":6},"end":{"line":115,"column":6}}]},"7":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":6},"end":{"line":120,"column":6}},{"start":{"line":120,"column":6},"end":{"line":120,"column":6}}]},"8":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":6},"end":{"line":122,"column":6}},{"start":{"line":122,"column":6},"end":{"line":122,"column":6}}]},"9":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":13},"end":{"line":124,"column":13}},{"start":{"line":124,"column":13},"end":{"line":124,"column":13}}]},"10":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":6},"end":{"line":130,"column":6}},{"start":{"line":130,"column":6},"end":{"line":130,"column":6}}]},"11":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]},"12":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":6},"end":{"line":141,"column":6}},{"start":{"line":141,"column":6},"end":{"line":141,"column":6}}]},"13":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":6},"end":{"line":145,"column":6}},{"start":{"line":145,"column":6},"end":{"line":145,"column":6}}]},"14":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":8}},{"start":{"line":150,"column":8},"end":{"line":150,"column":8}}]},"15":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":2},"end":{"line":168,"column":2}},{"start":{"line":168,"column":2},"end":{"line":168,"column":2}}]},"16":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":54},"end":{"line":168,"column":54}},{"start":{"line":168,"column":54},"end":{"line":168,"column":54}}]}},"code":["\"use strict\";","","/* jshint -W084 */","var d = require(\"describe-property\");","var objectAssign = require(\"object-assign\");","var compileRoute = require(\"../utils/compileRoute\");","var isRegExp = require(\"../utils/isRegExp\");","var makeParams = require(\"../utils/makeParams\");","var RoutingProperties = require(\"../utils/RoutingProperties\");","","var LEADING_HTTP_METHOD_MATCHER = /^(DELETE|GET|HEAD|OPTIONS|POST|PUT|TRACE)\\s+(.+)$/;","","/**"," * A middleware that provides pattern-based routing for URLs, with optional"," * support for restricting matches to a specific request method. Named segments"," * of the URL are added to conn.params and take precedence over all others."," *"," *   app.use(mach.router, {"," *"," *     'GET /login': function (conn) {"," *       // conn.method == 'GET'"," *       // conn.pathname == '/login'"," *     },"," *"," *     'POST /login': function (conn) {"," *       // conn.method == 'POST'"," *       // conn.pathname == '/login'"," *     },"," *"," *     'DELETE /users/:id': function (conn) {"," *       // conn.method == 'DELETE'"," *       // conn.pathname == '/users/5'"," *       // conn.params == { id: 5 }"," *     }"," *"," *   });"," *"," * This function may also be used outside the context of a middleware stack"," * to create a standalone app. Routes may be given one at a time:"," *"," *   var app = mach.router();"," *"," *   app.get('/login', function (conn) {"," *     // ..."," *   });"," *"," *   app.delete('/users/:id', function (conn) {"," *     // ..."," *   });"," *"," * Or all at once:"," *"," *   var app = mach.router({"," *"," *     'GET /login': function (conn) {"," *       // ..."," *     },"," *"," *     'DELETE /users/:id': function (conn) {"," *       // ..."," *     }"," *"," *   });"," *"," * Note: Routes are always tried in the order they were defined."," */","function createRouter(app, map) {","  // Allow mach.router(map)","  if (typeof app === \"object\") {","    map = app;","    app = null;","  }","","  var routes = {};","","  function router(conn) {","    var method = conn.method;","    var routesToTry = (routes[method] || []).concat(routes.ANY || []);","","    var route, match;","    for (var i = 0, len = routesToTry.length; i < len; ++i) {","      route = routesToTry[i];","","      // Try to match the route.","      if (match = route.pattern.exec(conn.pathname)) {","        var params = makeParams(route.keys, Array.prototype.slice.call(match, 1));","","        if (conn.params) {","          // Route params take precedence above all others.","          objectAssign(conn.params, params);","        } else {","          conn.params = params;","        }","","        return conn.call(route.app);","      }","    }","","    return conn.call(app);","  }","","  Object.defineProperties(router, {","","    /**","     * Adds a new route that runs the given app when the pattern matches the","     * path used in the request. If the pattern is a string, it is automatically","     * compiled. The following signatures are supported:","     *","     *   route('/users/:id', app)","     *   route('/users/:id', 'PUT', app)","     *   route('/users/:id', [ 'GET', 'PUT' ], app)","     *   route('GET /users/:id', app)","     */","    route: d(function (pattern, methods, app) {","      if (typeof methods === \"function\") {","        app = methods;","        methods = null;","      }","","      if (typeof app !== \"function\") throw new Error(\"Route needs an app\");","","      if (typeof methods === \"string\") {","        methods = [methods];","      } else if (!Array.isArray(methods)) {","        methods = [];","      }","","      var keys = [];","","      if (typeof pattern === \"string\") {","        var match;","","        if (match = pattern.match(LEADING_HTTP_METHOD_MATCHER)) {","          methods.push(match[1]);","          pattern = match[2];","        }","","        pattern = compileRoute(pattern, keys);","      }","","      if (!isRegExp(pattern)) throw new Error(\"Route pattern must be a RegExp\");","","      var route = { pattern: pattern, keys: keys, app: app };","","      if (methods.length === 0) methods.push(\"ANY\");","","      methods.forEach(function (method) {","        var upperMethod = method.toUpperCase();","","        if (routes[upperMethod]) {","          routes[upperMethod].push(route);","        } else {","          routes[upperMethod] = [route];","        }","      });","    }),","","    /**","     * Sets the given app as the default for this router.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","    })","","  });","","  // Allow app.use(mach.router, map)","  if (typeof map === \"object\") for (var route in map) if (map.hasOwnProperty(route)) router.route(route, map[route]);","","  Object.defineProperties(router, RoutingProperties);","","  return router;","}","","module.exports = createRouter;"],"l":{"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"67":1,"69":0,"70":0,"71":0,"74":0,"76":1,"77":0,"78":0,"80":0,"81":0,"82":0,"85":0,"86":0,"88":0,"90":0,"92":0,"95":0,"99":0,"102":0,"115":0,"116":0,"117":0,"120":0,"122":0,"123":0,"124":0,"125":0,"128":0,"130":0,"131":0,"133":0,"134":0,"135":0,"138":0,"141":0,"143":0,"145":0,"147":0,"148":0,"150":0,"151":0,"153":0,"162":0,"168":0,"170":0,"172":0,"175":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/compileRoute.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/compileRoute.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"compileRoute","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":35}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":43},"end":{"line":17,"column":65}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":69}},"2":{"start":{"line":16,"column":0},"end":{"line":30,"column":1}},"3":{"start":{"line":17,"column":2},"end":{"line":27,"column":5}},"4":{"start":{"line":18,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":19,"column":6},"end":{"line":19,"column":21}},"6":{"start":{"line":20,"column":6},"end":{"line":20,"column":26}},"7":{"start":{"line":21,"column":11},"end":{"line":26,"column":5}},"8":{"start":{"line":22,"column":6},"end":{"line":22,"column":25}},"9":{"start":{"line":23,"column":6},"end":{"line":23,"column":21}},"10":{"start":{"line":25,"column":6},"end":{"line":25,"column":26}},"11":{"start":{"line":29,"column":2},"end":{"line":29,"column":45}},"12":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":11},"end":{"line":21,"column":11}},{"start":{"line":21,"column":11},"end":{"line":21,"column":11}}]}},"code":["\"use strict\";","","var paramMatcher = /:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\\[\\]\\\\+|{}^$]/g;","","/**"," * Compiles the given route string into a RegExp that can be used to"," * match a URL. The route may contain named parameters in the form of"," * a colon followed by a valid JavaScript identifier (e.g. \":name\","," * \":_name\", and \":$name\" are all valid parameters). The route may"," * also contain a * to match any character non-greedily, or a ? to"," * match the previous thing 0 or 1 time."," *"," * The keys array is populated with names of all parameters in the"," * order they appear in the route string."," */","function compileRoute(route, keys) {","  var source = route.replace(paramMatcher, function (match, key) {","    if (key) {","      keys.push(key);","      return \"([^./?#]+)\";","    } else if (match === \"*\") {","      keys.push(\"splat\");","      return \"(.*?)\";","    } else {","      return \"\\\\\" + match;","    }","  });","","  return new RegExp(\"^\" + source + \"$\", \"i\");","}","","module.exports = compileRoute;"],"l":{"3":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"25":0,"29":0,"32":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeParams.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeParams.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"makeParams","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}}},"2":{"name":"(anonymous_2)","line":4,"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":51}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":22,"column":1}},"2":{"start":{"line":4,"column":2},"end":{"line":21,"column":9}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":30}},"4":{"start":{"line":7,"column":4},"end":{"line":18,"column":5}},"5":{"start":{"line":8,"column":6},"end":{"line":15,"column":7}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":33}},"7":{"start":{"line":10,"column":13},"end":{"line":15,"column":7}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":45}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"10":{"start":{"line":17,"column":6},"end":{"line":17,"column":26}},"11":{"start":{"line":20,"column":4},"end":{"line":20,"column":18}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":6},"end":{"line":8,"column":6}},{"start":{"line":8,"column":6},"end":{"line":8,"column":6}}]},"3":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":13},"end":{"line":10,"column":13}},{"start":{"line":10,"column":13},"end":{"line":10,"column":13}}]}},"code":["\"use strict\";","","function makeParams(keys, values) {","  return keys.reduce(function (params, key, index) {","    var value = values[index];","","    if (key === \"splat\") {","      if (Array.isArray(params.splat)) {","        params.splat.push(value);","      } else if (\"splat\" in params) {","        // Multiple \"splat\" keys make an array.","        params.splat = [params.splat, value];","      } else {","        params.splat = value;","      }","    } else {","      params[key] = value;","    }","","    return params;","  }, {});","}","","module.exports = makeParams;"],"l":{"3":1,"4":0,"5":0,"7":0,"8":0,"9":0,"10":0,"12":0,"14":0,"17":0,"20":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/RoutingProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/RoutingProperties.js","s":{"1":1,"2":1,"3":1,"4":7,"5":0,"6":7,"7":1},"b":{},"f":{"1":7,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":59},"end":{"line":15,"column":83}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":5,"column":0},"end":{"line":13,"column":2}},"3":{"start":{"line":15,"column":0},"end":{"line":21,"column":7}},"4":{"start":{"line":16,"column":2},"end":{"line":18,"column":5}},"5":{"start":{"line":17,"column":4},"end":{"line":17,"column":60}},"6":{"start":{"line":20,"column":2},"end":{"line":20,"column":14}},"7":{"start":{"line":23,"column":0},"end":{"line":23,"column":35}}},"branchMap":{},"code":["\"use strict\";","","var d = require(\"describe-property\");","","var RoutingMethods = {","  \"delete\": \"DELETE\",","  get: [\"GET\", \"HEAD\"],","  head: \"HEAD\",","  options: \"OPTIONS\",","  post: \"POST\",","  put: \"PUT\",","  trace: \"TRACE\"","};","","var RoutingProperties = Object.keys(RoutingMethods).reduce(function (memo, method) {","  memo[method] = d(function (pattern, app) {","    return this.route(pattern, RoutingMethods[method], app);","  });","","  return memo;","}, {});","","module.exports = RoutingProperties;"],"l":{"3":1,"5":1,"15":1,"16":7,"17":0,"20":7,"23":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/session.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/session.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"encodeSession","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":47}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":34},"end":{"line":22,"column":50}}},"3":{"name":"decodeCookie","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":45}}},"4":{"name":"makeHashWithSecret","line":48,"loc":{"start":{"line":48,"column":0},"end":{"line":48,"column":42}}},"5":{"name":"session","line":85,"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":31}}},"6":{"name":"(anonymous_6)","line":103,"loc":{"start":{"line":103,"column":9},"end":{"line":103,"column":25}}},"7":{"name":"(anonymous_7)","line":108,"loc":{"start":{"line":108,"column":79},"end":{"line":108,"column":97}}},"8":{"name":"(anonymous_8)","line":111,"loc":{"start":{"line":111,"column":33},"end":{"line":111,"column":45}}},"9":{"name":"(anonymous_9)","line":112,"loc":{"start":{"line":112,"column":96},"end":{"line":112,"column":117}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":51}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":45}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":27}},"9":{"start":{"line":21,"column":0},"end":{"line":29,"column":1}},"10":{"start":{"line":22,"column":2},"end":{"line":28,"column":5}},"11":{"start":{"line":23,"column":4},"end":{"line":23,"column":78}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":106}},"13":{"start":{"line":25,"column":41},"end":{"line":25,"column":106}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":18}},"15":{"start":{"line":36,"column":0},"end":{"line":46,"column":1}},"16":{"start":{"line":37,"column":2},"end":{"line":37,"column":35}},"17":{"start":{"line":38,"column":2},"end":{"line":38,"column":38}},"18":{"start":{"line":39,"column":2},"end":{"line":39,"column":39}},"19":{"start":{"line":40,"column":2},"end":{"line":40,"column":40}},"20":{"start":{"line":43,"column":2},"end":{"line":45,"column":3}},"21":{"start":{"line":44,"column":4},"end":{"line":44,"column":28}},"22":{"start":{"line":45,"column":3},"end":{"line":45,"column":15}},"23":{"start":{"line":48,"column":0},"end":{"line":50,"column":1}},"24":{"start":{"line":49,"column":2},"end":{"line":49,"column":49}},"25":{"start":{"line":85,"column":0},"end":{"line":131,"column":1}},"26":{"start":{"line":86,"column":2},"end":{"line":86,"column":26}},"27":{"start":{"line":88,"column":2},"end":{"line":88,"column":65}},"28":{"start":{"line":88,"column":35},"end":{"line":88,"column":65}},"29":{"start":{"line":90,"column":2},"end":{"line":90,"column":30}},"30":{"start":{"line":91,"column":2},"end":{"line":91,"column":40}},"31":{"start":{"line":92,"column":2},"end":{"line":92,"column":33}},"32":{"start":{"line":93,"column":2},"end":{"line":93,"column":30}},"33":{"start":{"line":94,"column":2},"end":{"line":94,"column":45}},"34":{"start":{"line":95,"column":2},"end":{"line":95,"column":74}},"35":{"start":{"line":96,"column":2},"end":{"line":96,"column":39}},"36":{"start":{"line":97,"column":2},"end":{"line":97,"column":56}},"37":{"start":{"line":99,"column":2},"end":{"line":101,"column":3}},"38":{"start":{"line":100,"column":4},"end":{"line":100,"column":391}},"39":{"start":{"line":103,"column":2},"end":{"line":130,"column":4}},"40":{"start":{"line":104,"column":4},"end":{"line":104,"column":44}},"41":{"start":{"line":104,"column":22},"end":{"line":104,"column":44}},"42":{"start":{"line":106,"column":4},"end":{"line":106,"column":44}},"43":{"start":{"line":108,"column":4},"end":{"line":129,"column":21}},"44":{"start":{"line":109,"column":6},"end":{"line":109,"column":34}},"45":{"start":{"line":111,"column":6},"end":{"line":128,"column":9}},"46":{"start":{"line":112,"column":8},"end":{"line":127,"column":25}},"47":{"start":{"line":113,"column":10},"end":{"line":113,"column":81}},"48":{"start":{"line":117,"column":10},"end":{"line":117,"column":55}},"49":{"start":{"line":117,"column":48},"end":{"line":117,"column":55}},"50":{"start":{"line":119,"column":10},"end":{"line":126,"column":13}},"51":{"start":{"line":133,"column":0},"end":{"line":133,"column":25}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"2":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"3":{"line":49,"type":"cond-expr","locations":[{"start":{"line":49,"column":27},"end":{"line":49,"column":40}},{"start":{"line":49,"column":43},"end":{"line":49,"column":47}}]},"4":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":12},"end":{"line":86,"column":19}},{"start":{"line":86,"column":23},"end":{"line":86,"column":25}}]},"5":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":2},"end":{"line":88,"column":2}},{"start":{"line":88,"column":2},"end":{"line":88,"column":2}}]},"6":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":13},"end":{"line":91,"column":25}},{"start":{"line":91,"column":29},"end":{"line":91,"column":39}}]},"7":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":13},"end":{"line":92,"column":25}},{"start":{"line":92,"column":29},"end":{"line":92,"column":32}}]},"8":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":20},"end":{"line":94,"column":39}},{"start":{"line":94,"column":43},"end":{"line":94,"column":44}}]},"9":{"line":95,"type":"cond-expr","locations":[{"start":{"line":95,"column":41},"end":{"line":95,"column":66}},{"start":{"line":95,"column":69},"end":{"line":95,"column":73}}]},"10":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":41},"end":{"line":95,"column":57}},{"start":{"line":95,"column":61},"end":{"line":95,"column":66}}]},"11":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":15},"end":{"line":96,"column":29}},{"start":{"line":96,"column":33},"end":{"line":96,"column":38}}]},"12":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":14},"end":{"line":97,"column":27}},{"start":{"line":97,"column":31},"end":{"line":97,"column":55}}]},"13":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":2},"end":{"line":99,"column":2}},{"start":{"line":99,"column":2},"end":{"line":99,"column":2}}]},"14":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"15":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":27},"end":{"line":108,"column":33}},{"start":{"line":108,"column":37},"end":{"line":108,"column":72}}]},"16":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":21},"end":{"line":109,"column":27}},{"start":{"line":109,"column":31},"end":{"line":109,"column":33}}]},"17":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":31},"end":{"line":112,"column":43}},{"start":{"line":112,"column":47},"end":{"line":112,"column":89}}]},"18":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":24},"end":{"line":113,"column":35}},{"start":{"line":113,"column":39},"end":{"line":113,"column":80}}]},"19":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":10},"end":{"line":117,"column":10}},{"start":{"line":117,"column":10},"end":{"line":117,"column":10}}]},"20":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":14},"end":{"line":117,"column":34}},{"start":{"line":117,"column":38},"end":{"line":117,"column":46}}]}},"code":["\"use strict\";","","var mach = require(\"../index\");","var Promise = require(\"../utils/Promise\");","var decodeBase64 = require(\"../utils/decodeBase64\");","var encodeBase64 = require(\"../utils/encodeBase64\");","var makeHash = require(\"../utils/makeHash\");","var CookieStore = require(\"./session/CookieStore\");","","mach.extend(require(\"../extensions/server\"));","","/**"," * The maximum size of an HTTP cookie."," */","var MAX_COOKIE_SIZE = 4096;","","/**"," * Stores the given session and returns a promise for a value that should be stored"," * in the session cookie to retrieve the session data again on the next request."," */","function encodeSession(session, store, secret) {","  return store.save(session).then(function (data) {","    var cookie = encodeBase64(data + \"--\" + makeHashWithSecret(data, secret));","","    if (cookie.length > MAX_COOKIE_SIZE) throw new Error(\"Cookie data size exceeds 4kb; content dropped\");","","    return cookie;","  });","}","","/**"," * Decodes the given cookie value and returns a promise for the corresponding session"," * data from the store. Also verifies the hash value to ensure the cookie has not been"," * tampered with. If it has, returns null."," */","function decodeCookie(cookie, store, secret) {","  var value = decodeBase64(cookie);","  var index = value.lastIndexOf(\"--\");","  var data = value.substring(0, index);","  var hash = value.substring(index + 2);","","  // Verify the cookie has not been tampered with.","  if (hash === makeHashWithSecret(data, secret)) {","    return store.load(data);","  }return null;","}","","function makeHashWithSecret(data, secret) {","  return makeHash(secret ? data + secret : data);","}","","/**"," * A middleware that provides support for HTTP sessions using cookies."," *"," * Options may be any of the following:"," *"," * - secret         A cryptographically secure secret key that will be used to verify"," *                  the integrity of session data that is received from the client"," * - name           The name of the cookie. Defaults to \"_session\""," * - path           The path of the cookie. Defaults to \"/\""," * - domain         The cookie's domain. Defaults to null"," * - secure         True to only send this cookie over HTTPS. Defaults to false"," * - expireAfter    The number of seconds after which sessions expire. Defaults"," *                  to 0 (no expiration)"," * - httpOnly       True to restrict access to this cookie to HTTP(S) APIs."," *                  Defaults to true"," * - store          An instance of MemoryStore, CookieStore, or RedisStore that"," *                  is used to store session data. Defaults to a new CookieStore"," *"," * Example:"," *"," *   app.use(mach.session, {"," *     secret: 'the-secret',"," *     secure: true"," *   });"," *"," * Hint: A great way to generate a cryptographically secure session secret from"," * the command line:"," *"," *   $ node -p \"require('crypto').randomBytes(64).toString('hex')\""," *"," * Note: Since cookies are only able to reliably store about 4k of data, if the"," * session cookie payload exceeds that the session will be dropped."," */","function session(app, options) {","  options = options || {};","","  if (typeof options === \"string\") options = { secret: options };","","  var secret = options.secret;","  var name = options.name || \"_session\";","  var path = options.path || \"/\";","  var domain = options.domain;","  var expireAfter = options.expireAfter || 0;","  var httpOnly = \"httpOnly\" in options ? options.httpOnly || false : true;","  var secure = options.secure || false;","  var store = options.store || new CookieStore(options);","","  if (!secret) {","    console.warn([\"WARNING: There was no \\\"secret\\\" option provided to mach.session! This poses\", \"a security vulnerability because session data will be stored on clients without\", \"any server-side verification that it has not been tampered with. It is strongly\", \"recommended that you set a secret to prevent exploits that may be attempted using\", \"carefully crafted cookies.\"].join(\"\\n\"));","  }","","  return function (conn) {","    if (conn.session) return conn.call(app); // Don't overwrite the existing session.","","    var cookie = conn.request.cookies[name];","","    return Promise.resolve(cookie && decodeCookie(cookie, store, secret)).then(function (object) {","      conn.session = object || {};","","      return conn.call(app).then(function () {","        return Promise.resolve(conn.session && encodeSession(conn.session, store, secret)).then(function (newCookie) {","          var expires = expireAfter && new Date(Date.now() + expireAfter * 1000);","","          // Don't bother setting the cookie if its value","          // hasn't changed and there is no expires date.","          if (newCookie === cookie && !expires) return;","","          conn.response.setCookie(name, {","            value: newCookie,","            path: path,","            domain: domain,","            expires: expires,","            httpOnly: httpOnly,","            secure: secure","          });","        }, conn.onError);","      });","    }, conn.onError);","  };","}","","module.exports = session;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"10":1,"15":1,"21":1,"22":0,"23":0,"25":0,"27":0,"36":1,"37":0,"38":0,"39":0,"40":0,"43":0,"44":0,"45":0,"48":1,"49":0,"85":1,"86":0,"88":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"99":0,"100":0,"103":0,"104":0,"106":0,"108":0,"109":0,"111":0,"112":0,"113":0,"117":0,"119":0,"133":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeHash.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeHash.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"makeHash","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":8,"column":0},"end":{"line":10,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":64}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":26}}},"branchMap":{},"code":["\"use strict\";","","var crypto = require(\"crypto\");","","/**"," * Returns a SHA1 hash of the given string."," */","function makeHash(string) {","  return crypto.createHash(\"sha1\").update(string).digest(\"hex\");","}","","module.exports = makeHash;"],"l":{"3":1,"8":1,"9":0,"12":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/session/CookieStore.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/session/CookieStore.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"CookieStore","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":30}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":27}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":10},"end":{"line":43,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":45}},"3":{"start":{"line":20,"column":0},"end":{"line":24,"column":1}},"4":{"start":{"line":21,"column":2},"end":{"line":21,"column":26}},"5":{"start":{"line":23,"column":2},"end":{"line":23,"column":66}},"6":{"start":{"line":26,"column":0},"end":{"line":49,"column":3}},"7":{"start":{"line":29,"column":4},"end":{"line":29,"column":16}},"8":{"start":{"line":30,"column":4},"end":{"line":35,"column":5}},"9":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}},"10":{"start":{"line":34,"column":6},"end":{"line":34,"column":33}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":85}},"12":{"start":{"line":38,"column":58},"end":{"line":38,"column":85}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":36}},"14":{"start":{"line":44,"column":4},"end":{"line":44,"column":58}},"15":{"start":{"line":44,"column":18},"end":{"line":44,"column":58}},"16":{"start":{"line":46,"column":4},"end":{"line":46,"column":52}},"17":{"start":{"line":51,"column":0},"end":{"line":51,"column":29}}},"branchMap":{"1":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":19}},{"start":{"line":21,"column":23},"end":{"line":21,"column":25}}]},"2":{"line":23,"type":"cond-expr","locations":[{"start":{"line":23,"column":35},"end":{"line":23,"column":61}},{"start":{"line":23,"column":64},"end":{"line":23,"column":65}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":23}},{"start":{"line":38,"column":27},"end":{"line":38,"column":56}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":4}},{"start":{"line":44,"column":4},"end":{"line":44,"column":4}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var Promise = require(\"../../utils/Promise\");","","/**"," * Client-side storage for sessions using HTTP cookies."," *"," * Accepts the following options:"," *"," * - expireAfter      The number of seconds after which sessions expire."," *                    Defaults to 0 (no expiration)"," *"," * Note: Cookies are only able to reliably store about 4k of data. Also, sending"," * and receiving large cookies can have a significant impact on overall server"," * response time (see http://yuiblog.com/blog/2007/03/01/performance-research-part-3/)."," * For these reasons, if you are planning on storing a lot of data in the session"," * you may want to use a server-side storage, such as mach.session.RedisStore."," */","function CookieStore(options) {","  options = options || {};","","  this.ttl = options.expireAfter ? 1000 * options.expireAfter : 0;","}","","Object.defineProperties(CookieStore.prototype, {","","  load: d(function (value) {","    var session;","    try {","      session = JSON.parse(value);","    } catch (error) {","      // Ignore invalid JSON data.","      return Promise.resolve({});","    }","","    // Verify the session is not expired.","    if (session._expiry && session._expiry <= Date.now()) return Promise.resolve({});","","    return Promise.resolve(session);","  }),","","  save: d(function (session) {","    if (this.ttl) session._expiry = Date.now() + this.ttl;","","    return Promise.resolve(JSON.stringify(session));","  })","","});","","module.exports = CookieStore;","// expireAfter is given in seconds"],"l":{"3":1,"4":1,"20":1,"21":0,"23":0,"26":1,"29":0,"30":0,"31":0,"34":0,"38":0,"40":0,"44":0,"46":0,"51":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/stack.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/stack.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"mapperCreator","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":9},"end":{"line":9,"column":24}}},"3":{"name":"routerCreator","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":31}}},"4":{"name":"(anonymous_4)","line":19,"loc":{"start":{"line":19,"column":9},"end":{"line":19,"column":24}}},"5":{"name":"createStack","line":71,"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":26}}},"6":{"name":"compile","line":77,"loc":{"start":{"line":77,"column":2},"end":{"line":77,"column":24}}},"7":{"name":"stack","line":89,"loc":{"start":{"line":89,"column":2},"end":{"line":89,"column":23}}},"8":{"name":"(anonymous_8)","line":101,"loc":{"start":{"line":101,"column":11},"end":{"line":101,"column":33}}},"9":{"name":"(anonymous_9)","line":108,"loc":{"start":{"line":108,"column":18},"end":{"line":108,"column":33}}},"10":{"name":"(anonymous_10)","line":118,"loc":{"start":{"line":118,"column":11},"end":{"line":118,"column":36}}},"11":{"name":"(anonymous_11)","line":126,"loc":{"start":{"line":126,"column":13},"end":{"line":126,"column":46}}},"12":{"name":"(anonymous_12)","line":134,"loc":{"start":{"line":134,"column":11},"end":{"line":134,"column":36}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":62}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"5":{"start":{"line":8,"column":0},"end":{"line":16,"column":1}},"6":{"start":{"line":9,"column":2},"end":{"line":15,"column":4}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":28}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":89}},"9":{"start":{"line":12,"column":57},"end":{"line":12,"column":89}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":15}},"11":{"start":{"line":18,"column":0},"end":{"line":26,"column":1}},"12":{"start":{"line":19,"column":2},"end":{"line":25,"column":4}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":87}},"15":{"start":{"line":22,"column":55},"end":{"line":22,"column":87}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":15}},"17":{"start":{"line":71,"column":0},"end":{"line":144,"column":1}},"18":{"start":{"line":72,"column":2},"end":{"line":74,"column":18}},"19":{"start":{"line":75,"column":2},"end":{"line":75,"column":18}},"20":{"start":{"line":77,"column":2},"end":{"line":87,"column":3}},"21":{"start":{"line":78,"column":4},"end":{"line":78,"column":56}},"22":{"start":{"line":78,"column":23},"end":{"line":78,"column":56}},"23":{"start":{"line":80,"column":4},"end":{"line":80,"column":60}},"24":{"start":{"line":80,"column":25},"end":{"line":80,"column":60}},"25":{"start":{"line":82,"column":4},"end":{"line":82,"column":30}},"26":{"start":{"line":84,"column":4},"end":{"line":84,"column":56}},"27":{"start":{"line":84,"column":18},"end":{"line":84,"column":56}},"28":{"start":{"line":86,"column":4},"end":{"line":86,"column":15}},"29":{"start":{"line":89,"column":2},"end":{"line":91,"column":3}},"30":{"start":{"line":90,"column":4},"end":{"line":90,"column":66}},"31":{"start":{"line":93,"column":2},"end":{"line":139,"column":5}},"32":{"start":{"line":102,"column":6},"end":{"line":102,"column":58}},"33":{"start":{"line":104,"column":6},"end":{"line":104,"column":91}},"34":{"start":{"line":104,"column":27},"end":{"line":104,"column":91}},"35":{"start":{"line":106,"column":6},"end":{"line":106,"column":85}},"36":{"start":{"line":106,"column":25},"end":{"line":106,"column":85}},"37":{"start":{"line":108,"column":6},"end":{"line":110,"column":9}},"38":{"start":{"line":109,"column":8},"end":{"line":109,"column":58}},"39":{"start":{"line":112,"column":6},"end":{"line":112,"column":25}},"40":{"start":{"line":119,"column":6},"end":{"line":119,"column":37}},"41":{"start":{"line":120,"column":6},"end":{"line":120,"column":25}},"42":{"start":{"line":127,"column":6},"end":{"line":127,"column":43}},"43":{"start":{"line":128,"column":6},"end":{"line":128,"column":25}},"44":{"start":{"line":135,"column":6},"end":{"line":135,"column":26}},"45":{"start":{"line":136,"column":6},"end":{"line":136,"column":25}},"46":{"start":{"line":141,"column":2},"end":{"line":141,"column":52}},"47":{"start":{"line":143,"column":2},"end":{"line":143,"column":15}},"48":{"start":{"line":146,"column":0},"end":{"line":146,"column":29}}},"branchMap":{"1":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"2":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"3":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":21},"end":{"line":90,"column":32}},{"start":{"line":90,"column":37},"end":{"line":90,"column":63}}]},"4":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":6},"end":{"line":104,"column":6}},{"start":{"line":104,"column":6},"end":{"line":104,"column":6}}]},"5":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":6},"end":{"line":106,"column":6}},{"start":{"line":106,"column":6},"end":{"line":106,"column":6}}]}},"code":["\"use strict\";","","var d = require(\"describe-property\");","var RoutingProperties = require(\"../utils/RoutingProperties\");","var createMapper = require(\"./mapper\");","var createRouter = require(\"./router\");","","function mapperCreator(mappings) {","  return function (app) {","    app = createMapper(app);","","    for (var i = 0, len = mappings.length; i < len; ++i) app.map.apply(app, mappings[i]);","","    return app;","  };","}","","function routerCreator(routes) {","  return function (app) {","    app = createRouter(app);","","    for (var i = 0, len = routes.length; i < len; ++i) app.route.apply(app, routes[i]);","","    return app;","  };","}","","/**"," * A middleware that aids in building complex apps that are fronted by other"," * middleware in a \"middleware stack\". Also provides several other useful methods"," * for request mapping and routing that make this middleware a good choice when"," * working with mach at a high level or when getting started for the first time."," *"," * Middleware are placed into the stack by calling the `use` method which passes"," * along any additional arguments that it receives directly on to the middleware"," * when the stack is compiled."," *"," * Other stacks can be \"mounted\" easily at various locations using the `map`"," * method. Routes can be added using `route`, `get`, `post`, etc. When a request"," * is received, all middleware, mappings, and routes run in the order they are"," * defined in the stack, top to bottom."," *"," *   var app = mach.stack();"," *"," *   app.use(mach.gzip);"," *   app.use(mach.file, __dirname + '/public');"," *"," *   // Use an image server to serve requests that begin"," *   // with /images out of /public/img."," *   app.map('/images', mach.file('/public/img'));"," *"," *   // Since this call is *after* the call to map, this middleware"," *   // will not run when requests begin with \"/images\"."," *   app.use(mach.params);"," *"," *   app.get('/', function (request) {"," *     return \"The params are: \" + JSON.stringify(request.params);"," *   });"," *"," *   app.post('/posts/:post_id/messages', function (request) {"," *     // ..."," *   });"," *"," *   mach.serve(app);"," *"," * Note: A stack is compiled the first time it is called. When a stack is"," * compiled, all middleware is invoked with the downstream app plus any"," * additional arguments that were passed to the call to stack.use. As long as"," * the stack doesn't change between requests, this happens only once."," */","function createStack(app) {","  var layers = [],","      mappings = [],","      routes = [];","  var compiledApp;","","  function compile(app) {","    if (routes.length) app = routerCreator(routes)(app);","","    if (mappings.length) app = mapperCreator(mappings)(app);","","    var index = layers.length;","","    while (index) app = layers[--index].call(this, app);","","    return app;","  }","","  function stack(conn) {","    return conn.call(compiledApp || (compiledApp = compile(app)));","  }","","  Object.defineProperties(stack, {","","    /**","     * Declares that the given `middleware` should be used at the current point","     * in the stack. Any additional arguments to this function are passed along","     * to the middleware with the downstream app as the first argument when the","     * stack is compiled.","     */","    use: d(function (middleware) {","      var args = Array.prototype.slice.call(arguments, 1);","","      if (mappings.length) layers.push(mapperCreator(mappings.splice(0, mappings.length)));","","      if (routes.length) layers.push(routerCreator(routes.splice(0, routes.length)));","","      layers.push(function (app) {","        return middleware.apply(this, [app].concat(args));","      });","","      compiledApp = null;","    }),","","    /**","     * Uses a mapper to map a URL path to an app.","     */","    map: d(function (location, app) {","      mappings.push([location, app]);","      compiledApp = null;","    }),","","    /**","     * Uses a router to route URLs that match a pattern/method to an app.","     */","    route: d(function (pattern, methods, app) {","      routes.push([pattern, methods, app]);","      compiledApp = null;","    }),","","    /**","     * Sets the given app as the default for this stack.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","      compiledApp = null;","    })","","  });","","  Object.defineProperties(stack, RoutingProperties);","","  return stack;","}","","module.exports = createStack;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"12":0,"14":0,"18":1,"19":0,"20":0,"22":0,"24":0,"71":1,"72":0,"75":0,"77":1,"78":0,"80":0,"82":0,"84":0,"86":0,"89":1,"90":0,"93":0,"102":0,"104":0,"106":0,"108":0,"109":0,"112":0,"119":0,"120":0,"127":0,"128":0,"135":0,"136":0,"141":0,"143":0,"146":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/token.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/middleware/token.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"verifyToken","line":58,"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":35}}},"2":{"name":"(anonymous_2)","line":67,"loc":{"start":{"line":67,"column":9},"end":{"line":67,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":46}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":45}},"4":{"start":{"line":12,"column":0},"end":{"line":17,"column":2}},"5":{"start":{"line":58,"column":0},"end":{"line":90,"column":1}},"6":{"start":{"line":59,"column":2},"end":{"line":59,"column":26}},"7":{"start":{"line":61,"column":2},"end":{"line":61,"column":68}},"8":{"start":{"line":61,"column":35},"end":{"line":61,"column":68}},"9":{"start":{"line":63,"column":2},"end":{"line":63,"column":48}},"10":{"start":{"line":64,"column":2},"end":{"line":64,"column":50}},"11":{"start":{"line":65,"column":2},"end":{"line":65,"column":44}},"12":{"start":{"line":67,"column":2},"end":{"line":89,"column":4}},"13":{"start":{"line":68,"column":4},"end":{"line":69,"column":29}},"14":{"start":{"line":71,"column":4},"end":{"line":82,"column":5}},"15":{"start":{"line":72,"column":6},"end":{"line":72,"column":85}},"16":{"start":{"line":73,"column":11},"end":{"line":82,"column":5}},"17":{"start":{"line":74,"column":6},"end":{"line":74,"column":83}},"18":{"start":{"line":76,"column":6},"end":{"line":76,"column":38}},"19":{"start":{"line":79,"column":6},"end":{"line":79,"column":70}},"20":{"start":{"line":79,"column":18},"end":{"line":79,"column":70}},"21":{"start":{"line":81,"column":6},"end":{"line":81,"column":82}},"22":{"start":{"line":81,"column":60},"end":{"line":81,"column":82}},"23":{"start":{"line":86,"column":4},"end":{"line":86,"column":66}},"24":{"start":{"line":86,"column":44},"end":{"line":86,"column":66}},"25":{"start":{"line":88,"column":4},"end":{"line":88,"column":32}},"26":{"start":{"line":92,"column":0},"end":{"line":92,"column":29}}},"branchMap":{"1":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":19}},{"start":{"line":59,"column":23},"end":{"line":59,"column":25}}]},"2":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":2},"end":{"line":61,"column":2}},{"start":{"line":61,"column":2},"end":{"line":61,"column":2}}]},"3":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":18},"end":{"line":63,"column":35}},{"start":{"line":63,"column":39},"end":{"line":63,"column":47}}]},"4":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":19},"end":{"line":64,"column":37}},{"start":{"line":64,"column":41},"end":{"line":64,"column":49}}]},"5":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":19},"end":{"line":65,"column":37}},{"start":{"line":65,"column":41},"end":{"line":65,"column":43}}]},"6":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"7":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":11},"end":{"line":73,"column":11}},{"start":{"line":73,"column":11},"end":{"line":73,"column":11}}]},"8":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":6},"end":{"line":79,"column":6}},{"start":{"line":79,"column":6},"end":{"line":79,"column":6}}]},"9":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":6},"end":{"line":81,"column":6}},{"start":{"line":81,"column":6},"end":{"line":81,"column":6}}]},"10":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":10},"end":{"line":81,"column":27}},{"start":{"line":81,"column":31},"end":{"line":81,"column":58}}]},"11":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]}},"code":["\"use strict\";","","var mach = require(\"../index\");","var makeToken = require(\"../utils/makeToken\");","","mach.extend(require(\"../extensions/server\"));","","/**"," * The set of HTTP request methods that are considered safe because they"," * do not alter server data."," */","var SAFE_METHODS = {","  GET: true,","  HEAD: true,","  OPTIONS: true,","  TRACE: true","};","","/**"," * A middleware that helps to prevent Cross-site Request Forgery attacks by"," * requiring the client to include an authentication token in all form"," * submissions that matches a value stored in the session cookie. See"," * http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html"," *"," * If the session does not already have an authentication token one is"," * automatically generated and stored in the session. The default session key"," * is \"_token\". All form submissions need to include this value in the \"_token\""," * parameter, like this:"," *"," *   <form method=\"POST\" action=\"/\">"," *     <input type=\"hidden\" name=\"_token\" value=\"{{session._token}}\">"," *   </form>"," *"," * On the backend, you need to put both mach.session and mach.params in front of"," * mach.token in order for it to be able to retrieve values from the request session"," * and parameters, like this:"," *"," *   app.use(mach.session);"," *   app.use(mach.params);"," *   app.use(mach.token);"," *   app.run(function (conn) {"," *     // The connection authenticated successfully"," *   });"," *"," * Options may be any of the following:"," *"," * - paramName        The name of the request parameter that contains the token"," *                    (i.e. the value of the \"name\" attribute on your <input>)."," *                    Defaults to \"_token\""," * - sessionKey       The name of the session variable to use to store the token."," *                    Defaults to \"_token\""," * - byteLength       The length of the token in bytes. Defaults to 32"," *"," * Note: Non-POST requests are always forwarded to the downstream app regardless of"," * whether or not they contain the token since it is assumed they are not modifying"," * anything and are safe."," */","function verifyToken(app, options) {","  options = options || {};","","  if (typeof options === \"string\") options = { paramName: options };","","  var paramName = options.paramName || \"_token\";","  var sessionKey = options.sessionKey || \"_token\";","  var byteLength = options.byteLength || 32;","","  return function (conn) {","    var session = conn.session,","        params = conn.params;","","    if (!session) {","      conn.onError(new Error(\"No session! Use mach.session in front of mach.token\"));","    } else if (!params) {","      conn.onError(new Error(\"No params! Use mach.params in front of mach.token\"));","    } else {","      var token = session[sessionKey];","","      // Create a new session token if needed.","      if (!token) token = session[sessionKey] = makeToken(byteLength);","","      if (params[paramName] && params[paramName] === token) return conn.call(app);","    }","","    // If the request is not a POST we assume it's not a form submission","    // and therefore not modifying anything. Pass it downstream.","    if (SAFE_METHODS[conn.method] === true) return conn.call(app);","","    conn.text(403, \"Forbidden\");","  };","}","","module.exports = verifyToken;"],"l":{"3":1,"4":1,"6":1,"12":1,"58":1,"59":0,"61":0,"63":0,"64":0,"65":0,"67":0,"68":0,"71":0,"72":0,"73":0,"74":0,"76":0,"79":0,"81":0,"86":0,"88":0,"92":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeToken.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/makeToken.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"makeToken","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":31}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":56}},"4":{"start":{"line":13,"column":0},"end":{"line":13,"column":27}}},"branchMap":{},"code":["\"use strict\";","","var crypto = require(\"crypto\");","","/**"," * Returns a cryptographically-secure string containing the"," * given number of bytes."," */","function makeToken(byteLength) {","  return crypto.randomBytes(byteLength).toString(\"hex\");","}","","module.exports = makeToken;"],"l":{"3":1,"9":1,"10":0,"13":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/proxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/proxy.js","s":{"1":1,"2":1},"b":{},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":2}},"2":{"start":{"line":4,"column":2},"end":{"line":4,"column":53}}},"branchMap":{},"code":["\"use strict\";","","module.exports = function (mach) {","  mach.createProxy = require(\"../utils/createProxy\");","};"],"l":{"3":1,"4":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/statusText.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/extensions/statusText.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0},"b":{},"f":{"1":1,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":21},"end":{"line":12,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"3":{"start":{"line":6,"column":0},"end":{"line":17,"column":2}},"4":{"start":{"line":7,"column":2},"end":{"line":16,"column":5}},"5":{"start":{"line":13,"column":6},"end":{"line":13,"column":58}}},"branchMap":{},"code":["\"use strict\";","","var d = require(\"describe-property\");","var StatusCodes = require(\"../StatusCodes\");","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * The message that corresponds with the response status code.","     */","    statusText: d.gs(function () {","      return this.status + \" \" + StatusCodes[this.status];","    })","","  });","};"],"l":{"3":1,"4":1,"6":1,"7":1,"13":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/StatusCodes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/StatusCodes.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":63,"column":2}}},"branchMap":{},"code":["\"use strict\";","","/**"," * A map of HTTP status codes to their \"status text\"."," */","module.exports = {","  100: \"Continue\",","  101: \"Switching Protocols\",","  102: \"Processing\", // RFC 2518, obsoleted by RFC 4918","  200: \"OK\",","  201: \"Created\",","  202: \"Accepted\",","  203: \"Non-Authoritative Information\",","  204: \"No Content\",","  205: \"Reset Content\",","  206: \"Partial Content\",","  207: \"Multi-Status\", // RFC 4918","  300: \"Multiple Choices\",","  301: \"Moved Permanently\",","  302: \"Moved Temporarily\",","  303: \"See Other\",","  304: \"Not Modified\",","  305: \"Use Proxy\",","  307: \"Temporary Redirect\",","  400: \"Bad Request\",","  401: \"Unauthorized\",","  402: \"Payment Required\",","  403: \"Forbidden\",","  404: \"Not Found\",","  405: \"Method Not Allowed\",","  406: \"Not Acceptable\",","  407: \"Proxy Authentication Required\",","  408: \"Request Time-out\",","  409: \"Conflict\",","  410: \"Gone\",","  411: \"Length Required\",","  412: \"Precondition Failed\",","  413: \"Request Entity Too Large\",","  414: \"Request-URI Too Large\",","  415: \"Unsupported Media Type\",","  416: \"Requested Range Not Satisfiable\",","  417: \"Expectation Failed\",","  418: \"I'm a teapot\", // RFC 2324","  422: \"Unprocessable Entity\", // RFC 4918","  423: \"Locked\", // RFC 4918","  424: \"Failed Dependency\", // RFC 4918","  425: \"Unordered Collection\", // RFC 4918","  426: \"Upgrade Required\", // RFC 2817","  428: \"Precondition Required\", // RFC 6585","  429: \"Too Many Requests\", // RFC 6585","  431: \"Request Header Fields Too Large\", // RFC 6585","  500: \"Internal Server Error\",","  501: \"Not Implemented\",","  502: \"Bad Gateway\",","  503: \"Service Unavailable\",","  504: \"Gateway Timeout\",","  505: \"HTTP Version Not Supported\",","  506: \"Variant Also Negotiates\", // RFC 2295","  507: \"Insufficient Storage\", // RFC 4918","  509: \"Bandwidth Limit Exceeded\",","  510: \"Not Extended\", // RFC 2774","  511: \"Network Authentication Required\" // RFC 6585","};"],"l":{"6":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/callApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/lib/utils/callApp.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"callApp","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":41}}},"2":{"name":"(anonymous_2)","line":32,"loc":{"start":{"line":32,"column":58},"end":{"line":32,"column":74}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":31},"end":{"line":35,"column":43}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":86},"end":{"line":38,"column":105}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":27,"column":0},"end":{"line":44,"column":1}},"4":{"start":{"line":28,"column":2},"end":{"line":28,"column":26}},"5":{"start":{"line":30,"column":2},"end":{"line":30,"column":34}},"6":{"start":{"line":32,"column":2},"end":{"line":43,"column":5}},"7":{"start":{"line":33,"column":4},"end":{"line":33,"column":64}},"8":{"start":{"line":33,"column":55},"end":{"line":33,"column":64}},"9":{"start":{"line":35,"column":4},"end":{"line":42,"column":7}},"10":{"start":{"line":36,"column":6},"end":{"line":36,"column":38}},"11":{"start":{"line":36,"column":26},"end":{"line":36,"column":38}},"12":{"start":{"line":38,"column":6},"end":{"line":41,"column":9}},"13":{"start":{"line":39,"column":8},"end":{"line":39,"column":36}},"14":{"start":{"line":40,"column":8},"end":{"line":40,"column":20}},"15":{"start":{"line":46,"column":0},"end":{"line":46,"column":25}}},"branchMap":{"1":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":19}},{"start":{"line":28,"column":23},"end":{"line":28,"column":25}}]},"2":{"line":32,"type":"cond-expr","locations":[{"start":{"line":32,"column":36},"end":{"line":32,"column":47}},{"start":{"line":32,"column":50},"end":{"line":32,"column":51}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":20}},{"start":{"line":33,"column":24},"end":{"line":33,"column":53}}]},"5":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":36,"column":6}},{"start":{"line":36,"column":6},"end":{"line":36,"column":6}}]}},"code":["\"use strict\";","","var Connection = require(\"../Connection\");","var Promise = require(\"./Promise\");","","/**"," * Creates a new Connection using the given options and sends"," * the request to the given app. Returns a promise for the connection"," * object when the response is received."," *"," * Options may be any of the Connection options, plus the following:"," *"," * - binary     By default the response content is buffered and stored"," *              in the responseText property of the connection. Set this"," *              option true to disable this behavior."," * - maxLength  The maximum length of the response content to accept."," *              This option has no effect when \"binary\" is true. By"," *              default there is no maximum length."," * - encoding   The encoding to use to decode the response body. This"," *              option has no effect when \"binary\" is true. By default"," *              the encoding is whatever was specified in the Content-Type"," *              header of the response."," *"," * If a modifier function is provided, it will have a chance to modify"," * the Connection object immediately before the request is made."," */","function callApp(app, options, modifier) {","  options = options || {};","","  var c = new Connection(options);","","  return Promise.resolve(modifier ? modifier(c) : c).then(function (conn) {","    if (conn == null || !(conn instanceof Connection)) conn = c;","","    return conn.call(app).then(function () {","      if (options.binary) return conn;","","      return conn.response.stringifyContent(options.maxLength, options.encoding).then(function (content) {","        conn.responseText = content;","        return conn;","      });","    });","  });","}","","module.exports = callApp;"],"l":{"3":1,"4":1,"27":1,"28":0,"30":0,"32":0,"33":0,"35":0,"36":0,"38":0,"39":0,"40":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/karma.conf.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/karma.conf.js","s":{"1":1,"2":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":35,"column":2}},"2":{"start":{"line":2,"column":2},"end":{"line":34,"column":5}}},"branchMap":{},"code":["module.exports = function (config) {","  config.set({","","    browsers: [ 'Chrome' ],","","    frameworks: [ 'mocha' ],","","    files: [","      'tests.webpack.js'","    ],","","    preprocessors: {","      'tests.webpack.js': [ 'webpack', 'sourcemap' ]","    },","","    webpack: {","      devtool: 'inline-source-map',","      module: {","        loaders: [","          { test: /\\.js$/, exclude: /node_modules/, loader: 'babel' }","        ]","      },","      plugins: [","        new webpack.DefinePlugin({","          'process.env.NODE_ENV': JSON.stringify('test')","        })","      ]","    },","","    webpackServer: {","      noInfo: true","    }","","  });","};",""],"l":{"1":1,"2":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/webpack.config.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/webpack.config.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0},"b":{"1":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"2":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":9,"column":0},"end":{"line":17,"column":1}},"4":{"start":{"line":10,"column":2},"end":{"line":16,"column":4}},"5":{"start":{"line":19,"column":0},"end":{"line":39,"column":2}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":0},"end":{"line":9,"column":0}},{"start":{"line":9,"column":0},"end":{"line":9,"column":0}}]}},"code":["var webpack = require('webpack');","","var plugins = [","  new webpack.DefinePlugin({","    'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV)","  })","];","","if (process.env.COMPRESS) {","  plugins.push(","    new webpack.optimize.UglifyJsPlugin({","      compressor: {","        warnings: false","      }","    })","  );","}","","module.exports = {","","  output: {","    library: 'mach',","    libraryTarget: 'umd'","  },","","  module: {","    loaders: [","      { test: /\\.js$/, exclude: /node_modules/, loader: 'babel' }","    ]","  },","","  node: {","    buffer: false,","    process: false","  },","","  plugins: plugins","","};",""],"l":{"1":2,"3":0,"9":0,"10":0,"19":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Connection.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Connection.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":8,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"f":{"1":8,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"locationPropertyAlias","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":37}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":26}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":5},"end":{"line":14,"column":22}}},"4":{"name":"defaultErrorHandler","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":36}}},"5":{"name":"defaultCloseHandler","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":31}}},"6":{"name":"defaultApp","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":26}}},"7":{"name":"Connection","line":76,"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":29}}},"8":{"name":"(anonymous_8)","line":121,"loc":{"start":{"line":121,"column":15},"end":{"line":121,"column":27}}},"9":{"name":"(anonymous_9)","line":123,"loc":{"start":{"line":123,"column":5},"end":{"line":123,"column":22}}},"10":{"name":"(anonymous_10)","line":130,"loc":{"start":{"line":130,"column":17},"end":{"line":130,"column":29}}},"11":{"name":"(anonymous_11)","line":132,"loc":{"start":{"line":132,"column":5},"end":{"line":132,"column":22}}},"12":{"name":"(anonymous_12)","line":148,"loc":{"start":{"line":148,"column":14},"end":{"line":148,"column":26}}},"13":{"name":"(anonymous_13)","line":156,"loc":{"start":{"line":156,"column":13},"end":{"line":156,"column":25}}},"14":{"name":"(anonymous_14)","line":170,"loc":{"start":{"line":170,"column":5},"end":{"line":170,"column":22}}},"15":{"name":"(anonymous_15)","line":184,"loc":{"start":{"line":184,"column":17},"end":{"line":184,"column":29}}},"16":{"name":"(anonymous_16)","line":186,"loc":{"start":{"line":186,"column":5},"end":{"line":186,"column":22}}},"17":{"name":"(anonymous_17)","line":193,"loc":{"start":{"line":193,"column":13},"end":{"line":193,"column":25}}},"18":{"name":"(anonymous_18)","line":195,"loc":{"start":{"line":195,"column":5},"end":{"line":195,"column":22}}},"19":{"name":"(anonymous_19)","line":203,"loc":{"start":{"line":203,"column":10},"end":{"line":203,"column":25}}},"20":{"name":"(anonymous_20)","line":209,"loc":{"start":{"line":209,"column":45},"end":{"line":209,"column":62}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":51}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":37}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":35}},"9":{"start":{"line":11,"column":0},"end":{"line":17,"column":1}},"10":{"start":{"line":12,"column":2},"end":{"line":16,"column":5}},"11":{"start":{"line":13,"column":4},"end":{"line":13,"column":31}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":32}},"13":{"start":{"line":19,"column":0},"end":{"line":25,"column":1}},"14":{"start":{"line":20,"column":2},"end":{"line":24,"column":3}},"15":{"start":{"line":21,"column":4},"end":{"line":21,"column":51}},"16":{"start":{"line":23,"column":4},"end":{"line":23,"column":16}},"17":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"18":{"start":{"line":29,"column":0},"end":{"line":33,"column":1}},"19":{"start":{"line":30,"column":2},"end":{"line":30,"column":20}},"20":{"start":{"line":31,"column":2},"end":{"line":31,"column":43}},"21":{"start":{"line":32,"column":2},"end":{"line":32,"column":72}},"22":{"start":{"line":76,"column":0},"end":{"line":114,"column":1}},"23":{"start":{"line":77,"column":2},"end":{"line":77,"column":26}},"24":{"start":{"line":79,"column":2},"end":{"line":79,"column":15}},"25":{"start":{"line":80,"column":2},"end":{"line":86,"column":3}},"26":{"start":{"line":81,"column":4},"end":{"line":81,"column":23}},"27":{"start":{"line":82,"column":9},"end":{"line":86,"column":3}},"28":{"start":{"line":83,"column":4},"end":{"line":83,"column":47}},"29":{"start":{"line":84,"column":9},"end":{"line":86,"column":3}},"30":{"start":{"line":85,"column":4},"end":{"line":85,"column":36}},"31":{"start":{"line":88,"column":2},"end":{"line":88,"column":27}},"32":{"start":{"line":89,"column":2},"end":{"line":89,"column":42}},"33":{"start":{"line":90,"column":2},"end":{"line":90,"column":31}},"34":{"start":{"line":92,"column":2},"end":{"line":92,"column":69}},"35":{"start":{"line":93,"column":2},"end":{"line":93,"column":69}},"36":{"start":{"line":94,"column":2},"end":{"line":94,"column":63}},"37":{"start":{"line":95,"column":2},"end":{"line":95,"column":30}},"38":{"start":{"line":98,"column":2},"end":{"line":105,"column":3}},"39":{"start":{"line":99,"column":4},"end":{"line":104,"column":5}},"40":{"start":{"line":100,"column":6},"end":{"line":100,"column":34}},"41":{"start":{"line":102,"column":6},"end":{"line":102,"column":69}},"42":{"start":{"line":103,"column":6},"end":{"line":103,"column":60}},"43":{"start":{"line":107,"column":2},"end":{"line":107,"column":58}},"44":{"start":{"line":108,"column":2},"end":{"line":108,"column":47}},"45":{"start":{"line":109,"column":2},"end":{"line":109,"column":47}},"46":{"start":{"line":110,"column":2},"end":{"line":110,"column":21}},"47":{"start":{"line":112,"column":2},"end":{"line":112,"column":27}},"48":{"start":{"line":113,"column":2},"end":{"line":113,"column":20}},"49":{"start":{"line":116,"column":0},"end":{"line":233,"column":3}},"50":{"start":{"line":122,"column":4},"end":{"line":122,"column":24}},"51":{"start":{"line":124,"column":4},"end":{"line":124,"column":75}},"52":{"start":{"line":131,"column":4},"end":{"line":131,"column":26}},"53":{"start":{"line":133,"column":4},"end":{"line":133,"column":79}},"54":{"start":{"line":149,"column":4},"end":{"line":149,"column":38}},"55":{"start":{"line":157,"column":4},"end":{"line":157,"column":55}},"56":{"start":{"line":159,"column":4},"end":{"line":167,"column":5}},"57":{"start":{"line":160,"column":6},"end":{"line":160,"column":39}},"58":{"start":{"line":161,"column":6},"end":{"line":161,"column":28}},"59":{"start":{"line":163,"column":6},"end":{"line":164,"column":38}},"60":{"start":{"line":164,"column":8},"end":{"line":164,"column":38}},"61":{"start":{"line":166,"column":6},"end":{"line":166,"column":20}},"62":{"start":{"line":169,"column":4},"end":{"line":169,"column":30}},"63":{"start":{"line":171,"column":4},"end":{"line":171,"column":39}},"64":{"start":{"line":173,"column":4},"end":{"line":177,"column":5}},"65":{"start":{"line":174,"column":6},"end":{"line":174,"column":64}},"66":{"start":{"line":176,"column":6},"end":{"line":176,"column":38}},"67":{"start":{"line":185,"column":4},"end":{"line":185,"column":68}},"68":{"start":{"line":187,"column":4},"end":{"line":187,"column":51}},"69":{"start":{"line":194,"column":4},"end":{"line":194,"column":39}},"70":{"start":{"line":196,"column":4},"end":{"line":196,"column":47}},"71":{"start":{"line":204,"column":4},"end":{"line":204,"column":28}},"72":{"start":{"line":206,"column":4},"end":{"line":206,"column":20}},"73":{"start":{"line":208,"column":4},"end":{"line":230,"column":5}},"74":{"start":{"line":209,"column":6},"end":{"line":227,"column":9}},"75":{"start":{"line":210,"column":8},"end":{"line":211,"column":17}},"76":{"start":{"line":211,"column":10},"end":{"line":211,"column":17}},"77":{"start":{"line":213,"column":8},"end":{"line":226,"column":9}},"78":{"start":{"line":214,"column":10},"end":{"line":214,"column":30}},"79":{"start":{"line":215,"column":15},"end":{"line":226,"column":9}},"80":{"start":{"line":216,"column":10},"end":{"line":216,"column":40}},"81":{"start":{"line":218,"column":10},"end":{"line":219,"column":50}},"82":{"start":{"line":219,"column":12},"end":{"line":219,"column":50}},"83":{"start":{"line":221,"column":10},"end":{"line":222,"column":50}},"84":{"start":{"line":222,"column":12},"end":{"line":222,"column":50}},"85":{"start":{"line":224,"column":10},"end":{"line":225,"column":39}},"86":{"start":{"line":225,"column":12},"end":{"line":225,"column":39}},"87":{"start":{"line":229,"column":6},"end":{"line":229,"column":35}},"88":{"start":{"line":235,"column":0},"end":{"line":235,"column":28}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"2":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":36}},{"start":{"line":20,"column":40},"end":{"line":20,"column":53}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":19},"end":{"line":21,"column":24}},{"start":{"line":21,"column":28},"end":{"line":21,"column":39}},{"start":{"line":21,"column":44},"end":{"line":21,"column":49}}]},"4":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":19}},{"start":{"line":77,"column":23},"end":{"line":77,"column":25}}]},"5":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":80,"column":2}},{"start":{"line":80,"column":2},"end":{"line":80,"column":2}}]},"6":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":9},"end":{"line":82,"column":9}},{"start":{"line":82,"column":9},"end":{"line":82,"column":9}}]},"7":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":13},"end":{"line":82,"column":29}},{"start":{"line":82,"column":33},"end":{"line":82,"column":44}}]},"8":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":15},"end":{"line":83,"column":31}},{"start":{"line":83,"column":35},"end":{"line":83,"column":46}}]},"9":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":9},"end":{"line":84,"column":9}},{"start":{"line":84,"column":9},"end":{"line":84,"column":9}}]},"10":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":17},"end":{"line":89,"column":32}},{"start":{"line":89,"column":36},"end":{"line":89,"column":41}}]},"11":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":18},"end":{"line":92,"column":33}},{"start":{"line":92,"column":37},"end":{"line":92,"column":56}}]},"12":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":18},"end":{"line":93,"column":33}},{"start":{"line":93,"column":37},"end":{"line":93,"column":56}}]},"13":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":2},"end":{"line":98,"column":2}},{"start":{"line":98,"column":2},"end":{"line":98,"column":2}}]},"14":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"15":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":29}},{"start":{"line":99,"column":33},"end":{"line":99,"column":55}}]},"16":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":25},"end":{"line":107,"column":48}},{"start":{"line":107,"column":52},"end":{"line":107,"column":57}}]},"17":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":20},"end":{"line":108,"column":38}},{"start":{"line":108,"column":42},"end":{"line":108,"column":46}}]},"18":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":20},"end":{"line":109,"column":38}},{"start":{"line":109,"column":42},"end":{"line":109,"column":46}}]},"19":{"line":124,"type":"cond-expr","locations":[{"start":{"line":124,"column":47},"end":{"line":124,"column":66}},{"start":{"line":124,"column":69},"end":{"line":124,"column":74}}]},"20":{"line":133,"type":"cond-expr","locations":[{"start":{"line":133,"column":51},"end":{"line":133,"column":56}},{"start":{"line":133,"column":59},"end":{"line":133,"column":78}}]},"21":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"22":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":6},"end":{"line":163,"column":6}},{"start":{"line":163,"column":6},"end":{"line":163,"column":6}}]},"23":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"24":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":8},"end":{"line":173,"column":13}},{"start":{"line":173,"column":17},"end":{"line":173,"column":42}}]},"25":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":11},"end":{"line":185,"column":60}},{"start":{"line":185,"column":64},"end":{"line":185,"column":67}}]},"26":{"line":204,"type":"binary-expr","locations":[{"start":{"line":204,"column":10},"end":{"line":204,"column":13}},{"start":{"line":204,"column":17},"end":{"line":204,"column":27}}]},"27":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":8},"end":{"line":210,"column":8}},{"start":{"line":210,"column":8},"end":{"line":210,"column":8}}]},"28":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"29":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":15},"end":{"line":215,"column":15}},{"start":{"line":215,"column":15},"end":{"line":215,"column":15}}]},"30":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":19},"end":{"line":215,"column":44}},{"start":{"line":215,"column":48},"end":{"line":215,"column":63}},{"start":{"line":215,"column":67},"end":{"line":215,"column":99}}]},"31":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":10},"end":{"line":218,"column":10}},{"start":{"line":218,"column":10},"end":{"line":218,"column":10}}]},"32":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":10},"end":{"line":221,"column":10}},{"start":{"line":221,"column":10},"end":{"line":221,"column":10}}]},"33":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":10},"end":{"line":224,"column":10}},{"start":{"line":224,"column":10},"end":{"line":224,"column":10}}]}},"code":["/* jshint -W058 */","var d = require('describe-property');","var isBinary = require('bodec').isBinary;","var decodeBase64 = require('./utils/decodeBase64');","var encodeBase64 = require('./utils/encodeBase64');","var stringifyQuery = require('./utils/stringifyQuery');","var Promise = require('./utils/Promise');","var Location = require('./Location');","var Message = require('./Message');","","function locationPropertyAlias(name) {","  return d.gs(function () {","    return this.location[name];","  }, function (value) {","    this.location[name] = value;","  });","}","","function defaultErrorHandler(error) {","  if (typeof console !== 'undefined' && console.error) {","    console.error((error && error.stack) || error);","  } else {","    throw error; // Don't silently swallow errors!","  }","}","","function defaultCloseHandler() {}","","function defaultApp(conn) {","  conn.status = 404;","  conn.response.contentType = 'text/plain';","  conn.response.content = 'Not found: ' + conn.method + ' ' + conn.path;","}","","/**"," * An HTTP connection that acts as the asynchronous primitive for"," * the duration of the request/response cycle."," *"," * Important features are:"," *"," * - request        A Message representing the request being made. In"," *                  a server environment, this is an \"incoming\" message"," *                  that was probably generated by a web browser or some"," *                  other consumer. In a client environment, this is an"," *                  \"outgoing\" message that we send to a remote server."," * - response       A Message representing the response to the request."," *                  In a server environment, this is an \"outgoing\" message"," *                  that will be sent back to the client. In a client"," *                  environment, this is the response that was received"," *                  from the remote server."," * - method         The HTTP method that the request uses"," * - location       The URL of the request. In a server environment, this"," *                  is derived from the URL path used in the request as"," *                  well as a combination of the Host, X-Forwarded-* and"," *                  other relevant headers."," * - version        The version of HTTP used in the request"," * - status         The HTTP status code of the response"," * - statusText     The HTTP status text that corresponds to the status"," * - responseText   This is a special property that contains the entire"," *                  content of the response. It is present by default when"," *                  making client requests for convenience, but may also be"," *                  disabled when you need to stream the response."," *"," * Options may be any of the following:"," *"," * - content        The request content, defaults to \"\""," * - headers        The request headers, defaults to {}"," * - method         The request HTTP method, defaults to \"GET\""," * - location/url   The request Location or URL"," * - params         The request params"," * - onError        A function that is called when there is an error"," * - onClose        A function that is called when the request closes"," *"," * The options may also be a URL string to specify the URL."," */","function Connection(options) {","  options = options || {};","","  var location;","  if (typeof options === 'string') {","    location = options; // options may be a URL string.","  } else if (options.location || options.url) {","    location = options.location || options.url;","  } else if (typeof window === 'object') {","    location = window.location.href;","  }","","  this.location = location;","  this.version = options.version || '1.1';","  this.method = options.method;","","  this.onError = (options.onError || defaultErrorHandler).bind(this);","  this.onClose = (options.onClose || defaultCloseHandler).bind(this);","  this.request = new Message(options.content, options.headers);","  this.response = new Message;","","  // Params may be given as an object.","  if (options.params) {","    if (this.method === 'GET' || this.method === 'HEAD') {","      this.query = options.params;","    } else {","      this.request.contentType = 'application/x-www-form-urlencoded';","      this.request.content = stringifyQuery(options.params);","    }","  }","","  this.withCredentials = options.withCredentials || false;","  this.remoteHost = options.remoteHost || null;","  this.remoteUser = options.remoteUser || null;","  this.basename = '';","","  this.responseText = null;","  this.status = 200;","}","","Object.defineProperties(Connection.prototype, {","","  /**","   * The method used in the request.","   */","  method: d.gs(function () {","    return this._method;","  }, function (value) {","    this._method = typeof value === 'string' ? value.toUpperCase() : 'GET';","  }),","","  /**","   * The Location of the request.","   */","  location: d.gs(function () {","    return this._location;","  }, function (value) {","    this._location = (value instanceof Location) ? value : new Location(value);","  }),","","  href: locationPropertyAlias('href'),","  protocol: locationPropertyAlias('protocol'),","  host: locationPropertyAlias('host'),","  hostname: locationPropertyAlias('hostname'),","  port: locationPropertyAlias('port'),","  search: locationPropertyAlias('search'),","  queryString: locationPropertyAlias('queryString'),","  query: locationPropertyAlias('query'),","","  /**","   * True if the request uses SSL, false otherwise.","   */","  isSSL: d.gs(function () {","    return this.protocol === 'https:';","  }),","","  /**","   * The username:password used in the request, an empty string","   * if no auth was provided.","   */","  auth: d.gs(function () {","    var header = this.request.headers['Authorization'];","","    if (header) {","      var parts = header.split(' ', 2);","      var scheme = parts[0];","","      if (scheme.toLowerCase() === 'basic')","        return decodeBase64(parts[1]);","","      return header;","    }","","    return this.location.auth;","  }, function (value) {","    var headers = this.request.headers;","","    if (value && typeof value === 'string') {","      headers['Authorization'] = 'Basic ' + encodeBase64(value);","    } else {","      delete headers['Authorization'];","    }","  }),","","  /**","   * The portion of the original URL path that is still relevant","   * for request processing.","   */","  pathname: d.gs(function () {","    return this.location.pathname.replace(this.basename, '') || '/';","  }, function (value) {","    this.location.pathname = this.basename + value;","  }),","","  /**","   * The URL path with query string.","   */","  path: d.gs(function () {","    return this.pathname + this.search;","  }, function (value) {","    this.location.path = this.basename + value;","  }),","","  /**","   * Calls the given `app` with this connection as the only argument.","   * as the first argument and returns a promise for a Response.","   */","  call: d(function (app) {","    app = app || defaultApp;","","    var conn = this;","","    try {","      return Promise.resolve(app(conn)).then(function (value) {","        if (value == null)","          return;","","        if (typeof value === 'number') {","          conn.status = value;","        } else if (typeof value === 'string' || isBinary(value) || typeof value.pipe === 'function') {","          conn.response.content = value;","        } else {","          if (value.headers != null)","            conn.response.headers = value.headers;","","          if (value.content != null)","            conn.response.content = value.content;","","          if (value.status != null)","            conn.status = value.status;","        }","      });","    } catch (error) {","      return Promise.reject(error);","    }","  })","","});","","module.exports = Connection;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":8,"13":0,"15":0,"19":1,"20":0,"21":0,"23":0,"27":1,"29":1,"30":0,"31":0,"32":0,"76":1,"77":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"88":0,"89":0,"90":0,"92":0,"93":0,"94":0,"95":0,"98":0,"99":0,"100":0,"102":0,"103":0,"107":0,"108":0,"109":0,"110":0,"112":0,"113":0,"116":1,"122":0,"124":0,"131":0,"133":0,"149":0,"157":0,"159":0,"160":0,"161":0,"163":0,"164":0,"166":0,"169":0,"171":0,"173":0,"174":0,"176":0,"185":0,"187":0,"194":0,"196":0,"204":0,"206":0,"208":0,"209":0,"210":0,"211":0,"213":0,"214":0,"215":0,"216":0,"218":0,"219":0,"221":0,"222":0,"224":0,"225":0,"229":0,"235":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/decodeBase64.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/decodeBase64.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":47}}},"branchMap":{},"code":["module.exports = require('bodec').decodeBase64;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/encodeBase64.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/encodeBase64.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":47}}},"branchMap":{},"code":["module.exports = require('bodec').encodeBase64;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":41}}},"branchMap":{},"code":["module.exports = require('qs').stringify;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/Promise.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/Promise.js","s":{"1":1,"2":1,"3":1,"4":1},"b":{"1":[1,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":42}},"2":{"start":{"line":3,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":35}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}}},"branchMap":{"1":{"line":3,"type":"if","locations":[{"start":{"line":3,"column":0},"end":{"line":3,"column":0}},{"start":{"line":3,"column":0},"end":{"line":3,"column":0}}]}},"code":["var Promise = require('when/lib/Promise');","","if (process.env.NODE_ENV !== 'production')","  require('when/monitor')(Promise);","","module.exports = Promise;",""],"l":{"1":1,"3":1,"4":1,"6":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Location.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Location.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":5,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"f":{"1":5,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"propertyAlias","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":51}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":14},"end":{"line":16,"column":26}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":5},"end":{"line":18,"column":22}}},"4":{"name":"setProperties","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":45}}},"5":{"name":"Location","line":54,"loc":{"start":{"line":54,"column":0},"end":{"line":54,"column":27}}},"6":{"name":"(anonymous_6)","line":70,"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":32}}},"7":{"name":"(anonymous_7)","line":95,"loc":{"start":{"line":95,"column":13},"end":{"line":95,"column":25}}},"8":{"name":"(anonymous_8)","line":101,"loc":{"start":{"line":101,"column":5},"end":{"line":101,"column":22}}},"9":{"name":"(anonymous_9)","line":129,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":25}}},"10":{"name":"(anonymous_10)","line":138,"loc":{"start":{"line":138,"column":5},"end":{"line":138,"column":22}}},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":13},"end":{"line":158,"column":25}}},"12":{"name":"(anonymous_12)","line":160,"loc":{"start":{"line":160,"column":5},"end":{"line":160,"column":22}}},"13":{"name":"(anonymous_13)","line":172,"loc":{"start":{"line":172,"column":13},"end":{"line":172,"column":25}}},"14":{"name":"(anonymous_14)","line":174,"loc":{"start":{"line":174,"column":5},"end":{"line":174,"column":22}}},"15":{"name":"(anonymous_15)","line":194,"loc":{"start":{"line":194,"column":20},"end":{"line":194,"column":32}}},"16":{"name":"(anonymous_16)","line":196,"loc":{"start":{"line":196,"column":5},"end":{"line":196,"column":22}}},"17":{"name":"(anonymous_17)","line":203,"loc":{"start":{"line":203,"column":14},"end":{"line":203,"column":26}}},"18":{"name":"(anonymous_18)","line":205,"loc":{"start":{"line":205,"column":5},"end":{"line":205,"column":22}}},"19":{"name":"(anonymous_19)","line":209,"loc":{"start":{"line":209,"column":12},"end":{"line":209,"column":24}}},"20":{"name":"(anonymous_20)","line":213,"loc":{"start":{"line":213,"column":14},"end":{"line":213,"column":26}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":47}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":55}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":47}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":43}},"6":{"start":{"line":10,"column":0},"end":{"line":13,"column":2}},"7":{"start":{"line":15,"column":0},"end":{"line":21,"column":1}},"8":{"start":{"line":16,"column":2},"end":{"line":20,"column":5}},"9":{"start":{"line":17,"column":4},"end":{"line":17,"column":89}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"11":{"start":{"line":24,"column":0},"end":{"line":24,"column":126}},"12":{"start":{"line":26,"column":0},"end":{"line":34,"column":1}},"13":{"start":{"line":27,"column":2},"end":{"line":27,"column":19}},"14":{"start":{"line":28,"column":2},"end":{"line":33,"column":3}},"15":{"start":{"line":29,"column":4},"end":{"line":29,"column":37}},"16":{"start":{"line":31,"column":4},"end":{"line":32,"column":56}},"17":{"start":{"line":32,"column":6},"end":{"line":32,"column":56}},"18":{"start":{"line":54,"column":0},"end":{"line":62,"column":1}},"19":{"start":{"line":55,"column":2},"end":{"line":55,"column":23}},"20":{"start":{"line":57,"column":2},"end":{"line":61,"column":3}},"21":{"start":{"line":58,"column":4},"end":{"line":58,"column":24}},"22":{"start":{"line":59,"column":9},"end":{"line":61,"column":3}},"23":{"start":{"line":60,"column":4},"end":{"line":60,"column":33}},"24":{"start":{"line":64,"column":0},"end":{"line":217,"column":3}},"25":{"start":{"line":71,"column":4},"end":{"line":72,"column":40}},"26":{"start":{"line":72,"column":6},"end":{"line":72,"column":40}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":33}},"28":{"start":{"line":75,"column":4},"end":{"line":75,"column":42}},"29":{"start":{"line":77,"column":4},"end":{"line":78,"column":83}},"30":{"start":{"line":78,"column":6},"end":{"line":78,"column":83}},"31":{"start":{"line":80,"column":4},"end":{"line":80,"column":55}},"32":{"start":{"line":82,"column":4},"end":{"line":89,"column":7}},"33":{"start":{"line":96,"column":4},"end":{"line":96,"column":25}},"34":{"start":{"line":97,"column":4},"end":{"line":97,"column":25}},"35":{"start":{"line":98,"column":4},"end":{"line":98,"column":25}},"36":{"start":{"line":100,"column":4},"end":{"line":100,"column":89}},"37":{"start":{"line":102,"column":4},"end":{"line":102,"column":33}},"38":{"start":{"line":104,"column":4},"end":{"line":111,"column":7}},"39":{"start":{"line":130,"column":4},"end":{"line":130,"column":33}},"40":{"start":{"line":131,"column":4},"end":{"line":131,"column":29}},"41":{"start":{"line":132,"column":4},"end":{"line":132,"column":25}},"42":{"start":{"line":134,"column":4},"end":{"line":135,"column":25}},"43":{"start":{"line":135,"column":6},"end":{"line":135,"column":25}},"44":{"start":{"line":137,"column":4},"end":{"line":137,"column":16}},"45":{"start":{"line":139,"column":4},"end":{"line":139,"column":14}},"46":{"start":{"line":141,"column":4},"end":{"line":147,"column":5}},"47":{"start":{"line":142,"column":6},"end":{"line":142,"column":48}},"48":{"start":{"line":143,"column":6},"end":{"line":143,"column":45}},"49":{"start":{"line":145,"column":6},"end":{"line":145,"column":28}},"50":{"start":{"line":146,"column":6},"end":{"line":146,"column":23}},"51":{"start":{"line":159,"column":4},"end":{"line":159,"column":90}},"52":{"start":{"line":161,"column":4},"end":{"line":161,"column":56}},"53":{"start":{"line":173,"column":4},"end":{"line":173,"column":39}},"54":{"start":{"line":175,"column":4},"end":{"line":175,"column":14}},"55":{"start":{"line":177,"column":4},"end":{"line":183,"column":5}},"56":{"start":{"line":178,"column":6},"end":{"line":178,"column":48}},"57":{"start":{"line":179,"column":6},"end":{"line":179,"column":43}},"58":{"start":{"line":181,"column":6},"end":{"line":181,"column":28}},"59":{"start":{"line":182,"column":6},"end":{"line":182,"column":25}},"60":{"start":{"line":195,"column":4},"end":{"line":195,"column":36}},"61":{"start":{"line":197,"column":4},"end":{"line":197,"column":39}},"62":{"start":{"line":204,"column":4},"end":{"line":204,"column":40}},"63":{"start":{"line":206,"column":4},"end":{"line":206,"column":45}},"64":{"start":{"line":210,"column":4},"end":{"line":210,"column":21}},"65":{"start":{"line":214,"column":4},"end":{"line":214,"column":21}},"66":{"start":{"line":219,"column":0},"end":{"line":219,"column":26}}},"branchMap":{"1":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":11},"end":{"line":17,"column":40}},{"start":{"line":17,"column":45},"end":{"line":17,"column":87}}]},"2":{"line":17,"type":"cond-expr","locations":[{"start":{"line":17,"column":68},"end":{"line":17,"column":72}},{"start":{"line":17,"column":75},"end":{"line":17,"column":87}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":47}},{"start":{"line":31,"column":51},"end":{"line":31,"column":75}}]},"5":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":2},"end":{"line":57,"column":2}},{"start":{"line":57,"column":2},"end":{"line":57,"column":2}}]},"6":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":9},"end":{"line":59,"column":9}},{"start":{"line":59,"column":9},"end":{"line":59,"column":9}}]},"7":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"8":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":77,"column":4}},{"start":{"line":77,"column":4},"end":{"line":77,"column":4}}]},"9":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":16},"end":{"line":83,"column":33}},{"start":{"line":83,"column":37},"end":{"line":83,"column":50}}]},"10":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":12},"end":{"line":84,"column":25}},{"start":{"line":84,"column":29},"end":{"line":84,"column":38}}]},"11":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":16},"end":{"line":85,"column":33}},{"start":{"line":85,"column":37},"end":{"line":85,"column":50}}]},"12":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":12},"end":{"line":86,"column":25}},{"start":{"line":86,"column":29},"end":{"line":86,"column":38}}]},"13":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":19},"end":{"line":100,"column":80}},{"start":{"line":100,"column":84},"end":{"line":100,"column":88}}]},"14":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":50},"end":{"line":100,"column":60}},{"start":{"line":100,"column":63},"end":{"line":100,"column":65}}]},"15":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":4},"end":{"line":134,"column":4}},{"start":{"line":134,"column":4},"end":{"line":134,"column":4}}]},"16":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":20}},{"start":{"line":134,"column":24},"end":{"line":134,"column":57}}]},"17":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":141,"column":4}},{"start":{"line":141,"column":4},"end":{"line":141,"column":4}}]},"18":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":33}},{"start":{"line":141,"column":37},"end":{"line":141,"column":72}}]},"19":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":11},"end":{"line":159,"column":31}},{"start":{"line":159,"column":36},"end":{"line":159,"column":88}}]},"20":{"line":159,"type":"cond-expr","locations":[{"start":{"line":159,"column":52},"end":{"line":159,"column":81}},{"start":{"line":159,"column":84},"end":{"line":159,"column":88}}]},"21":{"line":161,"type":"cond-expr","locations":[{"start":{"line":161,"column":35},"end":{"line":161,"column":48}},{"start":{"line":161,"column":51},"end":{"line":161,"column":55}}]},"22":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":4},"end":{"line":177,"column":4}},{"start":{"line":177,"column":4},"end":{"line":177,"column":4}}]},"23":{"line":177,"type":"binary-expr","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":33}},{"start":{"line":177,"column":37},"end":{"line":177,"column":72}}]},"24":{"line":197,"type":"binary-expr","locations":[{"start":{"line":197,"column":18},"end":{"line":197,"column":23}},{"start":{"line":197,"column":27},"end":{"line":197,"column":38}}]}},"code":["var d = require('describe-property');","var mergeQuery = require('./utils/mergeQuery');","var stringifyQuery = require('./utils/stringifyQuery');","var parseQuery = require('./utils/parseQuery');","var parseURL = require('./utils/parseURL');","","/**"," * Standard ports for HTTP protocols."," */","var STANDARD_PORTS = {","  'http:': '80',","  'https:': '443'","};","","function propertyAlias(propertyName, defaultValue) {","  return d.gs(function () {","    return this.properties[propertyName] || (defaultValue == null ? null : defaultValue);","  }, function (value) {","    this.properties[propertyName] = value;","  });","}","","// Order is important here. Later properties take priority.","var PROPERTY_NAMES = [ 'protocol', 'auth', 'hostname', 'port', 'host', 'pathname', 'search', 'queryString', 'query', 'path' ];","","function setProperties(location, properties) {","  var propertyName;","  for (var i = 0, len = PROPERTY_NAMES.length; i < len; ++i) {","    propertyName = PROPERTY_NAMES[i];","","    if (properties.hasOwnProperty(propertyName) && propertyName in location)","      location[propertyName] = properties[propertyName];","  }","}","","/**"," * A URL location, analogous to window.location."," *"," * Options may be any of the following:"," *"," * - protocol"," * - auth"," * - hostname"," * - port"," * - host (overrides hostname and port)"," * - pathname"," * - search"," * - queryString (overrides search)"," * - query (overrides queryString/search)"," * - path (overrides pathname and query/queryString/search)"," *"," * Alternatively, options may be a URL string."," */","function Location(options) {","  this.properties = {};","","  if (typeof options === 'string') {","    this.href = options;","  } else if (options) {","    setProperties(this, options);","  }","}","","Object.defineProperties(Location.prototype, {","","  /**","   * Creates and returns a new Location with the path and query of","   * the given location appended.","   */","  concat: d(function (location) {","    if (!(location instanceof Location))","      location = new Location(location);","","    var pathname = this.pathname;","    var extraPathname = location.pathname;","","    if (extraPathname !== '/')","      pathname = pathname.replace(/\\/*$/, '/') + extraPathname.replace(/^\\/*/, '');","","    var query = mergeQuery(this.query, location.query);","","    return new Location({","      protocol: location.protocol || this.protocol,","      auth: location.auth || this.auth,","      hostname: location.hostname || this.hostname,","      port: location.port || this.port,","      pathname: pathname,","      query: query","    });","  }),","","  /**","   * The full URL.","   */","  href: d.gs(function () {","    var auth = this.auth;","    var host = this.host;","    var path = this.path;","","    return host ? (this.protocol + '//' + (auth ? auth + '@' : '') + host + path) : path;","  }, function (value) {","    var parsed = parseURL(value);","","    setProperties(this, {","      protocol: parsed.protocol,","      auth: parsed.auth,","      hostname: parsed.hostname,","      port: parsed.port,","      pathname: parsed.pathname,","      search: parsed.search","    });","  }),","","  /**","   * The portion of the URL that denotes the protocol, including the","   * trailing colon (e.g. \"http:\" or \"https:\").","   */","  protocol: propertyAlias('protocol'),","","  /**","   * The username:password used in the URL, if any.","   */","  auth: propertyAlias('auth', ''),","","  /**","   * The full name of the host, including the port number when using","   * a non-standard port.","   */","  host: d.gs(function () {","    var protocol = this.protocol;","    var host = this.hostname;","    var port = this.port;","","    if (port != null && port !== STANDARD_PORTS[protocol])","      host += ':' + port;","","    return host;","  }, function (value) {","    var index;","","    if (typeof value === 'string' && (index = value.indexOf(':')) !== -1) {","      this.hostname = value.substring(0, index);","      this.port = value.substring(index + 1);","    } else {","      this.hostname = value;","      this.port = null;","    }","  }),","","  /**","   * The name of the host without the port.","   */","  hostname: propertyAlias('hostname'),","","  /**","   * The port number as a string.","   */","  port: d.gs(function () {","    return this.properties.port || (this.protocol ? STANDARD_PORTS[this.protocol] : null);","  }, function (value) {","    this.properties.port = value ? String(value) : null;","  }),","","  /**","   * The URL path without the query string.","   */","  pathname: propertyAlias('pathname', '/'),","","  /**","   * The URL path with query string.","   */","  path: d.gs(function () {","    return this.pathname + this.search;","  }, function (value) {","    var index;","","    if (typeof value === 'string' && (index = value.indexOf('?')) !== -1) {","      this.pathname = value.substring(0, index);","      this.search = value.substring(index);","    } else {","      this.pathname = value;","      this.search = null;","    }","  }),","","  /**","   * The query string, including the preceeding ?.","   */","  search: propertyAlias('search', ''),","","  /**","   * The query string of the URL, without the preceeding ?.","   */","  queryString: d.gs(function () {","    return this.search.substring(1);","  }, function (value) {","    this.search = value && '?' + value;","  }),","","  /**","   * An object of data in the query string.","   */","  query: d.gs(function () {","    return parseQuery(this.queryString);","  }, function (value) {","    this.queryString = stringifyQuery(value);","  }),","","  toJSON: d(function () {","    return this.href;","  }),","","  toString: d(function () {","    return this.href;","  })","","});","","module.exports = Location;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"10":1,"15":1,"16":5,"17":0,"19":0,"24":1,"26":1,"27":0,"28":0,"29":0,"31":0,"32":0,"54":1,"55":0,"57":0,"58":0,"59":0,"60":0,"64":1,"71":0,"72":0,"74":0,"75":0,"77":0,"78":0,"80":0,"82":0,"96":0,"97":0,"98":0,"100":0,"102":0,"104":0,"130":0,"131":0,"132":0,"134":0,"135":0,"137":0,"139":0,"141":0,"142":0,"143":0,"145":0,"146":0,"159":0,"161":0,"173":0,"175":0,"177":0,"178":0,"179":0,"181":0,"182":0,"195":0,"197":0,"204":0,"206":0,"210":0,"214":0,"219":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/mergeQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/mergeQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":47}}},"branchMap":{},"code":["module.exports = require('qs/lib/utils').merge;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseQuery.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseQuery.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}}},"branchMap":{},"code":["module.exports = require('qs').parse;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseURL.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseURL.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"parseURL","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"2":{"start":{"line":3,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":29}},"4":{"start":{"line":6,"column":2},"end":{"line":14,"column":4}},"5":{"start":{"line":17,"column":0},"end":{"line":17,"column":26}}},"branchMap":{},"code":["var urlParse = require('url').parse;","","function parseURL(url) {","  var parsed = urlParse(url);","","  return {","    protocol: parsed.protocol,","    auth: parsed.auth,","    hostname: parsed.hostname,","    port: parsed.port,","    pathname: parsed.pathname,","    search: parsed.search,","    hash: parsed.hash","  };","}","","module.exports = parseURL;",""],"l":{"1":1,"3":1,"4":0,"6":0,"17":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Message.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Message.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"fnMap":{"1":{"name":"defaultParser","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":43}}},"2":{"name":"Message","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":35}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":26},"end":{"line":39,"column":56}}},"4":{"name":"(anonymous_4)","line":42,"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":73}}},"5":{"name":"(anonymous_5)","line":55,"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":28}}},"6":{"name":"(anonymous_6)","line":57,"loc":{"start":{"line":57,"column":5},"end":{"line":57,"column":22}}},"7":{"name":"(anonymous_7)","line":61,"loc":{"start":{"line":61,"column":50},"end":{"line":61,"column":66}}},"8":{"name":"(anonymous_8)","line":80,"loc":{"start":{"line":80,"column":15},"end":{"line":80,"column":37}}},"9":{"name":"(anonymous_9)","line":87,"loc":{"start":{"line":87,"column":15},"end":{"line":87,"column":44}}},"10":{"name":"(anonymous_10)","line":94,"loc":{"start":{"line":94,"column":15},"end":{"line":94,"column":44}}},"11":{"name":"(anonymous_11)","line":112,"loc":{"start":{"line":112,"column":16},"end":{"line":112,"column":28}}},"12":{"name":"(anonymous_12)","line":140,"loc":{"start":{"line":140,"column":20},"end":{"line":140,"column":32}}},"13":{"name":"(anonymous_13)","line":142,"loc":{"start":{"line":142,"column":5},"end":{"line":142,"column":22}}},"14":{"name":"(anonymous_14)","line":153,"loc":{"start":{"line":153,"column":18},"end":{"line":153,"column":30}}},"15":{"name":"(anonymous_15)","line":156,"loc":{"start":{"line":156,"column":5},"end":{"line":156,"column":22}}},"16":{"name":"(anonymous_16)","line":166,"loc":{"start":{"line":166,"column":16},"end":{"line":166,"column":28}}},"17":{"name":"(anonymous_17)","line":169,"loc":{"start":{"line":169,"column":5},"end":{"line":169,"column":22}}},"18":{"name":"(anonymous_18)","line":176,"loc":{"start":{"line":176,"column":16},"end":{"line":176,"column":28}}},"19":{"name":"(anonymous_19)","line":178,"loc":{"start":{"line":178,"column":5},"end":{"line":178,"column":22}}},"20":{"name":"(anonymous_20)","line":195,"loc":{"start":{"line":195,"column":19},"end":{"line":195,"column":31}}},"21":{"name":"(anonymous_21)","line":206,"loc":{"start":{"line":206,"column":19},"end":{"line":206,"column":40}}},"22":{"name":"(anonymous_22)","line":219,"loc":{"start":{"line":219,"column":22},"end":{"line":219,"column":53}}},"23":{"name":"(anonymous_23)","line":222,"loc":{"start":{"line":222,"column":46},"end":{"line":222,"column":63}}},"24":{"name":"(anonymous_24)","line":238,"loc":{"start":{"line":238,"column":18},"end":{"line":238,"column":39}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":65}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":47}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":43}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":49}},"10":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"11":{"start":{"line":20,"column":0},"end":{"line":20,"column":28}},"12":{"start":{"line":22,"column":0},"end":{"line":24,"column":1}},"13":{"start":{"line":23,"column":2},"end":{"line":23,"column":45}},"14":{"start":{"line":29,"column":0},"end":{"line":32,"column":1}},"15":{"start":{"line":30,"column":2},"end":{"line":30,"column":25}},"16":{"start":{"line":31,"column":2},"end":{"line":31,"column":25}},"17":{"start":{"line":34,"column":0},"end":{"line":48,"column":3}},"18":{"start":{"line":40,"column":8},"end":{"line":40,"column":68}},"19":{"start":{"line":43,"column":8},"end":{"line":43,"column":68}},"20":{"start":{"line":50,"column":0},"end":{"line":251,"column":3}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":25}},"22":{"start":{"line":58,"column":4},"end":{"line":58,"column":23}},"23":{"start":{"line":60,"column":4},"end":{"line":74,"column":5}},"24":{"start":{"line":61,"column":6},"end":{"line":69,"column":15}},"25":{"start":{"line":62,"column":8},"end":{"line":62,"column":51}},"26":{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},"27":{"start":{"line":65,"column":10},"end":{"line":65,"column":37}},"28":{"start":{"line":67,"column":10},"end":{"line":67,"column":100}},"29":{"start":{"line":70,"column":11},"end":{"line":74,"column":5}},"30":{"start":{"line":71,"column":6},"end":{"line":73,"column":56}},"31":{"start":{"line":72,"column":8},"end":{"line":73,"column":56}},"32":{"start":{"line":73,"column":10},"end":{"line":73,"column":56}},"33":{"start":{"line":81,"column":4},"end":{"line":81,"column":57}},"34":{"start":{"line":88,"column":4},"end":{"line":88,"column":58}},"35":{"start":{"line":95,"column":4},"end":{"line":95,"column":49}},"36":{"start":{"line":97,"column":4},"end":{"line":97,"column":31}},"37":{"start":{"line":98,"column":4},"end":{"line":106,"column":5}},"38":{"start":{"line":99,"column":6},"end":{"line":103,"column":7}},"39":{"start":{"line":100,"column":8},"end":{"line":100,"column":40}},"40":{"start":{"line":102,"column":8},"end":{"line":102,"column":61}},"41":{"start":{"line":105,"column":6},"end":{"line":105,"column":34}},"42":{"start":{"line":113,"column":4},"end":{"line":132,"column":5}},"43":{"start":{"line":114,"column":6},"end":{"line":114,"column":42}},"44":{"start":{"line":116,"column":6},"end":{"line":131,"column":7}},"45":{"start":{"line":117,"column":8},"end":{"line":117,"column":42}},"46":{"start":{"line":124,"column":8},"end":{"line":126,"column":63}},"47":{"start":{"line":125,"column":10},"end":{"line":126,"column":63}},"48":{"start":{"line":126,"column":12},"end":{"line":126,"column":63}},"49":{"start":{"line":128,"column":8},"end":{"line":128,"column":32}},"50":{"start":{"line":130,"column":8},"end":{"line":130,"column":27}},"51":{"start":{"line":134,"column":4},"end":{"line":134,"column":25}},"52":{"start":{"line":141,"column":4},"end":{"line":141,"column":40}},"53":{"start":{"line":143,"column":4},"end":{"line":143,"column":41}},"54":{"start":{"line":154,"column":4},"end":{"line":154,"column":46}},"55":{"start":{"line":155,"column":4},"end":{"line":155,"column":101}},"56":{"start":{"line":157,"column":4},"end":{"line":157,"column":80}},"57":{"start":{"line":167,"column":4},"end":{"line":167,"column":46}},"58":{"start":{"line":168,"column":4},"end":{"line":168,"column":96}},"59":{"start":{"line":170,"column":4},"end":{"line":170,"column":75}},"60":{"start":{"line":177,"column":4},"end":{"line":177,"column":25}},"61":{"start":{"line":179,"column":4},"end":{"line":180,"column":30}},"62":{"start":{"line":180,"column":6},"end":{"line":180,"column":30}},"63":{"start":{"line":182,"column":4},"end":{"line":187,"column":5}},"64":{"start":{"line":183,"column":6},"end":{"line":183,"column":28}},"65":{"start":{"line":184,"column":6},"end":{"line":184,"column":20}},"66":{"start":{"line":186,"column":6},"end":{"line":186,"column":40}},"67":{"start":{"line":189,"column":4},"end":{"line":189,"column":33}},"68":{"start":{"line":196,"column":4},"end":{"line":196,"column":41}},"69":{"start":{"line":207,"column":4},"end":{"line":208,"column":68}},"70":{"start":{"line":208,"column":6},"end":{"line":208,"column":68}},"71":{"start":{"line":210,"column":4},"end":{"line":210,"column":33}},"72":{"start":{"line":220,"column":4},"end":{"line":220,"column":40}},"73":{"start":{"line":222,"column":4},"end":{"line":224,"column":7}},"74":{"start":{"line":223,"column":6},"end":{"line":223,"column":45}},"75":{"start":{"line":239,"column":4},"end":{"line":240,"column":33}},"76":{"start":{"line":240,"column":6},"end":{"line":240,"column":33}},"77":{"start":{"line":242,"column":4},"end":{"line":243,"column":45}},"78":{"start":{"line":243,"column":6},"end":{"line":243,"column":45}},"79":{"start":{"line":245,"column":4},"end":{"line":245,"column":66}},"80":{"start":{"line":246,"column":4},"end":{"line":246,"column":50}},"81":{"start":{"line":248,"column":4},"end":{"line":248,"column":31}},"82":{"start":{"line":253,"column":0},"end":{"line":253,"column":25}}},"branchMap":{"1":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"2":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":64,"column":8}},{"start":{"line":64,"column":8},"end":{"line":64,"column":8}}]},"3":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":11},"end":{"line":70,"column":11}},{"start":{"line":70,"column":11},"end":{"line":70,"column":11}}]},"4":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"5":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"6":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":6}},{"start":{"line":99,"column":6},"end":{"line":99,"column":6}}]},"7":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"8":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":6},"end":{"line":116,"column":6}},{"start":{"line":116,"column":6},"end":{"line":116,"column":6}}]},"9":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":10},"end":{"line":125,"column":10}},{"start":{"line":125,"column":10},"end":{"line":125,"column":10}}]},"10":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":34},"end":{"line":126,"column":56}},{"start":{"line":126,"column":60},"end":{"line":126,"column":62}}]},"11":{"line":155,"type":"cond-expr","locations":[{"start":{"line":155,"column":71},"end":{"line":155,"column":93}},{"start":{"line":155,"column":96},"end":{"line":155,"column":100}}]},"12":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":12},"end":{"line":155,"column":23}},{"start":{"line":155,"column":28},"end":{"line":155,"column":66}}]},"13":{"line":157,"type":"cond-expr","locations":[{"start":{"line":157,"column":47},"end":{"line":157,"column":73}},{"start":{"line":157,"column":76},"end":{"line":157,"column":78}}]},"14":{"line":168,"type":"cond-expr","locations":[{"start":{"line":168,"column":80},"end":{"line":168,"column":88}},{"start":{"line":168,"column":91},"end":{"line":168,"column":95}}]},"15":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":12},"end":{"line":168,"column":23}},{"start":{"line":168,"column":28},"end":{"line":168,"column":75}}]},"16":{"line":170,"type":"cond-expr","locations":[{"start":{"line":170,"column":49},"end":{"line":170,"column":68}},{"start":{"line":170,"column":71},"end":{"line":170,"column":73}}]},"17":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":4},"end":{"line":179,"column":4}},{"start":{"line":179,"column":4},"end":{"line":179,"column":4}}]},"18":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":4},"end":{"line":182,"column":4}},{"start":{"line":182,"column":4},"end":{"line":182,"column":4}}]},"19":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":4},"end":{"line":207,"column":4}},{"start":{"line":207,"column":4},"end":{"line":207,"column":4}}]},"20":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":15},"end":{"line":220,"column":23}},{"start":{"line":220,"column":27},"end":{"line":220,"column":39}}]},"21":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":4},"end":{"line":239,"column":4}},{"start":{"line":239,"column":4},"end":{"line":239,"column":4}}]},"22":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":4},"end":{"line":242,"column":4}},{"start":{"line":242,"column":4},"end":{"line":242,"column":4}}]},"23":{"line":245,"type":"binary-expr","locations":[{"start":{"line":245,"column":17},"end":{"line":245,"column":48}},{"start":{"line":245,"column":52},"end":{"line":245,"column":65}}]}},"code":["var bodec = require('bodec');","var d = require('describe-property');","var Stream = require('bufferedstream');","var bufferStream = require('./utils/bufferStream');","var normalizeHeaderName = require('./utils/normalizeHeaderName');","var parseCookie = require('./utils/parseCookie');","var parseQuery = require('./utils/parseQuery');","","/**"," * The default content to use for new messages."," */","var DEFAULT_CONTENT = bodec.fromString('');","","/**"," * The default maximum length (in bytes) to use in Message#parseContent."," */","var DEFAULT_MAX_CONTENT_LENGTH = Math.pow(2, 20); // 1M","","var HEADERS_LINE_SEPARATOR = /\\r?\\n/;","var HEADER_SEPARATOR = ': ';","","function defaultParser(message, maxLength) {","  return message.stringifyContent(maxLength);","}","","/**"," * An HTTP message."," */","function Message(content, headers) {","  this.headers = headers;","  this.content = content;","}","","Object.defineProperties(Message, {","","  PARSERS: d({","    enumerable: true,","    value: {","      'application/json': function (message, maxLength) {","        return message.stringifyContent(maxLength).then(JSON.parse);","      },","      'application/x-www-form-urlencoded': function (message, maxLength) {","        return message.stringifyContent(maxLength).then(parseQuery);","      }","    }","  })","","});","","Object.defineProperties(Message.prototype, {","","  /**","   * The headers of this message as { headerName, value }.","   */","  headers: d.gs(function () {","    return this._headers;","  }, function (value) {","    this._headers = {};","","    if (typeof value === 'string') {","      value.split(HEADERS_LINE_SEPARATOR).forEach(function (line) {","        var index = line.indexOf(HEADER_SEPARATOR);","","        if (index === -1) {","          this.addHeader(line, true);","        } else {","          this.addHeader(line.substring(0, index), line.substring(index + HEADER_SEPARATOR.length));","        }","      }, this);","    } else if (value != null) {","      for (var headerName in value)","        if (value.hasOwnProperty(headerName))","          this.addHeader(headerName, value[headerName]);","    }","  }),","","  /**","   * Returns the value of the header with the given name.","   */","  getHeader: d(function (headerName) {","    return this.headers[normalizeHeaderName(headerName)];","  }),","","  /**","   * Sets the value of the header with the given name.","   */","  setHeader: d(function (headerName, value) {","    this.headers[normalizeHeaderName(headerName)] = value;","  }),","","  /**","   * Adds the value to the header with the given name.","   */","  addHeader: d(function (headerName, value) {","    headerName = normalizeHeaderName(headerName);","","    var headers = this.headers;","    if (headerName in headers) {","      if (Array.isArray(headers[headerName])) {","        headers[headerName].push(value);","      } else {","        headers[headerName] = [ headers[headerName], value ];","      }","    } else {","      headers[headerName] = value;","    }","  }),","","  /**","   * An object containing cookies in this message, keyed by name.","   */","  cookies: d.gs(function () {","    if (!this._cookies) {","      var header = this.headers['Cookie'];","","      if (header) {","        var cookies = parseCookie(header);","","        // From RFC 2109:","        // If multiple cookies satisfy the criteria above, they are ordered in","        // the Cookie header such that those with more specific Path attributes","        // precede those with less specific. Ordering with respect to other","        // attributes (e.g., Domain) is unspecified.","        for (var cookieName in cookies)","          if (Array.isArray(cookies[cookieName]))","            cookies[cookieName] = cookies[cookieName][0] || '';","","        this._cookies = cookies;","      } else {","        this._cookies = {};","      }","    }","","    return this._cookies;","  }),","","  /**","   * Gets/sets the value of the Content-Type header.","   */","  contentType: d.gs(function () {","    return this.headers['Content-Type'];","  }, function (value) {","    this.headers['Content-Type'] = value;","  }),","","  /**","   * The media type (type/subtype) portion of the Content-Type header without any","   * media type parameters. e.g. when Content-Type is \"text/plain;charset=utf-8\",","   * the mediaType is \"text/plain\".","   *","   * See http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7","   */","  mediaType: d.gs(function () {","    var contentType = this.contentType, match;","    return (contentType && (match = contentType.match(/^([^;,]+)/))) ? match[1].toLowerCase() : null;","  }, function (value) {","    this.contentType = value + (this.charset ? ';charset=' + this.charset : '');","  }),","","  /**","   * Returns the character set used to encode the content of this message. e.g.","   * when Content-Type is \"text/plain;charset=utf-8\", charset is \"utf-8\".","   *","   * See http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.4","   */","  charset: d.gs(function () {","    var contentType = this.contentType, match;","    return (contentType && (match = contentType.match(/\\bcharset=([\\w-]+)/))) ? match[1] : null;","  }, function (value) {","    this.contentType = this.mediaType + (value ? ';charset=' + value : '');","  }),","","  /**","   * The content of this message as a binary stream.","   */","  content: d.gs(function () {","    return this._content;","  }, function (value) {","    if (value == null)","      value = DEFAULT_CONTENT;","","    if (value instanceof Stream) {","      this._content = value;","      value.pause();","    } else {","      this._content = new Stream(value);","    }","","    delete this._bufferedContent;","  }),","","  /**","   * True if the content of this message is buffered, false otherwise.","   */","  isBuffered: d.gs(function () {","    return this._bufferedContent != null;","  }),","","  /**","   * Returns a binary representation of the content of this message up to","   * the given length. This is useful in applications that need to access the","   * entire message body at once, instead of as a stream.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  bufferContent: d(function (maxLength) {","    if (this._bufferedContent == null)","      this._bufferedContent = bufferStream(this.content, maxLength);","","    return this._bufferedContent;","  }),","","  /**","   * Returns the content of this message up to the given length as a string","   * with the given encoding.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  stringifyContent: d(function (maxLength, encoding) {","    encoding = encoding || this.charset;","","    return this.bufferContent(maxLength).then(function (chunk) {","      return bodec.toString(chunk, encoding);","    });","  }),","","  /**","   * Returns a promise for an object of data contained in the content body.","   *","   * The maxLength argument specifies the maximum length (in bytes) that the","   * parser will accept. If the content stream exceeds the maximum length, the","   * promise is rejected with a MaxLengthExceededError. The appropriate response","   * to send to the client in this case is 413 Request Entity Too Large, but","   * many HTTP clients including most web browsers may not understand it.","   *","   * Note: 0 is a valid value for maxLength. It means \"no limit\".","   */","  parseContent: d(function (maxLength) {","    if (this._parsedContent)","      return this._parsedContent;","","    if (typeof maxLength !== 'number')","      maxLength = DEFAULT_MAX_CONTENT_LENGTH;","","    var parser = Message.PARSERS[this.mediaType] || defaultParser;","    this._parsedContent = parser(this, maxLength);","","    return this._parsedContent;","  })","","});","","module.exports = Message;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"12":1,"17":1,"19":1,"20":1,"22":1,"23":0,"29":1,"30":0,"31":0,"34":1,"40":0,"43":0,"50":1,"56":0,"58":0,"60":0,"61":0,"62":0,"64":0,"65":0,"67":0,"70":0,"71":0,"72":0,"73":0,"81":0,"88":0,"95":0,"97":0,"98":0,"99":0,"100":0,"102":0,"105":0,"113":0,"114":0,"116":0,"117":0,"124":0,"125":0,"126":0,"128":0,"130":0,"134":0,"141":0,"143":0,"154":0,"155":0,"157":0,"167":0,"168":0,"170":0,"177":0,"179":0,"180":0,"182":0,"183":0,"184":0,"186":0,"189":0,"196":0,"207":0,"208":0,"210":0,"220":0,"222":0,"223":0,"239":0,"240":0,"242":0,"243":0,"245":0,"246":0,"248":0,"253":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/bufferStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/bufferStream.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"bufferStream","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":21},"end":{"line":15,"column":48}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":22},"end":{"line":21,"column":39}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":21},"end":{"line":31,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"4":{"start":{"line":9,"column":0},"end":{"line":38,"column":1}},"5":{"start":{"line":10,"column":2},"end":{"line":10,"column":36}},"6":{"start":{"line":12,"column":2},"end":{"line":13,"column":65}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":65}},"8":{"start":{"line":15,"column":2},"end":{"line":37,"column":5}},"9":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":19}},"11":{"start":{"line":19,"column":4},"end":{"line":19,"column":31}},"12":{"start":{"line":21,"column":4},"end":{"line":29,"column":7}},"13":{"start":{"line":22,"column":6},"end":{"line":22,"column":29}},"14":{"start":{"line":24,"column":6},"end":{"line":28,"column":7}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":54}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":27}},"17":{"start":{"line":31,"column":4},"end":{"line":33,"column":7}},"18":{"start":{"line":32,"column":6},"end":{"line":32,"column":34}},"19":{"start":{"line":35,"column":4},"end":{"line":36,"column":22}},"20":{"start":{"line":36,"column":6},"end":{"line":36,"column":22}},"21":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}}},"branchMap":{"1":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":14},"end":{"line":10,"column":23}},{"start":{"line":10,"column":27},"end":{"line":10,"column":35}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":6},"end":{"line":24,"column":6}},{"start":{"line":24,"column":6},"end":{"line":24,"column":6}}]},"4":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]}},"code":["var bodec = require('bodec');","var Promise = require('./Promise');","var MaxLengthExceededError = require('./MaxLengthExceededError');","","/**"," * Returns a promise for a buffer of all content in the given stream up to"," * the given maximum length."," */","function bufferStream(stream, maxLength) {","  maxLength = maxLength || Infinity;","","  if (!stream.readable)","    throw new Error('Cannot buffer stream that is not readable');","","  return new Promise(function (resolve, reject) {","    var chunks = [];","    var length = 0;","","    stream.on('error', reject);","","    stream.on('data', function (chunk) {","      length += chunk.length;","","      if (length > maxLength) {","        reject(new MaxLengthExceededError(maxLength));","      } else {","        chunks.push(chunk);","      }","    });","","    stream.on('end', function () {","      resolve(bodec.join(chunks));","    });","","    if (typeof stream.resume === 'function')","      stream.resume();","  });","}","","module.exports = bufferStream;",""],"l":{"1":1,"2":1,"3":1,"9":1,"10":0,"12":0,"13":0,"15":0,"16":0,"17":0,"19":0,"21":0,"22":0,"24":0,"25":0,"27":0,"31":0,"32":0,"35":0,"36":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/MaxLengthExceededError.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/MaxLengthExceededError.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"MaxLengthExceededError","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":6,"column":0},"end":{"line":12,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":19}},"4":{"start":{"line":8,"column":2},"end":{"line":8,"column":50}},"5":{"start":{"line":9,"column":2},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":2},"end":{"line":10,"column":43}},"7":{"start":{"line":11,"column":2},"end":{"line":11,"column":29}},"8":{"start":{"line":14,"column":0},"end":{"line":18,"column":3}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":40}}},"branchMap":{},"code":["var d = require('describe-property');","","/**"," * An error indicating that some maximum length has been exceeded."," */","function MaxLengthExceededError(maxLength) {","  Error.call(this);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","  this.message = 'Maximum length exceeded';","  this.maxLength = maxLength;","}","","MaxLengthExceededError.prototype = Object.create(Error.prototype, {","","  constructor: d(MaxLengthExceededError)","","});","","module.exports = MaxLengthExceededError;",""],"l":{"1":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"14":1,"20":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/normalizeHeaderName.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/normalizeHeaderName.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"normalizeHeaderName","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":45},"end":{"line":12,"column":76}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":61}},"2":{"start":{"line":6,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":40}},"4":{"start":{"line":9,"column":2},"end":{"line":10,"column":44}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":44}},"6":{"start":{"line":12,"column":2},"end":{"line":14,"column":5}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":39}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":37}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":9,"column":2}},{"start":{"line":9,"column":2},"end":{"line":9,"column":2}}]}},"code":["var IrregularHeaderNames = require('./IrregularHeaderNames');","","/**"," * Normalizes HTTP header names according to RFC 2616."," */","function normalizeHeaderName(headerName) {","  headerName = headerName.toLowerCase();","","  if (headerName in IrregularHeaderNames)","    return IrregularHeaderNames[headerName];","","  return headerName.replace(/(^|-)([a-z])/g, function (match, dash, letter) {","    return dash + letter.toUpperCase();","  });","}","","module.exports = normalizeHeaderName;",""],"l":{"1":1,"6":1,"7":0,"9":0,"10":0,"12":0,"13":0,"17":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/IrregularHeaderNames.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/IrregularHeaderNames.js","s":{"1":1,"2":11,"3":11},"b":{},"f":{"1":11},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":9},"end":{"line":16,"column":36}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":19,"column":7}},"2":{"start":{"line":17,"column":2},"end":{"line":17,"column":45}},"3":{"start":{"line":18,"column":2},"end":{"line":18,"column":13}}},"branchMap":{},"code":["/**"," * A map of HTTP header names with irregular case."," */","module.exports = [","  'Content-ID',","  'Content-MD5',","  'DNT',","  'ETag',","  'P3P',","  'TE',","  'WWW-Authenticate',","  'X-ATT-DeviceId',","  'X-UA-Compatible',","  'X-WebKit-CSP',","  'X-XSS-Protection'","].reduce(function (map, headerName) {","  map[headerName.toLowerCase()] = headerName;","  return map;","}, {});",""],"l":{"4":1,"17":11,"18":11}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseCookie.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseCookie.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"parseCookie","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":41}},"2":{"start":{"line":3,"column":0},"end":{"line":5,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":53}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":29}}},"branchMap":{},"code":["var parseQuery = require('./parseQuery');","","function parseCookie(cookie) {","  return parseQuery(cookie, { delimiter: /[;,] */ });","}","","module.exports = parseCookie;",""],"l":{"1":1,"3":1,"4":0,"7":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Header.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/Header.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":13},"end":{"line":5,"column":27}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":13}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":18}}},"4":{"name":"(anonymous_4)","line":18,"loc":{"start":{"line":18,"column":10},"end":{"line":18,"column":13}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":65}},"2":{"start":{"line":6,"column":4},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":4},"end":{"line":7,"column":23}},"4":{"start":{"line":11,"column":4},"end":{"line":11,"column":22}},"5":{"start":{"line":15,"column":4},"end":{"line":15,"column":44}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":41}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":24}}},"branchMap":{},"code":["var normalizeHeaderName = require('./utils/normalizeHeaderName');","","class Header {","","  constructor(name, value) {","    this.name = name;","    this.value = value;","  }","","  get name() {","    return this._name;","  }","","  set name(value) {","    this._name = normalizeHeaderName(value);","  }","","  toString() {","    return this.name + ': ' + this.value;","  }","","}","","module.exports = Header;",""],"l":{"1":1,"6":0,"7":0,"11":0,"15":0,"19":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/index.js","s":{"1":1,"2":1,"3":9,"4":9,"5":18,"6":18,"7":11,"8":11,"9":1},"b":{"1":[11,7]},"f":{"1":9},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":22}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":20}},"2":{"start":{"line":7,"column":0},"end":{"line":27,"column":2}},"3":{"start":{"line":16,"column":4},"end":{"line":16,"column":18}},"4":{"start":{"line":17,"column":4},"end":{"line":24,"column":5}},"5":{"start":{"line":18,"column":6},"end":{"line":18,"column":31}},"6":{"start":{"line":20,"column":6},"end":{"line":23,"column":7}},"7":{"start":{"line":21,"column":8},"end":{"line":21,"column":35}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":24}},"9":{"start":{"line":29,"column":0},"end":{"line":29,"column":45}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":6}},{"start":{"line":20,"column":6},"end":{"line":20,"column":6}}]}},"code":["var EXTENSIONS = [];","","/*!"," * mach - HTTP for JavaScript"," * https://github.com/mjackson/mach"," */","var mach = module.exports = {","","  version: require('./version'),","  Connection: require('./Connection'),","  Header: require('./Header'),","  Location: require('./Location'),","  Message: require('./Message'),","","  extend: function () {","    var extension;","    for (var i = 0, len = arguments.length; i < len; ++i) {","      extension = arguments[i];","","      if (EXTENSIONS.indexOf(extension) === -1) {","        EXTENSIONS.push(extension);","        extension(mach);","      }","    }","  }","","};","","mach.extend(require('./extensions/default'));",""],"l":{"1":1,"7":1,"16":9,"17":9,"18":18,"20":18,"21":11,"22":11,"29":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/version.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/version.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":25}}},"branchMap":{},"code":["/**"," * The current version of mach."," */","module.exports = '1.3.5';",""],"l":{"4":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/default.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/default.js","s":{"1":1,"2":1},"b":{},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":17,"column":2}},"2":{"start":{"line":5,"column":2},"end":{"line":16,"column":4}}},"branchMap":{},"code":["/**"," * The default extension for node.js environments."," */","module.exports = function (mach) {","  mach.extend(","    require('./accept'),","    require('./acceptCharset'),","    require('./acceptEncoding'),","    require('./acceptLanguage'),","    require('./client'),","    require('./middleware'),","    require('./multipart'),","    require('./proxy'),","    require('./server'),","    require('./statusText')","  );","};",""],"l":{"4":1,"5":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/accept.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/accept.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":36}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":36}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":30,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":15,"column":5}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":45}},"6":{"start":{"line":17,"column":2},"end":{"line":29,"column":5}},"7":{"start":{"line":23,"column":6},"end":{"line":24,"column":64}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":64}},"9":{"start":{"line":26,"column":6},"end":{"line":26,"column":51}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]}},"code":["var d = require('describe-property');","var Accept = require('../headers/Accept');","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given media type.","     */","    accepts: d(function (mediaType) {","      return this.request.accepts(mediaType);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given media type.","     */","    accepts: d(function (mediaType) {","      if (!this._acceptHeader)","        this._acceptHeader = new Accept(this.headers['Accept']);","","      return this._acceptHeader.accepts(mediaType);","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"12":0,"17":1,"23":0,"24":0,"26":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/Accept.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/Accept.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0,0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"paramsMatchIgnoringQualityFactor","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":63}}},"2":{"name":"byHighestPrecedence","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":35}}},"3":{"name":"(anonymous_3)","line":36,"loc":{"start":{"line":36,"column":13},"end":{"line":36,"column":21}}},"4":{"name":"(anonymous_4)","line":43,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":14}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":11},"end":{"line":47,"column":19}}},"6":{"name":"(anonymous_6)","line":54,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":21}}},"7":{"name":"(anonymous_7)","line":61,"loc":{"start":{"line":61,"column":27},"end":{"line":61,"column":39}}},"8":{"name":"(anonymous_8)","line":68,"loc":{"start":{"line":68,"column":39},"end":{"line":68,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":60}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":80}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":68}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":106}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"7":{"start":{"line":8,"column":0},"end":{"line":14,"column":1}},"8":{"start":{"line":9,"column":2},"end":{"line":11,"column":19}},"9":{"start":{"line":10,"column":4},"end":{"line":11,"column":19}},"10":{"start":{"line":11,"column":6},"end":{"line":11,"column":19}},"11":{"start":{"line":13,"column":2},"end":{"line":13,"column":14}},"12":{"start":{"line":16,"column":0},"end":{"line":26,"column":1}},"13":{"start":{"line":25,"column":2},"end":{"line":25,"column":111}},"14":{"start":{"line":37,"column":4},"end":{"line":37,"column":27}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":60}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":61}},"17":{"start":{"line":55,"column":4},"end":{"line":55,"column":59}},"18":{"start":{"line":62,"column":4},"end":{"line":62,"column":35}},"19":{"start":{"line":64,"column":4},"end":{"line":65,"column":15}},"20":{"start":{"line":65,"column":6},"end":{"line":65,"column":15}},"21":{"start":{"line":67,"column":4},"end":{"line":67,"column":48}},"22":{"start":{"line":68,"column":4},"end":{"line":72,"column":33}},"23":{"start":{"line":69,"column":6},"end":{"line":71,"column":79}},"24":{"start":{"line":74,"column":4},"end":{"line":75,"column":15}},"25":{"start":{"line":75,"column":6},"end":{"line":75,"column":15}},"26":{"start":{"line":77,"column":4},"end":{"line":77,"column":57}},"27":{"start":{"line":82,"column":0},"end":{"line":82,"column":24}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":8},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":61}},{"start":{"line":10,"column":65},"end":{"line":10,"column":109}}]},"3":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":11},"end":{"line":44,"column":50}},{"start":{"line":44,"column":54},"end":{"line":44,"column":59}}]},"4":{"line":48,"type":"cond-expr","locations":[{"start":{"line":48,"column":32},"end":{"line":48,"column":55}},{"start":{"line":48,"column":58},"end":{"line":48,"column":60}}]},"5":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"6":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":14},"end":{"line":69,"column":32}},{"start":{"line":69,"column":36},"end":{"line":69,"column":66}},{"start":{"line":70,"column":14},"end":{"line":70,"column":35}},{"start":{"line":70,"column":39},"end":{"line":70,"column":75}},{"start":{"line":71,"column":13},"end":{"line":71,"column":78}}]},"7":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]}},"code":["var parseMediaValue = require('../utils/parseMediaValue');","var parseMediaValues = require('../utils/parseMediaValues');","var qualityFactorForMediaValue = require('../utils/qualityFactorForMediaValue');","var stringifyMediaValues = require('../utils/stringifyMediaValues');","var stringifyMediaValueWithoutQualityFactor = require('../utils/stringifyMediaValueWithoutQualityFactor');","var Header = require('../Header');","","function paramsMatchIgnoringQualityFactor(params, givenParams) {","  for (var paramName in params)","    if (params.hasOwnProperty(paramName) && paramName !== 'q' && givenParams[paramName] !== params[paramName])","      return false;","","  return true;","}","","function byHighestPrecedence(a, b) {","  //   Accept: text/*, text/html, text/html;level=1, */*","  //","  // have the following precedence:","  //","  //   1) text/html;level=1","  //   2) text/html","  //   3) text/*","  //   4) */*","  return stringifyMediaValueWithoutQualityFactor(b).length - stringifyMediaValueWithoutQualityFactor(a).length;","}","","/**"," * Represents an HTTP Accept header and provides several methods for"," * determining acceptable media types."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1"," */","class Accept extends Header {","","  constructor(value) {","    super('Accept', value);","  }","","  /**","   * Returns the value of this header as a string.","   */","  get value() {","    return stringifyMediaValues(this._mediaValues) || '*/*';","  }","","  set value(value) {","    this._mediaValues = value ? parseMediaValues(value) : [];","  }","","  /**","   * Returns true if the given media type is acceptable.","   */","  accepts(mediaType) {","    return this.qualityFactorForMediaType(mediaType) !== 0;","  }","","  /**","   * Returns the quality factor for the given media type.","   */","  qualityFactorForMediaType(mediaType) {","    var values = this._mediaValues;","","    if (!values.length)","      return 1;","","    var givenValue = parseMediaValue(mediaType);","    var matchingValues = values.filter(function (value) {","      return (value.type === '*' || value.type === givenValue.type) &&","             (value.subtype === '*' || value.subtype === givenValue.subtype) &&","             paramsMatchIgnoringQualityFactor(value.params, givenValue.params);","    }).sort(byHighestPrecedence);","","    if (!matchingValues.length)","      return 0;","","    return qualityFactorForMediaValue(matchingValues[0]);","  }","","}","","module.exports = Accept;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"11":0,"13":0,"16":1,"25":0,"37":0,"44":0,"48":0,"55":0,"62":0,"64":0,"65":0,"67":0,"68":0,"69":0,"74":0,"75":0,"77":0,"82":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseMediaValue.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"parseMediaValue","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":47}}},"2":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":28},"end":{"line":25,"column":50}}}},"statementMap":{"1":{"start":{"line":20,"column":0},"end":{"line":36,"column":1}},"2":{"start":{"line":21,"column":2},"end":{"line":21,"column":39}},"3":{"start":{"line":23,"column":2},"end":{"line":23,"column":37}},"4":{"start":{"line":24,"column":2},"end":{"line":24,"column":57}},"5":{"start":{"line":25,"column":2},"end":{"line":29,"column":9}},"6":{"start":{"line":26,"column":4},"end":{"line":26,"column":39}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":38}},"8":{"start":{"line":28,"column":4},"end":{"line":28,"column":16}},"9":{"start":{"line":31,"column":2},"end":{"line":35,"column":4}},"10":{"start":{"line":38,"column":0},"end":{"line":38,"column":33}}},"branchMap":{"1":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":18},"end":{"line":21,"column":31}},{"start":{"line":21,"column":35},"end":{"line":21,"column":38}}]}},"code":["/**"," * Parses a media value string including parameters and returns an object"," * containing the type, subtype, and an object of parameters."," *"," *   parseMediaValue(\"text/html;level=2;q=0.4\") =>"," *     { type: 'text',"," *       subtype: 'html', "," *       params: { level: '2', q: '0.4' } }"," *"," *   parseMediaValue(\"en-gb;q=0.8\", \"-\") =>"," *     { type: 'en',"," *       subtype: 'gb',"," *       params: { q: '0.8' } }"," *"," *   parseMediaValue(\"unicode-1-1;q=0.8\") =>"," *     { type: 'unicode-1-1',"," *       subtype: undefined,"," *       params: { q: '0.8' } }"," */","function parseMediaValue(value, typeSeparator) {","  typeSeparator = typeSeparator || '/';","","  var parts = value.split(/\\s*;\\s*/);","  var mediaTypes = parts.shift().split(typeSeparator, 2);","  var params = parts.reduce(function (memo, part) {","    var nameValue = part.split('=', 2);","    memo[nameValue[0]] = nameValue[1];","    return memo;","  }, {});","","  return {","    type: mediaTypes[0],","    subtype: mediaTypes[1],","    params: params","  };","}","","module.exports = parseMediaValue;",""],"l":{"20":1,"21":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"31":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseMediaValues.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseMediaValues.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"parseMediaValues","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":48}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":36},"end":{"line":9,"column":58}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":51}},"2":{"start":{"line":8,"column":0},"end":{"line":12,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":11,"column":5}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":54}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":34}}},"branchMap":{},"code":["var parseMediaValue = require('./parseMediaValue');","","/**"," * Parses a string containing multiple media values and returns an array"," * of objects containing data about each value. Such strings are used as"," * the values of the Accept* family of HTTP headers."," */","function parseMediaValues(value, typeSeparator) {","  return value.split(/\\s*,\\s*/).map(function (mediaValue) {","    return parseMediaValue(mediaValue, typeSeparator);","  });","}","","module.exports = parseMediaValues;",""],"l":{"1":1,"8":1,"9":0,"10":0,"14":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/qualityFactorForMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/qualityFactorForMediaValue.js","s":{"1":1,"2":0,"3":0,"4":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"qualityFactorForMediaValue","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":7,"column":1}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":53}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":55}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}}},"branchMap":{"1":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":22},"end":{"line":5,"column":34}},{"start":{"line":5,"column":38},"end":{"line":5,"column":52}}]},"2":{"line":6,"type":"cond-expr","locations":[{"start":{"line":6,"column":25},"end":{"line":6,"column":50}},{"start":{"line":6,"column":53},"end":{"line":6,"column":54}}]}},"code":["/**"," * Returns the quality factor for the given media value object."," */","function qualityFactorForMediaValue(value) {","  var qualityFactor = value.params && value.params.q;","  return qualityFactor ? parseFloat(qualityFactor) : 1;","}","","module.exports = qualityFactorForMediaValue;",""],"l":{"4":1,"5":0,"6":0,"9":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValues.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValues.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"stringifyMediaValues","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":53}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":20},"end":{"line":8,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":59}},"2":{"start":{"line":7,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":10,"column":16}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":58}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":38}}},"branchMap":{},"code":["var stringifyMediaValue = require('./stringifyMediaValue');","","/**"," * Creates a string from objects containing media values. Such a string may"," * be used as the value of the Accept* family of HTTP headers."," */","function stringifyMediaValues(values, typeSeparator) {","  return values.map(function (mediaValue) {","    return stringifyMediaValue(mediaValue, typeSeparator);","  }).join(', ');","}","","module.exports = stringifyMediaValues;",""],"l":{"1":1,"7":1,"8":0,"9":0,"13":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValue.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValue.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stringifyMediaValue","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":51}}}},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":36,"column":1}},"2":{"start":{"line":15,"column":2},"end":{"line":15,"column":39}},"3":{"start":{"line":17,"column":2},"end":{"line":17,"column":33}},"4":{"start":{"line":19,"column":2},"end":{"line":20,"column":44}},"5":{"start":{"line":20,"column":4},"end":{"line":20,"column":44}},"6":{"start":{"line":22,"column":2},"end":{"line":33,"column":3}},"7":{"start":{"line":23,"column":4},"end":{"line":23,"column":30}},"8":{"start":{"line":25,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":26,"column":6},"end":{"line":31,"column":7}},"10":{"start":{"line":27,"column":8},"end":{"line":27,"column":34}},"11":{"start":{"line":29,"column":8},"end":{"line":30,"column":44}},"12":{"start":{"line":30,"column":10},"end":{"line":30,"column":44}},"13":{"start":{"line":35,"column":2},"end":{"line":35,"column":16}},"14":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":18},"end":{"line":15,"column":31}},{"start":{"line":15,"column":35},"end":{"line":15,"column":38}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":15},"end":{"line":17,"column":25}},{"start":{"line":17,"column":29},"end":{"line":17,"column":32}}]},"3":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":19,"column":2}},{"start":{"line":19,"column":2},"end":{"line":19,"column":2}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":22,"column":2}},{"start":{"line":22,"column":2},"end":{"line":22,"column":2}}]},"5":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":6}},{"start":{"line":26,"column":6},"end":{"line":26,"column":6}}]},"6":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]}},"code":["/**"," * Creates a string from an object containing a media value. This object may"," * have properties containing the type, subtype, and parameters."," *"," *   stringifyMediaValue({ type: 'text', subtype: 'html', params: { level: '2', q: '0.4' } }) =>"," *     \"text/html;level=2;q=0.4\""," *"," *   stringifyMediaValue({ type: 'en', subtype: 'gb', params: { q: '0.8' } }, \"-\") =>"," *     \"en-gb;q=0.8\""," *"," *   stringifyMediaValue({ type: 'unicode-1-1', params: { q: '0.8' } }) =>"," *     \"unicode-1-1;q=0.8\""," */","function stringifyMediaValue(value, typeSeparator) {","  typeSeparator = typeSeparator || '/';","","  var string = value.type || '*';","","  if (value.subtype)","    string += typeSeparator + value.subtype;","","  if (value.params) {","    var params = value.params;","","    for (var paramName in params) {","      if (params.hasOwnProperty(paramName)) {","        string += ';' + paramName;","","        if (params[paramName] != null)","          string += '=' + params[paramName];","      }","    }","  }","","  return string;","}","","module.exports = stringifyMediaValue;",""],"l":{"14":1,"15":0,"17":0,"19":0,"20":0,"22":0,"23":0,"25":0,"26":0,"27":0,"29":0,"30":0,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValueWithoutQualityFactor.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyMediaValueWithoutQualityFactor.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"cloneParamsWithoutQualityFactor","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}}},"2":{"name":"stringifyMediaValueWithoutQualityFactor","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":71}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":59}},"2":{"start":{"line":3,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":17}},"4":{"start":{"line":6,"column":2},"end":{"line":8,"column":43}},"5":{"start":{"line":7,"column":4},"end":{"line":8,"column":43}},"6":{"start":{"line":8,"column":6},"end":{"line":8,"column":43}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":15}},"8":{"start":{"line":17,"column":0},"end":{"line":23,"column":1}},"9":{"start":{"line":18,"column":2},"end":{"line":22,"column":20}},"10":{"start":{"line":25,"column":0},"end":{"line":25,"column":57}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":8},"end":{"line":7,"column":40}},{"start":{"line":7,"column":44},"end":{"line":7,"column":61}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},{"start":{"line":21,"column":28},"end":{"line":21,"column":73}}]}},"code":["var stringifyMediaValue = require('./stringifyMediaValue');","","function cloneParamsWithoutQualityFactor(params) {","  var clone = {};","","  for (var paramName in params)","    if (params.hasOwnProperty(paramName) && paramName !== 'q')","      clone[paramName] = params[paramName]; ","","  return clone;","}","","/**"," * Creates a string from an object containing a media value,"," * ignoring any \"q\" value parameters."," */","function stringifyMediaValueWithoutQualityFactor(value, typeSeparator) {","  return stringifyMediaValue({","    type: value.type,","    subtype: value.subtype,","    params: value.params && cloneParamsWithoutQualityFactor(value.params)","  }, typeSeparator);","}","","module.exports = stringifyMediaValueWithoutQualityFactor;",""],"l":{"1":1,"3":1,"4":0,"6":0,"7":0,"8":0,"10":0,"17":1,"18":0,"25":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptCharset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptCharset.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":41}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":41}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":56}},"3":{"start":{"line":4,"column":0},"end":{"line":30,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":15,"column":5}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":50}},"6":{"start":{"line":17,"column":2},"end":{"line":29,"column":5}},"7":{"start":{"line":23,"column":6},"end":{"line":24,"column":86}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":86}},"9":{"start":{"line":26,"column":6},"end":{"line":26,"column":56}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]}},"code":["var d = require('describe-property');","var AcceptCharset = require('../headers/AcceptCharset');","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given character set.","     */","    acceptsCharset: d(function (charset) {","      return this.request.acceptsCharset(charset);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given character set.","     */","    acceptsCharset: d(function (charset) {","      if (!this._acceptCharsetHeader)","        this._acceptCharsetHeader = new AcceptCharset(this.headers['Accept-Charset']);","","      return this._acceptCharsetHeader.accepts(charset);","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"12":0,"17":1,"23":0,"24":0,"26":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptCharset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptCharset.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"byHighestPrecedence","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":35}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":21}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":14}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":11},"end":{"line":31,"column":19}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":9},"end":{"line":38,"column":19}}},"6":{"name":"(anonymous_6)","line":45,"loc":{"start":{"line":45,"column":25},"end":{"line":45,"column":35}}},"7":{"name":"(anonymous_7)","line":49,"loc":{"start":{"line":49,"column":39},"end":{"line":49,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":60}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":80}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":68}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":34}},"6":{"start":{"line":7,"column":0},"end":{"line":10,"column":1}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":46}},"8":{"start":{"line":21,"column":4},"end":{"line":21,"column":35}},"9":{"start":{"line":28,"column":4},"end":{"line":28,"column":57}},"10":{"start":{"line":32,"column":4},"end":{"line":32,"column":61}},"11":{"start":{"line":39,"column":4},"end":{"line":39,"column":55}},"12":{"start":{"line":46,"column":4},"end":{"line":46,"column":35}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":46}},"14":{"start":{"line":49,"column":4},"end":{"line":54,"column":33}},"15":{"start":{"line":50,"column":6},"end":{"line":51,"column":20}},"16":{"start":{"line":51,"column":8},"end":{"line":51,"column":20}},"17":{"start":{"line":53,"column":6},"end":{"line":53,"column":44}},"18":{"start":{"line":62,"column":4},"end":{"line":67,"column":5}},"19":{"start":{"line":63,"column":6},"end":{"line":64,"column":61}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":61}},"21":{"start":{"line":66,"column":6},"end":{"line":66,"column":15}},"22":{"start":{"line":69,"column":4},"end":{"line":70,"column":15}},"23":{"start":{"line":70,"column":6},"end":{"line":70,"column":15}},"24":{"start":{"line":72,"column":4},"end":{"line":72,"column":57}},"25":{"start":{"line":77,"column":0},"end":{"line":77,"column":31}}},"branchMap":{"1":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":21},"end":{"line":9,"column":23}},{"start":{"line":9,"column":27},"end":{"line":9,"column":44}}]},"2":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":39},"end":{"line":9,"column":40}},{"start":{"line":9,"column":43},"end":{"line":9,"column":44}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":11},"end":{"line":28,"column":50}},{"start":{"line":28,"column":54},"end":{"line":28,"column":56}}]},"4":{"line":32,"type":"cond-expr","locations":[{"start":{"line":32,"column":32},"end":{"line":32,"column":55}},{"start":{"line":32,"column":58},"end":{"line":32,"column":60}}]},"5":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":6},"end":{"line":50,"column":6}},{"start":{"line":50,"column":6},"end":{"line":50,"column":6}}]},"6":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"7":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":6},"end":{"line":63,"column":6}},{"start":{"line":63,"column":6},"end":{"line":63,"column":6}}]},"8":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":10},"end":{"line":63,"column":31}},{"start":{"line":63,"column":35},"end":{"line":63,"column":74}}]},"9":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]}},"code":["var parseMediaValue = require('../utils/parseMediaValue');","var parseMediaValues = require('../utils/parseMediaValues');","var qualityFactorForMediaValue = require('../utils/qualityFactorForMediaValue');","var stringifyMediaValues = require('../utils/stringifyMediaValues');","var Header = require('../Header');","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are equal","  return a === '*' ? -1 : (b === '*' ? 1 : 0);","}","","/**"," * Represents an HTTP Accept-Charset header and provides several methods"," * for determining acceptable content character sets."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2"," */","class AcceptCharset extends Header {","","  constructor(value) {","    super('Accept-Charset', value);","  }","","  /**","   * Returns the value of this header as a string.","   */","  get value() {","    return stringifyMediaValues(this._mediaValues) || '';","  }","","  set value(value) {","    this._mediaValues = value ? parseMediaValues(value) : [];","  }","","  /**","   * Returns true if the given charset is acceptable.","   */","  accepts(charset) {","    return this.qualityFactorForCharset(charset) !== 0;","  }","","  /**","   * Returns the quality factor for the given charset.","   */","  qualityFactorForCharset(charset) {","    var values = this._mediaValues;","","    var givenValue = parseMediaValue(charset);","    var matchingValues = values.filter(function (value) {","      if (value.type === '*')","        return true;","","      return value.type === givenValue.type;","    }).sort(byHighestPrecedence);","","    // From RFC 2616:","    // The special value \"*\", if present in the Accept-Charset field, matches every character","    // set (including ISO-8859-1) which is not mentioned elsewhere in the Accept-Charset field.","    // If no \"*\" is present in an Accept-Charset field, then all character sets not explicitly","    // mentioned get a quality value of 0, except for ISO-8859-1, which gets a quality value of","    // 1 if not explicitly mentioned.","    if (givenValue.type === 'iso-8859-1') {","      if (matchingValues.length && matchingValues[0].type === 'iso-8859-1')","        return qualityFactorForMediaValue(matchingValues[0]);","","      return 1;","    }","","    if (!matchingValues.length)","      return 0;","","    return qualityFactorForMediaValue(matchingValues[0]);","  }","","}","","module.exports = AcceptCharset;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"7":1,"9":0,"21":0,"28":0,"32":0,"39":0,"46":0,"48":0,"49":0,"50":0,"51":0,"53":0,"62":0,"63":0,"64":0,"66":0,"69":0,"70":0,"72":0,"77":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptEncoding.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptEncoding.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":43}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":58}},"3":{"start":{"line":4,"column":0},"end":{"line":30,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":15,"column":5}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":52}},"6":{"start":{"line":17,"column":2},"end":{"line":29,"column":5}},"7":{"start":{"line":23,"column":6},"end":{"line":24,"column":89}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":89}},"9":{"start":{"line":26,"column":6},"end":{"line":26,"column":58}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]}},"code":["var d = require('describe-property');","var AcceptEncoding = require('../headers/AcceptEncoding');","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given content encoding.","     */","    acceptsEncoding: d(function (encoding) {","      return this.request.acceptsEncoding(encoding);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given content encoding.","     */","    acceptsEncoding: d(function (encoding) {","      if (!this._acceptEncodingHeader)","        this._acceptEncodingHeader = new AcceptEncoding(this.headers['Accept-Encoding']);","","      return this._acceptEncodingHeader.accepts(encoding);","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"12":0,"17":1,"23":0,"24":0,"26":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptEncoding.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptEncoding.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"byHighestPrecedence","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":35}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":21}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":14}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":11},"end":{"line":31,"column":19}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":9},"end":{"line":38,"column":20}}},"6":{"name":"(anonymous_6)","line":45,"loc":{"start":{"line":45,"column":26},"end":{"line":45,"column":37}}},"7":{"name":"(anonymous_7)","line":49,"loc":{"start":{"line":49,"column":39},"end":{"line":49,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":60}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":80}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":68}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":34}},"6":{"start":{"line":7,"column":0},"end":{"line":10,"column":1}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":46}},"8":{"start":{"line":21,"column":4},"end":{"line":21,"column":36}},"9":{"start":{"line":28,"column":4},"end":{"line":28,"column":57}},"10":{"start":{"line":32,"column":4},"end":{"line":32,"column":61}},"11":{"start":{"line":39,"column":4},"end":{"line":39,"column":57}},"12":{"start":{"line":46,"column":4},"end":{"line":46,"column":35}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":47}},"14":{"start":{"line":49,"column":4},"end":{"line":54,"column":33}},"15":{"start":{"line":50,"column":6},"end":{"line":51,"column":20}},"16":{"start":{"line":51,"column":8},"end":{"line":51,"column":20}},"17":{"start":{"line":53,"column":6},"end":{"line":53,"column":44}},"18":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"19":{"start":{"line":64,"column":6},"end":{"line":65,"column":61}},"20":{"start":{"line":65,"column":8},"end":{"line":65,"column":61}},"21":{"start":{"line":67,"column":6},"end":{"line":67,"column":15}},"22":{"start":{"line":70,"column":4},"end":{"line":71,"column":15}},"23":{"start":{"line":71,"column":6},"end":{"line":71,"column":15}},"24":{"start":{"line":73,"column":4},"end":{"line":73,"column":57}},"25":{"start":{"line":78,"column":0},"end":{"line":78,"column":32}}},"branchMap":{"1":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":21},"end":{"line":9,"column":23}},{"start":{"line":9,"column":27},"end":{"line":9,"column":44}}]},"2":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":39},"end":{"line":9,"column":40}},{"start":{"line":9,"column":43},"end":{"line":9,"column":44}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":11},"end":{"line":28,"column":50}},{"start":{"line":28,"column":54},"end":{"line":28,"column":56}}]},"4":{"line":32,"type":"cond-expr","locations":[{"start":{"line":32,"column":32},"end":{"line":32,"column":55}},{"start":{"line":32,"column":58},"end":{"line":32,"column":60}}]},"5":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":6},"end":{"line":50,"column":6}},{"start":{"line":50,"column":6},"end":{"line":50,"column":6}}]},"6":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"7":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":6},"end":{"line":64,"column":6}},{"start":{"line":64,"column":6},"end":{"line":64,"column":6}}]},"8":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":10},"end":{"line":64,"column":31}},{"start":{"line":64,"column":35},"end":{"line":64,"column":72}}]},"9":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]}},"code":["var parseMediaValue = require('../utils/parseMediaValue');","var parseMediaValues = require('../utils/parseMediaValues');","var qualityFactorForMediaValue = require('../utils/qualityFactorForMediaValue');","var stringifyMediaValues = require('../utils/stringifyMediaValues');","var Header = require('../Header');","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are equal","  return a === '*' ? -1 : (b === '*' ? 1 : 0);","}","","/**"," * Represents an HTTP Accept-Encoding header and provides several methods"," * for determining acceptable content encodings."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3"," */","class AcceptEncoding extends Header {","","  constructor(value) {","    super('Accept-Encoding', value);","  }","","  /**","   * Returns the value of this header as a string.","   */","  get value() {","    return stringifyMediaValues(this._mediaValues) || '';","  }","","  set value(value) {","    this._mediaValues = value ? parseMediaValues(value) : [];","  }","","  /**","   * Returns true if the given encoding is acceptable.","   */","  accepts(encoding) {","    return this.qualityFactorForEncoding(encoding) !== 0;","  }","","  /**","   * Returns the quality factor for the given encoding.","   */","  qualityFactorForEncoding(encoding) {","    var values = this._mediaValues;","","    var givenValue = parseMediaValue(encoding);","    var matchingValues = values.filter(function (value) {","      if (value.type === '*')","        return true;","","      return value.type === givenValue.type;","    }).sort(byHighestPrecedence);","","    // From RFC 2616:","    // The \"identity\" content-coding is always acceptable, unless","    // specifically refused because the Accept-Encoding field includes","    // \"identity;q=0\", or because the field includes \"*;q=0\" and does","    // not explicitly include the \"identity\" content-coding. If the","    // Accept-Encoding field-value is empty, then only the \"identity\"","    // encoding is acceptable.","    if (givenValue.type === 'identity') {","      if (matchingValues.length && matchingValues[0].type === 'identity')","        return qualityFactorForMediaValue(matchingValues[0]);","","      return 1;","    }","","    if (!matchingValues.length)","      return 0;","","    return qualityFactorForMediaValue(matchingValues[0]);","  }","","}","","module.exports = AcceptEncoding;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"7":1,"9":0,"21":0,"28":0,"32":0,"39":0,"46":0,"48":0,"49":0,"50":0,"51":0,"53":0,"63":0,"64":0,"65":0,"67":0,"70":0,"71":0,"73":0,"78":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptLanguage.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/acceptLanguage.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":43}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":58}},"3":{"start":{"line":4,"column":0},"end":{"line":30,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":15,"column":5}},"5":{"start":{"line":12,"column":6},"end":{"line":12,"column":52}},"6":{"start":{"line":17,"column":2},"end":{"line":29,"column":5}},"7":{"start":{"line":23,"column":6},"end":{"line":24,"column":89}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":89}},"9":{"start":{"line":26,"column":6},"end":{"line":26,"column":58}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]}},"code":["var d = require('describe-property');","var AcceptLanguage = require('../headers/AcceptLanguage');","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * Returns true if the request indicates that the client accepts","     * the given content language.","     */","    acceptsLanguage: d(function (language) {","      return this.request.acceptsLanguage(language);","    })","","  });","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Returns true if the client accepts the given content language.","     */","    acceptsLanguage: d(function (language) {","      if (!this._acceptLanguageHeader)","        this._acceptLanguageHeader = new AcceptLanguage(this.headers['Accept-Language']);","","      return this._acceptLanguageHeader.accepts(language);","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"12":0,"17":1,"23":0,"24":0,"26":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptLanguage.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/headers/AcceptLanguage.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"byHighestPrecedence","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}}},"2":{"name":"byMostSpecific","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":30}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":13},"end":{"line":25,"column":21}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":11},"end":{"line":32,"column":14}}},"5":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":19}}},"6":{"name":"(anonymous_6)","line":43,"loc":{"start":{"line":43,"column":9},"end":{"line":43,"column":20}}},"7":{"name":"(anonymous_7)","line":50,"loc":{"start":{"line":50,"column":26},"end":{"line":50,"column":37}}},"8":{"name":"(anonymous_8)","line":57,"loc":{"start":{"line":57,"column":39},"end":{"line":57,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":60}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":80}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":68}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":106}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"7":{"start":{"line":8,"column":0},"end":{"line":11,"column":1}},"8":{"start":{"line":10,"column":2},"end":{"line":10,"column":65}},"9":{"start":{"line":13,"column":0},"end":{"line":15,"column":1}},"10":{"start":{"line":14,"column":2},"end":{"line":14,"column":111}},"11":{"start":{"line":26,"column":4},"end":{"line":26,"column":36}},"12":{"start":{"line":33,"column":4},"end":{"line":33,"column":62}},"13":{"start":{"line":37,"column":4},"end":{"line":37,"column":66}},"14":{"start":{"line":44,"column":4},"end":{"line":44,"column":57}},"15":{"start":{"line":51,"column":4},"end":{"line":51,"column":35}},"16":{"start":{"line":53,"column":4},"end":{"line":54,"column":15}},"17":{"start":{"line":54,"column":6},"end":{"line":54,"column":15}},"18":{"start":{"line":56,"column":4},"end":{"line":56,"column":52}},"19":{"start":{"line":57,"column":4},"end":{"line":65,"column":33}},"20":{"start":{"line":58,"column":6},"end":{"line":59,"column":20}},"21":{"start":{"line":59,"column":8},"end":{"line":59,"column":20}},"22":{"start":{"line":61,"column":6},"end":{"line":62,"column":21}},"23":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"24":{"start":{"line":64,"column":6},"end":{"line":64,"column":44}},"25":{"start":{"line":67,"column":4},"end":{"line":68,"column":15}},"26":{"start":{"line":68,"column":6},"end":{"line":68,"column":15}},"27":{"start":{"line":70,"column":4},"end":{"line":70,"column":57}},"28":{"start":{"line":75,"column":0},"end":{"line":75,"column":32}}},"branchMap":{"1":{"line":10,"type":"cond-expr","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":23}},{"start":{"line":10,"column":27},"end":{"line":10,"column":63}}]},"2":{"line":10,"type":"cond-expr","locations":[{"start":{"line":10,"column":39},"end":{"line":10,"column":40}},{"start":{"line":10,"column":43},"end":{"line":10,"column":63}}]},"3":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":11},"end":{"line":33,"column":55}},{"start":{"line":33,"column":59},"end":{"line":33,"column":61}}]},"4":{"line":37,"type":"cond-expr","locations":[{"start":{"line":37,"column":32},"end":{"line":37,"column":60}},{"start":{"line":37,"column":63},"end":{"line":37,"column":65}}]},"5":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"6":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":6},"end":{"line":58,"column":6}},{"start":{"line":58,"column":6},"end":{"line":58,"column":6}}]},"7":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":6},"end":{"line":61,"column":6}},{"start":{"line":61,"column":6},"end":{"line":61,"column":6}}]},"8":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":10},"end":{"line":61,"column":23}},{"start":{"line":61,"column":27},"end":{"line":61,"column":63}}]},"9":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]}},"code":["var parseMediaValue = require('../utils/parseMediaValue');","var parseMediaValues = require('../utils/parseMediaValues');","var qualityFactorForMediaValue = require('../utils/qualityFactorForMediaValue');","var stringifyMediaValues = require('../utils/stringifyMediaValues');","var stringifyMediaValueWithoutQualityFactor = require('../utils/stringifyMediaValueWithoutQualityFactor');","var Header = require('../Header');","","function byHighestPrecedence(a, b) {","  // \"*\" gets least precedence, all others are compared by specificity","  return a === '*' ? -1 : (b === '*' ? 1 : byMostSpecific(a, b));","}","","function byMostSpecific(a, b) {","  return stringifyMediaValueWithoutQualityFactor(b).length - stringifyMediaValueWithoutQualityFactor(a).length;","}","","/**"," * Represents an HTTP Accept-Language header and provides several methods"," * for determining acceptable content languages."," *"," * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4"," */","class AcceptLanguage extends Header {","","  constructor(value) {","    super('Accept-Language', value);","  }","","  /**","   * Returns the value of this header as a string.","   */","  get value() {","    return stringifyMediaValues(this._mediaValues, '-') || '';","  }","","  set value(value) {","    this._mediaValues = value ? parseMediaValues(value, '-') : [];","  }","","  /**","   * Returns true if the given language is acceptable.","   */","  accepts(language) {","    return this.qualityFactorForLanguage(language) !== 0;","  }","","  /**","   * Returns the quality factor for the given language.","   */","  qualityFactorForLanguage(language) {","    var values = this._mediaValues;","","    if (!values.length)","      return 1;","","    var givenValue = parseMediaValue(language, '-');","    var matchingValues = values.filter(function (value) {","      if (value.type === '*')","        return true;","","      if (value.subtype && value.subtype !== givenValue.subtype)","        return false;","","      return value.type === givenValue.type;","    }).sort(byHighestPrecedence);","","    if (!matchingValues.length)","      return 0;","","    return qualityFactorForMediaValue(matchingValues[0]);","  }","","}","","module.exports = AcceptLanguage;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"8":1,"10":0,"13":1,"14":0,"26":0,"33":0,"37":0,"44":0,"51":0,"53":0,"54":0,"56":0,"57":0,"58":0,"59":0,"61":0,"62":0,"64":0,"67":0,"68":0,"70":0,"75":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/client.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/client.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":7,"10":7,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":1,"3":7,"4":0},"fnMap":{"1":{"name":"defaultApp","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":17},"end":{"line":9,"column":33}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":30}}},"4":{"name":"(anonymous_4)","line":22,"loc":{"start":{"line":22,"column":21},"end":{"line":22,"column":55}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":44}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"4":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":42}},"6":{"start":{"line":9,"column":0},"end":{"line":51,"column":2}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":42}},"8":{"start":{"line":12,"column":2},"end":{"line":50,"column":5}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":40}},"10":{"start":{"line":22,"column":4},"end":{"line":49,"column":6}},"11":{"start":{"line":23,"column":6},"end":{"line":44,"column":7}},"12":{"start":{"line":24,"column":8},"end":{"line":24,"column":27}},"13":{"start":{"line":26,"column":8},"end":{"line":32,"column":9}},"14":{"start":{"line":27,"column":10},"end":{"line":27,"column":33}},"15":{"start":{"line":28,"column":15},"end":{"line":32,"column":9}},"16":{"start":{"line":29,"column":10},"end":{"line":29,"column":38}},"17":{"start":{"line":31,"column":10},"end":{"line":31,"column":48}},"18":{"start":{"line":34,"column":8},"end":{"line":34,"column":25}},"19":{"start":{"line":35,"column":13},"end":{"line":44,"column":7}},"20":{"start":{"line":36,"column":8},"end":{"line":36,"column":35}},"21":{"start":{"line":37,"column":13},"end":{"line":44,"column":7}},"22":{"start":{"line":38,"column":8},"end":{"line":38,"column":40}},"23":{"start":{"line":39,"column":13},"end":{"line":44,"column":7}},"24":{"start":{"line":40,"column":8},"end":{"line":40,"column":27}},"25":{"start":{"line":41,"column":8},"end":{"line":41,"column":21}},"26":{"start":{"line":43,"column":8},"end":{"line":43,"column":50}},"27":{"start":{"line":46,"column":6},"end":{"line":46,"column":30}},"28":{"start":{"line":48,"column":6},"end":{"line":48,"column":47}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":15},"end":{"line":28,"column":15}},{"start":{"line":28,"column":15},"end":{"line":28,"column":15}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":37},"end":{"line":31,"column":40}},{"start":{"line":31,"column":44},"end":{"line":31,"column":46}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":13},"end":{"line":35,"column":13}},{"start":{"line":35,"column":13},"end":{"line":35,"column":13}}]},"6":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":13},"end":{"line":37,"column":13}},{"start":{"line":37,"column":13},"end":{"line":37,"column":13}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":13},"end":{"line":39,"column":13}},{"start":{"line":39,"column":13},"end":{"line":39,"column":13}}]},"8":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":35},"end":{"line":43,"column":42}},{"start":{"line":43,"column":46},"end":{"line":43,"column":48}}]}},"code":["var objectAssign = require('object-assign');","var sendRequest = require('../utils/sendRequest');","var Location = require('../Location');","","function defaultApp(conn) {","  return sendRequest(conn, conn.location);","}","","module.exports = function (mach) {","  mach.call = require('../utils/callApp');","","  [ 'DELETE',","    'GET',","    'HEAD',","    'OPTIONS',","    'POST',","    'PUT',","    'TRACE'","  ].forEach(function (method) {","    var property = method.toLowerCase();","","    mach[property] = function (app, options, modifier) {","      if (typeof app !== 'function') {","        modifier = options;","","        if (typeof app === 'string') { // get(url, modifier)","          options = { url: app };","        } else if (app instanceof Location) { // get(location, modifier)","          options = { location: app };","        } else { // get(options, modifier)","          options = objectAssign({}, app || {});","        }","","        app = defaultApp;","      } else if (typeof options === 'string') { // get(app, url, modifier)","        options = { url: options };","      } else if (options instanceof Location) { // get(app, location, modifier)","        options = { location: options };","      } else if (typeof options !== 'object') { // get(app, modifier)","        modifier = options;","        options = {};","      } else { // get(app, options, modifier)","        options = objectAssign({}, options || {});","      }","","      options.method = method;","","      return mach.call(app, options, modifier);","    };","  });","};",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"9":1,"10":1,"12":1,"20":7,"22":7,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"31":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"43":0,"46":0,"48":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/sendRequest.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/sendRequest.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"sendRequest","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":30},"end":{"line":8,"column":66}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":31},"end":{"line":19,"column":55}}},"4":{"name":"(anonymous_4)","line":28,"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":53}},"4":{"start":{"line":5,"column":0},"end":{"line":35,"column":1}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":64}},"6":{"start":{"line":8,"column":2},"end":{"line":34,"column":5}},"7":{"start":{"line":9,"column":4},"end":{"line":17,"column":7}},"8":{"start":{"line":19,"column":4},"end":{"line":24,"column":7}},"9":{"start":{"line":20,"column":6},"end":{"line":20,"column":44}},"10":{"start":{"line":21,"column":6},"end":{"line":21,"column":51}},"11":{"start":{"line":22,"column":6},"end":{"line":22,"column":43}},"12":{"start":{"line":23,"column":6},"end":{"line":23,"column":20}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":36}},"14":{"start":{"line":28,"column":4},"end":{"line":31,"column":7}},"15":{"start":{"line":29,"column":6},"end":{"line":29,"column":26}},"16":{"start":{"line":30,"column":6},"end":{"line":30,"column":16}},"17":{"start":{"line":33,"column":4},"end":{"line":33,"column":43}},"18":{"start":{"line":37,"column":0},"end":{"line":37,"column":29}}},"branchMap":{"1":{"line":6,"type":"cond-expr","locations":[{"start":{"line":6,"column":51},"end":{"line":6,"column":56}},{"start":{"line":6,"column":59},"end":{"line":6,"column":63}}]}},"code":["var http = require('http');","var https = require('https');","var AbortablePromise = require('./AbortablePromise');","","function sendRequest(conn, location) {","  var transport = location.protocol === 'https:' ? https : http;","","  return new AbortablePromise(function (resolve, reject, onAbort) {","    var nodeRequest = transport.request({","      method: conn.method,","      protocol: location.protocol,","      auth: location.auth,","      hostname: location.hostname,","      port: location.port,","      path: location.path,","      headers: conn.request.headers","    });","","    nodeRequest.on('response', function (nodeResponse) {","      conn.status = nodeResponse.statusCode;","      conn.response.headers = nodeResponse.headers;","      conn.response.content = nodeResponse;","      resolve(conn);","    });","","    nodeRequest.on('error', reject);","","    onAbort(function () {","      nodeRequest.abort();","      resolve();","    });","","    conn.request.content.pipe(nodeRequest);","  });","}","","module.exports = sendRequest;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"8":0,"9":0,"19":0,"20":0,"21":0,"22":0,"23":0,"26":0,"28":0,"29":0,"30":0,"33":0,"37":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/AbortablePromise.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/AbortablePromise.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"makeAbortable","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":17},"end":{"line":8,"column":29}}},"3":{"name":"AbortablePromise","line":42,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":36}}},"4":{"name":"(anonymous_4)","line":47,"loc":{"start":{"line":47,"column":28},"end":{"line":47,"column":55}}},"5":{"name":"(anonymous_5)","line":50,"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":24}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":13},"end":{"line":64,"column":30}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":7},"end":{"line":72,"column":19}}},"8":{"name":"(anonymous_8)","line":75,"loc":{"start":{"line":75,"column":7},"end":{"line":75,"column":21}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":35}},"2":{"start":{"line":3,"column":0},"end":{"line":13,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":24}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":27}},"5":{"start":{"line":8,"column":2},"end":{"line":10,"column":4}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":65}},"7":{"start":{"line":12,"column":2},"end":{"line":12,"column":17}},"8":{"start":{"line":42,"column":0},"end":{"line":84,"column":1}},"9":{"start":{"line":43,"column":2},"end":{"line":44,"column":66}},"10":{"start":{"line":44,"column":4},"end":{"line":44,"column":66}},"11":{"start":{"line":46,"column":2},"end":{"line":46,"column":12}},"12":{"start":{"line":47,"column":2},"end":{"line":81,"column":5}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":16}},"14":{"start":{"line":50,"column":4},"end":{"line":62,"column":6}},"15":{"start":{"line":51,"column":6},"end":{"line":52,"column":15}},"16":{"start":{"line":52,"column":8},"end":{"line":52,"column":15}},"17":{"start":{"line":54,"column":6},"end":{"line":54,"column":23}},"18":{"start":{"line":55,"column":6},"end":{"line":55,"column":21}},"19":{"start":{"line":57,"column":6},"end":{"line":61,"column":7}},"20":{"start":{"line":58,"column":8},"end":{"line":58,"column":41}},"21":{"start":{"line":60,"column":8},"end":{"line":60,"column":22}},"22":{"start":{"line":64,"column":4},"end":{"line":80,"column":7}},"23":{"start":{"line":65,"column":6},"end":{"line":69,"column":7}},"24":{"start":{"line":66,"column":8},"end":{"line":66,"column":30}},"25":{"start":{"line":68,"column":8},"end":{"line":68,"column":23}},"26":{"start":{"line":71,"column":6},"end":{"line":71,"column":37}},"27":{"start":{"line":73,"column":6},"end":{"line":73,"column":21}},"28":{"start":{"line":74,"column":6},"end":{"line":74,"column":36}},"29":{"start":{"line":76,"column":6},"end":{"line":77,"column":52}},"30":{"start":{"line":77,"column":8},"end":{"line":77,"column":52}},"31":{"start":{"line":79,"column":6},"end":{"line":79,"column":19}},"32":{"start":{"line":83,"column":2},"end":{"line":83,"column":39}},"33":{"start":{"line":86,"column":0},"end":{"line":86,"column":34}}},"branchMap":{"1":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"2":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":6},"end":{"line":51,"column":6}},{"start":{"line":51,"column":6},"end":{"line":51,"column":6}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":6},"end":{"line":65,"column":6}},{"start":{"line":65,"column":6},"end":{"line":65,"column":6}}]},"4":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":10},"end":{"line":65,"column":15}},{"start":{"line":65,"column":19},"end":{"line":65,"column":52}}]},"5":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":6}},{"start":{"line":76,"column":6},"end":{"line":76,"column":6}}]}},"code":["var Promise = require('./Promise');","","function makeAbortable(promise, abort) {","  promise.abort = abort;","","  // Hijack promise.then so it returns an abortable promise.","  var _then = promise.then;","  promise.then = function () {","    return makeAbortable(_then.apply(promise, arguments), abort);","  };","","  return promise;","}","","/**"," * A Promise class with an abort() method that calls the onAbort function"," * provided by the resolver."," *"," * Example:"," *"," *   var promise = new AbortablePromise(function (resolve, reject, onAbort) {"," *     // Use resolve & reject as you normally would."," *     var request = makeRequest( ... , function (error, response) {"," *       if (error) {"," *         reject(error);"," *       } else {"," *         resolve(response);"," *       }"," *     });"," *   "," *     // Use onAbort to register a promise.abort() function. It is the"," *     // responsibility of this function to abort the execution of the"," *     // promise and resolve/reject as needed."," *     onAbort(function () {"," *       request.abort();"," *       reject(new Error('Request was aborted'));"," *     });"," *   });"," *"," *   promise.abort(); // Calls the onAbort handler."," */","function AbortablePromise(resolver) {","  if (typeof resolver !== 'function')","    throw new Error('AbortablePromise needs a resolver function');","","  var abort;","  var promise = new Promise(function (resolve, reject) {","    var aborter;","","    abort = function () {","      if (aborter == null)","        return;","","      var fn = aborter;","      aborter = null;","","      try {","        return fn.apply(this, arguments);","      } catch (error) {","        reject(error);","      }","    };","","    resolver(function (child) {","      if (child && typeof child.abort === 'function') {","        aborter = child.abort;","      } else {","        aborter = null;","      }","","      resolve.apply(this, arguments);","    }, function () {","      aborter = null;","      reject.apply(this, arguments);","    }, function (fn) {","      if (typeof fn !== 'function')","        throw new Error('onAbort needs a function');","","      aborter = fn;","    });","  });","","  return makeAbortable(promise, abort);","}","","module.exports = AbortablePromise;",""],"l":{"1":1,"3":1,"4":0,"7":0,"8":0,"9":0,"12":0,"42":1,"43":0,"44":0,"46":0,"47":0,"48":0,"50":0,"51":0,"52":0,"54":0,"55":0,"57":0,"58":0,"60":0,"64":0,"65":0,"66":0,"68":0,"71":0,"73":0,"74":0,"76":0,"77":0,"79":0,"83":0,"86":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/middleware.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/middleware.js","s":{"1":1,"2":1,"3":1,"4":18,"5":18},"b":{"1":[18,0]},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":42}},"2":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":6,"column":44}},"4":{"start":{"line":5,"column":4},"end":{"line":6,"column":44}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":44}}},"branchMap":{"1":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":5,"column":4}},{"start":{"line":5,"column":4},"end":{"line":5,"column":4}}]}},"code":["var middleware = require('../middleware');","","module.exports = function (mach) {","  for (var property in middleware)","    if (middleware.hasOwnProperty(property))","      mach[property] = middleware[property];","};",""],"l":{"1":1,"3":1,"4":1,"5":18,"6":18}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":20,"column":2}}},"branchMap":{},"code":["module.exports = {","  basicAuth       : require('./basicAuth'),","  catch           : require('./catch'),","  charset         : require('./charset'),","  contentType     : require('./contentType'),","  favicon         : require('./favicon'),","  file            : require('./file'),","  gzip            : require('./gzip'),","  logger          : require('./logger'),","  mapper          : require('./mapper'),","  methodOverride  : require('./methodOverride'),","  modified        : require('./modified'),","  params          : require('./params'),","  proxy           : require('./proxy'),","  rewrite         : require('./rewrite'),","  router          : require('./router'),","  session         : require('./session'),","  stack           : require('./stack'),","  token           : require('./token')","};",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/basicAuth.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/basicAuth.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"basicAuth","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}}},"2":{"name":"(anonymous_2)","line":44,"loc":{"start":{"line":44,"column":9},"end":{"line":44,"column":25}}},"3":{"name":"(anonymous_3)","line":51,"loc":{"start":{"line":51,"column":70},"end":{"line":51,"column":86}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"4":{"start":{"line":33,"column":0},"end":{"line":61,"column":1}},"5":{"start":{"line":34,"column":2},"end":{"line":34,"column":26}},"6":{"start":{"line":36,"column":2},"end":{"line":37,"column":36}},"7":{"start":{"line":37,"column":4},"end":{"line":37,"column":36}},"8":{"start":{"line":39,"column":2},"end":{"line":40,"column":66}},"9":{"start":{"line":40,"column":4},"end":{"line":40,"column":66}},"10":{"start":{"line":42,"column":2},"end":{"line":42,"column":56}},"11":{"start":{"line":44,"column":2},"end":{"line":60,"column":4}},"12":{"start":{"line":45,"column":4},"end":{"line":46,"column":28}},"13":{"start":{"line":46,"column":6},"end":{"line":46,"column":28}},"14":{"start":{"line":48,"column":4},"end":{"line":48,"column":46}},"15":{"start":{"line":49,"column":4},"end":{"line":49,"column":61}},"16":{"start":{"line":51,"column":4},"end":{"line":59,"column":7}},"17":{"start":{"line":52,"column":6},"end":{"line":55,"column":7}},"18":{"start":{"line":53,"column":8},"end":{"line":53,"column":60}},"19":{"start":{"line":54,"column":8},"end":{"line":54,"column":30}},"20":{"start":{"line":57,"column":6},"end":{"line":57,"column":80}},"21":{"start":{"line":58,"column":6},"end":{"line":58,"column":39}},"22":{"start":{"line":63,"column":0},"end":{"line":63,"column":27}}},"branchMap":{"1":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":19}},{"start":{"line":34,"column":23},"end":{"line":34,"column":25}}]},"2":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":36,"column":2}},{"start":{"line":36,"column":2},"end":{"line":36,"column":2}}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":2},"end":{"line":39,"column":2}},{"start":{"line":39,"column":2},"end":{"line":39,"column":2}}]},"4":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":14},"end":{"line":42,"column":27}},{"start":{"line":42,"column":31},"end":{"line":42,"column":55}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"6":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":6},"end":{"line":52,"column":6}},{"start":{"line":52,"column":6},"end":{"line":52,"column":6}}]},"7":{"line":53,"type":"cond-expr","locations":[{"start":{"line":53,"column":44},"end":{"line":53,"column":52}},{"start":{"line":53,"column":55},"end":{"line":53,"column":59}}]}},"code":["var mach = require('../index');","var Promise = require('../utils/Promise');","","mach.extend(","  require('../extensions/server')",");","","/**"," * A middleware that performs basic auth on the incoming request before passing"," * it downstream."," *"," * The `validate` argument must be a function that accepts two arguments: the"," * username and password given in the request. It must return the username to"," * use for the request (or simply `true` to indicate the given username is"," * valid) or a promise for such a value. The validated username is stored in the"," * `remoteUser` request variable."," *"," * When authorization fails, the client automatically receives a 401 Unauthorized"," * response with the appropriate challenge in the WWW-Authenticate header."," *"," * Example:"," *"," *   mach.basicAuth(app, function (user, pass) {"," *     // Return a boolean value to indicate the given credentials are valid."," *     return (user === 'admin' && pass === 'secret');"," *   });"," *"," *   mach.basicAuth(app, function (user, pass) {"," *     // Return a promise for the actual username to use."," *     return query('SELECT username FROM users WHERE handle=? AND password=?', user, pass);"," *   });"," */","function basicAuth(app, options) {","  options = options || {};","","  if (typeof options === 'function')","    options = { validate: options };","","  if (typeof options.validate !== 'function')","    throw new Error('mach.basicAuth needs a validation function');","","  var realm = options.realm || 'Authorization Required';","","  return function (conn) {","    if (conn.remoteUser)","      return conn.call(app); // Don't overwrite existing remoteUser.","","    var credentials = conn.auth.split(':', 2);","    var username = credentials[0], password = credentials[1];","","    return Promise.resolve(options.validate(username, password)).then(function (user) {","      if (user) {","        conn.remoteUser = (user === true) ? username : user;","        return conn.call(app);","      }","","      conn.response.headers['WWW-Authenticate'] = 'Basic realm=\"' + realm + '\"';","      conn.text(401, 'Not Authorized');","    });","  };","}","","module.exports = basicAuth;",""],"l":{"1":1,"2":1,"4":1,"33":1,"34":0,"36":0,"37":0,"39":0,"40":0,"42":0,"44":0,"45":0,"46":0,"48":0,"49":0,"51":0,"52":0,"53":0,"54":0,"57":0,"58":0,"63":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/server.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/server.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":1,"62":1,"63":0,"64":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":17},"end":{"line":9,"column":33}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":28}}},"3":{"name":"(anonymous_3)","line":63,"loc":{"start":{"line":63,"column":17},"end":{"line":63,"column":50}}},"4":{"name":"(anonymous_4)","line":72,"loc":{"start":{"line":72,"column":50},"end":{"line":72,"column":75}}},"5":{"name":"(anonymous_5)","line":83,"loc":{"start":{"line":83,"column":16},"end":{"line":83,"column":44}}},"6":{"name":"(anonymous_6)","line":97,"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":32}}},"7":{"name":"(anonymous_7)","line":111,"loc":{"start":{"line":111,"column":12},"end":{"line":111,"column":39}}},"8":{"name":"(anonymous_8)","line":125,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":36}}},"9":{"name":"(anonymous_9)","line":133,"loc":{"start":{"line":133,"column":12},"end":{"line":133,"column":36}}},"10":{"name":"(anonymous_10)","line":141,"loc":{"start":{"line":141,"column":12},"end":{"line":141,"column":36}}},"11":{"name":"(anonymous_11)","line":170,"loc":{"start":{"line":170,"column":12},"end":{"line":170,"column":39}}},"12":{"name":"(anonymous_12)","line":211,"loc":{"start":{"line":211,"column":17},"end":{"line":211,"column":42}}},"13":{"name":"(anonymous_13)","line":219,"loc":{"start":{"line":219,"column":18},"end":{"line":219,"column":34}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":60}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":58}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":48}},"8":{"start":{"line":9,"column":0},"end":{"line":224,"column":2}},"9":{"start":{"line":10,"column":2},"end":{"line":10,"column":42}},"10":{"start":{"line":11,"column":2},"end":{"line":11,"column":63}},"11":{"start":{"line":12,"column":2},"end":{"line":12,"column":44}},"12":{"start":{"line":14,"column":2},"end":{"line":200,"column":5}},"13":{"start":{"line":20,"column":6},"end":{"line":20,"column":75}},"14":{"start":{"line":64,"column":6},"end":{"line":67,"column":7}},"15":{"start":{"line":65,"column":8},"end":{"line":65,"column":31}},"16":{"start":{"line":66,"column":8},"end":{"line":66,"column":26}},"17":{"start":{"line":69,"column":6},"end":{"line":69,"column":33}},"18":{"start":{"line":70,"column":6},"end":{"line":70,"column":53}},"19":{"start":{"line":72,"column":6},"end":{"line":76,"column":9}},"20":{"start":{"line":74,"column":8},"end":{"line":74,"column":62}},"21":{"start":{"line":75,"column":8},"end":{"line":75,"column":74}},"22":{"start":{"line":84,"column":6},"end":{"line":87,"column":7}},"23":{"start":{"line":85,"column":8},"end":{"line":85,"column":26}},"24":{"start":{"line":86,"column":8},"end":{"line":86,"column":21}},"25":{"start":{"line":89,"column":6},"end":{"line":89,"column":27}},"26":{"start":{"line":90,"column":6},"end":{"line":90,"column":51}},"27":{"start":{"line":98,"column":6},"end":{"line":98,"column":72}},"28":{"start":{"line":112,"column":6},"end":{"line":116,"column":7}},"29":{"start":{"line":113,"column":8},"end":{"line":113,"column":29}},"30":{"start":{"line":115,"column":8},"end":{"line":115,"column":25}},"31":{"start":{"line":118,"column":6},"end":{"line":119,"column":40}},"32":{"start":{"line":119,"column":8},"end":{"line":119,"column":40}},"33":{"start":{"line":126,"column":6},"end":{"line":126,"column":47}},"34":{"start":{"line":127,"column":6},"end":{"line":127,"column":30}},"35":{"start":{"line":134,"column":6},"end":{"line":134,"column":46}},"36":{"start":{"line":135,"column":6},"end":{"line":135,"column":30}},"37":{"start":{"line":142,"column":6},"end":{"line":142,"column":53}},"38":{"start":{"line":144,"column":6},"end":{"line":148,"column":7}},"39":{"start":{"line":145,"column":8},"end":{"line":145,"column":29}},"40":{"start":{"line":147,"column":8},"end":{"line":147,"column":22}},"41":{"start":{"line":150,"column":6},"end":{"line":151,"column":87}},"42":{"start":{"line":151,"column":8},"end":{"line":151,"column":87}},"43":{"start":{"line":171,"column":6},"end":{"line":175,"column":7}},"44":{"start":{"line":172,"column":8},"end":{"line":172,"column":29}},"45":{"start":{"line":174,"column":8},"end":{"line":174,"column":25}},"46":{"start":{"line":177,"column":6},"end":{"line":177,"column":35}},"47":{"start":{"line":179,"column":6},"end":{"line":180,"column":36}},"48":{"start":{"line":180,"column":8},"end":{"line":180,"column":36}},"49":{"start":{"line":182,"column":6},"end":{"line":188,"column":7}},"50":{"start":{"line":183,"column":8},"end":{"line":183,"column":43}},"51":{"start":{"line":184,"column":13},"end":{"line":188,"column":7}},"52":{"start":{"line":185,"column":8},"end":{"line":185,"column":61}},"53":{"start":{"line":187,"column":8},"end":{"line":187,"column":53}},"54":{"start":{"line":190,"column":6},"end":{"line":191,"column":85}},"55":{"start":{"line":191,"column":8},"end":{"line":191,"column":85}},"56":{"start":{"line":193,"column":6},"end":{"line":197,"column":7}},"57":{"start":{"line":194,"column":8},"end":{"line":194,"column":76}},"58":{"start":{"line":195,"column":13},"end":{"line":197,"column":7}},"59":{"start":{"line":196,"column":8},"end":{"line":196,"column":76}},"60":{"start":{"line":202,"column":2},"end":{"line":202,"column":38}},"61":{"start":{"line":204,"column":2},"end":{"line":204,"column":54}},"62":{"start":{"line":206,"column":2},"end":{"line":223,"column":5}},"63":{"start":{"line":212,"column":6},"end":{"line":212,"column":67}},"64":{"start":{"line":220,"column":6},"end":{"line":220,"column":98}}},"branchMap":{"1":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":6},"end":{"line":64,"column":6}},{"start":{"line":64,"column":6},"end":{"line":64,"column":6}}]},"2":{"line":75,"type":"cond-expr","locations":[{"start":{"line":75,"column":28},"end":{"line":75,"column":64}},{"start":{"line":75,"column":67},"end":{"line":75,"column":73}}]},"3":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":6},"end":{"line":84,"column":6}},{"start":{"line":84,"column":6},"end":{"line":84,"column":6}}]},"4":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":20},"end":{"line":98,"column":51}},{"start":{"line":98,"column":55},"end":{"line":98,"column":63}},{"start":{"line":98,"column":67},"end":{"line":98,"column":70}}]},"5":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":6},"end":{"line":112,"column":6}},{"start":{"line":112,"column":6},"end":{"line":112,"column":6}}]},"6":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":6},"end":{"line":118,"column":6}},{"start":{"line":118,"column":6},"end":{"line":118,"column":6}}]},"7":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":6},"end":{"line":144,"column":6}},{"start":{"line":144,"column":6},"end":{"line":144,"column":6}}]},"8":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":6},"end":{"line":150,"column":6}},{"start":{"line":150,"column":6},"end":{"line":150,"column":6}}]},"9":{"line":151,"type":"cond-expr","locations":[{"start":{"line":151,"column":59},"end":{"line":151,"column":63}},{"start":{"line":151,"column":66},"end":{"line":151,"column":86}}]},"10":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":6},"end":{"line":171,"column":6}},{"start":{"line":171,"column":6},"end":{"line":171,"column":6}}]},"11":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":6},"end":{"line":179,"column":6}},{"start":{"line":179,"column":6},"end":{"line":179,"column":6}}]},"12":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":6},"end":{"line":182,"column":6}},{"start":{"line":182,"column":6},"end":{"line":182,"column":6}}]},"13":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":13},"end":{"line":184,"column":13}},{"start":{"line":184,"column":13},"end":{"line":184,"column":13}}]},"14":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":6},"end":{"line":190,"column":6}},{"start":{"line":190,"column":6},"end":{"line":190,"column":6}}]},"15":{"line":190,"type":"binary-expr","locations":[{"start":{"line":190,"column":10},"end":{"line":190,"column":22}},{"start":{"line":190,"column":26},"end":{"line":190,"column":38}}]},"16":{"line":191,"type":"binary-expr","locations":[{"start":{"line":191,"column":43},"end":{"line":191,"column":55}},{"start":{"line":191,"column":59},"end":{"line":191,"column":84}}]},"17":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":6},"end":{"line":193,"column":6}},{"start":{"line":193,"column":6},"end":{"line":193,"column":6}}]},"18":{"line":193,"type":"binary-expr","locations":[{"start":{"line":193,"column":10},"end":{"line":193,"column":24}},{"start":{"line":193,"column":28},"end":{"line":193,"column":40}}]},"19":{"line":194,"type":"binary-expr","locations":[{"start":{"line":194,"column":45},"end":{"line":194,"column":59}},{"start":{"line":194,"column":63},"end":{"line":194,"column":75}}]},"20":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":13},"end":{"line":195,"column":13}},{"start":{"line":195,"column":13},"end":{"line":195,"column":13}}]},"21":{"line":220,"type":"cond-expr","locations":[{"start":{"line":220,"column":29},"end":{"line":220,"column":60}},{"start":{"line":220,"column":63},"end":{"line":220,"column":97}}]}},"code":["var fs = require('fs');","var d = require('describe-property');","var objectAssign = require('object-assign');","var getMimeType = require('../utils/getMimeType');","var filterProperties = require('../utils/filterProperties');","var stringifyCookie = require('../utils/stringifyCookie');","var saveToDisk = require('../utils/saveToDisk');","","module.exports = function (mach) {","  mach.bind = require('../utils/bindApp');","  mach.createConnection = require('../utils/createConnection');","  mach.serve = require('../utils/serveApp');","","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * True if the request uses XMLHttpRequest, false otherwise.","     */","    isXHR: d.gs(function () {","      return this.request.headers['X-Requested-With'] === 'XMLHttpRequest';","    }),","","    /**","     * A high-level method that returns a promise for an object that is the","     * union of parameters contained in the request body and query string.","     *","     * The paramTypes argument may be used to filter parameters. It functions","     * like a whitelist of acceptable parameters and increases the security of","     * your app by not returning any parameters that you do not specify.","     *","     *   // This function parses a list of comma-separated values in","     *   // a request parameter into an array.","     *   function parseList(value) {","     *     return value.split(',');","     *   }","     *","     *   function app(conn) {","     *     return conn.getParams({","     *       name: String,","     *       age: Number,","     *       hobbies: parseList","     *     }).then(function (params) {","     *       // params.name will be a string, params.age a number, and","     *       // params.hobbies an array if they were provided in the","     *       // request. params won't contain any other properties.","     *     });","     *   }","     *","     * Of course, paramTypes may be omitted entirely to get a hash of all parameters.","     * ","     * The maxLength argument is passed directly to the request's parseContent method.","     *","     *   var maxUploadLimit = Math.pow(2, 20); // 1 mb","     *","     *   function app(conn) {","     *     return conn.getParams(maxUploadLimit).then(function (params) {","     *       // params is the union of query and request content params","     *     });","     *   }","     *","     * Note: Content parameters take precedence over query parameters with the same name.","     */","    getParams: d(function (paramTypes, maxLength) {","      if (typeof paramTypes !== 'object') {","        maxLength = paramTypes;","        paramTypes = null;","      }","","      var request = this.request;","      var queryParams = objectAssign({}, this.query);","","      return request.parseContent(maxLength).then(function (contentParams) {","        // Content params take precedence over query params.","        var params = objectAssign(queryParams, contentParams);","        return paramTypes ? filterProperties(params, paramTypes) : params;","      });","    }),","","    /**","     * Redirects the client to the given location. If status is not","     * given, it defaults to 302 Found.","     */","    redirect: d(function (status, location) {","      if (typeof status !== 'number') {","        location = status;","        status = 302;","      }","","      this.status = status;","      this.response.headers['Location'] = location;","    }),","","    /**","     * Redirects the client back to the URL they just came from, or","     * to the given location if it isn't known.","     */","    back: d(function (location) {","      this.redirect(this.request.headers['Referer'] || location || '/');","    }),","","    /**","     * A quick way to write the status and/or content to the response.","     *","     * Examples:","     *","     *   conn.send(404);","     *   conn.send(404, 'Not Found');","     *   conn.send('Hello world');","     *   conn.send(fs.createReadStream('welcome.txt'));","     */","    send: d(function (status, content) {","      if (typeof status === 'number') {","        this.status = status;","      } else {","        content = status;","      }","","      if (content != null)","        this.response.content = content;","    }),","","    /**","     * Sends the given text in a text/plain response.","     */","    text: d(function (status, text) {","      this.response.contentType = 'text/plain';","      this.send(status, text);","    }),","","    /**","     * Sends the given HTML in a text/html response.","     */","    html: d(function (status, html) {","      this.response.contentType = 'text/html';","      this.send(status, html);","    }),","","    /**","     * Sends the given JSON in an application/json response.","     */","    json: d(function (status, json) {","      this.response.contentType = 'application/json';","","      if (typeof status === 'number') {","        this.status = status;","      } else {","        json = status;","      }","","      if (json != null)","        this.response.content = typeof json === 'string' ? json : JSON.stringify(json);","    }),","","    /**","     * Sends a file to the client with the given options. The following","     * options are available:","     *","     * - content/path   The raw file content as a string, Buffer, stream, or","     *                  path to a file on disk","     * - type           The Content-Type of the file. Defaults to a guess based","     *                  on the file extension when a file path is given","     * - length/size    The Content-Length of the file, if it's known. Defaults","     *                  to the size of the file when a file path is given","     *","     * Examples:","     *","     *   response.file('path/to/file.txt');","     *   response.file(200, 'path/to/file.txt');","     */","    file: d(function (status, options) {","      if (typeof status === 'number') {","        this.status = status;","      } else {","        options = status;","      }","","      var response = this.response;","","      if (typeof options === 'string')","        options = { path: options };","","      if (options.content) {","        response.content = options.content;","      } else if (typeof options.path === 'string') {","        response.content = fs.createReadStream(options.path);","      } else {","        throw new Error('Missing file content/path');","      }","","      if (options.type || options.path)","        response.headers['Content-Type'] = options.type || getMimeType(options.path);","","      if (options.length || options.size) {","        response.headers['Content-Length'] = options.length || options.size;","      } else if (typeof options.path === 'string') {","        response.headers['Content-Length'] = fs.statSync(options.path).size;","      }","    })","","  });","","  mach.extend(require('./multipart'));","","  var _handlePart = mach.Message.prototype.handlePart;","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * Sets a cookie with the given name and options.","     */","    setCookie: d(function (name, options) {","      this.addHeader('Set-Cookie', stringifyCookie(name, options));","    }),","","    /**","     * Override the multipart extension's Message#handlePart to enable","     * streaming file uploads to disk when parsing multipart messages.","     */","    handlePart: d(function (part) {","      return part.filename ? saveToDisk(part, 'MachUpload-') : _handlePart.apply(this, arguments);","    })","","  });","};",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":1,"11":1,"12":1,"14":1,"20":0,"64":0,"65":0,"66":0,"69":0,"70":0,"72":0,"74":0,"75":0,"84":0,"85":0,"86":0,"89":0,"90":0,"98":0,"112":0,"113":0,"115":0,"118":0,"119":0,"126":0,"127":0,"134":0,"135":0,"142":0,"144":0,"145":0,"147":0,"150":0,"151":0,"171":0,"172":0,"174":0,"177":0,"179":0,"180":0,"182":0,"183":0,"184":0,"185":0,"187":0,"190":0,"191":0,"193":0,"194":0,"195":0,"196":0,"202":1,"204":1,"206":1,"212":0,"220":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/getMimeType.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/getMimeType.js","s":{"1":1,"2":1,"3":1,"4":75,"5":103,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1},"b":{"1":[0,0,0,0]},"f":{"1":75,"2":103,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":31},"end":{"line":4,"column":47}}},"2":{"name":"(anonymous_2)","line":5,"loc":{"start":{"line":5,"column":26},"end":{"line":5,"column":41}}},"3":{"name":"getMimeType","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":40}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":40}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":18}},"3":{"start":{"line":4,"column":0},"end":{"line":8,"column":3}},"4":{"start":{"line":5,"column":2},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":25}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":46}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}},"8":{"start":{"line":13,"column":0},"end":{"line":16,"column":1}},"9":{"start":{"line":14,"column":2},"end":{"line":14,"column":38}},"10":{"start":{"line":15,"column":2},"end":{"line":15,"column":70}},"11":{"start":{"line":18,"column":0},"end":{"line":18,"column":29}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":10},"end":{"line":15,"column":15}},{"start":{"line":15,"column":19},"end":{"line":15,"column":37}},{"start":{"line":15,"column":42},"end":{"line":15,"column":53}},{"start":{"line":15,"column":57},"end":{"line":15,"column":69}}]}},"code":["var MimeTypes = require('../MimeTypes');","var ExtTypes = {};","","Object.keys(MimeTypes).forEach(function (type) {","  MimeTypes[type].forEach(function (ext) {","    ExtTypes[ext] = type;","  });","});","","var DEFAULT_TYPE = 'application/octet-stream';","var EXT_MATCHER = /\\.(\\w+)$/;","","function getMimeType(file, defaultType) {","  var match = file.match(EXT_MATCHER);","  return (match && ExtTypes[match[1]]) || defaultType || DEFAULT_TYPE;","}","","module.exports = getMimeType;",""],"l":{"1":1,"2":1,"4":1,"5":75,"6":103,"10":1,"11":1,"13":1,"14":0,"15":0,"18":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/MimeTypes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/MimeTypes.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":87,"column":2}}},"branchMap":{},"code":["/**"," * A map of MIME types to file extensions that correspond to that type."," */","module.exports = {","  \"text/html\"                           : [ \"html\", \"htm\", \"shtml\" ],","  \"text/css\"                            : [ \"css\" ],","  \"text/xml\"                            : [ \"xml\" ],","  \"image/gif\"                           : [ \"gif\" ],","  \"image/jpeg\"                          : [ \"jpeg\", \"jpg\" ],","  \"application/javascript\"              : [ \"js\" ],","  \"application/atom+xml\"                : [ \"atom\" ],","  \"application/rss+xml\"                 : [ \"rss\" ],","","  \"text/mathml\"                         : [ \"mml\" ],","  \"text/plain\"                          : [ \"txt\" ],","  \"text/vnd.sun.j2me.app-descriptor\"    : [ \"jad\" ],","  \"text/vnd.wap.wml\"                    : [ \"wml\" ],","  \"text/x-component\"                    : [ \"htc\" ],","","  \"image/png\"                           : [ \"png\" ],","  \"image/tiff\"                          : [ \"tif\", \"tiff\" ],","  \"image/vnd.wap.wbmp\"                  : [ \"wbmp\" ],","  \"image/x-icon\"                        : [ \"ico\" ],","  \"image/x-jng\"                         : [ \"jng\" ],","  \"image/x-ms-bmp\"                      : [ \"bmp\" ],","  \"image/svg+xml\"                       : [ \"svg\", \"svgz\" ],","  \"image/webp\"                          : [ \"webp\" ],","","  \"application/font-woff\"               : [ \"woff\" ],","  \"application/java-archive\"            : [ \"jar\", \"war\", \"ear\" ],","  \"application/json\"                    : [ \"json\" ],","  \"application/mac-binhex40\"            : [ \"hqx\" ],","  \"application/msword\"                  : [ \"doc\" ],","  \"application/pdf\"                     : [ \"pdf\" ],","  \"application/postscript\"              : [ \"ps\", \"eps\", \"ai\" ],","  \"application/rtf\"                     : [ \"rtf\" ],","  \"application/vnd.apple.mpegurl\"       : [ \"m3u8\" ],","  \"application/vnd.ms-excel\"            : [ \"xls\" ],","  \"application/vnd.ms-fontobject\"       : [ \"eot\" ],","  \"application/vnd.ms-powerpoint\"       : [ \"ppt\" ],","  \"application/vnd.wap.wmlc\"            : [ \"wmlc\" ],","  \"application/vnd.google-earth.kml+xml\": [ \"kml\" ],","  \"application/vnd.google-earth.kmz\"    : [ \"kmz\" ],","  \"application/x-7z-compressed\"         : [ \"7z\" ],","  \"application/x-cocoa\"                 : [ \"cco\" ],","  \"application/x-java-archive-diff\"     : [ \"jardiff\" ],","  \"application/x-java-jnlp-file\"        : [ \"jnlp\" ],","  \"application/x-makeself\"              : [ \"run\" ],","  \"application/x-perl\"                  : [ \"pl\", \"pm\" ],","  \"application/x-pilot\"                 : [ \"prc\", \"pdb\" ],","  \"application/x-rar-compressed\"        : [ \"rar\" ],","  \"application/x-redhat-package-manager\": [ \"rpm\" ],","  \"application/x-sea\"                   : [ \"sea\" ],","  \"application/x-shockwave-flash\"       : [ \"swf\" ],","  \"application/x-stuffit\"               : [ \"sit\" ],","  \"application/x-tcl\"                   : [ \"tcl\", \"tk\" ],","  \"application/x-x509-ca-cert\"          : [ \"der\", \"pem\", \"crt\" ],","  \"application/x-xpinstall\"             : [ \"xpi\" ],","  \"application/xhtml+xml\"               : [ \"xhtml\" ],","  \"application/xspf+xml\"                : [ \"xspf\" ],","  \"application/zip\"                     : [ \"zip\" ],","","  \"application/octet-stream\"            : [ \"bin\", \"exe\", \"dll\", \"deb\", \"dmg\", \"iso\", \"img\", \"msi\", \"msp\", \"msm\" ],","","  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"  : [ \"docx\" ],","  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"        : [ \"xlsx\" ],","  \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": [ \"pptx\" ],","","  \"audio/midi\"                          : [ \"mid\", \"midi\", \"kar\" ],","  \"audio/mpeg\"                          : [ \"mp3\" ],","  \"audio/ogg\"                           : [ \"ogg\" ],","  \"audio/x-m4a\"                         : [ \"m4a\" ],","  \"audio/x-realaudio\"                   : [ \"ra\" ],","","  \"video/3gpp\"                          : [ \"3gpp\", \"3gp\" ],","  \"video/mp2t\"                          : [ \"ts\" ],","  \"video/mp4\"                           : [ \"mp4\" ],","  \"video/mpeg\"                          : [ \"mpeg\", \"mpg\" ],","  \"video/quicktime\"                     : [ \"mov\" ],","  \"video/webm\"                          : [ \"webm\" ],","  \"video/x-flv\"                         : [ \"flv\" ],","  \"video/x-m4v\"                         : [ \"m4v\" ],","  \"video/x-mng\"                         : [ \"mng\" ],","  \"video/x-ms-asf\"                      : [ \"asx\", \"asf\" ],","  \"video/x-ms-wmv\"                      : [ \"wmv\" ],","  \"video/x-msvideo\"                     : [ \"avi\" ]","};",""],"l":{"4":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/filterProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/filterProperties.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"filterProperties","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":21,"column":1}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":22}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":18}},"4":{"start":{"line":9,"column":2},"end":{"line":18,"column":3}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":35}},"6":{"start":{"line":12,"column":4},"end":{"line":17,"column":5}},"7":{"start":{"line":13,"column":6},"end":{"line":13,"column":37}},"8":{"start":{"line":15,"column":6},"end":{"line":16,"column":37}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"10":{"start":{"line":20,"column":2},"end":{"line":20,"column":20}},"11":{"start":{"line":23,"column":0},"end":{"line":23,"column":34}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":34}},{"start":{"line":12,"column":38},"end":{"line":12,"column":69}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":6}},{"start":{"line":15,"column":6},"end":{"line":15,"column":6}}]}},"code":["/**"," * Returns a shallow copy of the properties of the given object,"," * filtered by the functions in propertyTypes."," */","function filterProperties(object, propertyTypes) {","  var properties = {};","","  var type, value;","  for (var property in object) {","    type = propertyTypes[property];","","    if (typeof type === 'function' && object.hasOwnProperty(property)) {","      value = type(object[property]);","","      if (value !== undefined)","        properties[property] = value;","    }","  }","","  return properties;","}","","module.exports = filterProperties;",""],"l":{"5":1,"6":0,"8":0,"9":0,"10":0,"12":0,"13":0,"15":0,"16":0,"20":0,"23":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyCookie.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stringifyCookie.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stringifyCookie","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":36,"column":1}},"2":{"start":{"line":13,"column":2},"end":{"line":13,"column":26}},"3":{"start":{"line":15,"column":2},"end":{"line":16,"column":33}},"4":{"start":{"line":16,"column":4},"end":{"line":16,"column":33}},"5":{"start":{"line":18,"column":2},"end":{"line":18,"column":88}},"6":{"start":{"line":20,"column":2},"end":{"line":21,"column":43}},"7":{"start":{"line":21,"column":4},"end":{"line":21,"column":43}},"8":{"start":{"line":23,"column":2},"end":{"line":24,"column":39}},"9":{"start":{"line":24,"column":4},"end":{"line":24,"column":39}},"10":{"start":{"line":26,"column":2},"end":{"line":27,"column":113}},"11":{"start":{"line":27,"column":4},"end":{"line":27,"column":113}},"12":{"start":{"line":29,"column":2},"end":{"line":30,"column":25}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":25}},"14":{"start":{"line":32,"column":2},"end":{"line":33,"column":27}},"15":{"start":{"line":33,"column":4},"end":{"line":33,"column":27}},"16":{"start":{"line":35,"column":2},"end":{"line":35,"column":16}},"17":{"start":{"line":38,"column":0},"end":{"line":38,"column":33}}},"branchMap":{"1":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":12},"end":{"line":13,"column":19}},{"start":{"line":13,"column":23},"end":{"line":13,"column":25}}]},"2":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"3":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":80}},{"start":{"line":18,"column":84},"end":{"line":18,"column":86}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"5":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"6":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"7":{"line":27,"type":"cond-expr","locations":[{"start":{"line":27,"column":65},"end":{"line":27,"column":94}},{"start":{"line":27,"column":97},"end":{"line":27,"column":112}}]},"8":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":29,"column":2}},{"start":{"line":29,"column":2},"end":{"line":29,"column":2}}]},"9":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":2}},{"start":{"line":32,"column":2},"end":{"line":32,"column":2}}]},"10":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":6},"end":{"line":32,"column":22}},{"start":{"line":32,"column":26},"end":{"line":32,"column":42}}]}},"code":["/**"," * Creates a cookie string using the given options, which may be any of"," * the following:"," *"," * - value"," * - domain"," * - path"," * - expires"," * - secure"," * - httpOnly or HttpOnly"," */","function stringifyCookie(name, options) {","  options = options || {};","","  if (typeof options === 'string')","    options = { value: options };","","  var cookie = encodeURIComponent(name) + '=' + encodeURIComponent(options.value || '');","","  if (options.domain)","    cookie += '; domain=' + options.domain;","","  if (options.path)","    cookie += '; path=' + options.path;","","  if (options.expires)","    cookie += '; expires=' + (options.expires instanceof Date) ? options.expires.toUTCString() : options.expires;","","  if (options.secure)","    cookie += '; secure';","","  if (options.httpOnly || options.HttpOnly)","    cookie += '; HttpOnly';","","  return cookie;","}","","module.exports = stringifyCookie;",""],"l":{"12":1,"13":0,"15":0,"16":0,"18":0,"20":0,"21":0,"23":0,"24":0,"26":0,"27":0,"29":0,"30":0,"32":0,"33":0,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/saveToDisk.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/saveToDisk.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"saveToDisk","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":21},"end":{"line":7,"column":48}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":40}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":34}}},"5":{"name":"(anonymous_5)","line":21,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":55}},"5":{"start":{"line":6,"column":0},"end":{"line":36,"column":1}},"6":{"start":{"line":7,"column":2},"end":{"line":35,"column":5}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":34}},"8":{"start":{"line":9,"column":4},"end":{"line":9,"column":45}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":44}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":4},"end":{"line":13,"column":32}},"12":{"start":{"line":15,"column":4},"end":{"line":18,"column":7}},"13":{"start":{"line":16,"column":6},"end":{"line":16,"column":27}},"14":{"start":{"line":17,"column":6},"end":{"line":17,"column":26}},"15":{"start":{"line":20,"column":4},"end":{"line":31,"column":7}},"16":{"start":{"line":21,"column":6},"end":{"line":30,"column":9}},"17":{"start":{"line":22,"column":8},"end":{"line":29,"column":10}},"18":{"start":{"line":33,"column":4},"end":{"line":34,"column":23}},"19":{"start":{"line":34,"column":6},"end":{"line":34,"column":23}},"20":{"start":{"line":38,"column":0},"end":{"line":38,"column":28}}},"branchMap":{"1":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]}},"code":["var fs = require('fs');","var File = require('./File');","var Promise = require('./Promise');","var makeTemporaryPath = require('./makeTemporaryPath');","","function saveToDisk(message, filePrefix) {","  return new Promise(function (resolve, reject) {","    var content = message.content;","    var path = makeTemporaryPath(filePrefix);","    var stream = fs.createWriteStream(path);","    var size = 0;","","    content.on('error', reject);","","    content.on('data', function (chunk) {","      size += chunk.length;","      stream.write(chunk);","    });","","    content.on('end', function () {","      stream.end(function () {","        resolve(","          new File({","            path: path,","            name: message.filename,","            type: message.mediaType,","            size: size","          })","        );","      });","    });","","    if (typeof content.resume === 'function')","      content.resume();","  });","}","","module.exports = saveToDisk;",""],"l":{"1":1,"2":1,"3":1,"4":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"13":0,"15":0,"16":0,"17":0,"20":0,"21":0,"22":0,"33":0,"34":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/File.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/File.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"File","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":26}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":6,"column":1}},"2":{"start":{"line":2,"column":2},"end":{"line":2,"column":30}},"3":{"start":{"line":3,"column":2},"end":{"line":3,"column":30}},"4":{"start":{"line":4,"column":2},"end":{"line":4,"column":30}},"5":{"start":{"line":5,"column":2},"end":{"line":5,"column":30}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}}},"branchMap":{},"code":["function File(properties) {","  this.path = properties.path;","  this.name = properties.name;","  this.type = properties.type;","  this.size = properties.size;","}","","module.exports = File;",""],"l":{"1":1,"2":0,"3":0,"4":0,"5":0,"8":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeTemporaryPath.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeTemporaryPath.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"makeTemporaryPath","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"3":{"start":{"line":4,"column":0},"end":{"line":13,"column":1}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":24}},"5":{"start":{"line":7,"column":2},"end":{"line":7,"column":62}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":23}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":65}},"8":{"start":{"line":10,"column":2},"end":{"line":10,"column":70}},"9":{"start":{"line":12,"column":2},"end":{"line":12,"column":34}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":35}}},"branchMap":{"1":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":17}},{"start":{"line":5,"column":21},"end":{"line":5,"column":23}}]}},"code":["var path = require('path');","var TMP_DIR = require('os').tmpDir();","","function makeTemporaryPath(prefix) {","  prefix = prefix || '';","","  var random = (Math.random() * 0x100000000 + 1).toString(36);","  var now = new Date();","  var date = '' + now.getYear() + now.getMonth() + now.getDate();","  var name = [ prefix, date, '-', process.pid, '-', random ].join('');","","  return path.join(TMP_DIR, name);","}","","module.exports = makeTemporaryPath;",""],"l":{"1":1,"2":1,"4":1,"5":0,"7":0,"8":0,"9":0,"10":0,"12":0,"15":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/bindApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/bindApp.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"bindApp","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":61}},"2":{"start":{"line":8,"column":0},"end":{"line":12,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":49}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":43}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":24}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}}},"branchMap":{},"code":["var createRequestHandler = require('./createRequestHandler');","","/**"," * Binds the given app to the \"request\" event of the given node HTTP server"," * so that it is called whenever the server receives a new request. Returns"," * the request handler function."," */","function bindApp(app, nodeServer) {","  var requestHandler = createRequestHandler(app);","  nodeServer.on('request', requestHandler);","  return requestHandler;","}","","module.exports = bindApp;",""],"l":{"1":1,"8":1,"9":0,"10":0,"11":0,"14":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createRequestHandler.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createRequestHandler.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"createRequestHandler","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":35}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":9},"end":{"line":21,"column":46}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":24},"end":{"line":24,"column":36}}},"4":{"name":"(anonymous_4)","line":46,"loc":{"start":{"line":46,"column":7},"end":{"line":46,"column":24}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":53}},"2":{"start":{"line":7,"column":0},"end":{"line":12,"column":2}},"3":{"start":{"line":20,"column":0},"end":{"line":52,"column":1}},"4":{"start":{"line":21,"column":2},"end":{"line":51,"column":4}},"5":{"start":{"line":22,"column":4},"end":{"line":22,"column":45}},"6":{"start":{"line":24,"column":4},"end":{"line":50,"column":7}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":42}},"8":{"start":{"line":26,"column":6},"end":{"line":26,"column":75}},"9":{"start":{"line":27,"column":6},"end":{"line":27,"column":42}},"10":{"start":{"line":28,"column":6},"end":{"line":28,"column":42}},"11":{"start":{"line":30,"column":6},"end":{"line":31,"column":38}},"12":{"start":{"line":31,"column":8},"end":{"line":31,"column":38}},"13":{"start":{"line":33,"column":6},"end":{"line":34,"column":51}},"14":{"start":{"line":34,"column":8},"end":{"line":34,"column":51}},"15":{"start":{"line":36,"column":6},"end":{"line":36,"column":51}},"16":{"start":{"line":38,"column":6},"end":{"line":45,"column":7}},"17":{"start":{"line":39,"column":8},"end":{"line":39,"column":27}},"18":{"start":{"line":41,"column":8},"end":{"line":42,"column":28}},"19":{"start":{"line":42,"column":10},"end":{"line":42,"column":28}},"20":{"start":{"line":44,"column":8},"end":{"line":44,"column":35}},"21":{"start":{"line":47,"column":6},"end":{"line":47,"column":26}},"22":{"start":{"line":48,"column":6},"end":{"line":48,"column":68}},"23":{"start":{"line":49,"column":6},"end":{"line":49,"column":48}},"24":{"start":{"line":54,"column":0},"end":{"line":54,"column":38}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":26}},{"start":{"line":26,"column":30},"end":{"line":26,"column":74}}]},"2":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":30,"column":6}},{"start":{"line":30,"column":6},"end":{"line":30,"column":6}}]},"3":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":10},"end":{"line":30,"column":17}},{"start":{"line":30,"column":21},"end":{"line":30,"column":28}}]},"4":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":6},"end":{"line":33,"column":6}},{"start":{"line":33,"column":6},"end":{"line":33,"column":6}}]},"5":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":38,"column":6}},{"start":{"line":38,"column":6},"end":{"line":38,"column":6}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]}},"code":["/* jshint -W058 */","var createConnection = require('./createConnection');","","/**"," * HTTP status codes that don't have entities."," */","var STATUS_WITHOUT_CONTENT = {","  100: true,","  101: true,","  204: true,","  304: true","};","","/**"," * Binds the given app to the \"request\" event of the given node HTTP server"," * so that it is called whenever the server receives a new request."," *"," * Returns the request handler function."," */","function createRequestHandler(app) {","  return function (nodeRequest, nodeResponse) {","    var conn = createConnection(nodeRequest);","","    conn.call(app).then(function () {","      var isHead = conn.method === 'HEAD';","      var isEmpty = isHead || STATUS_WITHOUT_CONTENT[conn.status] === true;","      var headers = conn.response.headers;","      var content = conn.response.content;","","      if (isEmpty && !isHead)","        headers['Content-Length'] = 0;","","      if (!headers['Date'])","        headers['Date'] = (new Date).toUTCString();","","      nodeResponse.writeHead(conn.status, headers);","","      if (isEmpty) {","        nodeResponse.end();","","        if (typeof content.destroy === 'function')","          content.destroy();","      } else {","        content.pipe(nodeResponse);","      }","    }, function (error) {","      conn.onError(error);","      nodeResponse.writeHead(500, { 'Content-Type': 'text/plain' });","      nodeResponse.end('Internal Server Error');","    });","  };","}","","module.exports = createRequestHandler;",""],"l":{"2":1,"7":1,"20":1,"21":0,"22":0,"24":0,"25":0,"26":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"36":0,"38":0,"39":0,"41":0,"42":0,"44":0,"47":0,"48":0,"49":0,"54":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createConnection.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createConnection.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"ensureTrailingColon","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":37}}},"2":{"name":"createLocation","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}}},"3":{"name":"createConnection","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":39}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":83,"column":26},"end":{"line":83,"column":38}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":42}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":38}},"3":{"start":{"line":7,"column":0},"end":{"line":10,"column":2}},"4":{"start":{"line":12,"column":0},"end":{"line":14,"column":1}},"5":{"start":{"line":13,"column":2},"end":{"line":13,"column":67}},"6":{"start":{"line":19,"column":0},"end":{"line":65,"column":1}},"7":{"start":{"line":20,"column":2},"end":{"line":20,"column":36}},"8":{"start":{"line":22,"column":2},"end":{"line":22,"column":15}},"9":{"start":{"line":23,"column":2},"end":{"line":33,"column":3}},"10":{"start":{"line":24,"column":4},"end":{"line":24,"column":24}},"11":{"start":{"line":25,"column":9},"end":{"line":33,"column":3}},"12":{"start":{"line":26,"column":4},"end":{"line":26,"column":60}},"13":{"start":{"line":27,"column":9},"end":{"line":33,"column":3}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":82}},"15":{"start":{"line":29,"column":9},"end":{"line":33,"column":3}},"16":{"start":{"line":30,"column":4},"end":{"line":30,"column":79}},"17":{"start":{"line":32,"column":4},"end":{"line":32,"column":23}},"18":{"start":{"line":35,"column":2},"end":{"line":35,"column":11}},"19":{"start":{"line":36,"column":2},"end":{"line":43,"column":3}},"20":{"start":{"line":37,"column":4},"end":{"line":37,"column":58}},"21":{"start":{"line":38,"column":4},"end":{"line":38,"column":35}},"22":{"start":{"line":39,"column":9},"end":{"line":43,"column":3}},"23":{"start":{"line":40,"column":4},"end":{"line":40,"column":27}},"24":{"start":{"line":41,"column":9},"end":{"line":43,"column":3}},"25":{"start":{"line":42,"column":4},"end":{"line":42,"column":35}},"26":{"start":{"line":45,"column":2},"end":{"line":45,"column":37}},"27":{"start":{"line":46,"column":2},"end":{"line":46,"column":30}},"28":{"start":{"line":47,"column":2},"end":{"line":47,"column":57}},"29":{"start":{"line":49,"column":2},"end":{"line":55,"column":3}},"30":{"start":{"line":50,"column":4},"end":{"line":54,"column":5}},"31":{"start":{"line":51,"column":6},"end":{"line":51,"column":38}},"32":{"start":{"line":52,"column":11},"end":{"line":54,"column":5}},"33":{"start":{"line":53,"column":6},"end":{"line":53,"column":72}},"34":{"start":{"line":57,"column":2},"end":{"line":57,"column":29}},"35":{"start":{"line":59,"column":2},"end":{"line":64,"column":5}},"36":{"start":{"line":72,"column":0},"end":{"line":88,"column":1}},"37":{"start":{"line":73,"column":2},"end":{"line":81,"column":5}},"38":{"start":{"line":83,"column":2},"end":{"line":85,"column":5}},"39":{"start":{"line":84,"column":4},"end":{"line":84,"column":19}},"40":{"start":{"line":87,"column":2},"end":{"line":87,"column":14}},"41":{"start":{"line":90,"column":0},"end":{"line":90,"column":34}}},"branchMap":{"1":{"line":13,"type":"cond-expr","locations":[{"start":{"line":13,"column":45},"end":{"line":13,"column":51}},{"start":{"line":13,"column":54},"end":{"line":13,"column":66}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":32}},{"start":{"line":23,"column":36},"end":{"line":23,"column":71}},{"start":{"line":23,"column":75},"end":{"line":23,"column":109}}]},"4":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":9},"end":{"line":25,"column":9}},{"start":{"line":25,"column":9},"end":{"line":25,"column":9}}]},"5":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":9},"end":{"line":27,"column":9}},{"start":{"line":27,"column":9},"end":{"line":27,"column":9}}]},"6":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":9},"end":{"line":29,"column":9}},{"start":{"line":29,"column":9},"end":{"line":29,"column":9}}]},"7":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":36,"column":2}},{"start":{"line":36,"column":2},"end":{"line":36,"column":2}}]},"8":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":9},"end":{"line":39,"column":9}},{"start":{"line":39,"column":9},"end":{"line":39,"column":9}}]},"9":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":9},"end":{"line":41,"column":9}},{"start":{"line":41,"column":9},"end":{"line":41,"column":9}}]},"10":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":13},"end":{"line":47,"column":25}},{"start":{"line":47,"column":29},"end":{"line":47,"column":56}}]},"11":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":2},"end":{"line":49,"column":2}},{"start":{"line":49,"column":2},"end":{"line":49,"column":2}}]},"12":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"13":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":11},"end":{"line":52,"column":11}},{"start":{"line":52,"column":11},"end":{"line":52,"column":11}}]}},"code":["var Connection = require('../Connection');","var Location = require('../Location');","","/**"," * Standard ports for HTTP protocols."," */","var STANDARD_PORTS = {","  'http:': '80',","  'https:': '443'","};","","function ensureTrailingColon(string) {","  return string[string.length - 1] === ':' ? string : string + ':';","}","","/**"," * Creates a new Location object that is reverse-proxy aware."," */","function createLocation(nodeRequest) {","  var headers = nodeRequest.headers;","","  var protocol;","  if (process.env.HTTPS === 'on' || headers['x-forwarded-ssl'] === 'on' || headers['font-end-https'] === 'on') {","    protocol = 'https:';","  } else if (headers['x-url-scheme']) {","    protocol = ensureTrailingColon(headers['x-url-scheme']);","  } else if (headers['x-forwarded-protocol']) {","    protocol = ensureTrailingColon(headers['x-forwarded-protocol'].split(',')[0]);","  } else if (headers['x-forwarded-proto']) {","    protocol = ensureTrailingColon(headers['x-forwarded-proto'].split(',')[0]);","  } else {","    protocol = 'http:';","  }","","  var host;","  if (headers['x-forwarded-host']) {","    var hosts = headers['x-forwarded-host'].split(/,\\s?/);","    host = hosts[hosts.length - 1];","  } else if (headers['host']) {","    host = headers['host'];","  } else if (process.env.SERVER_NAME) {","    host = process.env.SERVER_NAME;","  }","","  var hostParts = host.split(':', 2);","  var hostname = hostParts[0];","  var port = hostParts[1] || headers['x-forwarded-port'];","","  if (port == null) {","    if (headers['x-forwarded-host']) {","      port = STANDARD_PORTS[protocol];","    } else if (headers['x-forwarded-proto']) {","      port = STANDARD_PORTS[headers['x-forwarded-proto'].split(',')[0]];","    }","  }","","  var path = nodeRequest.url;","","  return new Location({","    protocol: protocol,","    hostname: hostname,","    port: port,","    path: path","  });","}","","/**"," * Creates a mach.Connection from the given node.js HTTP request and"," * server (optional) objects. This is a low-level method that is not"," * generally needed by application-level code."," */","function createConnection(nodeRequest) {","  var conn = new Connection({","    version: nodeRequest.httpVersion,","    method: nodeRequest.method,","    location: createLocation(nodeRequest),","    headers: nodeRequest.headers,","    content: nodeRequest,","    remoteHost: nodeRequest.connection.remoteAddress,","    remotePort: nodeRequest.connection.remotePort","  });","","  nodeRequest.on('close', function () {","    conn.onClose();","  });","","  return conn;","}","","module.exports = createConnection;",""],"l":{"1":1,"2":1,"7":1,"12":1,"13":0,"19":1,"20":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"32":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"45":0,"46":0,"47":0,"49":0,"50":0,"51":0,"52":0,"53":0,"57":0,"59":0,"72":1,"73":0,"83":0,"84":0,"87":0,"90":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/serveApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/serveApp.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"serveApp","line":35,"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":32}}},"2":{"name":"shutdown","line":51,"loc":{"start":{"line":51,"column":2},"end":{"line":51,"column":22}}},"3":{"name":"(anonymous_3)","line":57,"loc":{"start":{"line":57,"column":27},"end":{"line":57,"column":39}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":31},"end":{"line":70,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"5":{"start":{"line":35,"column":0},"end":{"line":102,"column":1}},"6":{"start":{"line":36,"column":2},"end":{"line":36,"column":26}},"7":{"start":{"line":38,"column":2},"end":{"line":42,"column":3}},"8":{"start":{"line":39,"column":4},"end":{"line":39,"column":32}},"9":{"start":{"line":40,"column":9},"end":{"line":42,"column":3}},"10":{"start":{"line":41,"column":4},"end":{"line":41,"column":34}},"11":{"start":{"line":44,"column":2},"end":{"line":44,"column":17}},"12":{"start":{"line":45,"column":2},"end":{"line":49,"column":3}},"13":{"start":{"line":46,"column":4},"end":{"line":46,"column":78}},"14":{"start":{"line":48,"column":4},"end":{"line":48,"column":37}},"15":{"start":{"line":51,"column":2},"end":{"line":68,"column":3}},"16":{"start":{"line":52,"column":4},"end":{"line":53,"column":41}},"17":{"start":{"line":53,"column":6},"end":{"line":53,"column":41}},"18":{"start":{"line":57,"column":4},"end":{"line":62,"column":31}},"19":{"start":{"line":58,"column":6},"end":{"line":59,"column":34}},"20":{"start":{"line":59,"column":8},"end":{"line":59,"column":34}},"21":{"start":{"line":61,"column":6},"end":{"line":61,"column":22}},"22":{"start":{"line":65,"column":4},"end":{"line":65,"column":18}},"23":{"start":{"line":67,"column":4},"end":{"line":67,"column":23}},"24":{"start":{"line":70,"column":2},"end":{"line":93,"column":5}},"25":{"start":{"line":71,"column":4},"end":{"line":71,"column":29}},"26":{"start":{"line":73,"column":4},"end":{"line":73,"column":37}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":38}},"28":{"start":{"line":76,"column":4},"end":{"line":92,"column":5}},"29":{"start":{"line":77,"column":6},"end":{"line":77,"column":41}},"30":{"start":{"line":78,"column":6},"end":{"line":78,"column":89}},"31":{"start":{"line":80,"column":6},"end":{"line":87,"column":7}},"32":{"start":{"line":81,"column":8},"end":{"line":81,"column":48}},"33":{"start":{"line":83,"column":8},"end":{"line":83,"column":56}},"34":{"start":{"line":85,"column":8},"end":{"line":86,"column":40}},"35":{"start":{"line":86,"column":10},"end":{"line":86,"column":40}},"36":{"start":{"line":89,"column":6},"end":{"line":89,"column":40}},"37":{"start":{"line":91,"column":6},"end":{"line":91,"column":27}},"38":{"start":{"line":95,"column":2},"end":{"line":99,"column":3}},"39":{"start":{"line":96,"column":4},"end":{"line":96,"column":38}},"40":{"start":{"line":98,"column":4},"end":{"line":98,"column":66}},"41":{"start":{"line":101,"column":2},"end":{"line":101,"column":20}},"42":{"start":{"line":104,"column":0},"end":{"line":104,"column":26}}},"branchMap":{"1":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":19}},{"start":{"line":36,"column":23},"end":{"line":36,"column":25}}]},"2":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":9},"end":{"line":40,"column":9}},{"start":{"line":40,"column":9},"end":{"line":40,"column":9}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":45,"column":2}},{"start":{"line":45,"column":2},"end":{"line":45,"column":2}}]},"5":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":6},"end":{"line":45,"column":17}},{"start":{"line":45,"column":21},"end":{"line":45,"column":33}}]},"6":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"7":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":6},"end":{"line":58,"column":6}},{"start":{"line":58,"column":6},"end":{"line":58,"column":6}}]},"8":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":7},"end":{"line":62,"column":22}},{"start":{"line":62,"column":26},"end":{"line":62,"column":29}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"10":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"11":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"12":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":2},"end":{"line":95,"column":2}},{"start":{"line":95,"column":2},"end":{"line":95,"column":2}}]},"13":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":22},"end":{"line":98,"column":34}},{"start":{"line":98,"column":38},"end":{"line":98,"column":50}}]}},"code":["var http = require('http');","var https = require('https');","var bindApp = require('./bindApp');","","/**"," * The default port that node servers bind to."," */","var DEFAULT_PORT = 5000;","","/**"," * Creates and starts a node HTTP server that serves the given app."," *"," * Options may be any of the following:"," *"," * - host     The host name to accept connections on. Defaults to INADDR_ANY"," * - port     The port to listen on. Defaults to 5000"," * - socket   Unix socket file to listen on (trumps host/port)"," * - quiet    Set true to prevent the server from writing startup/shutdown"," *            messages to the console. Defaults to false"," * - timeout  The timeout to use when gracefully shutting down servers when"," *            SIGINT or SIGTERM are received. If a server doesn't close within"," *            this time (probably because it has open persistent connections)"," *            it is forecefully stopped when the process exits. Defaults to 100,"," *            meaning that servers forcefully shutdown after 100ms"," * - key      Private key to use for SSL (HTTPS only)"," * - cert     Public X509 certificate to use (HTTPS only)"," *"," * Note: When setting the timeout, be careful not to exceed any hard timeouts"," * specified by your PaaS. For example, Heroku's dyno manager will not permit"," * a timeout longer than ten seconds. See"," * https://devcenter.heroku.com/articles/dynos#graceful-shutdown-with-sigterm"," *"," * Returns the node HTTP server instance."," */","function serveApp(app, options) {","  options = options || {};","","  if (typeof options === 'number') {","    options = { port: options };","  } else if (typeof options === 'string') {","    options = { socket: options };","  }","","  var nodeServer;","  if (options.key && options.cert) {","    nodeServer = https.createServer({ key: options.key, cert: options.cert });","  } else {","    nodeServer = http.createServer();","  }","","  function shutdown() {","    if (!options.quiet)","      console.log('>> Shutting down...');","","    // Force the process to exit if the server doesn't","    // close all connections within the given timeout.","    var timer = setTimeout(function () {","      if (!options.quiet)","        console.log('>> Exiting');","","      process.exit(0);","    }, options.timeout || 100);","","    // Don't let this timer keep the event loop running.","    timer.unref();","","    nodeServer.close();","  }","","  nodeServer.once('listening', function () {","    bindApp(app, nodeServer);","","    process.once('SIGINT', shutdown);","    process.once('SIGTERM', shutdown);","","    if (!options.quiet) {","      var address = nodeServer.address();","      var message = '>> mach web server started on node ' + process.versions.node + '\\n';","","      if (typeof address === 'string') {","        message += '>> Listening on ' + address;","      } else {","        message += '>> Listening on ' + address.address;","","        if (address.port)","          message += ':' + address.port;","      }","","      message += ', use CTRL+C to stop';","","      console.log(message);","    }","  });","","  if (options.socket) {","    nodeServer.listen(options.socket);","  } else {","    nodeServer.listen(options.port || DEFAULT_PORT, options.host);","  }","","  return nodeServer;","}","","module.exports = serveApp;",""],"l":{"1":1,"2":1,"3":1,"8":1,"35":1,"36":0,"38":0,"39":0,"40":0,"41":0,"44":0,"45":0,"46":0,"48":0,"51":1,"52":0,"53":0,"57":0,"58":0,"59":0,"61":0,"65":0,"67":0,"70":0,"71":0,"73":0,"74":0,"76":0,"77":0,"78":0,"80":0,"81":0,"83":0,"85":0,"86":0,"89":0,"91":0,"95":0,"96":0,"98":0,"101":0,"104":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/multipart.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/multipart.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":17},"end":{"line":7,"column":33}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":78}}},"3":{"name":"partHandler","line":9,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":31}}},"4":{"name":"(anonymous_4)","line":15,"loc":{"start":{"line":15,"column":42},"end":{"line":15,"column":61}}},"5":{"name":"(anonymous_5)","line":29,"loc":{"start":{"line":29,"column":28},"end":{"line":29,"column":40}}},"6":{"name":"(anonymous_6)","line":39,"loc":{"start":{"line":39,"column":15},"end":{"line":39,"column":27}}},"7":{"name":"(anonymous_7)","line":49,"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":31}}},"8":{"name":"(anonymous_8)","line":88,"loc":{"start":{"line":88,"column":18},"end":{"line":88,"column":34}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":56}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":72}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"5":{"start":{"line":7,"column":0},"end":{"line":93,"column":2}},"6":{"start":{"line":8,"column":2},"end":{"line":21,"column":4}},"7":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"8":{"start":{"line":10,"column":6},"end":{"line":10,"column":38}},"9":{"start":{"line":14,"column":4},"end":{"line":18,"column":5}},"10":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":88}},"12":{"start":{"line":20,"column":4},"end":{"line":20,"column":92}},"13":{"start":{"line":23,"column":2},"end":{"line":92,"column":5}},"14":{"start":{"line":30,"column":6},"end":{"line":30,"column":48}},"15":{"start":{"line":31,"column":6},"end":{"line":31,"column":108}},"16":{"start":{"line":40,"column":6},"end":{"line":40,"column":74}},"17":{"start":{"line":41,"column":6},"end":{"line":41,"column":126}},"18":{"start":{"line":50,"column":6},"end":{"line":50,"column":67}},"19":{"start":{"line":52,"column":6},"end":{"line":72,"column":7}},"20":{"start":{"line":54,"column":8},"end":{"line":54,"column":68}},"21":{"start":{"line":56,"column":8},"end":{"line":56,"column":21}},"22":{"start":{"line":57,"column":8},"end":{"line":65,"column":9}},"23":{"start":{"line":58,"column":10},"end":{"line":58,"column":71}},"24":{"start":{"line":61,"column":10},"end":{"line":61,"column":64}},"25":{"start":{"line":63,"column":10},"end":{"line":64,"column":52}},"26":{"start":{"line":64,"column":12},"end":{"line":64,"column":52}},"27":{"start":{"line":67,"column":8},"end":{"line":71,"column":9}},"28":{"start":{"line":70,"column":10},"end":{"line":70,"column":65}},"29":{"start":{"line":74,"column":6},"end":{"line":74,"column":18}},"30":{"start":{"line":89,"column":6},"end":{"line":89,"column":76}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]},"2":{"line":31,"type":"cond-expr","locations":[{"start":{"line":31,"column":79},"end":{"line":31,"column":99}},{"start":{"line":31,"column":103},"end":{"line":31,"column":107}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":14},"end":{"line":31,"column":25}},{"start":{"line":31,"column":30},"end":{"line":31,"column":73}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":79},"end":{"line":31,"column":87}},{"start":{"line":31,"column":91},"end":{"line":31,"column":99}}]},"5":{"line":41,"type":"cond-expr","locations":[{"start":{"line":41,"column":88},"end":{"line":41,"column":96}},{"start":{"line":41,"column":99},"end":{"line":41,"column":125}}]},"6":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":14},"end":{"line":41,"column":32}},{"start":{"line":41,"column":37},"end":{"line":41,"column":83}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":6},"end":{"line":52,"column":6}},{"start":{"line":52,"column":6},"end":{"line":52,"column":6}}]},"8":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":8},"end":{"line":57,"column":8}},{"start":{"line":57,"column":8},"end":{"line":57,"column":8}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":10},"end":{"line":63,"column":10}},{"start":{"line":63,"column":10},"end":{"line":63,"column":10}}]},"10":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]},"11":{"line":89,"type":"cond-expr","locations":[{"start":{"line":89,"column":29},"end":{"line":89,"column":49}},{"start":{"line":89,"column":52},"end":{"line":89,"column":75}}]}},"code":["var d = require('describe-property');","var parseContent = require('../multipart/parseContent');","","var BOUNDARY_MATCHER = /^multipart\\/.*boundary=(?:\"([^\"]+)\"|([^;]+))/im;","var NAME_MATCHER = /\\bname=\"([^\"]+)\"/i;","","module.exports = function (mach) {","  mach.Message.PARSERS['multipart/form-data'] = function (message, maxLength) {","    function partHandler(part) {","      return message.handlePart(part);","    }","","    // If the content has been buffered, use the buffer.","    if (message.isBuffered) {","      return message.bufferContent().then(function (content) {","        return parseContent(content, message.multipartBoundary, maxLength, partHandler);","      });","    }","","    return parseContent(message.content, message.multipartBoundary, maxLength, partHandler);","  };","","  Object.defineProperties(mach.Message.prototype, {","","    /**","     * The value that was used as the boundary for multipart content. This","     * is present only in multipart messages.","     */","    multipartBoundary: d.gs(function () {","      var contentType = this.contentType, match;","      return (contentType && (match = contentType.match(BOUNDARY_MATCHER))) ? (match[1] || match[2]) : null;","    }),","","    /**","     * The unique \"name\" or ID of this message, as given in its Content-Disposition","     * header. This is usually present only on messages that are part of a larger,","     * multipart message.","     */","    name: d.gs(function () {","      var contentDisposition = this.headers['Content-Disposition'], match;","      return (contentDisposition && (match = contentDisposition.match(NAME_MATCHER))) ? match[1] : this.headers['Content-ID'];","    }),","","    /**","     * The filename of this message, as given in its Content-Disposition header.","     * This is usually present only on messages that are part of a larger, multipart","     * message and that originate from a file upload.","     */","    filename: d.gs(function () {","      var contentDisposition = this.headers['Content-Disposition'];","","      if (contentDisposition) {","        // Match quoted filenames.","        var match = contentDisposition.match(/filename=\"([^;]*)\"/i);","","        var filename;","        if (match) {","          filename = decodeURIComponent(match[1].replace(/\\\\\"/g, '\"'));","        } else {","          // Match unquoted filenames.","          match = contentDisposition.match(/filename=([^;]+)/i);","","          if (match)","            filename = decodeURIComponent(match[1]);","        }","","        if (filename) {","          // Take the last part of the filename. This handles full Windows","          // paths given by IE (and possibly other dumb clients).","          return filename.substr(filename.lastIndexOf('\\\\') + 1);","        }","      }","","      return null;","    }),","","    /**","     * A low-level hook responsible for handling Message objects embedded as multipart","     * objects inside this message. It should return the value to use for the given","     * message in the parameters hash. By default parts that originate from file uploads","     * are buffered and all others are converted to strings.","     *","     * This should be overridden if you want to specify some kind of custom handling","     * for multipart data, such as streaming it directly to a network file storage.","     * For example, the server extension overrides this method to save uploaded files","     * to a temporary location on disk.","     */","    handlePart: d(function (part) {","      return part.filename ? part.bufferContent() : part.stringifyContent();","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"7":1,"8":1,"9":1,"10":0,"14":0,"15":0,"16":0,"20":0,"23":1,"30":0,"31":0,"40":0,"41":0,"50":0,"52":0,"54":0,"56":0,"57":0,"58":0,"61":0,"63":0,"64":0,"67":0,"70":0,"74":0,"89":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/parseContent.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/parseContent.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"defaultPartHandler","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":34}}},"2":{"name":"parseContent","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":65}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":21},"end":{"line":26,"column":48}}},"4":{"name":"(anonymous_4)","line":33,"loc":{"start":{"line":33,"column":38},"end":{"line":33,"column":54}}},"5":{"name":"(anonymous_5)","line":39,"loc":{"start":{"line":39,"column":23},"end":{"line":39,"column":40}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":34}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":39}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":72}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":62}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":42}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"6":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"7":{"start":{"line":8,"column":2},"end":{"line":8,"column":29}},"8":{"start":{"line":17,"column":0},"end":{"line":64,"column":1}},"9":{"start":{"line":18,"column":2},"end":{"line":21,"column":3}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"11":{"start":{"line":20,"column":4},"end":{"line":20,"column":21}},"12":{"start":{"line":23,"column":2},"end":{"line":23,"column":50}},"13":{"start":{"line":24,"column":2},"end":{"line":24,"column":36}},"14":{"start":{"line":26,"column":2},"end":{"line":63,"column":5}},"15":{"start":{"line":27,"column":4},"end":{"line":28,"column":36}},"16":{"start":{"line":28,"column":6},"end":{"line":28,"column":36}},"17":{"start":{"line":30,"column":4},"end":{"line":30,"column":19}},"18":{"start":{"line":31,"column":4},"end":{"line":31,"column":26}},"19":{"start":{"line":33,"column":4},"end":{"line":35,"column":7}},"20":{"start":{"line":34,"column":6},"end":{"line":34,"column":43}},"21":{"start":{"line":37,"column":4},"end":{"line":37,"column":32}},"22":{"start":{"line":39,"column":4},"end":{"line":51,"column":7}},"23":{"start":{"line":40,"column":6},"end":{"line":40,"column":32}},"24":{"start":{"line":41,"column":6},"end":{"line":41,"column":30}},"25":{"start":{"line":43,"column":6},"end":{"line":50,"column":7}},"26":{"start":{"line":44,"column":8},"end":{"line":44,"column":54}},"27":{"start":{"line":46,"column":8},"end":{"line":46,"column":49}},"28":{"start":{"line":48,"column":8},"end":{"line":49,"column":113}},"29":{"start":{"line":49,"column":10},"end":{"line":49,"column":113}},"30":{"start":{"line":53,"column":4},"end":{"line":60,"column":7}},"31":{"start":{"line":54,"column":6},"end":{"line":59,"column":7}},"32":{"start":{"line":55,"column":8},"end":{"line":55,"column":24}},"33":{"start":{"line":56,"column":8},"end":{"line":56,"column":42}},"34":{"start":{"line":58,"column":8},"end":{"line":58,"column":76}},"35":{"start":{"line":62,"column":4},"end":{"line":62,"column":21}},"36":{"start":{"line":66,"column":0},"end":{"line":66,"column":30}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":2}},{"start":{"line":18,"column":2},"end":{"line":18,"column":2}}]},"2":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":16},"end":{"line":23,"column":27}},{"start":{"line":23,"column":31},"end":{"line":23,"column":49}}]},"3":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":14},"end":{"line":24,"column":23}},{"start":{"line":24,"column":27},"end":{"line":24,"column":35}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"5":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":6}},{"start":{"line":43,"column":6},"end":{"line":43,"column":6}}]},"6":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":10},"end":{"line":43,"column":19}},{"start":{"line":43,"column":23},"end":{"line":43,"column":48}}]},"7":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]}},"code":["var Stream = require('bufferedstream');","var MaxLengthExceededError = require('../utils/MaxLengthExceededError');","var resolveProperties = require('../utils/resolveProperties');","var Promise = require('../utils/Promise');","var Parser = require('./Parser');","","function defaultPartHandler(part) {","  return part.parseContent();","}","","/**"," * Parses a multipart message and returns a promise for an object of"," * the parts it contains, keyed by the name of that part. The partHandler"," * argument is a function that should be used to resolve the value of"," * a part. It defaults to collecting all the content in a buffer."," */","function parseContent(content, boundary, maxLength, partHandler) {","  if (typeof maxLength === 'function') {","    partHandler = maxLength;","    maxLength = null;","  }","","  partHandler = partHandler || defaultPartHandler;","  maxLength = maxLength || Infinity;","","  return new Promise(function (resolve, reject) {","    if (!(content instanceof Stream))","      content = new Stream(content);","","    var parts = {};","    var contentLength = 0;","","    var parser = new Parser(boundary, function (part) {","      parts[part.name] = partHandler(part);","    });","","    content.on('error', reject);","","    content.on('data', function (chunk) {","      var length = chunk.length;","      contentLength += length;","","      if (maxLength && contentLength > maxLength) {","        reject(new MaxLengthExceededError(maxLength));","      } else {","        var parsedLength = parser.execute(chunk);","","        if (parsedLength !== length)","          reject(new Error('Error parsing multipart body: ' + parsedLength + ' of ' + length + ' bytes parsed'));","      }","    });","","    content.on('end', function () {","      try {","        parser.finish();","        resolve(resolveProperties(parts));","      } catch (error) {","        reject(new Error('Error parsing multipart body: ' + error.message));","      }","    });","","    content.resume();","  });","}","","module.exports = parseContent;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"7":1,"8":0,"17":1,"18":0,"19":0,"20":0,"23":0,"24":0,"26":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"37":0,"39":0,"40":0,"41":0,"43":0,"44":0,"46":0,"48":0,"49":0,"53":0,"54":0,"55":0,"56":0,"58":0,"62":0,"66":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/resolveProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/resolveProperties.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"resolveProperties","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":28}}},"3":{"name":"(anonymous_3)","line":10,"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":27}}},"4":{"name":"(anonymous_4)","line":11,"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":39}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":35}},"2":{"start":{"line":3,"column":0},"end":{"line":17,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":33}},"4":{"start":{"line":6,"column":2},"end":{"line":16,"column":5}},"5":{"start":{"line":8,"column":6},"end":{"line":8,"column":25}},"6":{"start":{"line":11,"column":4},"end":{"line":13,"column":7}},"7":{"start":{"line":12,"column":6},"end":{"line":12,"column":34}},"8":{"start":{"line":15,"column":4},"end":{"line":15,"column":18}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":35}}},"branchMap":{},"code":["var Promise = require('./Promise');","","function resolveProperties(object) {","  var keys = Object.keys(object);","","  return Promise.all(","    keys.map(function (key) {","      return object[key];","    })","  ).then(function (values) {","    keys.forEach(function (key, index) {","      object[key] = values[index];","    });","","    return object;","  });","}","","module.exports = resolveProperties;",""],"l":{"1":1,"3":1,"4":0,"6":0,"8":0,"11":0,"12":0,"15":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/Parser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/Parser.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":1,"145":0,"146":1,"147":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"154":1,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":1,"168":0,"169":1,"170":0,"171":1,"172":0,"173":0,"174":0,"175":1,"176":0,"177":1,"178":0,"179":1,"180":0,"181":1},"b":{"1":[0,0],"2":[0,0,0,0,0,0,0,0,0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"Parser","line":37,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":39}}},"2":{"name":"(anonymous_2)","line":56,"loc":{"start":{"line":56,"column":27},"end":{"line":56,"column":44}}},"3":{"name":"(anonymous_3)","line":255,"loc":{"start":{"line":255,"column":26},"end":{"line":255,"column":38}}},"4":{"name":"(anonymous_4)","line":260,"loc":{"start":{"line":260,"column":25},"end":{"line":260,"column":44}}},"5":{"name":"(anonymous_5)","line":264,"loc":{"start":{"line":264,"column":26},"end":{"line":264,"column":42}}},"6":{"name":"(anonymous_6)","line":268,"loc":{"start":{"line":268,"column":29},"end":{"line":268,"column":64}}},"7":{"name":"(anonymous_7)","line":278,"loc":{"start":{"line":278,"column":33},"end":{"line":278,"column":66}}},"8":{"name":"(anonymous_8)","line":292,"loc":{"start":{"line":292,"column":31},"end":{"line":292,"column":43}}},"9":{"name":"(anonymous_9)","line":299,"loc":{"start":{"line":299,"column":32},"end":{"line":299,"column":61}}},"10":{"name":"(anonymous_10)","line":303,"loc":{"start":{"line":303,"column":33},"end":{"line":303,"column":62}}},"11":{"name":"(anonymous_11)","line":307,"loc":{"start":{"line":307,"column":31},"end":{"line":307,"column":43}}},"12":{"name":"(anonymous_12)","line":313,"loc":{"start":{"line":313,"column":32},"end":{"line":313,"column":44}}},"13":{"name":"(anonymous_13)","line":317,"loc":{"start":{"line":317,"column":30},"end":{"line":317,"column":59}}},"14":{"name":"(anonymous_14)","line":321,"loc":{"start":{"line":321,"column":29},"end":{"line":321,"column":41}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":10}},"5":{"start":{"line":10,"column":0},"end":{"line":23,"column":2}},"6":{"start":{"line":25,"column":0},"end":{"line":25,"column":10}},"7":{"start":{"line":26,"column":0},"end":{"line":29,"column":2}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":12}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":12}},"10":{"start":{"line":33,"column":0},"end":{"line":33,"column":15}},"11":{"start":{"line":34,"column":0},"end":{"line":34,"column":16}},"12":{"start":{"line":35,"column":0},"end":{"line":35,"column":15}},"13":{"start":{"line":37,"column":0},"end":{"line":54,"column":1}},"14":{"start":{"line":38,"column":2},"end":{"line":38,"column":53}},"15":{"start":{"line":39,"column":2},"end":{"line":39,"column":59}},"16":{"start":{"line":40,"column":2},"end":{"line":40,"column":26}},"17":{"start":{"line":42,"column":2},"end":{"line":42,"column":31}},"18":{"start":{"line":43,"column":2},"end":{"line":44,"column":50}},"19":{"start":{"line":44,"column":4},"end":{"line":44,"column":50}},"20":{"start":{"line":46,"column":2},"end":{"line":46,"column":23}},"21":{"start":{"line":47,"column":2},"end":{"line":47,"column":20}},"22":{"start":{"line":48,"column":2},"end":{"line":48,"column":17}},"23":{"start":{"line":50,"column":2},"end":{"line":51,"column":61}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":61}},"25":{"start":{"line":53,"column":2},"end":{"line":53,"column":28}},"26":{"start":{"line":56,"column":0},"end":{"line":253,"column":2}},"27":{"start":{"line":57,"column":2},"end":{"line":68,"column":9}},"28":{"start":{"line":70,"column":2},"end":{"line":242,"column":3}},"29":{"start":{"line":71,"column":4},"end":{"line":71,"column":17}},"30":{"start":{"line":73,"column":4},"end":{"line":241,"column":5}},"31":{"start":{"line":75,"column":6},"end":{"line":75,"column":16}},"32":{"start":{"line":76,"column":6},"end":{"line":76,"column":31}},"33":{"start":{"line":79,"column":6},"end":{"line":93,"column":7}},"34":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"35":{"start":{"line":81,"column":10},"end":{"line":81,"column":19}},"36":{"start":{"line":83,"column":8},"end":{"line":83,"column":16}},"37":{"start":{"line":84,"column":8},"end":{"line":84,"column":14}},"38":{"start":{"line":85,"column":13},"end":{"line":93,"column":7}},"39":{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},"40":{"start":{"line":87,"column":10},"end":{"line":87,"column":19}},"41":{"start":{"line":89,"column":8},"end":{"line":89,"column":18}},"42":{"start":{"line":90,"column":8},"end":{"line":90,"column":36}},"43":{"start":{"line":91,"column":8},"end":{"line":91,"column":37}},"44":{"start":{"line":92,"column":8},"end":{"line":92,"column":14}},"45":{"start":{"line":95,"column":6},"end":{"line":97,"column":7}},"46":{"start":{"line":96,"column":8},"end":{"line":96,"column":17}},"47":{"start":{"line":98,"column":6},"end":{"line":98,"column":14}},"48":{"start":{"line":99,"column":6},"end":{"line":99,"column":12}},"49":{"start":{"line":101,"column":6},"end":{"line":101,"column":29}},"50":{"start":{"line":102,"column":6},"end":{"line":102,"column":34}},"51":{"start":{"line":103,"column":6},"end":{"line":103,"column":16}},"52":{"start":{"line":106,"column":6},"end":{"line":110,"column":7}},"53":{"start":{"line":107,"column":8},"end":{"line":107,"column":34}},"54":{"start":{"line":108,"column":8},"end":{"line":108,"column":38}},"55":{"start":{"line":109,"column":8},"end":{"line":109,"column":14}},"56":{"start":{"line":112,"column":6},"end":{"line":112,"column":14}},"57":{"start":{"line":113,"column":6},"end":{"line":115,"column":7}},"58":{"start":{"line":114,"column":8},"end":{"line":114,"column":14}},"59":{"start":{"line":117,"column":6},"end":{"line":125,"column":7}},"60":{"start":{"line":118,"column":8},"end":{"line":121,"column":9}},"61":{"start":{"line":120,"column":10},"end":{"line":120,"column":19}},"62":{"start":{"line":122,"column":8},"end":{"line":122,"column":57}},"63":{"start":{"line":123,"column":8},"end":{"line":123,"column":37}},"64":{"start":{"line":124,"column":8},"end":{"line":124,"column":14}},"65":{"start":{"line":127,"column":6},"end":{"line":127,"column":20}},"66":{"start":{"line":128,"column":6},"end":{"line":130,"column":7}},"67":{"start":{"line":129,"column":8},"end":{"line":129,"column":17}},"68":{"start":{"line":131,"column":6},"end":{"line":131,"column":12}},"69":{"start":{"line":133,"column":6},"end":{"line":135,"column":7}},"70":{"start":{"line":134,"column":8},"end":{"line":134,"column":14}},"71":{"start":{"line":136,"column":6},"end":{"line":136,"column":35}},"72":{"start":{"line":137,"column":6},"end":{"line":137,"column":29}},"73":{"start":{"line":140,"column":6},"end":{"line":144,"column":7}},"74":{"start":{"line":141,"column":8},"end":{"line":141,"column":58}},"75":{"start":{"line":142,"column":8},"end":{"line":142,"column":36}},"76":{"start":{"line":143,"column":8},"end":{"line":143,"column":43}},"77":{"start":{"line":145,"column":6},"end":{"line":145,"column":12}},"78":{"start":{"line":147,"column":6},"end":{"line":149,"column":7}},"79":{"start":{"line":148,"column":8},"end":{"line":148,"column":17}},"80":{"start":{"line":150,"column":6},"end":{"line":150,"column":35}},"81":{"start":{"line":151,"column":6},"end":{"line":151,"column":12}},"82":{"start":{"line":153,"column":6},"end":{"line":155,"column":7}},"83":{"start":{"line":154,"column":8},"end":{"line":154,"column":17}},"84":{"start":{"line":156,"column":6},"end":{"line":156,"column":35}},"85":{"start":{"line":157,"column":6},"end":{"line":157,"column":32}},"86":{"start":{"line":158,"column":6},"end":{"line":158,"column":12}},"87":{"start":{"line":160,"column":6},"end":{"line":160,"column":26}},"88":{"start":{"line":161,"column":6},"end":{"line":161,"column":32}},"89":{"start":{"line":164,"column":6},"end":{"line":164,"column":24}},"90":{"start":{"line":166,"column":6},"end":{"line":174,"column":7}},"91":{"start":{"line":168,"column":8},"end":{"line":168,"column":25}},"92":{"start":{"line":169,"column":8},"end":{"line":171,"column":9}},"93":{"start":{"line":170,"column":10},"end":{"line":170,"column":30}},"94":{"start":{"line":172,"column":8},"end":{"line":172,"column":25}},"95":{"start":{"line":173,"column":8},"end":{"line":173,"column":21}},"96":{"start":{"line":176,"column":6},"end":{"line":218,"column":7}},"97":{"start":{"line":177,"column":8},"end":{"line":184,"column":9}},"98":{"start":{"line":178,"column":10},"end":{"line":180,"column":11}},"99":{"start":{"line":179,"column":12},"end":{"line":179,"column":59}},"100":{"start":{"line":181,"column":10},"end":{"line":181,"column":18}},"101":{"start":{"line":183,"column":10},"end":{"line":183,"column":20}},"102":{"start":{"line":185,"column":13},"end":{"line":218,"column":7}},"103":{"start":{"line":186,"column":8},"end":{"line":186,"column":16}},"104":{"start":{"line":187,"column":8},"end":{"line":195,"column":9}},"105":{"start":{"line":189,"column":10},"end":{"line":189,"column":35}},"106":{"start":{"line":190,"column":15},"end":{"line":195,"column":9}},"107":{"start":{"line":192,"column":10},"end":{"line":192,"column":35}},"108":{"start":{"line":194,"column":10},"end":{"line":194,"column":20}},"109":{"start":{"line":196,"column":13},"end":{"line":218,"column":7}},"110":{"start":{"line":197,"column":8},"end":{"line":217,"column":9}},"111":{"start":{"line":198,"column":10},"end":{"line":198,"column":20}},"112":{"start":{"line":199,"column":10},"end":{"line":206,"column":11}},"113":{"start":{"line":201,"column":12},"end":{"line":201,"column":38}},"114":{"start":{"line":202,"column":12},"end":{"line":202,"column":38}},"115":{"start":{"line":203,"column":12},"end":{"line":203,"column":40}},"116":{"start":{"line":204,"column":12},"end":{"line":204,"column":41}},"117":{"start":{"line":205,"column":12},"end":{"line":205,"column":18}},"118":{"start":{"line":207,"column":15},"end":{"line":217,"column":9}},"119":{"start":{"line":208,"column":10},"end":{"line":214,"column":11}},"120":{"start":{"line":209,"column":12},"end":{"line":209,"column":38}},"121":{"start":{"line":211,"column":12},"end":{"line":211,"column":26}},"122":{"start":{"line":213,"column":12},"end":{"line":213,"column":22}},"123":{"start":{"line":216,"column":10},"end":{"line":216,"column":20}},"124":{"start":{"line":220,"column":6},"end":{"line":234,"column":7}},"125":{"start":{"line":223,"column":8},"end":{"line":223,"column":34}},"126":{"start":{"line":224,"column":13},"end":{"line":234,"column":7}},"127":{"start":{"line":227,"column":8},"end":{"line":227,"column":61}},"128":{"start":{"line":228,"column":8},"end":{"line":228,"column":22}},"129":{"start":{"line":229,"column":8},"end":{"line":229,"column":34}},"130":{"start":{"line":233,"column":8},"end":{"line":233,"column":12}},"131":{"start":{"line":236,"column":6},"end":{"line":236,"column":12}},"132":{"start":{"line":238,"column":6},"end":{"line":238,"column":12}},"133":{"start":{"line":240,"column":6},"end":{"line":240,"column":15}},"134":{"start":{"line":244,"column":2},"end":{"line":244,"column":42}},"135":{"start":{"line":245,"column":2},"end":{"line":245,"column":43}},"136":{"start":{"line":246,"column":2},"end":{"line":246,"column":40}},"137":{"start":{"line":248,"column":2},"end":{"line":248,"column":21}},"138":{"start":{"line":249,"column":2},"end":{"line":249,"column":21}},"139":{"start":{"line":250,"column":2},"end":{"line":250,"column":21}},"140":{"start":{"line":252,"column":2},"end":{"line":252,"column":21}},"141":{"start":{"line":255,"column":0},"end":{"line":258,"column":2}},"142":{"start":{"line":256,"column":2},"end":{"line":257,"column":77}},"143":{"start":{"line":257,"column":4},"end":{"line":257,"column":77}},"144":{"start":{"line":260,"column":0},"end":{"line":262,"column":2}},"145":{"start":{"line":261,"column":2},"end":{"line":261,"column":26}},"146":{"start":{"line":264,"column":0},"end":{"line":266,"column":2}},"147":{"start":{"line":265,"column":2},"end":{"line":265,"column":29}},"148":{"start":{"line":268,"column":0},"end":{"line":276,"column":2}},"149":{"start":{"line":269,"column":2},"end":{"line":270,"column":11}},"150":{"start":{"line":270,"column":4},"end":{"line":270,"column":11}},"151":{"start":{"line":272,"column":2},"end":{"line":272,"column":69}},"152":{"start":{"line":274,"column":2},"end":{"line":275,"column":34}},"153":{"start":{"line":275,"column":4},"end":{"line":275,"column":34}},"154":{"start":{"line":278,"column":0},"end":{"line":290,"column":2}},"155":{"start":{"line":279,"column":2},"end":{"line":279,"column":27}},"156":{"start":{"line":281,"column":2},"end":{"line":289,"column":3}},"157":{"start":{"line":282,"column":4},"end":{"line":288,"column":5}},"158":{"start":{"line":283,"column":6},"end":{"line":283,"column":60}},"159":{"start":{"line":284,"column":6},"end":{"line":284,"column":21}},"160":{"start":{"line":286,"column":6},"end":{"line":286,"column":49}},"161":{"start":{"line":287,"column":6},"end":{"line":287,"column":24}},"162":{"start":{"line":292,"column":0},"end":{"line":297,"column":2}},"163":{"start":{"line":293,"column":2},"end":{"line":293,"column":28}},"164":{"start":{"line":294,"column":2},"end":{"line":294,"column":41}},"165":{"start":{"line":295,"column":2},"end":{"line":295,"column":24}},"166":{"start":{"line":296,"column":2},"end":{"line":296,"column":25}},"167":{"start":{"line":299,"column":0},"end":{"line":301,"column":2}},"168":{"start":{"line":300,"column":2},"end":{"line":300,"column":57}},"169":{"start":{"line":303,"column":0},"end":{"line":305,"column":2}},"170":{"start":{"line":304,"column":2},"end":{"line":304,"column":58}},"171":{"start":{"line":307,"column":0},"end":{"line":311,"column":2}},"172":{"start":{"line":308,"column":2},"end":{"line":308,"column":60}},"173":{"start":{"line":309,"column":2},"end":{"line":309,"column":24}},"174":{"start":{"line":310,"column":2},"end":{"line":310,"column":25}},"175":{"start":{"line":313,"column":0},"end":{"line":315,"column":2}},"176":{"start":{"line":314,"column":2},"end":{"line":314,"column":26}},"177":{"start":{"line":317,"column":0},"end":{"line":319,"column":2}},"178":{"start":{"line":318,"column":2},"end":{"line":318,"column":53}},"179":{"start":{"line":321,"column":0},"end":{"line":323,"column":2}},"180":{"start":{"line":322,"column":2},"end":{"line":322,"column":21}},"181":{"start":{"line":325,"column":0},"end":{"line":325,"column":24}}},"branchMap":{"1":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":2},"end":{"line":50,"column":2}},{"start":{"line":50,"column":2},"end":{"line":50,"column":2}}]},"2":{"line":73,"type":"switch","locations":[{"start":{"line":74,"column":4},"end":{"line":76,"column":31}},{"start":{"line":78,"column":4},"end":{"line":99,"column":12}},{"start":{"line":100,"column":4},"end":{"line":103,"column":16}},{"start":{"line":105,"column":4},"end":{"line":131,"column":12}},{"start":{"line":132,"column":4},"end":{"line":137,"column":29}},{"start":{"line":139,"column":4},"end":{"line":145,"column":12}},{"start":{"line":146,"column":4},"end":{"line":151,"column":12}},{"start":{"line":152,"column":4},"end":{"line":158,"column":12}},{"start":{"line":159,"column":4},"end":{"line":161,"column":32}},{"start":{"line":163,"column":4},"end":{"line":236,"column":12}},{"start":{"line":237,"column":4},"end":{"line":238,"column":12}},{"start":{"line":239,"column":4},"end":{"line":240,"column":15}}]},"3":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":6},"end":{"line":79,"column":6}},{"start":{"line":79,"column":6},"end":{"line":79,"column":6}}]},"4":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"5":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":13},"end":{"line":85,"column":13}},{"start":{"line":85,"column":13},"end":{"line":85,"column":13}}]},"6":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":86,"column":8}},{"start":{"line":86,"column":8},"end":{"line":86,"column":8}}]},"7":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":6},"end":{"line":95,"column":6}},{"start":{"line":95,"column":6},"end":{"line":95,"column":6}}]},"8":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":6},"end":{"line":106,"column":6}},{"start":{"line":106,"column":6},"end":{"line":106,"column":6}}]},"9":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":6},"end":{"line":113,"column":6}},{"start":{"line":113,"column":6},"end":{"line":113,"column":6}}]},"10":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":6},"end":{"line":117,"column":6}},{"start":{"line":117,"column":6},"end":{"line":117,"column":6}}]},"11":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]},"12":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":6},"end":{"line":128,"column":6}},{"start":{"line":128,"column":6},"end":{"line":128,"column":6}}]},"13":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":10},"end":{"line":128,"column":17}},{"start":{"line":128,"column":21},"end":{"line":128,"column":29}}]},"14":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":6},"end":{"line":133,"column":6}},{"start":{"line":133,"column":6},"end":{"line":133,"column":6}}]},"15":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":6},"end":{"line":140,"column":6}},{"start":{"line":140,"column":6},"end":{"line":140,"column":6}}]},"16":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":6},"end":{"line":147,"column":6}},{"start":{"line":147,"column":6},"end":{"line":147,"column":6}}]},"17":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":6},"end":{"line":153,"column":6}},{"start":{"line":153,"column":6},"end":{"line":153,"column":6}}]},"18":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":6},"end":{"line":166,"column":6}},{"start":{"line":166,"column":6},"end":{"line":166,"column":6}}]},"19":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":15},"end":{"line":169,"column":30}},{"start":{"line":169,"column":34},"end":{"line":169,"column":62}}]},"20":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":6},"end":{"line":176,"column":6}},{"start":{"line":176,"column":6},"end":{"line":176,"column":6}}]},"21":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":8}},{"start":{"line":177,"column":8},"end":{"line":177,"column":8}}]},"22":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":10},"end":{"line":178,"column":10}},{"start":{"line":178,"column":10},"end":{"line":178,"column":10}}]},"23":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":13},"end":{"line":185,"column":13}},{"start":{"line":185,"column":13},"end":{"line":185,"column":13}}]},"24":{"line":187,"type":"if","locations":[{"start":{"line":187,"column":8},"end":{"line":187,"column":8}},{"start":{"line":187,"column":8},"end":{"line":187,"column":8}}]},"25":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":15},"end":{"line":190,"column":15}},{"start":{"line":190,"column":15},"end":{"line":190,"column":15}}]},"26":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":13},"end":{"line":196,"column":13}},{"start":{"line":196,"column":13},"end":{"line":196,"column":13}}]},"27":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"28":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":10},"end":{"line":199,"column":10}},{"start":{"line":199,"column":10},"end":{"line":199,"column":10}}]},"29":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":15},"end":{"line":207,"column":15}},{"start":{"line":207,"column":15},"end":{"line":207,"column":15}}]},"30":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":10},"end":{"line":208,"column":10}},{"start":{"line":208,"column":10},"end":{"line":208,"column":10}}]},"31":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":6},"end":{"line":220,"column":6}},{"start":{"line":220,"column":6},"end":{"line":220,"column":6}}]},"32":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":13},"end":{"line":224,"column":13}},{"start":{"line":224,"column":13},"end":{"line":224,"column":13}}]},"33":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":2},"end":{"line":256,"column":2}},{"start":{"line":256,"column":2},"end":{"line":256,"column":2}}]},"34":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":2},"end":{"line":269,"column":2}},{"start":{"line":269,"column":2},"end":{"line":269,"column":2}}]},"35":{"line":269,"type":"binary-expr","locations":[{"start":{"line":269,"column":6},"end":{"line":269,"column":25}},{"start":{"line":269,"column":29},"end":{"line":269,"column":42}}]},"36":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":2},"end":{"line":274,"column":2}},{"start":{"line":274,"column":2},"end":{"line":274,"column":2}}]},"37":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":2},"end":{"line":281,"column":2}},{"start":{"line":281,"column":2},"end":{"line":281,"column":2}}]},"38":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":4},"end":{"line":282,"column":4}},{"start":{"line":282,"column":4},"end":{"line":282,"column":4}}]}},"code":["/* jshint -W058 */","var bodec = require('bodec');","var Stream = require('bufferedstream');","var Message = require('../Message');","","// This parser is modified from the one in the node-formidable","// project, written by Felix Geisendrfer. MIT licensed.","","var s = 0;","var S = {","  START: s++,","  START_BOUNDARY: s++,","  HEADER_FIELD_START: s++,","  HEADER_FIELD: s++,","  HEADER_VALUE_START: s++,","  HEADER_VALUE: s++,","  HEADER_VALUE_ALMOST_DONE: s++,","  HEADERS_ALMOST_DONE: s++,","  PART_DATA_START: s++,","  PART_DATA: s++,","  PART_END: s++,","  END: s++","};","","var f = 1;","var F = {","  PART_BOUNDARY: f,","  LAST_BOUNDARY: f *= 2","};","","var LF = 10;","var CR = 13;","var SPACE = 32;","var HYPHEN = 45;","var COLON = 58;","","function Parser(boundary, partHandler) {","  this.boundary = bodec.fromRaw('\\r\\n--' + boundary);","  this.lookBehind = bodec.create(this.boundary.length + 8);","  this.boundaryChars = {};","","  var i = this.boundary.length;","  while (i)","    this.boundaryChars[this.boundary[--i]] = true;","","  this.state = S.START;","  this.index = null;","  this.flags = 0;","","  if (typeof partHandler !== 'function')","    throw new Error('multipart.Parser needs a part handler');","","  this.onPart = partHandler;","}","","Parser.prototype.execute = function (chunk) {","  var chunkLength = chunk.length,","      prevIndex = this.index,","      index = this.index,","      state = this.state,","      flags = this.flags,","      lookBehind = this.lookBehind,","      boundary = this.boundary,","      boundaryChars = this.boundaryChars,","      boundaryLength = boundary.length,","      boundaryEnd = boundaryLength - 1,","      c,","      cl;","","  for (var i = 0; i < chunkLength; ++i) {","    c = chunk[i];","","    switch (state) {","    case S.START:","      index = 0;","      state = S.START_BOUNDARY;","      /* falls through */","    case S.START_BOUNDARY:","      if (index == boundaryLength - 2) {","        if (c != CR) {","          return i;","        }","        index++;","        break;","      } else if (index == boundaryLength - 1) {","        if (c != LF) {","          return i;","        }","        index = 0;","        this._callback('partBegin');","        state = S.HEADER_FIELD_START;","        break;","      }","","      if (c != boundary[index + 2]) {","        return i;","      }","      index++;","      break;","    case S.HEADER_FIELD_START:","      state = S.HEADER_FIELD;","      this._mark('headerName', i);","      index = 0;","      /* falls through */","    case S.HEADER_FIELD:","      if (c == CR) {","        this._clear('headerName');","        state = S.HEADERS_ALMOST_DONE;","        break;","      }","","      index++;","      if (c == HYPHEN) {","        break;","      }","","      if (c == COLON) {","        if (index == 1) {","          // empty header field","          return i;","        }","        this._dataCallback('headerName', chunk, true, i);","        state = S.HEADER_VALUE_START;","        break;","      }","","      cl = c | 0x20; // lower-case","      if (cl < 97 || cl > 122) { // not between \"a\" and \"z\"","        return i;","      }","      break;","    case S.HEADER_VALUE_START:","      if (c == SPACE) {","        break;","      }","      this._mark('headerValue', i);","      state = S.HEADER_VALUE;","      /* falls through */","    case S.HEADER_VALUE:","      if (c == CR) {","        this._dataCallback('headerValue', chunk, true, i);","        this._callback('headerEnd');","        state = S.HEADER_VALUE_ALMOST_DONE;","      }","      break;","    case S.HEADER_VALUE_ALMOST_DONE:","      if (c != LF) {","        return i;","      }","      state = S.HEADER_FIELD_START;","      break;","    case S.HEADERS_ALMOST_DONE:","      if (c != LF) {","        return i;","      }","      this._callback('headersEnd');","      state = S.PART_DATA_START;","      break;","    case S.PART_DATA_START:","      state = S.PART_DATA;","      this._mark('partData', i);","      /* falls through */","    case S.PART_DATA:","      prevIndex = index;","","      if (index === 0) {","        // boyer-moore derrived algorithm to safely skip non-boundary data","        i += boundaryEnd;","        while (i < chunkLength && !(chunk[i] in boundaryChars)) {","          i += boundaryLength;","        }","        i -= boundaryEnd;","        c = chunk[i];","      }","","      if (index < boundaryLength) {","        if (boundary[index] == c) {","          if (index === 0) {","            this._dataCallback('partData', chunk, true, i);","          }","          index++;","        } else {","          index = 0;","        }","      } else if (index == boundaryLength) {","        index++;","        if (c == CR) {","          // CR = part boundary","          flags |= F.PART_BOUNDARY;","        } else if (c == HYPHEN) {","          // HYPHEN = end boundary","          flags |= F.LAST_BOUNDARY;","        } else {","          index = 0;","        }","      } else if (index - 1 == boundaryLength) {","        if (flags & F.PART_BOUNDARY) {","          index = 0;","          if (c == LF) {","            // unset the PART_BOUNDARY flag","            flags &= ~F.PART_BOUNDARY;","            this._callback('partEnd');","            this._callback('partBegin');","            state = S.HEADER_FIELD_START;","            break;","          }","        } else if (flags & F.LAST_BOUNDARY) {","          if (c == HYPHEN) {","            this._callback('partEnd');","            // this._callback('end');","            state = S.END;","          } else {","            index = 0;","          }","        } else {","          index = 0;","        }","      }","","      if (index > 0) {","        // when matching a possible boundary, keep a lookBehind","        // reference in case it turns out to be a false lead","        lookBehind[index - 1] = c;","      } else if (prevIndex > 0) {","        // if our boundary turned out to be rubbish, the captured","        // lookBehind belongs to partData","        this._callback('partData', lookBehind, 0, prevIndex);","        prevIndex = 0;","        this._mark('partData', i);","","        // reconsider the current character even so it interrupted the","        // sequence it could be the beginning of a new sequence","        i--;","      }","","      break;","    case S.END:","      break;","    default:","      return i;","    }","  }","","  this._dataCallback('headerName', chunk);","  this._dataCallback('headerValue', chunk);","  this._dataCallback('partData', chunk);","","  this.index = index;","  this.state = state;","  this.flags = flags;","","  return chunkLength;","};","","Parser.prototype.finish = function () {","  if (this.state !== S.END)","    throw new Error('Stream ended unexpectedly (state: ' + this.state + ')');","};","","Parser.prototype._mark = function (name, i) {","  this[name + 'Mark'] = i;","};","","Parser.prototype._clear = function (name) {","  delete this[name + 'Mark'];","};","","Parser.prototype._callback = function (name, chunk, start, end) {","  if (start !== undefined && start === end)","    return;","","  var prop = 'on' + name.substr(0, 1).toUpperCase() + name.substr(1);","","  if (prop in this)","    this[prop](chunk, start, end);","};","","Parser.prototype._dataCallback = function (name, chunk, clear, i) {","  var prop = name + 'Mark';","","  if (prop in this) {","    if (!clear) {","      this._callback(name, chunk, this[prop], chunk.length);","      this[prop] = 0;","    } else {","      this._callback(name, chunk, this[prop], i);","      delete this[prop];","    }","  }","};","","Parser.prototype.onPartBegin = function () {","  this._stream = new Stream;","  this._part = new Message(this._stream);","  this._headerName = '';","  this._headerValue = '';","};","","Parser.prototype.onHeaderName = function (chunk, start, end) {","  this._headerName += bodec.toUnicode(chunk, start, end);","};","","Parser.prototype.onHeaderValue = function (chunk, start, end) {","  this._headerValue += bodec.toUnicode(chunk, start, end);","};","","Parser.prototype.onHeaderEnd = function () {","  this._part.setHeader(this._headerName, this._headerValue);","  this._headerName = '';","  this._headerValue = '';","};","","Parser.prototype.onHeadersEnd = function () {","  this.onPart(this._part);","};","","Parser.prototype.onPartData = function (chunk, start, end) {","  this._stream.write(bodec.slice(chunk, start, end));","};","","Parser.prototype.onPartEnd = function () {","  this._stream.end();","};","","module.exports = Parser;",""],"l":{"2":1,"3":1,"4":1,"9":1,"10":1,"25":1,"26":1,"31":1,"32":1,"33":1,"34":1,"35":1,"37":1,"38":0,"39":0,"40":0,"42":0,"43":0,"44":0,"46":0,"47":0,"48":0,"50":0,"51":0,"53":0,"56":1,"57":0,"70":0,"71":0,"73":0,"75":0,"76":0,"79":0,"80":0,"81":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"92":0,"95":0,"96":0,"98":0,"99":0,"101":0,"102":0,"103":0,"106":0,"107":0,"108":0,"109":0,"112":0,"113":0,"114":0,"117":0,"118":0,"120":0,"122":0,"123":0,"124":0,"127":0,"128":0,"129":0,"131":0,"133":0,"134":0,"136":0,"137":0,"140":0,"141":0,"142":0,"143":0,"145":0,"147":0,"148":0,"150":0,"151":0,"153":0,"154":0,"156":0,"157":0,"158":0,"160":0,"161":0,"164":0,"166":0,"168":0,"169":0,"170":0,"172":0,"173":0,"176":0,"177":0,"178":0,"179":0,"181":0,"183":0,"185":0,"186":0,"187":0,"189":0,"190":0,"192":0,"194":0,"196":0,"197":0,"198":0,"199":0,"201":0,"202":0,"203":0,"204":0,"205":0,"207":0,"208":0,"209":0,"211":0,"213":0,"216":0,"220":0,"223":0,"224":0,"227":0,"228":0,"229":0,"233":0,"236":0,"238":0,"240":0,"244":0,"245":0,"246":0,"248":0,"249":0,"250":0,"252":0,"255":1,"256":0,"257":0,"260":1,"261":0,"264":1,"265":0,"268":1,"269":0,"270":0,"272":0,"274":0,"275":0,"278":1,"279":0,"281":0,"282":0,"283":0,"284":0,"286":0,"287":0,"292":1,"293":0,"294":0,"295":0,"296":0,"299":1,"300":0,"303":1,"304":0,"307":1,"308":0,"309":0,"310":0,"313":1,"314":0,"317":1,"318":0,"321":1,"322":0,"325":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/catch.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/catch.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"catchError","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":9},"end":{"line":13,"column":25}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":60}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":21,"column":1}},"2":{"start":{"line":13,"column":2},"end":{"line":20,"column":4}},"3":{"start":{"line":14,"column":4},"end":{"line":19,"column":7}},"4":{"start":{"line":15,"column":6},"end":{"line":16,"column":21}},"5":{"start":{"line":16,"column":8},"end":{"line":16,"column":21}},"6":{"start":{"line":18,"column":6},"end":{"line":18,"column":20}},"7":{"start":{"line":23,"column":0},"end":{"line":23,"column":28}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":6}},{"start":{"line":15,"column":6},"end":{"line":15,"column":6}}]}},"code":["/**"," * A middleware that \"catches\" non-Errors that are thrown from the downstream"," * app and returns them instead. This can be useful for breaking out of a"," * nested promise chain, for example."," *"," * Example:"," *"," *   mach.catch(function (conn) {"," *     throw 200;"," *   });"," */","function catchError(app) {","  return function (conn) {","    return conn.call(app).then(undefined, function (reason) {","      if (reason instanceof Error)","        throw reason;","      ","      return reason;","    });","  };","}","","module.exports = catchError;",""],"l":{"12":1,"13":0,"14":0,"15":0,"16":0,"18":0,"23":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/charset.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/charset.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"charset","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":38}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":25}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":43}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":16,"column":1}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":45}},"3":{"start":{"line":8,"column":2},"end":{"line":15,"column":4}},"4":{"start":{"line":9,"column":4},"end":{"line":14,"column":7}},"5":{"start":{"line":10,"column":6},"end":{"line":10,"column":35}},"6":{"start":{"line":12,"column":6},"end":{"line":13,"column":42}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":42}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":25}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":19},"end":{"line":6,"column":33}},{"start":{"line":6,"column":37},"end":{"line":6,"column":44}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":6}},{"start":{"line":12,"column":6},"end":{"line":12,"column":6}}]},"3":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":10},"end":{"line":12,"column":30}},{"start":{"line":12,"column":34},"end":{"line":12,"column":58}}]}},"code":["/**"," * A middleware that sets a default character set in the Content-Type"," * header of the response if none is already specified."," */","function charset(app, defaultCharset) {","  defaultCharset = defaultCharset || 'utf-8';","","  return function (conn) {","    return conn.call(app).then(function () {","      var response = conn.response;","","      if (response.contentType && response.charset == null)","        response.charset = defaultCharset;","    });","  };","}","","module.exports = charset;",""],"l":{"5":1,"6":0,"8":0,"9":0,"10":0,"12":0,"13":0,"18":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/contentType.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/contentType.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"contentType","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":25}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":43}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":16,"column":1}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":43}},"3":{"start":{"line":8,"column":2},"end":{"line":15,"column":4}},"4":{"start":{"line":9,"column":4},"end":{"line":14,"column":7}},"5":{"start":{"line":10,"column":6},"end":{"line":10,"column":42}},"6":{"start":{"line":12,"column":6},"end":{"line":13,"column":46}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":46}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":29}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":16},"end":{"line":6,"column":27}},{"start":{"line":6,"column":31},"end":{"line":6,"column":42}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":6}},{"start":{"line":12,"column":6},"end":{"line":12,"column":6}}]}},"code":["/**"," * A middleware that sets a default Content-Type header in case one hasn't"," * already been set in a downstream app."," */","function contentType(app, defaultType) {","  defaultType = defaultType || 'text/html';","","  return function (conn) {","    return conn.call(app).then(function () {","      var headers = conn.response.headers;","","      if (!headers['Content-Type'])","        headers['Content-Type'] = defaultType;","    });","  };","}","","module.exports = contentType;",""],"l":{"5":1,"6":0,"8":0,"9":0,"10":0,"12":0,"13":0,"18":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/favicon.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/favicon.js","s":{"1":1,"2":0,"3":0,"4":0,"5":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"favicon","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":25}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":11,"column":1}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":29}},"3":{"start":{"line":8,"column":2},"end":{"line":10,"column":4}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":72}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":25}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":13},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":28}}]},"2":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":54}},{"start":{"line":9,"column":57},"end":{"line":9,"column":71}}]}},"code":["/**"," * A middleware that returns the given response to requests for \"/favicon.ico\"."," * Defaults to returning an empty 404."," */","function favicon(app, response) {","  response = response || 404;","","  return function (conn) {","    return conn.pathname === '/favicon.ico' ? response : conn.call(app);","  };","}","","module.exports = favicon;",""],"l":{"5":1,"6":0,"8":0,"9":0,"13":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/file.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/file.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"file","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":28}}},"2":{"name":"sendFile","line":94,"loc":{"start":{"line":94,"column":2},"end":{"line":94,"column":39}}},"3":{"name":"(anonymous_3)","line":104,"loc":{"start":{"line":104,"column":37},"end":{"line":104,"column":53}}},"4":{"name":"(anonymous_4)","line":110,"loc":{"start":{"line":110,"column":9},"end":{"line":110,"column":25}}},"5":{"name":"(anonymous_5)","line":122,"loc":{"start":{"line":122,"column":35},"end":{"line":122,"column":52}}},"6":{"name":"(anonymous_6)","line":130,"loc":{"start":{"line":130,"column":33},"end":{"line":130,"column":54}}},"7":{"name":"(anonymous_7)","line":134,"loc":{"start":{"line":134,"column":60},"end":{"line":134,"column":77}}},"8":{"name":"(anonymous_8)","line":147,"loc":{"start":{"line":147,"column":65},"end":{"line":147,"column":81}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":52}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":54}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}},"8":{"start":{"line":9,"column":0},"end":{"line":11,"column":2}},"9":{"start":{"line":65,"column":0},"end":{"line":153,"column":1}},"10":{"start":{"line":67,"column":2},"end":{"line":70,"column":3}},"11":{"start":{"line":68,"column":4},"end":{"line":68,"column":18}},"12":{"start":{"line":69,"column":4},"end":{"line":69,"column":15}},"13":{"start":{"line":72,"column":2},"end":{"line":72,"column":26}},"14":{"start":{"line":75,"column":2},"end":{"line":76,"column":32}},"15":{"start":{"line":76,"column":4},"end":{"line":76,"column":32}},"16":{"start":{"line":78,"column":2},"end":{"line":78,"column":26}},"17":{"start":{"line":79,"column":2},"end":{"line":80,"column":55}},"18":{"start":{"line":80,"column":4},"end":{"line":80,"column":55}},"19":{"start":{"line":82,"column":2},"end":{"line":82,"column":34}},"20":{"start":{"line":83,"column":2},"end":{"line":89,"column":3}},"21":{"start":{"line":84,"column":4},"end":{"line":88,"column":5}},"22":{"start":{"line":85,"column":6},"end":{"line":85,"column":24}},"23":{"start":{"line":86,"column":11},"end":{"line":88,"column":5}},"24":{"start":{"line":87,"column":6},"end":{"line":87,"column":31}},"25":{"start":{"line":91,"column":2},"end":{"line":91,"column":90}},"26":{"start":{"line":92,"column":2},"end":{"line":92,"column":34}},"27":{"start":{"line":94,"column":2},"end":{"line":108,"column":3}},"28":{"start":{"line":95,"column":4},"end":{"line":98,"column":7}},"29":{"start":{"line":100,"column":4},"end":{"line":101,"column":73}},"30":{"start":{"line":101,"column":6},"end":{"line":101,"column":73}},"31":{"start":{"line":103,"column":4},"end":{"line":107,"column":5}},"32":{"start":{"line":104,"column":6},"end":{"line":106,"column":9}},"33":{"start":{"line":105,"column":8},"end":{"line":105,"column":42}},"34":{"start":{"line":110,"column":2},"end":{"line":152,"column":4}},"35":{"start":{"line":111,"column":4},"end":{"line":112,"column":28}},"36":{"start":{"line":112,"column":6},"end":{"line":112,"column":28}},"37":{"start":{"line":114,"column":4},"end":{"line":114,"column":33}},"38":{"start":{"line":117,"column":4},"end":{"line":118,"column":41}},"39":{"start":{"line":118,"column":6},"end":{"line":118,"column":41}},"40":{"start":{"line":120,"column":4},"end":{"line":120,"column":41}},"41":{"start":{"line":122,"column":4},"end":{"line":151,"column":7}},"42":{"start":{"line":123,"column":6},"end":{"line":124,"column":43}},"43":{"start":{"line":124,"column":8},"end":{"line":124,"column":43}},"44":{"start":{"line":126,"column":6},"end":{"line":127,"column":30}},"45":{"start":{"line":127,"column":8},"end":{"line":127,"column":30}},"46":{"start":{"line":130,"column":6},"end":{"line":132,"column":9}},"47":{"start":{"line":131,"column":8},"end":{"line":131,"column":42}},"48":{"start":{"line":134,"column":6},"end":{"line":150,"column":9}},"49":{"start":{"line":135,"column":8},"end":{"line":137,"column":59}},"50":{"start":{"line":136,"column":10},"end":{"line":137,"column":59}},"51":{"start":{"line":137,"column":12},"end":{"line":137,"column":59}},"52":{"start":{"line":139,"column":8},"end":{"line":140,"column":32}},"53":{"start":{"line":140,"column":10},"end":{"line":140,"column":32}},"54":{"start":{"line":143,"column":8},"end":{"line":144,"column":47}},"55":{"start":{"line":144,"column":10},"end":{"line":144,"column":47}},"56":{"start":{"line":147,"column":8},"end":{"line":149,"column":11}},"57":{"start":{"line":148,"column":10},"end":{"line":148,"column":26}},"58":{"start":{"line":155,"column":0},"end":{"line":155,"column":22}}},"branchMap":{"1":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":2},"end":{"line":67,"column":2}},{"start":{"line":67,"column":2},"end":{"line":67,"column":2}}]},"2":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":6},"end":{"line":67,"column":29}},{"start":{"line":67,"column":33},"end":{"line":67,"column":56}}]},"3":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":19}},{"start":{"line":72,"column":23},"end":{"line":72,"column":25}}]},"4":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":2}},{"start":{"line":75,"column":2},"end":{"line":75,"column":2}}]},"5":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":2},"end":{"line":79,"column":2}},{"start":{"line":79,"column":2},"end":{"line":79,"column":2}}]},"6":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":6},"end":{"line":79,"column":30}},{"start":{"line":79,"column":34},"end":{"line":79,"column":54}},{"start":{"line":79,"column":58},"end":{"line":79,"column":90}}]},"7":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":14},"end":{"line":82,"column":27}},{"start":{"line":82,"column":31},"end":{"line":82,"column":33}}]},"8":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":2},"end":{"line":83,"column":2}},{"start":{"line":83,"column":2},"end":{"line":83,"column":2}}]},"9":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"10":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":11},"end":{"line":86,"column":11}},{"start":{"line":86,"column":11},"end":{"line":86,"column":11}}]},"11":{"line":91,"type":"cond-expr","locations":[{"start":{"line":91,"column":57},"end":{"line":91,"column":82}},{"start":{"line":91,"column":85},"end":{"line":91,"column":89}}]},"12":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"13":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"14":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":4},"end":{"line":111,"column":4}},{"start":{"line":111,"column":4},"end":{"line":111,"column":4}}]},"15":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":29}},{"start":{"line":111,"column":33},"end":{"line":111,"column":55}}]},"16":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":117,"column":4}},{"start":{"line":117,"column":4},"end":{"line":117,"column":4}}]},"17":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":6},"end":{"line":123,"column":6}},{"start":{"line":123,"column":6},"end":{"line":123,"column":6}}]},"18":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":10},"end":{"line":123,"column":15}},{"start":{"line":123,"column":19},"end":{"line":123,"column":33}}]},"19":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":6},"end":{"line":126,"column":6}},{"start":{"line":126,"column":6},"end":{"line":126,"column":6}}]},"20":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":10},"end":{"line":126,"column":16}},{"start":{"line":126,"column":20},"end":{"line":126,"column":40}}]},"21":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":10},"end":{"line":136,"column":10}},{"start":{"line":136,"column":10},"end":{"line":136,"column":10}}]},"22":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":8}},{"start":{"line":139,"column":8},"end":{"line":139,"column":8}}]},"23":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]}},"code":["var fs = require('fs');","var mach = require('../index');","var Promise = require('../utils/Promise');","var getFileStats = require('../utils/getFileStats');","var generateETag = require('../utils/generateETag');","var generateIndex = require('../utils/generateIndex');","var joinPaths = require('../utils/joinPaths');","","mach.extend(","  require('../extensions/server')",");","","/**"," * A middleware for serving files efficiently from the file system according"," * to the path specified in the `pathname` variable."," *"," * Options may be any of the following:"," *"," * - root               The path to the root directory to serve files from"," * - index              An array of file names to try and serve when the"," *                      request targets a directory (e.g. [\"index.html\", \"index.htm\"])."," *                      May simply be truthy to use [\"index.html\"]"," * - autoIndex          Set this true to automatically generate an index page"," *                      listing a directory's contents when the request targets"," *                      a directory with no index file"," * - useLastModified    Set this true to include the Last-Modified header"," *                      based on the mtime of the file. Defaults to true"," * - useETag            Set this true to include the ETag header based on"," *                      the MD5 checksum of the file. Defaults to false"," *"," * Alternatively, options may be a file path to the root directory."," *"," * If a matching file cannot be found, the request is forwarded to the"," * downstream app. Otherwise, the file is streamed through to the response."," *"," * Examples:"," *"," *   // Use the root directory name directly."," *   app.use(mach.file, '/public');"," *"," *   // Serve static files out of /public, and automatically"," *   // serve an index.htm from any directory that has one."," *   app.use(mach.file, {"," *     root: '/public',"," *     index: 'index.htm',"," *     useETag: true"," *   });"," *"," *   // Serve static files out of /public, and automatically"," *   // serve an index.html from any directory that has one."," *   // Also, automatically generate a directory listing for"," *   // any directory without an index.html file."," *   app.use(mach.file, {"," *     root: '/public',"," *     index: true,"," *     autoIndex: true"," *   });"," *"," * This function may also be used outside of the context of a middleware"," * stack to create a standalone app."," *"," *   var app = mach.file('/public');"," *   mach.serve(app);"," */","function file(app, options) {","  // Allow mach.file(path|options)","  if (typeof app === 'string' || typeof app === 'object') {","    options = app;","    app = null;","  }","","  options = options || {};","","  // Allow mach.file(path) and app.use(mach.file, path)","  if (typeof options === 'string')","    options = { root: options };","","  var root = options.root;","  if (typeof root !== 'string' || !fs.existsSync(root) || !fs.statSync(root).isDirectory())","    throw new Error('Invalid root directory: ' + root);","","  var index = options.index || [];","  if (index) {","    if (typeof index === 'string') {","      index = [ index ];","    } else if (!Array.isArray(index)) {","      index = [ 'index.html' ];","    }","  }","","  var useLastModified = ('useLastModified' in options) ? !!options.useLastModified : true;","  var useETag = !!options.useETag;","","  function sendFile(conn, path, stats) {","    conn.file({","      path: path,","      size: stats.size","    });","","    if (useLastModified)","      conn.response.headers['Last-Modified'] = stats.mtime.toUTCString();","","    if (useETag) {","      return generateETag(path).then(function (etag) {","        conn.response.headers.ETag = etag;","      });","    }","  }","","  return function (conn) {","    if (conn.method !== 'GET' && conn.method !== 'HEAD')","      return conn.call(app);","","    var pathname = conn.pathname;","","    // Reject paths that contain \"..\".","    if (pathname.indexOf('..') !== -1)","      return conn.text(403, 'Forbidden');","","    var path = joinPaths(root, pathname);","","    return getFileStats(path).then(function (stats) {","      if (stats && stats.isFile())","        return sendFile(conn, path, stats);","","      if (!stats || !stats.isDirectory())","        return conn.call(app);","","      // Try to serve one of the index files.","      var indexPaths = index.map(function (indexPath) {","        return joinPaths(path, indexPath);","      });","","      return Promise.all(indexPaths.map(getFileStats)).then(function (stats) {","        for (var i = 0, len = stats.length; i < len; ++i)","          if (stats[i])","            return sendFile(conn, indexPaths[i], stats[i]);","","        if (!options.autoIndex)","          return conn.call(app);","","        // Redirect /images => /images/","        if (!(/\\/$/).test(pathname))","          return conn.redirect(pathname + '/');","","        // Automatically generate and serve an index file.","        return generateIndex(root, pathname, conn.basename).then(function (html) {","          conn.html(html);","        });","      });","    });","  };","}","","module.exports = file;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"65":1,"67":0,"68":0,"69":0,"72":0,"75":0,"76":0,"78":0,"79":0,"80":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"91":0,"92":0,"94":1,"95":0,"100":0,"101":0,"103":0,"104":0,"105":0,"110":0,"111":0,"112":0,"114":0,"117":0,"118":0,"120":0,"122":0,"123":0,"124":0,"126":0,"127":0,"130":0,"131":0,"134":0,"135":0,"136":0,"137":0,"139":0,"140":0,"143":0,"144":0,"147":0,"148":0,"155":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/getFileStats.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/getFileStats.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"getFileStats","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":21},"end":{"line":8,"column":48}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":7,"column":0},"end":{"line":17,"column":1}},"4":{"start":{"line":8,"column":2},"end":{"line":16,"column":5}},"5":{"start":{"line":9,"column":4},"end":{"line":15,"column":7}},"6":{"start":{"line":10,"column":6},"end":{"line":14,"column":7}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":22}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":31}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":6},"end":{"line":10,"column":6}},{"start":{"line":10,"column":6},"end":{"line":10,"column":6}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":10},"end":{"line":10,"column":15}},{"start":{"line":10,"column":19},"end":{"line":10,"column":42}}]},"3":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":16},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":29}}]}},"code":["var fs = require('fs');","var Promise = require('./Promise');","","/**"," * Returns stats for the given file or null if it doesn't exist."," */","function getFileStats(path) {","  return new Promise(function (resolve, reject) {","    fs.stat(path, function (error, stats) {","      if (error && error.code !== 'ENOENT') {","        reject(error);","      } else {","        resolve(stats || null);","      }","    });","  });","}","","module.exports = getFileStats;",""],"l":{"1":1,"2":1,"7":1,"8":0,"9":0,"10":0,"11":0,"13":0,"19":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/generateETag.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/generateETag.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"generateETag","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":28}}},"2":{"name":"(anonymous_2)","line":6,"loc":{"start":{"line":6,"column":21},"end":{"line":6,"column":48}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":22},"end":{"line":7,"column":45}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"4":{"start":{"line":5,"column":0},"end":{"line":15,"column":1}},"5":{"start":{"line":6,"column":2},"end":{"line":14,"column":5}},"6":{"start":{"line":7,"column":4},"end":{"line":13,"column":7}},"7":{"start":{"line":8,"column":6},"end":{"line":12,"column":7}},"8":{"start":{"line":9,"column":8},"end":{"line":9,"column":22}},"9":{"start":{"line":11,"column":8},"end":{"line":11,"column":81}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":30}}},"branchMap":{"1":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":6},"end":{"line":8,"column":6}},{"start":{"line":8,"column":6},"end":{"line":8,"column":6}}]}},"code":["var fs = require('fs');","var crypto = require('crypto');","var Promise = require('./Promise');","","function generateETag(path) {","  return new Promise(function (resolve, reject) {","    fs.readFile(path, function (error, data) {","      if (error) {","        reject(error);","      } else {","        resolve('\"' + crypto.createHash('md5').update(data).digest('hex') + '\"');","      }","    });","  });","}","","module.exports = generateETag;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"7":0,"8":0,"9":0,"11":0,"17":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/generateIndex.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/generateIndex.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"generateIndex","line":52,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":49}}},"2":{"name":"(anonymous_2)","line":53,"loc":{"start":{"line":53,"column":21},"end":{"line":53,"column":48}}},"3":{"name":"(anonymous_3)","line":56,"loc":{"start":{"line":56,"column":21},"end":{"line":56,"column":45}}},"4":{"name":"(anonymous_4)","line":60,"loc":{"start":{"line":60,"column":31},"end":{"line":60,"column":47}}},"5":{"name":"(anonymous_5)","line":64,"loc":{"start":{"line":64,"column":33},"end":{"line":64,"column":55}}},"6":{"name":"(anonymous_6)","line":68,"loc":{"start":{"line":68,"column":27},"end":{"line":68,"column":51}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":42}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"9":{"start":{"line":11,"column":0},"end":{"line":41,"column":13}},"10":{"start":{"line":43,"column":0},"end":{"line":50,"column":13}},"11":{"start":{"line":52,"column":0},"end":{"line":99,"column":1}},"12":{"start":{"line":53,"column":2},"end":{"line":98,"column":5}},"13":{"start":{"line":54,"column":4},"end":{"line":54,"column":41}},"14":{"start":{"line":56,"column":4},"end":{"line":97,"column":7}},"15":{"start":{"line":57,"column":6},"end":{"line":58,"column":29}},"16":{"start":{"line":58,"column":8},"end":{"line":58,"column":29}},"17":{"start":{"line":60,"column":6},"end":{"line":62,"column":9}},"18":{"start":{"line":61,"column":8},"end":{"line":61,"column":51}},"19":{"start":{"line":64,"column":6},"end":{"line":96,"column":17}},"20":{"start":{"line":65,"column":8},"end":{"line":65,"column":89}},"21":{"start":{"line":66,"column":8},"end":{"line":66,"column":31}},"22":{"start":{"line":68,"column":8},"end":{"line":90,"column":11}},"23":{"start":{"line":69,"column":10},"end":{"line":70,"column":19}},"24":{"start":{"line":70,"column":12},"end":{"line":70,"column":19}},"25":{"start":{"line":72,"column":10},"end":{"line":72,"column":34}},"26":{"start":{"line":73,"column":10},"end":{"line":73,"column":47}},"27":{"start":{"line":74,"column":10},"end":{"line":74,"column":34}},"28":{"start":{"line":76,"column":10},"end":{"line":76,"column":25}},"29":{"start":{"line":77,"column":10},"end":{"line":85,"column":11}},"30":{"start":{"line":78,"column":12},"end":{"line":78,"column":23}},"31":{"start":{"line":79,"column":12},"end":{"line":79,"column":31}},"32":{"start":{"line":80,"column":12},"end":{"line":80,"column":23}},"33":{"start":{"line":81,"column":12},"end":{"line":81,"column":24}},"34":{"start":{"line":83,"column":12},"end":{"line":83,"column":46}},"35":{"start":{"line":84,"column":12},"end":{"line":84,"column":37}},"36":{"start":{"line":87,"column":10},"end":{"line":87,"column":93}},"37":{"start":{"line":89,"column":10},"end":{"line":89,"column":62}},"38":{"start":{"line":92,"column":8},"end":{"line":92,"column":54}},"39":{"start":{"line":93,"column":8},"end":{"line":93,"column":92}},"40":{"start":{"line":95,"column":8},"end":{"line":95,"column":25}},"41":{"start":{"line":101,"column":0},"end":{"line":101,"column":31}}},"branchMap":{"1":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":6},"end":{"line":57,"column":6}},{"start":{"line":57,"column":6},"end":{"line":57,"column":6}}]},"2":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":10},"end":{"line":69,"column":10}},{"start":{"line":69,"column":10},"end":{"line":69,"column":10}}]},"3":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":10},"end":{"line":77,"column":10}},{"start":{"line":77,"column":10},"end":{"line":77,"column":10}}]},"4":{"line":89,"type":"cond-expr","locations":[{"start":{"line":89,"column":47},"end":{"line":89,"column":52}},{"start":{"line":89,"column":55},"end":{"line":89,"column":61}}]}},"code":["var fs = require('fs');","var Promise = require('./Promise');","var getFileStats = require('./getFileStats');","var getMimeType = require('./getMimeType');","var formatByteSize = require('./formatByteSize');","var formatString = require('util').format;","var joinPaths = require('./joinPaths');","","var MACH_VERSION = require('../version');","","var PAGE_TEMPLATE = [","  '<html>',","  '<head>',","  '<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />',","  '<title>%s</title>',","  '<style type=\"text/css\">',","  '  body { font: 14px Helvetica, Arial, sans-serif; padding: 0 10px; }',","  '  address { text-align: right; font-style: italic; }',","  '  table { width: 100%; }',","  '  tr.even { background: #f3f3f3; }',","  '  .name { text-align: left; }',","  '  .size, .type, .mtime { text-align: right; }',","  '</style>',","  '</head>',","  '<body>',","  '<h1>%s</h1>',","  '<hr>',","  '<table cellspacing=\"0\" cellpadding=\"3\">',","  '<tr>',","  '  <th class=\"name\">Name</th>',","  '  <th class=\"size\">Size</th>',","  '  <th class=\"type\">Type</th>',","  '  <th class=\"mtime\">Last Modified</th>',","  '</tr>',","  '%s',","  '</table>',","  '<hr>',","  '<address>%s/%s</address>',","  '</body>',","  '</html>'","].join('\\n');","","var ROW_TEMPLATE = [","  '<tr class=\"%s\">',","  '  <td class=\"name\"><a href=\"%s\">%s</a></td>',","  '  <td class=\"size\">%s</td>',","  '  <td class=\"type\">%s</td>',","  '  <td class=\"mtime\">%s</td>',","  '</tr>'","].join('\\n');","","function generateIndex(root, pathname, basename) {","  return new Promise(function (resolve, reject) {","    var path = joinPaths(root, pathname);","","    fs.readdir(path, function (error, files) {","      if (error)","        return reject(error);","","      var promises = files.map(function (file) {","        return getFileStats(joinPaths(path, file));","      });","","      Promise.all(promises).then(function (statsArray) {","        var rows = formatString(ROW_TEMPLATE, '', '../', 'Parent Directory', '', '', '');","        var className = 'even';","","        statsArray.forEach(function (stats, index) {","          if (stats == null)","            return; // Ignore broken symlinks!","","          var file = files[index];","          var url = basename + pathname + file;","          var mtime = stats.mtime;","","          var size, type;","          if (stats.isDirectory()) {","            size = '-';","            type = 'directory';","            url += '/';","            file += '/';","          } else {","            size = formatByteSize(stats.size);","            type = getMimeType(file);","          }","","          rows += '\\n' + formatString(ROW_TEMPLATE, className, url, file, size, type, mtime);","","          className = (className === 'even') ? 'odd' : 'even';","        });","","        var title = 'Index of ' + basename + pathname;","        var content = formatString(PAGE_TEMPLATE, title, title, rows, 'mach', MACH_VERSION);","","        resolve(content);","      }, reject);","    });","  });","}","","module.exports = generateIndex;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"11":1,"43":1,"52":1,"53":0,"54":0,"56":0,"57":0,"58":0,"60":0,"61":0,"64":0,"65":0,"66":0,"68":0,"69":0,"70":0,"72":0,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"83":0,"84":0,"87":0,"89":0,"92":0,"93":0,"95":0,"101":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/formatByteSize.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/formatByteSize.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"formatByteSize","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":43}},"2":{"start":{"line":3,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":72}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":38}},"5":{"start":{"line":7,"column":2},"end":{"line":8,"column":32}},"6":{"start":{"line":8,"column":4},"end":{"line":8,"column":32}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":36}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}}},"branchMap":{"1":{"line":4,"type":"cond-expr","locations":[{"start":{"line":4,"column":24},"end":{"line":4,"column":67}},{"start":{"line":4,"column":70},"end":{"line":4,"column":71}}]},"2":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":2},"end":{"line":7,"column":2}},{"start":{"line":7,"column":2},"end":{"line":7,"column":2}}]}},"code":["var SUFFIXES = [ 'B', 'K', 'M', 'G', 'T' ];","","function formatByteSize(size) {","  var tier = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;","  var n = size / Math.pow(1024, tier);","","  if (tier > 0)","    n = Math.floor(n * 10) / 10; // Preserve only 1 digit after decimal.","","  return String(n) + SUFFIXES[tier];","}","","module.exports = formatByteSize;",""],"l":{"1":1,"3":1,"4":0,"5":0,"7":0,"8":0,"10":0,"13":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/joinPaths.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/joinPaths.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":38}}},"branchMap":{},"code":["module.exports = require('path').join;",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/gzip.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/gzip.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"shouldGzipContentType","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}}},"2":{"name":"gzip","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":9},"end":{"line":22,"column":25}}},"4":{"name":"(anonymous_4)","line":23,"loc":{"start":{"line":23,"column":31},"end":{"line":23,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"3":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":43}},"5":{"start":{"line":10,"column":0},"end":{"line":15,"column":1}},"6":{"start":{"line":11,"column":2},"end":{"line":12,"column":17}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":17}},"8":{"start":{"line":14,"column":2},"end":{"line":14,"column":40}},"9":{"start":{"line":21,"column":0},"end":{"line":36,"column":1}},"10":{"start":{"line":22,"column":2},"end":{"line":35,"column":4}},"11":{"start":{"line":23,"column":4},"end":{"line":34,"column":7}},"12":{"start":{"line":24,"column":6},"end":{"line":24,"column":35}},"13":{"start":{"line":25,"column":6},"end":{"line":25,"column":37}},"14":{"start":{"line":27,"column":6},"end":{"line":33,"column":7}},"15":{"start":{"line":28,"column":8},"end":{"line":28,"column":75}},"16":{"start":{"line":30,"column":8},"end":{"line":30,"column":41}},"17":{"start":{"line":31,"column":8},"end":{"line":31,"column":45}},"18":{"start":{"line":32,"column":8},"end":{"line":32,"column":44}},"19":{"start":{"line":38,"column":0},"end":{"line":38,"column":22}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]},"2":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":6},"end":{"line":11,"column":18}},{"start":{"line":11,"column":22},"end":{"line":11,"column":57}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"4":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":10},"end":{"line":27,"column":56}},{"start":{"line":27,"column":60},"end":{"line":27,"column":88}}]}},"code":["var zlib = require('zlib');","var mach = require('../index');","","mach.extend(","  require('../extensions/acceptEncoding')",");","","var GZIP_MATCHER = /text|javascript|json/i;","","function shouldGzipContentType(contentType) {","  if (!contentType || contentType === 'text/event-stream')","    return false;","","  return GZIP_MATCHER.test(contentType);","}","","/**"," * A middleware that gzip's the response content (see http://www.gzip.org/)."," * Options may be any of node's zlib options (see http://nodejs.org/api/zlib.html)."," */","function gzip(app, options) {","  return function (conn) {","    return conn.call(app).then(function () {","      var response = conn.response;","      var headers = response.headers;","","      if (shouldGzipContentType(headers['Content-Type']) && conn.acceptsEncoding('gzip')) {","        response.content = response.content.pipe(zlib.createGzip(options));","","        delete headers['Content-Length'];","        headers['Content-Encoding'] = 'gzip';","        headers['Vary'] = 'Accept-Encoding';","      }","    });","  };","}","","module.exports = gzip;",""],"l":{"1":1,"2":1,"4":1,"8":1,"10":1,"11":0,"12":0,"14":0,"21":1,"22":0,"23":0,"24":0,"25":0,"27":0,"28":0,"30":0,"31":0,"32":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/logger.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/logger.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"defaultMessageHandler","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":40}}},"2":{"name":"logger","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":9},"end":{"line":17,"column":25}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":31},"end":{"line":20,"column":43}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":44}},"2":{"start":{"line":4,"column":0},"end":{"line":7,"column":1}},"3":{"start":{"line":5,"column":2},"end":{"line":6,"column":25}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":25}},"5":{"start":{"line":14,"column":0},"end":{"line":43,"column":1}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":59}},"7":{"start":{"line":17,"column":2},"end":{"line":42,"column":4}},"8":{"start":{"line":18,"column":4},"end":{"line":18,"column":31}},"9":{"start":{"line":20,"column":4},"end":{"line":41,"column":7}},"10":{"start":{"line":21,"column":6},"end":{"line":21,"column":47}},"11":{"start":{"line":22,"column":6},"end":{"line":22,"column":66}},"12":{"start":{"line":24,"column":6},"end":{"line":25,"column":28}},"13":{"start":{"line":25,"column":8},"end":{"line":25,"column":28}},"14":{"start":{"line":27,"column":6},"end":{"line":27,"column":46}},"15":{"start":{"line":28,"column":6},"end":{"line":28,"column":71}},"16":{"start":{"line":31,"column":6},"end":{"line":40,"column":19}},"17":{"start":{"line":45,"column":0},"end":{"line":45,"column":24}}},"branchMap":{"1":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":2},"end":{"line":5,"column":2}},{"start":{"line":5,"column":2},"end":{"line":5,"column":2}}]},"2":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":6},"end":{"line":5,"column":36}},{"start":{"line":5,"column":40},"end":{"line":5,"column":51}}]},"3":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":19},"end":{"line":15,"column":33}},{"start":{"line":15,"column":37},"end":{"line":15,"column":58}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":6},"end":{"line":24,"column":6}},{"start":{"line":24,"column":6},"end":{"line":24,"column":6}}]},"5":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":21},"end":{"line":27,"column":34}},{"start":{"line":27,"column":38},"end":{"line":27,"column":45}}]},"6":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":23}},{"start":{"line":32,"column":27},"end":{"line":32,"column":30}}]},"7":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":23}},{"start":{"line":34,"column":27},"end":{"line":34,"column":30}}]}},"code":["/* jshint -W058 */","var strftime = require('strftime').strftime;","","function defaultMessageHandler(message) {","  if (typeof console !== 'undefined' && console.log)","    console.log(message);","}","","/**"," * A middleware that writes log entry data about the response to a given stream."," * Log entries are formatted similarly to Apache httpd's Common Log Format"," * (see http://httpd.apache.org/docs/1.3/logs.html#common)."," */","function logger(app, messageHandler) {","  messageHandler = messageHandler || defaultMessageHandler;","","  return function (conn) {","    var startTime = Date.now();","","    return conn.call(app).then(function () {","      var elapsedTime = Date.now() - startTime;","      var contentLength = conn.response.headers['Content-Length'];","","      if (contentLength == null)","        contentLength = '-';","","      var protocol = conn.protocol || 'http:';","      protocol = protocol.substr(0, protocol.length - 1).toUpperCase();","","      // 127.0.0.1 - frank [10/Oct/2000 13:55:36] \"GET /apache_pb.gif HTTP/1.0\" 200 2326 0.003","      messageHandler([","        conn.remoteHost || '-',","        '-', // RFC 1413 identity of the client","        conn.remoteUser || '-',","        '[' + strftime('%d/%b/%Y %H:%M:%S', new Date) + ']',","        '\"' + conn.method + ' ' + conn.basename + conn.path + ' ' + protocol + '/' + conn.version + '\"',","        conn.status,","        contentLength,","        elapsedTime / 1000","      ].join(' '));","    });","  };","}","","module.exports = logger;",""],"l":{"2":1,"4":1,"5":0,"6":0,"14":1,"15":0,"17":0,"18":0,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"28":0,"31":0,"45":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/mapper.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/mapper.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"byMostSpecific","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}}},"2":{"name":"createMapper","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":32}}},"3":{"name":"mapper","line":59,"loc":{"start":{"line":59,"column":2},"end":{"line":59,"column":24}}},"4":{"name":"(anonymous_4)","line":94,"loc":{"start":{"line":94,"column":11},"end":{"line":94,"column":36}}},"5":{"name":"(anonymous_5)","line":126,"loc":{"start":{"line":126,"column":11},"end":{"line":126,"column":36}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":52}},"3":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":92}},"5":{"start":{"line":50,"column":0},"end":{"line":139,"column":1}},"6":{"start":{"line":52,"column":2},"end":{"line":55,"column":3}},"7":{"start":{"line":53,"column":4},"end":{"line":53,"column":14}},"8":{"start":{"line":54,"column":4},"end":{"line":54,"column":15}},"9":{"start":{"line":57,"column":2},"end":{"line":57,"column":20}},"10":{"start":{"line":59,"column":2},"end":{"line":86,"column":3}},"11":{"start":{"line":60,"column":4},"end":{"line":60,"column":33}},"12":{"start":{"line":61,"column":4},"end":{"line":61,"column":33}},"13":{"start":{"line":63,"column":4},"end":{"line":63,"column":38}},"14":{"start":{"line":64,"column":4},"end":{"line":83,"column":5}},"15":{"start":{"line":65,"column":6},"end":{"line":65,"column":28}},"16":{"start":{"line":68,"column":6},"end":{"line":69,"column":17}},"17":{"start":{"line":69,"column":8},"end":{"line":69,"column":17}},"18":{"start":{"line":72,"column":6},"end":{"line":73,"column":17}},"19":{"start":{"line":73,"column":8},"end":{"line":73,"column":17}},"20":{"start":{"line":76,"column":6},"end":{"line":76,"column":31}},"21":{"start":{"line":77,"column":6},"end":{"line":78,"column":17}},"22":{"start":{"line":78,"column":8},"end":{"line":78,"column":17}},"23":{"start":{"line":80,"column":6},"end":{"line":80,"column":36}},"24":{"start":{"line":82,"column":6},"end":{"line":82,"column":36}},"25":{"start":{"line":85,"column":4},"end":{"line":85,"column":26}},"26":{"start":{"line":88,"column":2},"end":{"line":130,"column":5}},"27":{"start":{"line":95,"column":6},"end":{"line":95,"column":25}},"28":{"start":{"line":98,"column":6},"end":{"line":98,"column":60}},"29":{"start":{"line":99,"column":6},"end":{"line":104,"column":7}},"30":{"start":{"line":100,"column":8},"end":{"line":100,"column":49}},"31":{"start":{"line":101,"column":8},"end":{"line":101,"column":24}},"32":{"start":{"line":103,"column":8},"end":{"line":103,"column":24}},"33":{"start":{"line":106,"column":6},"end":{"line":107,"column":80}},"34":{"start":{"line":107,"column":8},"end":{"line":107,"column":80}},"35":{"start":{"line":109,"column":6},"end":{"line":109,"column":37}},"36":{"start":{"line":111,"column":6},"end":{"line":111,"column":88}},"37":{"start":{"line":113,"column":6},"end":{"line":118,"column":9}},"38":{"start":{"line":120,"column":6},"end":{"line":120,"column":36}},"39":{"start":{"line":127,"column":6},"end":{"line":127,"column":26}},"40":{"start":{"line":133,"column":2},"end":{"line":136,"column":44}},"41":{"start":{"line":134,"column":4},"end":{"line":136,"column":44}},"42":{"start":{"line":135,"column":6},"end":{"line":136,"column":44}},"43":{"start":{"line":136,"column":8},"end":{"line":136,"column":44}},"44":{"start":{"line":138,"column":2},"end":{"line":138,"column":16}},"45":{"start":{"line":141,"column":0},"end":{"line":141,"column":30}}},"branchMap":{"1":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":10},"end":{"line":5,"column":39}},{"start":{"line":5,"column":45},"end":{"line":5,"column":90}}]},"2":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":46},"end":{"line":5,"column":52}},{"start":{"line":5,"column":56},"end":{"line":5,"column":58}}]},"3":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":70},"end":{"line":5,"column":76}},{"start":{"line":5,"column":80},"end":{"line":5,"column":82}}]},"4":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":2},"end":{"line":52,"column":2}},{"start":{"line":52,"column":2},"end":{"line":52,"column":2}}]},"5":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":6},"end":{"line":68,"column":6}},{"start":{"line":68,"column":6},"end":{"line":68,"column":6}}]},"6":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":10},"end":{"line":68,"column":26}},{"start":{"line":68,"column":30},"end":{"line":68,"column":59}}]},"7":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":6},"end":{"line":72,"column":6}},{"start":{"line":72,"column":6},"end":{"line":72,"column":6}}]},"8":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":6},"end":{"line":77,"column":6}},{"start":{"line":77,"column":6},"end":{"line":77,"column":6}}]},"9":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":10},"end":{"line":77,"column":34}},{"start":{"line":77,"column":38},"end":{"line":77,"column":62}}]},"10":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":6}},{"start":{"line":99,"column":6},"end":{"line":99,"column":6}}]},"11":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":6},"end":{"line":106,"column":6}},{"start":{"line":106,"column":6},"end":{"line":106,"column":6}}]},"12":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":2},"end":{"line":133,"column":2}},{"start":{"line":133,"column":2},"end":{"line":133,"column":2}}]},"13":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":6},"end":{"line":135,"column":6}},{"start":{"line":135,"column":6},"end":{"line":135,"column":6}}]}},"code":["var d = require('describe-property');","var escapeRegExp = require('../utils/escapeRegExp');","","function byMostSpecific(a, b) {","  return (b.path.length - a.path.length) || ((b.host || '').length - (a.host || '').length);","}","","/**"," * A middleware that provides host and/or location-based routing. Modifies"," * the `basename` connection variable for all downstream apps such that only"," * the portion relevant for dispatch remains in `pathname`."," *"," *   app.use(mach.mapper, {"," *"," *     'http://example.com/images': function (conn) {"," *       // The hostname used in the request was example.com, and"," *       // the URL path started with \"/images\". If the request was"," *       // GET /images/avatar.jpg, then conn.pathname is /avatar.jpg"," *     },"," *"," *     '/images': function (conn) {"," *       // The URL path started with \"/images\""," *     }"," *"," *   });"," *"," * This function may also be used outside of the context of a middleware"," * stack to create a standalone app. You can either provide mappings one"," * at a time:"," *"," *   var app = mach.mapper();"," *"," *   app.map('/images', function (conn) {"," *     // ..."," *   });"," *"," * Or all at once:"," *"," *   var app = mach.mapper({"," *"," *     '/images': function (conn) {"," *       // ..."," *     }"," *"," *   });"," *"," * Note: Dispatch is done in such a way that the longest paths are tried first"," * since they are the most specific."," */","function createMapper(app, map) {","  // Allow mach.mapper(map)","  if (typeof app === 'object') {","    map = app;","    app = null;","  }","  ","  var mappings = [];","","  function mapper(conn) {","    var hostname = conn.hostname;","    var pathname = conn.pathname;","","    var mapping, match, remainingPath;","    for (var i = 0, len = mappings.length; i < len; ++i) {","      mapping = mappings[i];","","      // Try to match the hostname.","      if (mapping.hostname && mapping.hostname !== hostname)","        continue;","","      // Try to match the path.","      if (!(match = pathname.match(mapping.pattern))) ","        continue;","","      // Skip if the remaining path doesn't start with a \"/\".","      remainingPath = match[1];","      if (remainingPath.length > 0 && remainingPath[0] !== '/')","        continue;","","      conn.basename += mapping.path;","","      return conn.call(mapping.app);","    }","","    return conn.call(app);","  }","","  Object.defineProperties(mapper, {","","    /**","     * Adds a new mapping that runs the given app when the location used in the","     * request matches the given location.","     */","    map: d(function (location, app) {","      var hostname, path;","","      // If the location is a fully qualified URL use the host as well.","      var match = location.match(/^https?:\\/\\/(.*?)(\\/.*)/);","      if (match) {","        hostname = match[1].replace(/:\\d+$/, ''); // Strip the port.","        path = match[2];","      } else {","        path = location;","      }","","      if (path.charAt(0) !== '/')","        throw new Error('Mapping path must start with \"/\", was \"' + path + '\"');","","      path = path.replace(/\\/$/, '');","","      var pattern = new RegExp('^' + escapeRegExp(path).replace(/\\/+/g, '/+') + '(.*)');","","      mappings.push({","        hostname: hostname,","        path: path,","        pattern: pattern,","        app: app","      });","","      mappings.sort(byMostSpecific);","    }),","","    /**","     * Sets the given app as the default for this mapper.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","    })","","  });","","  // Allow app.use(mach.mapper, map)","  if (typeof map === 'object')","    for (var location in map)","      if (map.hasOwnProperty(location))","        mapper.map(location, map[location]);","","  return mapper;","}","","module.exports = createMapper;",""],"l":{"1":1,"2":1,"4":1,"5":0,"50":1,"52":0,"53":0,"54":0,"57":0,"59":1,"60":0,"61":0,"63":0,"64":0,"65":0,"68":0,"69":0,"72":0,"73":0,"76":0,"77":0,"78":0,"80":0,"82":0,"85":0,"88":0,"95":0,"98":0,"99":0,"100":0,"101":0,"103":0,"106":0,"107":0,"109":0,"111":0,"113":0,"120":0,"127":0,"133":0,"134":0,"135":0,"136":0,"138":0,"141":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/escapeRegExp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/escapeRegExp.js","s":{"1":1,"2":0,"3":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"escapeRegExp","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":65}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":30}}},"branchMap":{},"code":["/**"," * Escapes all special RegExp characters in the given string."," */","function escapeRegExp(string) {","  return String(string).replace(/([.?*+^$[\\]\\\\(){}-])/g, '\\\\$1');","}","","module.exports = escapeRegExp;",""],"l":{"4":1,"5":0,"8":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/methodOverride.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/methodOverride.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"methodOverride","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":38}}},"2":{"name":"(anonymous_2)","line":45,"loc":{"start":{"line":45,"column":9},"end":{"line":45,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":66}},"2":{"start":{"line":36,"column":0},"end":{"line":64,"column":1}},"3":{"start":{"line":37,"column":2},"end":{"line":37,"column":26}},"4":{"start":{"line":39,"column":2},"end":{"line":40,"column":37}},"5":{"start":{"line":40,"column":4},"end":{"line":40,"column":37}},"6":{"start":{"line":42,"column":2},"end":{"line":42,"column":49}},"7":{"start":{"line":43,"column":2},"end":{"line":43,"column":87}},"8":{"start":{"line":45,"column":2},"end":{"line":63,"column":4}},"9":{"start":{"line":46,"column":4},"end":{"line":46,"column":15}},"10":{"start":{"line":47,"column":4},"end":{"line":57,"column":5}},"11":{"start":{"line":48,"column":6},"end":{"line":48,"column":48}},"12":{"start":{"line":49,"column":11},"end":{"line":57,"column":5}},"13":{"start":{"line":50,"column":6},"end":{"line":50,"column":92}},"14":{"start":{"line":51,"column":11},"end":{"line":57,"column":5}},"15":{"start":{"line":52,"column":6},"end":{"line":52,"column":38}},"16":{"start":{"line":55,"column":6},"end":{"line":56,"column":43}},"17":{"start":{"line":56,"column":8},"end":{"line":56,"column":43}},"18":{"start":{"line":59,"column":4},"end":{"line":60,"column":41}},"19":{"start":{"line":60,"column":6},"end":{"line":60,"column":41}},"20":{"start":{"line":62,"column":4},"end":{"line":62,"column":26}},"21":{"start":{"line":66,"column":0},"end":{"line":66,"column":32}}},"branchMap":{"1":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":19}},{"start":{"line":37,"column":23},"end":{"line":37,"column":25}}]},"2":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":2},"end":{"line":39,"column":2}},{"start":{"line":39,"column":2},"end":{"line":39,"column":2}}]},"3":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":18},"end":{"line":42,"column":35}},{"start":{"line":42,"column":39},"end":{"line":42,"column":48}}]},"4":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":39},"end":{"line":43,"column":57}},{"start":{"line":43,"column":61},"end":{"line":43,"column":85}}]},"5":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"6":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":11},"end":{"line":49,"column":11}},{"start":{"line":49,"column":11},"end":{"line":49,"column":11}}]},"7":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":11},"end":{"line":51,"column":11}},{"start":{"line":51,"column":11},"end":{"line":51,"column":11}}]},"8":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":6},"end":{"line":55,"column":6}},{"start":{"line":55,"column":6},"end":{"line":55,"column":6}}]},"9":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]}},"code":["var normalizeHeaderName = require('../utils/normalizeHeaderName');","","/**"," * A middleware that overrides the method of the request to a value that was"," * given either in a request parameter or a request header. Can be useful when"," * you need to use HTTP methods other than GET and POST with clients that don't"," * support them, like web browsers."," *"," * For example, you could use the following HTML form:"," *"," *   <form method=\"POST\" action=\"/\">"," *     <input type=\"hidden\" name=\"_method\" value=\"PUT\">"," *   </form>"," *"," * with an app that uses methodOverride:"," *"," *   var app = mach.stack();"," *   app.use(mach.params);"," *   app.use(mach.methodOverride);"," *   app.run(function (request) {"," *     return request.method; // PUT"," *   });"," *"," * Note: When using mach.methodOverride with POST parameters you need to put"," * mach.params in front of it so that the request parameters will be available."," *"," * Options may be any of the following:"," *"," * - paramName        The name of the request param that contains the"," *                    request method. Defaults to \"_method\""," * - headerName       The name of the HTTP header that will contain the"," *                    request method. This allows you to put the request"," *                    method in an HTTP header instead of a request param."," *                    Defaults to \"X-Http-Method-Override\""," */","function methodOverride(app, options) {","  options = options || {};","","  if (typeof options === 'string')","    options = { paramName: options };","","  var paramName = options.paramName || '_method';","  var headerName = normalizeHeaderName(options.headerName || 'X-Http-Method-Override');","","  return function (conn) {","    var method;","    if (conn.request.headers[headerName]) {","      method = conn.request.headers[headerName];","    } else if (!conn.params) {","      conn.onError(new Error('No params! Use mach.params in front of mach.methodOverride'));","    } else if (conn.params[paramName]) {","      method = conn.params[paramName];","","      // If multiple _method parameters were used, use the last one.","      if (Array.isArray(method))","        method = method[method.length - 1];","    }","","    if (method)","      conn.method = method.toUpperCase();","","    return conn.call(app);","  };","}","","module.exports = methodOverride;",""],"l":{"1":1,"36":1,"37":0,"39":0,"40":0,"42":0,"43":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"55":0,"56":0,"59":0,"60":0,"62":0,"66":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/modified.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/modified.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"modified","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":23}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":9},"end":{"line":20,"column":25}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":31},"end":{"line":21,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":50}},"2":{"start":{"line":19,"column":0},"end":{"line":47,"column":1}},"3":{"start":{"line":20,"column":2},"end":{"line":46,"column":4}},"4":{"start":{"line":21,"column":4},"end":{"line":45,"column":7}},"5":{"start":{"line":22,"column":6},"end":{"line":22,"column":59}},"6":{"start":{"line":24,"column":6},"end":{"line":24,"column":57}},"7":{"start":{"line":25,"column":6},"end":{"line":25,"column":42}},"8":{"start":{"line":27,"column":6},"end":{"line":31,"column":7}},"9":{"start":{"line":28,"column":8},"end":{"line":28,"column":26}},"10":{"start":{"line":29,"column":8},"end":{"line":29,"column":30}},"11":{"start":{"line":30,"column":8},"end":{"line":30,"column":15}},"12":{"start":{"line":33,"column":6},"end":{"line":33,"column":65}},"13":{"start":{"line":34,"column":6},"end":{"line":34,"column":59}},"14":{"start":{"line":36,"column":6},"end":{"line":44,"column":7}},"15":{"start":{"line":37,"column":8},"end":{"line":38,"column":50}},"16":{"start":{"line":38,"column":10},"end":{"line":38,"column":50}},"17":{"start":{"line":40,"column":8},"end":{"line":43,"column":9}},"18":{"start":{"line":41,"column":10},"end":{"line":41,"column":28}},"19":{"start":{"line":42,"column":10},"end":{"line":42,"column":32}},"20":{"start":{"line":49,"column":0},"end":{"line":49,"column":26}}},"branchMap":{"1":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"2":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":10},"end":{"line":27,"column":21}},{"start":{"line":27,"column":25},"end":{"line":27,"column":29}},{"start":{"line":27,"column":33},"end":{"line":27,"column":66}}]},"3":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":36,"column":6}},{"start":{"line":36,"column":6},"end":{"line":36,"column":6}}]},"4":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":10},"end":{"line":36,"column":25}},{"start":{"line":36,"column":29},"end":{"line":36,"column":41}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]}},"code":["var stripQuotes = require('../utils/stripQuotes');","","/**"," * A middleware that automatically performs content-based HTTP caching in"," * response to requests that use the If-None-Match and/or If-Modified-Since"," * headers. In order to work effectively, downstream apps must use the ETag"," * and/or Last-Modified headers."," *"," * Example:"," *"," *   app.use(mach.modified);"," *"," *   // Send Last-Modified and ETag headers with static files."," *   app.use(mach.file, {"," *     useLastModified: true, // this is the default"," *     useETag: true"," *   });"," */","function modified(app) {","  return function (conn) {","    return conn.call(app).then(function () {","      var request = conn.request, response = conn.response;","","      var ifNoneMatch = request.headers['If-None-Match'];","      var etag = response.headers['ETag'];","","      if (ifNoneMatch && etag && etag === stripQuotes(ifNoneMatch)) {","        conn.status = 304;","        response.content = '';","        return;","      }","","      var ifModifiedSince = request.headers['If-Modified-Since'];","      var lastModified = response.headers['Last-Modified'];","","      if (ifModifiedSince && lastModified) {","        if (typeof lastModified === 'string')","          lastModified = Date.parse(lastModified);","","        if (lastModified <= Date.parse(ifModifiedSince)) {","          conn.status = 304;","          response.content = '';","        }","      }","    });","  };","}","","module.exports = modified;",""],"l":{"1":1,"19":1,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"28":0,"29":0,"30":0,"33":0,"34":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"49":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stripQuotes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/stripQuotes.js","s":{"1":1,"2":0,"3":0,"4":0,"5":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"stripQuotes","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":6,"column":1}},"2":{"start":{"line":2,"column":2},"end":{"line":3,"column":40}},"3":{"start":{"line":3,"column":4},"end":{"line":3,"column":40}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":16}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}}},"branchMap":{"1":{"line":2,"type":"if","locations":[{"start":{"line":2,"column":2},"end":{"line":2,"column":2}},{"start":{"line":2,"column":2},"end":{"line":2,"column":2}}]}},"code":["function stripQuotes(string) {","  if (string.substring(0, 1) === '\"')","    return string.replace(/^\"|\"$/g, '');","","  return string;","}","","module.exports = stripQuotes;",""],"l":{"1":1,"2":0,"3":0,"5":0,"8":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/params.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/params.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"parseParams","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":35}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":9},"end":{"line":33,"column":25}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":42},"end":{"line":34,"column":60}}},"4":{"name":"(anonymous_4)","line":43,"loc":{"start":{"line":43,"column":7},"end":{"line":43,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":44}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":72}},"4":{"start":{"line":5,"column":0},"end":{"line":7,"column":2}},"5":{"start":{"line":25,"column":0},"end":{"line":50,"column":1}},"6":{"start":{"line":26,"column":2},"end":{"line":26,"column":26}},"7":{"start":{"line":28,"column":2},"end":{"line":29,"column":37}},"8":{"start":{"line":29,"column":4},"end":{"line":29,"column":37}},"9":{"start":{"line":31,"column":2},"end":{"line":31,"column":36}},"10":{"start":{"line":33,"column":2},"end":{"line":49,"column":4}},"11":{"start":{"line":34,"column":4},"end":{"line":48,"column":7}},"12":{"start":{"line":35,"column":6},"end":{"line":40,"column":7}},"13":{"start":{"line":37,"column":8},"end":{"line":37,"column":56}},"14":{"start":{"line":39,"column":8},"end":{"line":39,"column":29}},"15":{"start":{"line":42,"column":6},"end":{"line":42,"column":28}},"16":{"start":{"line":44,"column":6},"end":{"line":45,"column":58}},"17":{"start":{"line":45,"column":8},"end":{"line":45,"column":58}},"18":{"start":{"line":47,"column":6},"end":{"line":47,"column":18}},"19":{"start":{"line":52,"column":0},"end":{"line":52,"column":29}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},{"start":{"line":26,"column":23},"end":{"line":26,"column":25}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":28,"column":2}},{"start":{"line":28,"column":2},"end":{"line":28,"column":2}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":6},"end":{"line":35,"column":6}},{"start":{"line":35,"column":6},"end":{"line":35,"column":6}}]},"4":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":6},"end":{"line":44,"column":6}},{"start":{"line":44,"column":6},"end":{"line":44,"column":6}}]}},"code":["var objectAssign = require('object-assign');","var mach = require('../index');","var MaxLengthExceededError = require('../utils/MaxLengthExceededError');","","mach.extend(","  require('../extensions/server')",");","","/**"," * Automatically parses all request parameters and stores them in conn.params."," * This is the union of all GET (query string) and POST (content) parameters,"," * such that all POST parameters with the same name take precedence."," *"," * Valid options are:"," *"," * - maxLength          The maximum length (in bytes) of the request content"," *"," * If the maximum allowed length is exceeded, this middleware returns a"," * 413 Request Entity Too Large response."," *"," * Note: This middleware parses all request parameters for all downstream apps. If"," * you'd prefer to only do this work on some requests and not all, you can use"," * conn.getParams inside your app instead."," */","function parseParams(app, options) {","  options = options || {};","","  if (typeof options === 'number')","    options = { maxLength: options };","","  var maxLength = options.maxLength;","","  return function (conn) {","    return conn.getParams(maxLength).then(function (params) {","      if (conn.params) {","        // Route params take precedence over content params.","        conn.params = objectAssign(params, conn.params);","      } else {","        conn.params = params;","      }","","      return conn.call(app);","    }, function (error) {","      if (error instanceof MaxLengthExceededError)","        return conn.text(413, 'Request Entity Too Large');","","      throw error;","    });","  };","}","","module.exports = parseParams;",""],"l":{"1":1,"2":1,"3":1,"5":1,"25":1,"26":0,"28":0,"29":0,"31":0,"33":0,"34":0,"35":0,"37":0,"39":0,"42":0,"44":0,"45":0,"47":0,"52":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/proxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/proxy.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"returnTrue","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":22}}},"2":{"name":"proxy","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":34}}},"3":{"name":"(anonymous_3)","line":32,"loc":{"start":{"line":32,"column":11},"end":{"line":32,"column":27}}},"4":{"name":"(anonymous_4)","line":48,"loc":{"start":{"line":48,"column":9},"end":{"line":48,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":38}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"4":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":14}},"6":{"start":{"line":27,"column":0},"end":{"line":51,"column":1}},"7":{"start":{"line":28,"column":2},"end":{"line":28,"column":28}},"8":{"start":{"line":30,"column":2},"end":{"line":37,"column":3}},"9":{"start":{"line":31,"column":4},"end":{"line":31,"column":23}},"10":{"start":{"line":32,"column":4},"end":{"line":34,"column":6}},"11":{"start":{"line":33,"column":6},"end":{"line":33,"column":37}},"12":{"start":{"line":35,"column":9},"end":{"line":37,"column":3}},"13":{"start":{"line":36,"column":4},"end":{"line":36,"column":56}},"14":{"start":{"line":39,"column":2},"end":{"line":39,"column":16}},"15":{"start":{"line":40,"column":2},"end":{"line":46,"column":3}},"16":{"start":{"line":41,"column":4},"end":{"line":41,"column":23}},"17":{"start":{"line":42,"column":9},"end":{"line":46,"column":3}},"18":{"start":{"line":43,"column":4},"end":{"line":43,"column":36}},"19":{"start":{"line":45,"column":4},"end":{"line":45,"column":53}},"20":{"start":{"line":48,"column":2},"end":{"line":50,"column":4}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":51}},"22":{"start":{"line":53,"column":0},"end":{"line":53,"column":23}}},"branchMap":{"1":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":9},"end":{"line":28,"column":13}},{"start":{"line":28,"column":17},"end":{"line":28,"column":27}}]},"2":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":30,"column":2}},{"start":{"line":30,"column":2},"end":{"line":30,"column":2}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":9},"end":{"line":35,"column":9}},{"start":{"line":35,"column":9},"end":{"line":35,"column":9}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"5":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":9},"end":{"line":42,"column":9}},{"start":{"line":42,"column":9},"end":{"line":42,"column":9}}]},"6":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":13},"end":{"line":42,"column":39}},{"start":{"line":42,"column":43},"end":{"line":42,"column":69}}]},"7":{"line":49,"type":"cond-expr","locations":[{"start":{"line":49,"column":34},"end":{"line":49,"column":43}},{"start":{"line":49,"column":46},"end":{"line":49,"column":49}}]}},"code":["var Location = require('../Location');","var createProxy = require('../utils/createProxy');","var isRegExp = require('../utils/isRegExp');","","function returnTrue() {","  return true;","}","","/**"," * A middleware that forwards requests that pass the given test function"," * to the given target. If the target is not an app, it should be a string"," * or options hash that is used to create a proxy."," *"," * Example:"," *"," *   var mach = require('mach');"," *   var app = mach.stack();"," *"," *   // Forward all requests to example.com."," *   app.use(mach.proxy, 'http://www.example.com');"," *"," *   // Forward all requests that match \"/images/*.jpg\" to S3."," *   app.use(mach.proxy, 'http://s3.amazon.com/my-bucket', /\\/images/*.jpg/);"," *   "," *   mach.serve(app);"," */","function proxy(app, target, test) {","  test = test || returnTrue;","","  if (isRegExp(test)) {","    var pattern = test;","    test = function (conn) {","      return pattern.test(conn.href);","    };","  } else if (typeof test !== 'function') {","    throw new Error('mach.proxy needs a test function');","  }","","  var targetApp;","  if (typeof target === 'function') {","    targetApp = target;","  } else if (typeof target === 'string' || target instanceof Location) {","    targetApp = createProxy(target);","  } else {","    throw new Error('mach.proxy needs a target app');","  }","","  return function (conn) {","    return conn.call(test(conn) ? targetApp : app);","  };","}","","module.exports = proxy;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"27":1,"28":0,"30":0,"31":0,"32":0,"33":0,"35":0,"36":0,"39":0,"40":0,"41":0,"42":0,"43":0,"45":0,"48":0,"49":0,"53":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createProxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/createProxy.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"createProxy","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":31}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":9},"end":{"line":15,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":38}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":43}},"3":{"start":{"line":11,"column":0},"end":{"line":22,"column":1}},"4":{"start":{"line":12,"column":2},"end":{"line":13,"column":38}},"5":{"start":{"line":13,"column":4},"end":{"line":13,"column":38}},"6":{"start":{"line":15,"column":2},"end":{"line":21,"column":4}},"7":{"start":{"line":18,"column":4},"end":{"line":18,"column":52}},"8":{"start":{"line":20,"column":4},"end":{"line":20,"column":49}},"9":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]}},"code":["var Location = require('../Location');","var sendRequest = require('./sendRequest');","","/**"," * A proxy is a function that is used to forward a request to"," * a different location and return the response."," *"," * This function is part of the low-level API and can generally be"," * used more conveniently through the mach.proxy middleware."," */","function createProxy(location) {","  if (!(location instanceof Location))","    location = new Location(location);","","  return function (conn) {","    // Only concat the path from the connection so the protocol,","    // auth, and host from the original location are preserved.","    conn.proxyLocation = location.concat(conn.path);","","    return sendRequest(conn, conn.proxyLocation);","  };","}","","module.exports = createProxy;",""],"l":{"1":1,"2":1,"11":1,"12":0,"13":0,"15":0,"18":0,"20":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/isRegExp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/isRegExp.js","s":{"1":1,"2":0,"3":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"isRegExp","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":26}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":3,"column":1}},"2":{"start":{"line":2,"column":2},"end":{"line":2,"column":88}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}}},"branchMap":{"1":{"line":2,"type":"binary-expr","locations":[{"start":{"line":2,"column":9},"end":{"line":2,"column":23}},{"start":{"line":2,"column":27},"end":{"line":2,"column":87}}]}},"code":["function isRegExp(object) {","  return object != null && Object.prototype.toString.call(object) === '[object RegExp]';","}","","module.exports = isRegExp;",""],"l":{"1":1,"2":0,"5":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/rewrite.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/rewrite.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"rewrite","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":52}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":44}},"3":{"start":{"line":9,"column":0},"end":{"line":27,"column":1}},"4":{"start":{"line":10,"column":2},"end":{"line":11,"column":60}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":60}},"6":{"start":{"line":13,"column":2},"end":{"line":14,"column":66}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":66}},"8":{"start":{"line":16,"column":2},"end":{"line":16,"column":34}},"9":{"start":{"line":18,"column":2},"end":{"line":26,"column":4}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"11":{"start":{"line":22,"column":4},"end":{"line":23,"column":97}},"12":{"start":{"line":23,"column":6},"end":{"line":23,"column":97}},"13":{"start":{"line":25,"column":4},"end":{"line":25,"column":26}},"14":{"start":{"line":29,"column":0},"end":{"line":29,"column":25}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":2},"end":{"line":10,"column":2}},{"start":{"line":10,"column":2},"end":{"line":10,"column":2}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":2},"end":{"line":13,"column":2}},{"start":{"line":13,"column":2},"end":{"line":13,"column":2}}]},"3":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":16},"end":{"line":16,"column":27}},{"start":{"line":16,"column":31},"end":{"line":16,"column":33}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]}},"code":["var escapeRegExp = require('../utils/escapeRegExp');","var isRegExp = require('../utils/isRegExp');","","/**"," * A middleware that provides URL rewriting behavior similar to Apache's"," * mod_rewrite. The pathname of requests that match the given pattern is"," * overwritten with the replacement using a simple String#replace."," */","function rewrite(app, pattern, replacement) {","  if (typeof pattern === 'string')","    pattern = new RegExp('^' + escapeRegExp(pattern) + '$');","","  if (!isRegExp(pattern))","    throw new Error('Rewrite pattern must be a RegExp or String');","","  replacement = replacement || '';","","  return function (conn) {","    var pathname = conn.pathname;","","    // Modify the pathname if the pattern matches.","    if (pattern.test(pathname))","      conn.location.properties.pathname = conn.basename + pathname.replace(pattern, replacement);","","    return conn.call(app);","  };","}","","module.exports = rewrite;",""],"l":{"1":1,"2":1,"9":1,"10":0,"11":0,"13":0,"14":0,"16":0,"18":0,"19":0,"22":0,"23":0,"25":0,"29":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/router.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/router.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"createRouter","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":32}}},"2":{"name":"router","line":74,"loc":{"start":{"line":74,"column":2},"end":{"line":74,"column":24}}},"3":{"name":"(anonymous_3)","line":112,"loc":{"start":{"line":112,"column":13},"end":{"line":112,"column":46}}},"4":{"name":"(anonymous_4)","line":148,"loc":{"start":{"line":148,"column":22},"end":{"line":148,"column":40}}},"5":{"name":"(anonymous_5)","line":162,"loc":{"start":{"line":162,"column":11},"end":{"line":162,"column":36}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":48}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":62}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":86}},"8":{"start":{"line":65,"column":0},"end":{"line":177,"column":1}},"9":{"start":{"line":67,"column":2},"end":{"line":70,"column":3}},"10":{"start":{"line":68,"column":4},"end":{"line":68,"column":14}},"11":{"start":{"line":69,"column":4},"end":{"line":69,"column":15}},"12":{"start":{"line":72,"column":2},"end":{"line":72,"column":18}},"13":{"start":{"line":74,"column":2},"end":{"line":98,"column":3}},"14":{"start":{"line":75,"column":4},"end":{"line":75,"column":29}},"15":{"start":{"line":76,"column":4},"end":{"line":76,"column":70}},"16":{"start":{"line":78,"column":4},"end":{"line":78,"column":21}},"17":{"start":{"line":79,"column":4},"end":{"line":95,"column":5}},"18":{"start":{"line":80,"column":6},"end":{"line":80,"column":29}},"19":{"start":{"line":83,"column":6},"end":{"line":94,"column":7}},"20":{"start":{"line":84,"column":8},"end":{"line":84,"column":82}},"21":{"start":{"line":86,"column":8},"end":{"line":91,"column":9}},"22":{"start":{"line":88,"column":10},"end":{"line":88,"column":44}},"23":{"start":{"line":90,"column":10},"end":{"line":90,"column":31}},"24":{"start":{"line":93,"column":8},"end":{"line":93,"column":36}},"25":{"start":{"line":97,"column":4},"end":{"line":97,"column":26}},"26":{"start":{"line":100,"column":2},"end":{"line":166,"column":5}},"27":{"start":{"line":113,"column":6},"end":{"line":116,"column":7}},"28":{"start":{"line":114,"column":8},"end":{"line":114,"column":22}},"29":{"start":{"line":115,"column":8},"end":{"line":115,"column":23}},"30":{"start":{"line":118,"column":6},"end":{"line":119,"column":46}},"31":{"start":{"line":119,"column":8},"end":{"line":119,"column":46}},"32":{"start":{"line":121,"column":6},"end":{"line":125,"column":7}},"33":{"start":{"line":122,"column":8},"end":{"line":122,"column":30}},"34":{"start":{"line":123,"column":13},"end":{"line":125,"column":7}},"35":{"start":{"line":124,"column":8},"end":{"line":124,"column":21}},"36":{"start":{"line":127,"column":6},"end":{"line":127,"column":20}},"37":{"start":{"line":129,"column":6},"end":{"line":138,"column":7}},"38":{"start":{"line":130,"column":8},"end":{"line":130,"column":18}},"39":{"start":{"line":132,"column":8},"end":{"line":135,"column":9}},"40":{"start":{"line":133,"column":10},"end":{"line":133,"column":33}},"41":{"start":{"line":134,"column":10},"end":{"line":134,"column":29}},"42":{"start":{"line":137,"column":8},"end":{"line":137,"column":46}},"43":{"start":{"line":140,"column":6},"end":{"line":141,"column":58}},"44":{"start":{"line":141,"column":8},"end":{"line":141,"column":58}},"45":{"start":{"line":143,"column":6},"end":{"line":143,"column":61}},"46":{"start":{"line":145,"column":6},"end":{"line":146,"column":28}},"47":{"start":{"line":146,"column":8},"end":{"line":146,"column":28}},"48":{"start":{"line":148,"column":6},"end":{"line":156,"column":9}},"49":{"start":{"line":149,"column":8},"end":{"line":149,"column":47}},"50":{"start":{"line":151,"column":8},"end":{"line":155,"column":9}},"51":{"start":{"line":152,"column":10},"end":{"line":152,"column":42}},"52":{"start":{"line":154,"column":10},"end":{"line":154,"column":42}},"53":{"start":{"line":163,"column":6},"end":{"line":163,"column":26}},"54":{"start":{"line":169,"column":2},"end":{"line":172,"column":40}},"55":{"start":{"line":170,"column":4},"end":{"line":172,"column":40}},"56":{"start":{"line":171,"column":6},"end":{"line":172,"column":40}},"57":{"start":{"line":172,"column":8},"end":{"line":172,"column":40}},"58":{"start":{"line":174,"column":2},"end":{"line":174,"column":53}},"59":{"start":{"line":176,"column":2},"end":{"line":176,"column":16}},"60":{"start":{"line":179,"column":0},"end":{"line":179,"column":30}}},"branchMap":{"1":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":2},"end":{"line":67,"column":2}},{"start":{"line":67,"column":2},"end":{"line":67,"column":2}}]},"2":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":23},"end":{"line":76,"column":37}},{"start":{"line":76,"column":41},"end":{"line":76,"column":43}}]},"3":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":52},"end":{"line":76,"column":62}},{"start":{"line":76,"column":66},"end":{"line":76,"column":68}}]},"4":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":6},"end":{"line":83,"column":6}},{"start":{"line":83,"column":6},"end":{"line":83,"column":6}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":86,"column":8}},{"start":{"line":86,"column":8},"end":{"line":86,"column":8}}]},"6":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":6},"end":{"line":113,"column":6}},{"start":{"line":113,"column":6},"end":{"line":113,"column":6}}]},"7":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":6},"end":{"line":118,"column":6}},{"start":{"line":118,"column":6},"end":{"line":118,"column":6}}]},"8":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":6},"end":{"line":121,"column":6}},{"start":{"line":121,"column":6},"end":{"line":121,"column":6}}]},"9":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":13},"end":{"line":123,"column":13}},{"start":{"line":123,"column":13},"end":{"line":123,"column":13}}]},"10":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":6},"end":{"line":129,"column":6}},{"start":{"line":129,"column":6},"end":{"line":129,"column":6}}]},"11":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":8},"end":{"line":132,"column":8}},{"start":{"line":132,"column":8},"end":{"line":132,"column":8}}]},"12":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":6},"end":{"line":140,"column":6}},{"start":{"line":140,"column":6},"end":{"line":140,"column":6}}]},"13":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":6},"end":{"line":145,"column":6}},{"start":{"line":145,"column":6},"end":{"line":145,"column":6}}]},"14":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":8}},{"start":{"line":151,"column":8},"end":{"line":151,"column":8}}]},"15":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":2},"end":{"line":169,"column":2}},{"start":{"line":169,"column":2},"end":{"line":169,"column":2}}]},"16":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":6},"end":{"line":171,"column":6}},{"start":{"line":171,"column":6},"end":{"line":171,"column":6}}]}},"code":["/* jshint -W084 */","var d = require('describe-property');","var objectAssign = require('object-assign');","var compileRoute = require('../utils/compileRoute');","var isRegExp = require('../utils/isRegExp');","var makeParams = require('../utils/makeParams');","var RoutingProperties = require('../utils/RoutingProperties');","","var LEADING_HTTP_METHOD_MATCHER = /^(DELETE|GET|HEAD|OPTIONS|POST|PUT|TRACE)\\s+(.+)$/;","","/**"," * A middleware that provides pattern-based routing for URLs, with optional"," * support for restricting matches to a specific request method. Named segments"," * of the URL are added to conn.params and take precedence over all others."," *"," *   app.use(mach.router, {"," *"," *     'GET /login': function (conn) {"," *       // conn.method == 'GET'"," *       // conn.pathname == '/login'"," *     },"," *"," *     'POST /login': function (conn) {"," *       // conn.method == 'POST'"," *       // conn.pathname == '/login'"," *     },"," *"," *     'DELETE /users/:id': function (conn) {"," *       // conn.method == 'DELETE'"," *       // conn.pathname == '/users/5'"," *       // conn.params == { id: 5 }"," *     }"," *"," *   });"," *"," * This function may also be used outside the context of a middleware stack"," * to create a standalone app. Routes may be given one at a time:"," *"," *   var app = mach.router();"," *"," *   app.get('/login', function (conn) {"," *     // ..."," *   });"," *"," *   app.delete('/users/:id', function (conn) {"," *     // ..."," *   });"," *"," * Or all at once:"," *"," *   var app = mach.router({"," *"," *     'GET /login': function (conn) {"," *       // ..."," *     },"," *"," *     'DELETE /users/:id': function (conn) {"," *       // ..."," *     }"," *"," *   });"," *"," * Note: Routes are always tried in the order they were defined."," */","function createRouter(app, map) {","  // Allow mach.router(map)","  if (typeof app === 'object') {","    map = app;","    app = null;","  }","","  var routes = {};","","  function router(conn) {","    var method = conn.method;","    var routesToTry = (routes[method] || []).concat(routes.ANY || []);","","    var route, match;","    for (var i = 0, len = routesToTry.length; i < len; ++i) {","      route = routesToTry[i];","","      // Try to match the route.","      if (match = route.pattern.exec(conn.pathname)) {","        var params = makeParams(route.keys, Array.prototype.slice.call(match, 1));","","        if (conn.params) {","          // Route params take precedence above all others.","          objectAssign(conn.params, params);","        } else {","          conn.params = params;","        }","","        return conn.call(route.app);","      }","    }","","    return conn.call(app);","  }","","  Object.defineProperties(router, {","","    /**","     * Adds a new route that runs the given app when the pattern matches the","     * path used in the request. If the pattern is a string, it is automatically","     * compiled. The following signatures are supported:","     *","     *   route('/users/:id', app)","     *   route('/users/:id', 'PUT', app)","     *   route('/users/:id', [ 'GET', 'PUT' ], app)","     *   route('GET /users/:id', app)","     */","    route: d(function (pattern, methods, app) {","      if (typeof methods === 'function') {","        app = methods;","        methods = null;","      }","","      if (typeof app !== 'function')","        throw new Error('Route needs an app');","","      if (typeof methods === 'string') {","        methods = [ methods ];","      } else if (!Array.isArray(methods)) {","        methods = [];","      }","","      var keys = [];","","      if (typeof pattern === 'string') {","        var match;","","        if (match = pattern.match(LEADING_HTTP_METHOD_MATCHER)) {","          methods.push(match[1]);","          pattern = match[2];","        }","","        pattern = compileRoute(pattern, keys);","      }","","      if (!isRegExp(pattern))","        throw new Error('Route pattern must be a RegExp');","","      var route = { pattern: pattern, keys: keys, app: app };","","      if (methods.length === 0)","        methods.push('ANY');","","      methods.forEach(function (method) {","        var upperMethod = method.toUpperCase();","","        if (routes[upperMethod]) {","          routes[upperMethod].push(route);","        } else {","          routes[upperMethod] = [ route ];","        }","      });","    }),","","    /**","     * Sets the given app as the default for this router.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","    })","","  });","","  // Allow app.use(mach.router, map)","  if (typeof map === 'object')","    for (var route in map)","      if (map.hasOwnProperty(route))","        router.route(route, map[route]);","","  Object.defineProperties(router, RoutingProperties);","","  return router;","}","","module.exports = createRouter;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"65":1,"67":0,"68":0,"69":0,"72":0,"74":1,"75":0,"76":0,"78":0,"79":0,"80":0,"83":0,"84":0,"86":0,"88":0,"90":0,"93":0,"97":0,"100":0,"113":0,"114":0,"115":0,"118":0,"119":0,"121":0,"122":0,"123":0,"124":0,"127":0,"129":0,"130":0,"132":0,"133":0,"134":0,"137":0,"140":0,"141":0,"143":0,"145":0,"146":0,"148":0,"149":0,"151":0,"152":0,"154":0,"163":0,"169":0,"170":0,"171":0,"172":0,"174":0,"176":0,"179":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/compileRoute.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/compileRoute.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"compileRoute","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":35}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":43},"end":{"line":15,"column":65}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":69}},"2":{"start":{"line":14,"column":0},"end":{"line":28,"column":1}},"3":{"start":{"line":15,"column":2},"end":{"line":25,"column":5}},"4":{"start":{"line":16,"column":4},"end":{"line":24,"column":5}},"5":{"start":{"line":17,"column":6},"end":{"line":17,"column":21}},"6":{"start":{"line":18,"column":6},"end":{"line":18,"column":26}},"7":{"start":{"line":19,"column":11},"end":{"line":24,"column":5}},"8":{"start":{"line":20,"column":6},"end":{"line":20,"column":25}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":21}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":26}},"11":{"start":{"line":27,"column":2},"end":{"line":27,"column":45}},"12":{"start":{"line":30,"column":0},"end":{"line":30,"column":30}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":11},"end":{"line":19,"column":11}},{"start":{"line":19,"column":11},"end":{"line":19,"column":11}}]}},"code":["var paramMatcher = /:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\\[\\]\\\\+|{}^$]/g;","","/**"," * Compiles the given route string into a RegExp that can be used to"," * match a URL. The route may contain named parameters in the form of"," * a colon followed by a valid JavaScript identifier (e.g. \":name\","," * \":_name\", and \":$name\" are all valid parameters). The route may"," * also contain a * to match any character non-greedily, or a ? to"," * match the previous thing 0 or 1 time."," *"," * The keys array is populated with names of all parameters in the"," * order they appear in the route string."," */","function compileRoute(route, keys) {","  var source = route.replace(paramMatcher, function (match, key) {","    if (key) {","      keys.push(key);","      return '([^./?#]+)';","    } else if (match === '*') {","      keys.push('splat');","      return '(.*?)';","    } else {","      return '\\\\' + match;","    }","  });","","  return new RegExp('^' + source + '$', 'i');","}","","module.exports = compileRoute;",""],"l":{"1":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"23":0,"27":0,"30":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeParams.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeParams.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"makeParams","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}}},"2":{"name":"(anonymous_2)","line":2,"loc":{"start":{"line":2,"column":21},"end":{"line":2,"column":51}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":20,"column":1}},"2":{"start":{"line":2,"column":2},"end":{"line":19,"column":9}},"3":{"start":{"line":3,"column":4},"end":{"line":3,"column":30}},"4":{"start":{"line":5,"column":4},"end":{"line":16,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":13,"column":7}},"6":{"start":{"line":7,"column":8},"end":{"line":7,"column":33}},"7":{"start":{"line":8,"column":13},"end":{"line":13,"column":7}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":47}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"10":{"start":{"line":15,"column":6},"end":{"line":15,"column":26}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":18}},"12":{"start":{"line":22,"column":0},"end":{"line":22,"column":28}}},"branchMap":{"1":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":5,"column":4}},{"start":{"line":5,"column":4},"end":{"line":5,"column":4}}]},"2":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":6},"end":{"line":6,"column":6}},{"start":{"line":6,"column":6},"end":{"line":6,"column":6}}]},"3":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":13},"end":{"line":8,"column":13}},{"start":{"line":8,"column":13},"end":{"line":8,"column":13}}]}},"code":["function makeParams(keys, values) {","  return keys.reduce(function (params, key, index) {","    var value = values[index];","","    if (key === 'splat') {","      if (Array.isArray(params.splat)) {","        params.splat.push(value);","      } else if ('splat' in params) {","        // Multiple \"splat\" keys make an array.","        params.splat = [ params.splat, value ];","      } else {","        params.splat = value;","      }","    } else {","      params[key] = value;","    }","","    return params;","  }, {});","}","","module.exports = makeParams;",""],"l":{"1":1,"2":0,"3":0,"5":0,"6":0,"7":0,"8":0,"10":0,"12":0,"15":0,"18":0,"22":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/RoutingProperties.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/RoutingProperties.js","s":{"1":1,"2":1,"3":1,"4":7,"5":0,"6":7,"7":1},"b":{},"f":{"1":7,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":59},"end":{"line":13,"column":83}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":3,"column":0},"end":{"line":11,"column":2}},"3":{"start":{"line":13,"column":0},"end":{"line":19,"column":7}},"4":{"start":{"line":14,"column":2},"end":{"line":16,"column":5}},"5":{"start":{"line":15,"column":4},"end":{"line":15,"column":60}},"6":{"start":{"line":18,"column":2},"end":{"line":18,"column":14}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":35}}},"branchMap":{},"code":["var d = require('describe-property');","","var RoutingMethods = {","  delete: 'DELETE',","  get: [ 'GET', 'HEAD' ],","  head: 'HEAD',","  options: 'OPTIONS',","  post: 'POST',","  put: 'PUT',","  trace: 'TRACE'","};","","var RoutingProperties = Object.keys(RoutingMethods).reduce(function (memo, method) {","  memo[method] = d(function (pattern, app) {","    return this.route(pattern, RoutingMethods[method], app);","  });","","  return memo;","}, {});","","module.exports = RoutingProperties;",""],"l":{"1":1,"3":1,"13":1,"14":7,"15":0,"18":7,"21":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"encodeSession","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":47}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":34},"end":{"line":22,"column":50}}},"3":{"name":"decodeCookie","line":37,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":45}}},"4":{"name":"makeHashWithSecret","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":42}}},"5":{"name":"session","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":31}}},"6":{"name":"(anonymous_6)","line":112,"loc":{"start":{"line":112,"column":9},"end":{"line":112,"column":25}}},"7":{"name":"(anonymous_7)","line":118,"loc":{"start":{"line":118,"column":79},"end":{"line":118,"column":97}}},"8":{"name":"(anonymous_8)","line":121,"loc":{"start":{"line":121,"column":33},"end":{"line":121,"column":45}}},"9":{"name":"(anonymous_9)","line":122,"loc":{"start":{"line":122,"column":96},"end":{"line":122,"column":117}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":52}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":52}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"7":{"start":{"line":8,"column":0},"end":{"line":10,"column":2}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":27}},"9":{"start":{"line":21,"column":0},"end":{"line":30,"column":1}},"10":{"start":{"line":22,"column":2},"end":{"line":29,"column":5}},"11":{"start":{"line":23,"column":4},"end":{"line":23,"column":78}},"12":{"start":{"line":25,"column":4},"end":{"line":26,"column":71}},"13":{"start":{"line":26,"column":6},"end":{"line":26,"column":71}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":18}},"15":{"start":{"line":37,"column":0},"end":{"line":48,"column":1}},"16":{"start":{"line":38,"column":2},"end":{"line":38,"column":35}},"17":{"start":{"line":39,"column":2},"end":{"line":39,"column":38}},"18":{"start":{"line":40,"column":2},"end":{"line":40,"column":39}},"19":{"start":{"line":41,"column":2},"end":{"line":41,"column":40}},"20":{"start":{"line":44,"column":2},"end":{"line":45,"column":28}},"21":{"start":{"line":45,"column":4},"end":{"line":45,"column":28}},"22":{"start":{"line":47,"column":2},"end":{"line":47,"column":14}},"23":{"start":{"line":50,"column":0},"end":{"line":52,"column":1}},"24":{"start":{"line":51,"column":2},"end":{"line":51,"column":49}},"25":{"start":{"line":87,"column":0},"end":{"line":142,"column":1}},"26":{"start":{"line":88,"column":2},"end":{"line":88,"column":26}},"27":{"start":{"line":90,"column":2},"end":{"line":91,"column":34}},"28":{"start":{"line":91,"column":4},"end":{"line":91,"column":34}},"29":{"start":{"line":93,"column":2},"end":{"line":93,"column":30}},"30":{"start":{"line":94,"column":2},"end":{"line":94,"column":40}},"31":{"start":{"line":95,"column":2},"end":{"line":95,"column":33}},"32":{"start":{"line":96,"column":2},"end":{"line":96,"column":30}},"33":{"start":{"line":97,"column":2},"end":{"line":97,"column":45}},"34":{"start":{"line":98,"column":2},"end":{"line":98,"column":78}},"35":{"start":{"line":99,"column":2},"end":{"line":99,"column":39}},"36":{"start":{"line":100,"column":2},"end":{"line":100,"column":56}},"37":{"start":{"line":102,"column":2},"end":{"line":110,"column":3}},"38":{"start":{"line":103,"column":4},"end":{"line":109,"column":18}},"39":{"start":{"line":112,"column":2},"end":{"line":141,"column":4}},"40":{"start":{"line":113,"column":4},"end":{"line":114,"column":28}},"41":{"start":{"line":114,"column":6},"end":{"line":114,"column":28}},"42":{"start":{"line":116,"column":4},"end":{"line":116,"column":44}},"43":{"start":{"line":118,"column":4},"end":{"line":140,"column":21}},"44":{"start":{"line":119,"column":6},"end":{"line":119,"column":34}},"45":{"start":{"line":121,"column":6},"end":{"line":139,"column":9}},"46":{"start":{"line":122,"column":8},"end":{"line":138,"column":25}},"47":{"start":{"line":123,"column":10},"end":{"line":123,"column":83}},"48":{"start":{"line":127,"column":10},"end":{"line":128,"column":19}},"49":{"start":{"line":128,"column":12},"end":{"line":128,"column":19}},"50":{"start":{"line":130,"column":10},"end":{"line":137,"column":13}},"51":{"start":{"line":144,"column":0},"end":{"line":144,"column":25}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"2":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":2},"end":{"line":44,"column":2}},{"start":{"line":44,"column":2},"end":{"line":44,"column":2}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":27},"end":{"line":51,"column":40}},{"start":{"line":51,"column":43},"end":{"line":51,"column":47}}]},"4":{"line":88,"type":"binary-expr","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":19}},{"start":{"line":88,"column":23},"end":{"line":88,"column":25}}]},"5":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":2},"end":{"line":90,"column":2}},{"start":{"line":90,"column":2},"end":{"line":90,"column":2}}]},"6":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":13},"end":{"line":94,"column":25}},{"start":{"line":94,"column":29},"end":{"line":94,"column":39}}]},"7":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":13},"end":{"line":95,"column":25}},{"start":{"line":95,"column":29},"end":{"line":95,"column":32}}]},"8":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":20},"end":{"line":97,"column":39}},{"start":{"line":97,"column":43},"end":{"line":97,"column":44}}]},"9":{"line":98,"type":"cond-expr","locations":[{"start":{"line":98,"column":44},"end":{"line":98,"column":69}},{"start":{"line":98,"column":73},"end":{"line":98,"column":77}}]},"10":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":44},"end":{"line":98,"column":60}},{"start":{"line":98,"column":64},"end":{"line":98,"column":69}}]},"11":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":15},"end":{"line":99,"column":29}},{"start":{"line":99,"column":33},"end":{"line":99,"column":38}}]},"12":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":14},"end":{"line":100,"column":27}},{"start":{"line":100,"column":31},"end":{"line":100,"column":55}}]},"13":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":2},"end":{"line":102,"column":2}},{"start":{"line":102,"column":2},"end":{"line":102,"column":2}}]},"14":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"15":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":27},"end":{"line":118,"column":33}},{"start":{"line":118,"column":37},"end":{"line":118,"column":72}}]},"16":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":21},"end":{"line":119,"column":27}},{"start":{"line":119,"column":31},"end":{"line":119,"column":33}}]},"17":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":31},"end":{"line":122,"column":43}},{"start":{"line":122,"column":47},"end":{"line":122,"column":89}}]},"18":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":24},"end":{"line":123,"column":35}},{"start":{"line":123,"column":39},"end":{"line":123,"column":82}}]},"19":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":10},"end":{"line":127,"column":10}},{"start":{"line":127,"column":10},"end":{"line":127,"column":10}}]},"20":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":14},"end":{"line":127,"column":34}},{"start":{"line":127,"column":38},"end":{"line":127,"column":46}}]}},"code":["var mach = require('../index');","var Promise = require('../utils/Promise');","var decodeBase64 = require('../utils/decodeBase64');","var encodeBase64 = require('../utils/encodeBase64');","var makeHash = require('../utils/makeHash');","var CookieStore = require('./session/CookieStore');","","mach.extend(","  require('../extensions/server')",");","","/**"," * The maximum size of an HTTP cookie."," */","var MAX_COOKIE_SIZE = 4096;","","/**"," * Stores the given session and returns a promise for a value that should be stored"," * in the session cookie to retrieve the session data again on the next request."," */","function encodeSession(session, store, secret) {","  return store.save(session).then(function (data) {","    var cookie = encodeBase64(data + '--' + makeHashWithSecret(data, secret));","","    if (cookie.length > MAX_COOKIE_SIZE)","      throw new Error('Cookie data size exceeds 4kb; content dropped');","","    return cookie;","  });","}","","/**"," * Decodes the given cookie value and returns a promise for the corresponding session"," * data from the store. Also verifies the hash value to ensure the cookie has not been"," * tampered with. If it has, returns null."," */","function decodeCookie(cookie, store, secret) {","  var value = decodeBase64(cookie);","  var index = value.lastIndexOf('--');","  var data = value.substring(0, index);","  var hash = value.substring(index + 2);","","  // Verify the cookie has not been tampered with.","  if (hash === makeHashWithSecret(data, secret))","    return store.load(data);","","  return null;","}","","function makeHashWithSecret(data, secret) {","  return makeHash(secret ? data + secret : data);","}","","/**"," * A middleware that provides support for HTTP sessions using cookies."," *"," * Options may be any of the following:"," *"," * - secret         A cryptographically secure secret key that will be used to verify"," *                  the integrity of session data that is received from the client"," * - name           The name of the cookie. Defaults to \"_session\""," * - path           The path of the cookie. Defaults to \"/\""," * - domain         The cookie's domain. Defaults to null"," * - secure         True to only send this cookie over HTTPS. Defaults to false"," * - expireAfter    The number of seconds after which sessions expire. Defaults"," *                  to 0 (no expiration)"," * - httpOnly       True to restrict access to this cookie to HTTP(S) APIs."," *                  Defaults to true"," * - store          An instance of MemoryStore, CookieStore, or RedisStore that"," *                  is used to store session data. Defaults to a new CookieStore"," *"," * Example:"," *"," *   app.use(mach.session, {"," *     secret: 'the-secret',"," *     secure: true"," *   });"," *"," * Hint: A great way to generate a cryptographically secure session secret from"," * the command line:"," *"," *   $ node -p \"require('crypto').randomBytes(64).toString('hex')\""," *"," * Note: Since cookies are only able to reliably store about 4k of data, if the"," * session cookie payload exceeds that the session will be dropped."," */","function session(app, options) {","  options = options || {};","","  if (typeof options === 'string')","    options = { secret: options };","","  var secret = options.secret;","  var name = options.name || '_session';","  var path = options.path || '/';","  var domain = options.domain;","  var expireAfter = options.expireAfter || 0;","  var httpOnly = ('httpOnly' in options) ? (options.httpOnly || false) : true;","  var secure = options.secure || false;","  var store = options.store || new CookieStore(options);","","  if (!secret) {","    console.warn([","      'WARNING: There was no \"secret\" option provided to mach.session! This poses',","      'a security vulnerability because session data will be stored on clients without',","      'any server-side verification that it has not been tampered with. It is strongly',","      'recommended that you set a secret to prevent exploits that may be attempted using',","      'carefully crafted cookies.'","    ].join('\\n'));","  }","","  return function (conn) {","    if (conn.session)","      return conn.call(app); // Don't overwrite the existing session.","","    var cookie = conn.request.cookies[name];","","    return Promise.resolve(cookie && decodeCookie(cookie, store, secret)).then(function (object) {","      conn.session = object || {};","","      return conn.call(app).then(function () {","        return Promise.resolve(conn.session && encodeSession(conn.session, store, secret)).then(function (newCookie) {","          var expires = expireAfter && new Date(Date.now() + (expireAfter * 1000));","","          // Don't bother setting the cookie if its value","          // hasn't changed and there is no expires date.","          if (newCookie === cookie && !expires)","            return;","","          conn.response.setCookie(name, {","            value: newCookie,","            path: path,","            domain: domain,","            expires: expires,","            httpOnly: httpOnly,","            secure: secure","          });","        }, conn.onError);","      });","    }, conn.onError);","  };","}","","module.exports = session;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"8":1,"15":1,"21":1,"22":0,"23":0,"25":0,"26":0,"28":0,"37":1,"38":0,"39":0,"40":0,"41":0,"44":0,"45":0,"47":0,"50":1,"51":0,"87":1,"88":0,"90":0,"91":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"102":0,"103":0,"112":0,"113":0,"114":0,"116":0,"118":0,"119":0,"121":0,"122":0,"123":0,"127":0,"128":0,"130":0,"144":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeHash.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeHash.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"makeHash","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":64}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}}},"branchMap":{},"code":["var crypto = require('crypto');","","/**"," * Returns a SHA1 hash of the given string."," */","function makeHash(string) {","  return crypto.createHash('sha1').update(string).digest('hex');","}","","module.exports = makeHash;",""],"l":{"1":1,"6":1,"7":0,"10":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/CookieStore.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/CookieStore.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"CookieStore","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":30}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":27}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":45}},"3":{"start":{"line":18,"column":0},"end":{"line":24,"column":1}},"4":{"start":{"line":19,"column":2},"end":{"line":19,"column":26}},"5":{"start":{"line":21,"column":2},"end":{"line":23,"column":8}},"6":{"start":{"line":26,"column":0},"end":{"line":51,"column":3}},"7":{"start":{"line":29,"column":4},"end":{"line":29,"column":16}},"8":{"start":{"line":30,"column":4},"end":{"line":35,"column":5}},"9":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}},"10":{"start":{"line":34,"column":6},"end":{"line":34,"column":33}},"11":{"start":{"line":38,"column":4},"end":{"line":39,"column":33}},"12":{"start":{"line":39,"column":6},"end":{"line":39,"column":33}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":36}},"14":{"start":{"line":45,"column":4},"end":{"line":46,"column":46}},"15":{"start":{"line":46,"column":6},"end":{"line":46,"column":46}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":52}},"17":{"start":{"line":53,"column":0},"end":{"line":53,"column":29}}},"branchMap":{"1":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":19}},{"start":{"line":19,"column":23},"end":{"line":19,"column":25}}]},"2":{"line":21,"type":"cond-expr","locations":[{"start":{"line":22,"column":7},"end":{"line":22,"column":33}},{"start":{"line":23,"column":6},"end":{"line":23,"column":7}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":23}},{"start":{"line":38,"column":27},"end":{"line":38,"column":56}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]}},"code":["var d = require('describe-property');","var Promise = require('../../utils/Promise');","","/**"," * Client-side storage for sessions using HTTP cookies."," *"," * Accepts the following options:"," *"," * - expireAfter      The number of seconds after which sessions expire."," *                    Defaults to 0 (no expiration)"," *"," * Note: Cookies are only able to reliably store about 4k of data. Also, sending"," * and receiving large cookies can have a significant impact on overall server"," * response time (see http://yuiblog.com/blog/2007/03/01/performance-research-part-3/)."," * For these reasons, if you are planning on storing a lot of data in the session"," * you may want to use a server-side storage, such as mach.session.RedisStore."," */","function CookieStore(options) {","  options = options || {};","","  this.ttl = options.expireAfter","    ? (1000 * options.expireAfter) // expireAfter is given in seconds","    : 0;","}","","Object.defineProperties(CookieStore.prototype, {","","  load: d(function (value) {","    var session;","    try {","      session = JSON.parse(value);","    } catch (error) {","      // Ignore invalid JSON data.","      return Promise.resolve({});","    }","","    // Verify the session is not expired.","    if (session._expiry && session._expiry <= Date.now())","      return Promise.resolve({});","","    return Promise.resolve(session);","  }),","","  save: d(function (session) {","    if (this.ttl)","      session._expiry = Date.now() + this.ttl;","","    return Promise.resolve(JSON.stringify(session));","  })","","});","","module.exports = CookieStore;",""],"l":{"1":1,"2":1,"18":1,"19":0,"21":0,"26":1,"29":0,"30":0,"31":0,"34":0,"38":0,"39":0,"41":0,"45":0,"46":0,"48":0,"53":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/stack.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/stack.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"mapperCreator","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":9},"end":{"line":7,"column":24}}},"3":{"name":"routerCreator","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":31}}},"4":{"name":"(anonymous_4)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":24}}},"5":{"name":"createStack","line":71,"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":26}}},"6":{"name":"compile","line":75,"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":24}}},"7":{"name":"stack","line":90,"loc":{"start":{"line":90,"column":2},"end":{"line":90,"column":23}}},"8":{"name":"(anonymous_8)","line":102,"loc":{"start":{"line":102,"column":11},"end":{"line":102,"column":33}}},"9":{"name":"(anonymous_9)","line":111,"loc":{"start":{"line":111,"column":18},"end":{"line":111,"column":33}}},"10":{"name":"(anonymous_10)","line":121,"loc":{"start":{"line":121,"column":11},"end":{"line":121,"column":36}}},"11":{"name":"(anonymous_11)","line":129,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":46}}},"12":{"name":"(anonymous_12)","line":137,"loc":{"start":{"line":137,"column":11},"end":{"line":137,"column":36}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":39}},"5":{"start":{"line":6,"column":0},"end":{"line":15,"column":1}},"6":{"start":{"line":7,"column":2},"end":{"line":14,"column":4}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}},"8":{"start":{"line":10,"column":4},"end":{"line":11,"column":38}},"9":{"start":{"line":11,"column":6},"end":{"line":11,"column":38}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":15}},"11":{"start":{"line":17,"column":0},"end":{"line":26,"column":1}},"12":{"start":{"line":18,"column":2},"end":{"line":25,"column":4}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"14":{"start":{"line":21,"column":4},"end":{"line":22,"column":38}},"15":{"start":{"line":22,"column":6},"end":{"line":22,"column":38}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":15}},"17":{"start":{"line":71,"column":0},"end":{"line":147,"column":1}},"18":{"start":{"line":72,"column":2},"end":{"line":72,"column":46}},"19":{"start":{"line":73,"column":2},"end":{"line":73,"column":18}},"20":{"start":{"line":75,"column":2},"end":{"line":88,"column":3}},"21":{"start":{"line":76,"column":4},"end":{"line":77,"column":39}},"22":{"start":{"line":77,"column":6},"end":{"line":77,"column":39}},"23":{"start":{"line":79,"column":4},"end":{"line":80,"column":41}},"24":{"start":{"line":80,"column":6},"end":{"line":80,"column":41}},"25":{"start":{"line":82,"column":4},"end":{"line":82,"column":30}},"26":{"start":{"line":84,"column":4},"end":{"line":85,"column":44}},"27":{"start":{"line":85,"column":6},"end":{"line":85,"column":44}},"28":{"start":{"line":87,"column":4},"end":{"line":87,"column":15}},"29":{"start":{"line":90,"column":2},"end":{"line":92,"column":3}},"30":{"start":{"line":91,"column":4},"end":{"line":91,"column":66}},"31":{"start":{"line":94,"column":2},"end":{"line":142,"column":5}},"32":{"start":{"line":103,"column":6},"end":{"line":103,"column":58}},"33":{"start":{"line":105,"column":6},"end":{"line":106,"column":72}},"34":{"start":{"line":106,"column":8},"end":{"line":106,"column":72}},"35":{"start":{"line":108,"column":6},"end":{"line":109,"column":68}},"36":{"start":{"line":109,"column":8},"end":{"line":109,"column":68}},"37":{"start":{"line":111,"column":6},"end":{"line":113,"column":9}},"38":{"start":{"line":112,"column":8},"end":{"line":112,"column":60}},"39":{"start":{"line":115,"column":6},"end":{"line":115,"column":25}},"40":{"start":{"line":122,"column":6},"end":{"line":122,"column":39}},"41":{"start":{"line":123,"column":6},"end":{"line":123,"column":25}},"42":{"start":{"line":130,"column":6},"end":{"line":130,"column":45}},"43":{"start":{"line":131,"column":6},"end":{"line":131,"column":25}},"44":{"start":{"line":138,"column":6},"end":{"line":138,"column":26}},"45":{"start":{"line":139,"column":6},"end":{"line":139,"column":25}},"46":{"start":{"line":144,"column":2},"end":{"line":144,"column":52}},"47":{"start":{"line":146,"column":2},"end":{"line":146,"column":15}},"48":{"start":{"line":149,"column":0},"end":{"line":149,"column":29}}},"branchMap":{"1":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"2":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"3":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":21},"end":{"line":91,"column":32}},{"start":{"line":91,"column":37},"end":{"line":91,"column":63}}]},"4":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":6},"end":{"line":105,"column":6}},{"start":{"line":105,"column":6},"end":{"line":105,"column":6}}]},"5":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":6},"end":{"line":108,"column":6}},{"start":{"line":108,"column":6},"end":{"line":108,"column":6}}]}},"code":["var d = require('describe-property');","var RoutingProperties = require('../utils/RoutingProperties');","var createMapper = require('./mapper');","var createRouter = require('./router');","","function mapperCreator(mappings) {","  return function (app) {","    app = createMapper(app);","","    for (var i = 0, len = mappings.length; i < len; ++i)","      app.map.apply(app, mappings[i]);","","    return app;","  };","}","","function routerCreator(routes) {","  return function (app) {","    app = createRouter(app);","","    for (var i = 0, len = routes.length; i < len; ++i)","      app.route.apply(app, routes[i]);","","    return app;","  };","}","","/**"," * A middleware that aids in building complex apps that are fronted by other"," * middleware in a \"middleware stack\". Also provides several other useful methods"," * for request mapping and routing that make this middleware a good choice when"," * working with mach at a high level or when getting started for the first time."," *"," * Middleware are placed into the stack by calling the `use` method which passes"," * along any additional arguments that it receives directly on to the middleware"," * when the stack is compiled."," *"," * Other stacks can be \"mounted\" easily at various locations using the `map`"," * method. Routes can be added using `route`, `get`, `post`, etc. When a request"," * is received, all middleware, mappings, and routes run in the order they are"," * defined in the stack, top to bottom."," *"," *   var app = mach.stack();"," *"," *   app.use(mach.gzip);"," *   app.use(mach.file, __dirname + '/public');"," *"," *   // Use an image server to serve requests that begin"," *   // with /images out of /public/img."," *   app.map('/images', mach.file('/public/img'));"," *"," *   // Since this call is *after* the call to map, this middleware"," *   // will not run when requests begin with \"/images\"."," *   app.use(mach.params);"," *"," *   app.get('/', function (request) {"," *     return \"The params are: \" + JSON.stringify(request.params);"," *   });"," *"," *   app.post('/posts/:post_id/messages', function (request) {"," *     // ..."," *   });"," *"," *   mach.serve(app);"," *"," * Note: A stack is compiled the first time it is called. When a stack is"," * compiled, all middleware is invoked with the downstream app plus any"," * additional arguments that were passed to the call to stack.use. As long as"," * the stack doesn't change between requests, this happens only once."," */","function createStack(app) {","  var layers = [], mappings = [], routes = [];","  var compiledApp;","","  function compile(app) {","    if (routes.length)","      app = routerCreator(routes)(app);","","    if (mappings.length)","      app = mapperCreator(mappings)(app);","","    var index = layers.length;","","    while (index)","      app = layers[--index].call(this, app);","","    return app;","  }","","  function stack(conn) {","    return conn.call(compiledApp || (compiledApp = compile(app)));","  }","","  Object.defineProperties(stack, {","","    /**","     * Declares that the given `middleware` should be used at the current point","     * in the stack. Any additional arguments to this function are passed along","     * to the middleware with the downstream app as the first argument when the","     * stack is compiled.","     */","    use: d(function (middleware) {","      var args = Array.prototype.slice.call(arguments, 1);","","      if (mappings.length)","        layers.push(mapperCreator(mappings.splice(0, mappings.length)));","","      if (routes.length)","        layers.push(routerCreator(routes.splice(0, routes.length)));","","      layers.push(function (app) {","        return middleware.apply(this, [ app ].concat(args));","      });","","      compiledApp = null;","    }),","","    /**","     * Uses a mapper to map a URL path to an app.","     */","    map: d(function (location, app) {","      mappings.push([ location, app ]);","      compiledApp = null;","    }),","","    /**","     * Uses a router to route URLs that match a pattern/method to an app.","     */","    route: d(function (pattern, methods, app) {","      routes.push([ pattern, methods, app ]);","      compiledApp = null;","    }),","","    /**","     * Sets the given app as the default for this stack.","     */","    run: d(function (downstreamApp) {","      app = downstreamApp;","      compiledApp = null;","    })","","  });","","  Object.defineProperties(stack, RoutingProperties);","","  return stack;","}","","module.exports = createStack;",""],"l":{"1":1,"2":1,"3":1,"4":1,"6":1,"7":0,"8":0,"10":0,"11":0,"13":0,"17":1,"18":0,"19":0,"21":0,"22":0,"24":0,"71":1,"72":0,"73":0,"75":1,"76":0,"77":0,"79":0,"80":0,"82":0,"84":0,"85":0,"87":0,"90":1,"91":0,"94":0,"103":0,"105":0,"106":0,"108":0,"109":0,"111":0,"112":0,"115":0,"122":0,"123":0,"130":0,"131":0,"138":0,"139":0,"144":0,"146":0,"149":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/token.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/token.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"verifyToken","line":58,"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":35}}},"2":{"name":"(anonymous_2)","line":68,"loc":{"start":{"line":68,"column":9},"end":{"line":68,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":46}},"3":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"4":{"start":{"line":12,"column":0},"end":{"line":17,"column":2}},"5":{"start":{"line":58,"column":0},"end":{"line":93,"column":1}},"6":{"start":{"line":59,"column":2},"end":{"line":59,"column":26}},"7":{"start":{"line":61,"column":2},"end":{"line":62,"column":37}},"8":{"start":{"line":62,"column":4},"end":{"line":62,"column":37}},"9":{"start":{"line":64,"column":2},"end":{"line":64,"column":48}},"10":{"start":{"line":65,"column":2},"end":{"line":65,"column":50}},"11":{"start":{"line":66,"column":2},"end":{"line":66,"column":44}},"12":{"start":{"line":68,"column":2},"end":{"line":92,"column":4}},"13":{"start":{"line":69,"column":4},"end":{"line":69,"column":53}},"14":{"start":{"line":71,"column":4},"end":{"line":84,"column":5}},"15":{"start":{"line":72,"column":6},"end":{"line":72,"column":85}},"16":{"start":{"line":73,"column":11},"end":{"line":84,"column":5}},"17":{"start":{"line":74,"column":6},"end":{"line":74,"column":83}},"18":{"start":{"line":76,"column":6},"end":{"line":76,"column":38}},"19":{"start":{"line":79,"column":6},"end":{"line":80,"column":60}},"20":{"start":{"line":80,"column":8},"end":{"line":80,"column":60}},"21":{"start":{"line":82,"column":6},"end":{"line":83,"column":30}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":30}},"23":{"start":{"line":88,"column":4},"end":{"line":89,"column":28}},"24":{"start":{"line":89,"column":6},"end":{"line":89,"column":28}},"25":{"start":{"line":91,"column":4},"end":{"line":91,"column":32}},"26":{"start":{"line":95,"column":0},"end":{"line":95,"column":29}}},"branchMap":{"1":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":19}},{"start":{"line":59,"column":23},"end":{"line":59,"column":25}}]},"2":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":2},"end":{"line":61,"column":2}},{"start":{"line":61,"column":2},"end":{"line":61,"column":2}}]},"3":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":18},"end":{"line":64,"column":35}},{"start":{"line":64,"column":39},"end":{"line":64,"column":47}}]},"4":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":19},"end":{"line":65,"column":37}},{"start":{"line":65,"column":41},"end":{"line":65,"column":49}}]},"5":{"line":66,"type":"binary-expr","locations":[{"start":{"line":66,"column":19},"end":{"line":66,"column":37}},{"start":{"line":66,"column":41},"end":{"line":66,"column":43}}]},"6":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"7":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":11},"end":{"line":73,"column":11}},{"start":{"line":73,"column":11},"end":{"line":73,"column":11}}]},"8":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":6},"end":{"line":79,"column":6}},{"start":{"line":79,"column":6},"end":{"line":79,"column":6}}]},"9":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":6},"end":{"line":82,"column":6}},{"start":{"line":82,"column":6},"end":{"line":82,"column":6}}]},"10":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":10},"end":{"line":82,"column":27}},{"start":{"line":82,"column":31},"end":{"line":82,"column":58}}]},"11":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]}},"code":["var mach = require('../index');","var makeToken = require('../utils/makeToken');","","mach.extend(","  require('../extensions/server')",");","","/**"," * The set of HTTP request methods that are considered safe because they"," * do not alter server data."," */","var SAFE_METHODS = {","  GET: true,","  HEAD: true,","  OPTIONS: true,","  TRACE: true","};","","/**"," * A middleware that helps to prevent Cross-site Request Forgery attacks by"," * requiring the client to include an authentication token in all form"," * submissions that matches a value stored in the session cookie. See"," * http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html"," *"," * If the session does not already have an authentication token one is"," * automatically generated and stored in the session. The default session key"," * is \"_token\". All form submissions need to include this value in the \"_token\""," * parameter, like this:"," *"," *   <form method=\"POST\" action=\"/\">"," *     <input type=\"hidden\" name=\"_token\" value=\"{{session._token}}\">"," *   </form>"," *"," * On the backend, you need to put both mach.session and mach.params in front of"," * mach.token in order for it to be able to retrieve values from the request session"," * and parameters, like this:"," *"," *   app.use(mach.session);"," *   app.use(mach.params);"," *   app.use(mach.token);"," *   app.run(function (conn) {"," *     // The connection authenticated successfully"," *   });"," *"," * Options may be any of the following:"," *"," * - paramName        The name of the request parameter that contains the token"," *                    (i.e. the value of the \"name\" attribute on your <input>)."," *                    Defaults to \"_token\""," * - sessionKey       The name of the session variable to use to store the token."," *                    Defaults to \"_token\""," * - byteLength       The length of the token in bytes. Defaults to 32"," *"," * Note: Non-POST requests are always forwarded to the downstream app regardless of"," * whether or not they contain the token since it is assumed they are not modifying"," * anything and are safe."," */","function verifyToken(app, options) {","  options = options || {};","","  if (typeof options === 'string')","    options = { paramName: options };","","  var paramName = options.paramName || '_token';","  var sessionKey = options.sessionKey || '_token';","  var byteLength = options.byteLength || 32;","","  return function (conn) {","    var session = conn.session, params = conn.params;","","    if (!session) {","      conn.onError(new Error('No session! Use mach.session in front of mach.token'));","    } else if (!params) {","      conn.onError(new Error('No params! Use mach.params in front of mach.token'));","    } else {","      var token = session[sessionKey];","","      // Create a new session token if needed.","      if (!token)","        token = session[sessionKey] = makeToken(byteLength);","","      if (params[paramName] && params[paramName] === token)","        return conn.call(app);","    }","","    // If the request is not a POST we assume it's not a form submission","    // and therefore not modifying anything. Pass it downstream.","    if (SAFE_METHODS[conn.method] === true)","      return conn.call(app);","","    conn.text(403, 'Forbidden');","  };","}","","module.exports = verifyToken;",""],"l":{"1":1,"2":1,"4":1,"12":1,"58":1,"59":0,"61":0,"62":0,"64":0,"65":0,"66":0,"68":0,"69":0,"71":0,"72":0,"73":0,"74":0,"76":0,"79":0,"80":0,"82":0,"83":0,"88":0,"89":0,"91":0,"95":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeToken.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/makeToken.js","s":{"1":1,"2":1,"3":0,"4":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"makeToken","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":31}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":56}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":27}}},"branchMap":{},"code":["var crypto = require('crypto');","","/**"," * Returns a cryptographically-secure string containing the"," * given number of bytes."," */","function makeToken(byteLength) {","  return crypto.randomBytes(byteLength).toString('hex');","}","","module.exports = makeToken;",""],"l":{"1":1,"7":1,"8":0,"11":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/proxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/proxy.js","s":{"1":1,"2":1},"b":{},"f":{"1":1},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":3,"column":2}},"2":{"start":{"line":2,"column":2},"end":{"line":2,"column":53}}},"branchMap":{},"code":["module.exports = function (mach) {","  mach.createProxy = require('../utils/createProxy');","};",""],"l":{"1":1,"2":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/statusText.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/statusText.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0},"b":{},"f":{"1":1,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":44}},"3":{"start":{"line":4,"column":0},"end":{"line":15,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":14,"column":5}},"5":{"start":{"line":11,"column":6},"end":{"line":11,"column":58}}},"branchMap":{},"code":["var d = require('describe-property');","var StatusCodes = require('../StatusCodes');","","module.exports = function (mach) {","  Object.defineProperties(mach.Connection.prototype, {","","    /**","     * The message that corresponds with the response status code.","     */","    statusText: d.gs(function () {","      return this.status + ' ' + StatusCodes[this.status];","    })","","  });","};",""],"l":{"1":1,"2":1,"4":1,"5":1,"11":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/StatusCodes.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/StatusCodes.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":61,"column":2}}},"branchMap":{},"code":["/**"," * A map of HTTP status codes to their \"status text\"."," */","module.exports = {","  100: 'Continue',","  101: 'Switching Protocols',","  102: 'Processing',                       // RFC 2518, obsoleted by RFC 4918","  200: 'OK',","  201: 'Created',","  202: 'Accepted',","  203: 'Non-Authoritative Information',","  204: 'No Content',","  205: 'Reset Content',","  206: 'Partial Content',","  207: 'Multi-Status',                     // RFC 4918","  300: 'Multiple Choices',","  301: 'Moved Permanently',","  302: 'Moved Temporarily',","  303: 'See Other',","  304: 'Not Modified',","  305: 'Use Proxy',","  307: 'Temporary Redirect',","  400: 'Bad Request',","  401: 'Unauthorized',","  402: 'Payment Required',","  403: 'Forbidden',","  404: 'Not Found',","  405: 'Method Not Allowed',","  406: 'Not Acceptable',","  407: 'Proxy Authentication Required',","  408: 'Request Time-out',","  409: 'Conflict',","  410: 'Gone',","  411: 'Length Required',","  412: 'Precondition Failed',","  413: 'Request Entity Too Large',","  414: 'Request-URI Too Large',","  415: 'Unsupported Media Type',","  416: 'Requested Range Not Satisfiable',","  417: 'Expectation Failed',","  418: \"I'm a teapot\",                     // RFC 2324","  422: 'Unprocessable Entity',             // RFC 4918","  423: 'Locked',                           // RFC 4918","  424: 'Failed Dependency',                // RFC 4918","  425: 'Unordered Collection',             // RFC 4918","  426: 'Upgrade Required',                 // RFC 2817","  428: 'Precondition Required',            // RFC 6585","  429: 'Too Many Requests',                // RFC 6585","  431: 'Request Header Fields Too Large',  // RFC 6585","  500: 'Internal Server Error',","  501: 'Not Implemented',","  502: 'Bad Gateway',","  503: 'Service Unavailable',","  504: 'Gateway Timeout',","  505: 'HTTP Version Not Supported',","  506: 'Variant Also Negotiates',          // RFC 2295","  507: 'Insufficient Storage',             // RFC 4918","  509: 'Bandwidth Limit Exceeded',","  510: 'Not Extended',                     // RFC 2774","  511: 'Network Authentication Required'   // RFC 6585","};",""],"l":{"4":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/callApp.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/callApp.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"callApp","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":41}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":58},"end":{"line":30,"column":74}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":43}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":86},"end":{"line":38,"column":105}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":42}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":25,"column":0},"end":{"line":44,"column":1}},"4":{"start":{"line":26,"column":2},"end":{"line":26,"column":26}},"5":{"start":{"line":28,"column":2},"end":{"line":28,"column":34}},"6":{"start":{"line":30,"column":2},"end":{"line":43,"column":5}},"7":{"start":{"line":31,"column":4},"end":{"line":32,"column":15}},"8":{"start":{"line":32,"column":6},"end":{"line":32,"column":15}},"9":{"start":{"line":34,"column":4},"end":{"line":42,"column":7}},"10":{"start":{"line":35,"column":6},"end":{"line":36,"column":20}},"11":{"start":{"line":36,"column":8},"end":{"line":36,"column":20}},"12":{"start":{"line":38,"column":6},"end":{"line":41,"column":9}},"13":{"start":{"line":39,"column":8},"end":{"line":39,"column":36}},"14":{"start":{"line":40,"column":8},"end":{"line":40,"column":20}},"15":{"start":{"line":46,"column":0},"end":{"line":46,"column":25}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},{"start":{"line":26,"column":23},"end":{"line":26,"column":25}}]},"2":{"line":30,"type":"cond-expr","locations":[{"start":{"line":30,"column":36},"end":{"line":30,"column":47}},{"start":{"line":30,"column":50},"end":{"line":30,"column":51}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":20}},{"start":{"line":31,"column":24},"end":{"line":31,"column":53}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":6},"end":{"line":35,"column":6}},{"start":{"line":35,"column":6},"end":{"line":35,"column":6}}]}},"code":["var Connection = require('../Connection');","var Promise = require('./Promise');","","/**"," * Creates a new Connection using the given options and sends"," * the request to the given app. Returns a promise for the connection"," * object when the response is received."," *"," * Options may be any of the Connection options, plus the following:"," *"," * - binary     By default the response content is buffered and stored"," *              in the responseText property of the connection. Set this"," *              option true to disable this behavior."," * - maxLength  The maximum length of the response content to accept."," *              This option has no effect when \"binary\" is true. By"," *              default there is no maximum length."," * - encoding   The encoding to use to decode the response body. This"," *              option has no effect when \"binary\" is true. By default"," *              the encoding is whatever was specified in the Content-Type"," *              header of the response."," *"," * If a modifier function is provided, it will have a chance to modify"," * the Connection object immediately before the request is made."," */","function callApp(app, options, modifier) {","  options = options || {};","","  var c = new Connection(options);","","  return Promise.resolve(modifier ? modifier(c) : c).then(function (conn) {","    if (conn == null || !(conn instanceof Connection))","      conn = c;","","    return conn.call(app).then(function () {","      if (options.binary)","        return conn;","","      return conn.response.stringifyContent(options.maxLength, options.encoding).then(function (content) {","        conn.responseText = content;","        return conn;","      });","    });","  });","}","","module.exports = callApp;",""],"l":{"1":1,"2":1,"25":1,"26":0,"28":0,"30":0,"31":0,"32":0,"34":0,"35":0,"36":0,"38":0,"39":0,"40":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/default-browser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/default-browser.js","s":{"1":1,"2":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":33}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":6,"column":2}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":35}}},"branchMap":{},"code":["/**"," * The default extension for browser environments."," */","module.exports = function (mach) {","  mach.extend(require('./client'));","};",""],"l":{"4":1,"5":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/submit.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/extensions/submit.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"forEach","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}}},"2":{"name":"getFieldType","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}}},"3":{"name":"addParam","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":39}}},"4":{"name":"getParams","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":25}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":25},"end":{"line":25,"column":44}}},"6":{"name":"(anonymous_6)","line":33,"loc":{"start":{"line":33,"column":29},"end":{"line":33,"column":45}}},"7":{"name":"(anonymous_7)","line":44,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":33}}},"8":{"name":"(anonymous_8)","line":59,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":32}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":3,"column":0},"end":{"line":6,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":5,"column":42}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":42}},"5":{"start":{"line":8,"column":0},"end":{"line":10,"column":1}},"6":{"start":{"line":9,"column":2},"end":{"line":9,"column":84}},"7":{"start":{"line":12,"column":0},"end":{"line":20,"column":1}},"8":{"start":{"line":13,"column":2},"end":{"line":19,"column":3}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":25}},"10":{"start":{"line":15,"column":9},"end":{"line":19,"column":3}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":29}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":43}},"13":{"start":{"line":22,"column":0},"end":{"line":42,"column":1}},"14":{"start":{"line":23,"column":2},"end":{"line":23,"column":18}},"15":{"start":{"line":25,"column":2},"end":{"line":39,"column":5}},"16":{"start":{"line":26,"column":4},"end":{"line":27,"column":13}},"17":{"start":{"line":27,"column":6},"end":{"line":27,"column":13}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":28}},"19":{"start":{"line":30,"column":4},"end":{"line":30,"column":37}},"20":{"start":{"line":32,"column":4},"end":{"line":38,"column":5}},"21":{"start":{"line":33,"column":6},"end":{"line":35,"column":9}},"22":{"start":{"line":34,"column":8},"end":{"line":34,"column":37}},"23":{"start":{"line":36,"column":11},"end":{"line":38,"column":5}},"24":{"start":{"line":37,"column":6},"end":{"line":37,"column":44}},"25":{"start":{"line":41,"column":2},"end":{"line":41,"column":16}},"26":{"start":{"line":44,"column":0},"end":{"line":81,"column":2}},"27":{"start":{"line":45,"column":2},"end":{"line":45,"column":35}},"28":{"start":{"line":59,"column":2},"end":{"line":80,"column":4}},"29":{"start":{"line":60,"column":4},"end":{"line":60,"column":29}},"30":{"start":{"line":61,"column":4},"end":{"line":61,"column":43}},"31":{"start":{"line":62,"column":4},"end":{"line":62,"column":35}},"32":{"start":{"line":63,"column":4},"end":{"line":63,"column":33}},"33":{"start":{"line":65,"column":4},"end":{"line":66,"column":55}},"34":{"start":{"line":66,"column":6},"end":{"line":66,"column":55}},"35":{"start":{"line":68,"column":4},"end":{"line":69,"column":56}},"36":{"start":{"line":69,"column":6},"end":{"line":69,"column":56}},"37":{"start":{"line":71,"column":4},"end":{"line":71,"column":80}},"38":{"start":{"line":73,"column":4},"end":{"line":79,"column":7}}},"branchMap":{"1":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":51},"end":{"line":9,"column":74}},{"start":{"line":9,"column":77},"end":{"line":9,"column":83}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":2},"end":{"line":13,"column":2}},{"start":{"line":13,"column":2},"end":{"line":13,"column":2}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":9},"end":{"line":15,"column":9}},{"start":{"line":15,"column":9},"end":{"line":15,"column":9}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"5":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"6":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":23}},{"start":{"line":32,"column":27},"end":{"line":32,"column":51}}]},"7":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":11},"end":{"line":36,"column":11}},{"start":{"line":36,"column":11},"end":{"line":36,"column":11}}]},"8":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":32}},{"start":{"line":36,"column":36},"end":{"line":36,"column":55}},{"start":{"line":36,"column":60},"end":{"line":36,"column":75}}]},"9":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"10":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]}},"code":["var createContent = require('../multipart/createContent');","","function forEach(list, callback) {","  for (var i = 0, len = list.length; i < len; ++i)","    callback.call(list, list[i], i, list);","}","","function getFieldType(node) {","  return node.nodeName.toUpperCase() === 'INPUT' ? node.type.toUpperCase() : 'TEXT';","}","","function addParam(params, name, value) {","  if (!params[name]) {","    params[name] = value;","  } else if (Array.isArray(params[name])) {","    params[name].push(value);","  } else {","    params[name] = [ params[name], value ];","  }","}","","function getParams(form) {","  var params = {};","","  forEach(form.elements, function (element) {","    if (!element.hasAttribute('name'))","      return;","","    var name = element.name;","    var type = getFieldType(element);","","    if (type === 'FILE' && element.files.length > 0) {","      forEach(element.files, function (file) {","        addParam(params, name, file);","      });","    } else if ((type !== 'RADIO' && type !== 'CHECKBOX') || element.checked) {","      addParam(params, name, element.value);","    }","  });","","  return params;","}","","module.exports = function (mach) {","  mach.extend(require('./client'));","","  /**","   * Submits the given form as binary data via XMLHttpRequest using","   * the form's action, method, and encoding, and returns a promise for","   * the connection object. This function is able to submit forms as","   * either application/x-www-form-urlencoded or multipart/form-data.","   *","   * Note: Only GET and POST methods are supported, as per the HTML spec.","   * If you need to use another method, try using a hidden `_method` field","   * and mach.methodOverride on the server.","   *","   * See also http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1","   */ ","  mach.submit = function (form) {","    var action = form.action;","    var method = form.method.toUpperCase();","    var contentType = form.enctype;","    var params = getParams(form);","","    if (method === 'GET')","      return mach.get({ url: action, params: params });","","    if (contentType !== 'multipart/form-data')","      return mach.post({ url: action, params: params });","","    var boundary = '--------------------------------' + Date.now().toString(16);","","    return mach.post({","      url: action,","      headers: {","        'Content-Type': contentType + '; boundary=' + boundary","      },","      content: createContent(params, boundary)","    });","  };","};",""],"l":{"1":1,"3":1,"4":0,"5":0,"8":1,"9":0,"12":1,"13":0,"14":0,"15":0,"16":0,"18":0,"22":1,"23":0,"25":0,"26":0,"27":0,"29":0,"30":0,"32":0,"33":0,"34":0,"36":0,"37":0,"41":0,"44":1,"45":0,"59":0,"60":0,"61":0,"62":0,"63":0,"65":0,"66":0,"68":0,"69":0,"71":0,"73":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/createContent.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/multipart/createContent.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"createHeaders","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":45}}},"2":{"name":"createContent","line":24,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":41}}},"3":{"name":"appendContent","line":31,"loc":{"start":{"line":31,"column":2},"end":{"line":31,"column":38}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":29},"end":{"line":35,"column":41}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":22},"end":{"line":38,"column":39}}},"6":{"name":"(anonymous_6)","line":44,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":41}}},"7":{"name":"(anonymous_7)","line":66,"loc":{"start":{"line":66,"column":15},"end":{"line":66,"column":27}}},"8":{"name":"(anonymous_8)","line":68,"loc":{"start":{"line":68,"column":5},"end":{"line":68,"column":22}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":39}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"5":{"start":{"line":7,"column":0},"end":{"line":17,"column":1}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":69}},"7":{"start":{"line":10,"column":2},"end":{"line":11,"column":46}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":46}},"9":{"start":{"line":13,"column":2},"end":{"line":14,"column":42}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":42}},"11":{"start":{"line":16,"column":2},"end":{"line":16,"column":29}},"12":{"start":{"line":24,"column":0},"end":{"line":73,"column":1}},"13":{"start":{"line":25,"column":2},"end":{"line":25,"column":27}},"14":{"start":{"line":29,"column":2},"end":{"line":29,"column":34}},"15":{"start":{"line":31,"column":2},"end":{"line":50,"column":3}},"16":{"start":{"line":32,"column":4},"end":{"line":49,"column":5}},"17":{"start":{"line":33,"column":6},"end":{"line":33,"column":30}},"18":{"start":{"line":35,"column":6},"end":{"line":42,"column":9}},"19":{"start":{"line":36,"column":8},"end":{"line":36,"column":94}},"20":{"start":{"line":38,"column":8},"end":{"line":41,"column":11}},"21":{"start":{"line":39,"column":10},"end":{"line":39,"column":31}},"22":{"start":{"line":40,"column":10},"end":{"line":40,"column":32}},"23":{"start":{"line":44,"column":6},"end":{"line":48,"column":9}},"24":{"start":{"line":45,"column":8},"end":{"line":45,"column":70}},"25":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"26":{"start":{"line":47,"column":8},"end":{"line":47,"column":30}},"27":{"start":{"line":52,"column":2},"end":{"line":52,"column":15}},"28":{"start":{"line":53,"column":2},"end":{"line":64,"column":3}},"29":{"start":{"line":54,"column":4},"end":{"line":63,"column":5}},"30":{"start":{"line":55,"column":6},"end":{"line":55,"column":27}},"31":{"start":{"line":57,"column":6},"end":{"line":62,"column":7}},"32":{"start":{"line":58,"column":8},"end":{"line":59,"column":40}},"33":{"start":{"line":59,"column":10},"end":{"line":59,"column":40}},"34":{"start":{"line":61,"column":8},"end":{"line":61,"column":35}},"35":{"start":{"line":66,"column":2},"end":{"line":70,"column":5}},"36":{"start":{"line":67,"column":4},"end":{"line":67,"column":44}},"37":{"start":{"line":69,"column":4},"end":{"line":69,"column":33}},"38":{"start":{"line":72,"column":2},"end":{"line":72,"column":17}},"39":{"start":{"line":75,"column":0},"end":{"line":75,"column":31}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":2},"end":{"line":10,"column":2}},{"start":{"line":10,"column":2},"end":{"line":10,"column":2}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":2},"end":{"line":13,"column":2}},{"start":{"line":13,"column":2},"end":{"line":13,"column":2}}]},"3":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"5":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":6},"end":{"line":57,"column":6}},{"start":{"line":57,"column":6},"end":{"line":57,"column":6}}]}},"code":["/* jshint -W058 */","var Stream = require('bufferedstream');","var Promise = require('../utils/Promise');","var readFile = require('../utils/readFile');","var File = require('../utils/File');","","function createHeaders(name, filename, type) {","  var header = 'Content-Disposition: form-data; name=\"' + name + '\"';","","  if (filename)","    header += '; filename=\"' + filename + '\"';","","  if (type)","    header += '\\r\\nContent-Type: ' + type;","","  return header + '\\r\\n\\r\\n';","}","","/**"," * Creates and returns a binary stream of multipart content produced"," * from the given params. Param values may be a string, binary, or File"," * object, or an array of any of those types."," */","function createContent(params, boundary) {","  var content = new Stream;","","  // Use a promise chain to write all fields to the content","  // stream in the same order they appear in params.","  var promise = Promise.resolve();","","  function appendContent(name, value) {","    if (value instanceof File) {","      var p = readFile(value);","","      promise = promise.then(function () {","        content.write('--' + boundary + '\\r\\n' + createHeaders(name, value.name, value.type));","","        return p.then(function (chunk) {","          content.write(chunk);","          content.write('\\r\\n');","        });","      });","    } else {","      promise = promise.then(function () {","        content.write('--' + boundary + '\\r\\n' + createHeaders(name));","        content.write(value);","        content.write('\\r\\n');","      });","    }","  }","","  var param, i;","  for (var name in params) {","    if (params.hasOwnProperty(name)) {","      param = params[name];","","      if (Array.isArray(param)) {","        for (i = 0, len = param.length; i < len; ++i)","          appendContent(name, param[i]);","      } else {","        appendContent(name, param);","      }","    }","  }","","  promise.then(function () {","    content.end('--' + boundary + '--\\r\\n');","  }, function (error) {","    content.emit('error', error);","  });","","  return content;","}","","module.exports = createContent;",""],"l":{"2":1,"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"13":0,"14":0,"16":0,"24":1,"25":0,"29":0,"31":1,"32":0,"33":0,"35":0,"36":0,"38":0,"39":0,"40":0,"44":0,"45":0,"46":0,"47":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"59":0,"61":0,"66":0,"67":0,"69":0,"72":0,"75":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/readFile.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/readFile.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"readFile","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":24}}},"2":{"name":"(anonymous_2)","line":5,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}}},"3":{"name":"(anonymous_3)","line":6,"loc":{"start":{"line":6,"column":27},"end":{"line":6,"column":50}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":4,"column":0},"end":{"line":14,"column":1}},"4":{"start":{"line":5,"column":2},"end":{"line":13,"column":5}},"5":{"start":{"line":6,"column":4},"end":{"line":12,"column":7}},"6":{"start":{"line":7,"column":6},"end":{"line":11,"column":7}},"7":{"start":{"line":8,"column":8},"end":{"line":8,"column":22}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":22}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":26}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":6},"end":{"line":7,"column":6}},{"start":{"line":7,"column":6},"end":{"line":7,"column":6}}]}},"code":["var fs = require('fs');","var Promise = require('./Promise');","","function readFile(file) {","  return new Promise(function (resolve, reject) {","    fs.readFile(file.path, function (error, data) {","      if (error) {","        reject(error);","      } else {","        resolve(data);","      }","    });","  });","}","","module.exports = readFile;",""],"l":{"1":1,"2":1,"4":1,"5":0,"6":0,"7":0,"8":0,"10":0,"16":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/File-browser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/File-browser.js","s":{"1":2},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}}},"branchMap":{},"code":["module.exports = window.File;",""],"l":{"1":2}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseURL-browser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/parseURL-browser.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"parseURL","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":70}},"2":{"start":{"line":3,"column":0},"end":{"line":18,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":46}},"4":{"start":{"line":6,"column":2},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":2},"end":{"line":7,"column":20}},"6":{"start":{"line":9,"column":2},"end":{"line":17,"column":4}},"7":{"start":{"line":20,"column":0},"end":{"line":20,"column":26}}},"branchMap":{"1":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":15},"end":{"line":4,"column":39}},{"start":{"line":4,"column":43},"end":{"line":4,"column":45}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":14},"end":{"line":10,"column":23}},{"start":{"line":10,"column":27},"end":{"line":10,"column":31}}]},"3":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":10},"end":{"line":11,"column":19}},{"start":{"line":11,"column":23},"end":{"line":11,"column":27}}]},"4":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":14},"end":{"line":12,"column":23}},{"start":{"line":12,"column":27},"end":{"line":12,"column":31}}]},"5":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":10},"end":{"line":13,"column":19}},{"start":{"line":13,"column":23},"end":{"line":13,"column":27}}]}},"code":["var ORIGIN_MATCHER = /^(https?:)\\/\\/(?:([^@]+)@)?([^/:]+)(?::(\\d+))?/;","","function parseURL(url) {","  var origin = ORIGIN_MATCHER.exec(url) || {};","","  var anchor = document.createElement('a');","  anchor.href = url;","","  return {","    protocol: origin[1] || null,","    auth: origin[2] || null,","    hostname: origin[3] || null,","    port: origin[4] || null,","    pathname: anchor.pathname,","    search: anchor.search,","    hash: anchor.hash","  };","}","","module.exports = parseURL;",""],"l":{"1":1,"3":1,"4":0,"6":0,"7":0,"9":0,"20":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/readFile-browser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/readFile-browser.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"readFile","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":24}}},"2":{"name":"(anonymous_2)","line":5,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}}},"3":{"name":"(anonymous_3)","line":9,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":32}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"2":{"start":{"line":4,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":5,"column":2},"end":{"line":14,"column":5}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":32}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}},"6":{"start":{"line":9,"column":4},"end":{"line":11,"column":6}},"7":{"start":{"line":10,"column":6},"end":{"line":10,"column":45}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":26}}},"branchMap":{},"code":["/* jshint -W058 */","var Promise = require('./Promise');","","function readFile(file) {","  return new Promise(function (resolve, reject) {","    var reader = new FileReader;","","    reader.onerror = reject;","    reader.onload = function () {","      resolve(new Uint8Array(reader.result));","    };","","    reader.readAsArrayBuffer(file);","  });","}","","module.exports = readFile;",""],"l":{"2":1,"4":1,"5":0,"6":0,"8":0,"9":0,"10":0,"13":0,"17":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/sendRequest-browser.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/utils/sendRequest-browser.js","s":{"1":2,"2":0,"3":0,"4":1,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"copyStatusAndHeaders","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}}},"2":{"name":"getContent","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"3":{"name":"pipeContent","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":42}}},"4":{"name":"enableBinaryContent","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":34}}},"5":{"name":"enableCredentials","line":55,"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":32}}},"6":{"name":"sendRequest","line":63,"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":37}}},"7":{"name":"(anonymous_7)","line":64,"loc":{"start":{"line":64,"column":30},"end":{"line":64,"column":66}}},"8":{"name":"tryToResolve","line":84,"loc":{"start":{"line":84,"column":4},"end":{"line":84,"column":28}}},"9":{"name":"(anonymous_9)","line":89,"loc":{"start":{"line":89,"column":29},"end":{"line":89,"column":41}}},"10":{"name":"(anonymous_10)","line":113,"loc":{"start":{"line":113,"column":18},"end":{"line":113,"column":35}}},"11":{"name":"(anonymous_11)","line":120,"loc":{"start":{"line":120,"column":12},"end":{"line":120,"column":24}}},"12":{"name":"(anonymous_12)","line":130,"loc":{"start":{"line":130,"column":33},"end":{"line":130,"column":50}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":43}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":53}},"4":{"start":{"line":6,"column":0},"end":{"line":10,"column":1}},"5":{"start":{"line":7,"column":2},"end":{"line":7,"column":54}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":27}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":21}},"8":{"start":{"line":12,"column":0},"end":{"line":25,"column":1}},"9":{"start":{"line":13,"column":2},"end":{"line":13,"column":52}},"10":{"start":{"line":15,"column":2},"end":{"line":16,"column":44}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":44}},"12":{"start":{"line":18,"column":2},"end":{"line":19,"column":24}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":24}},"14":{"start":{"line":21,"column":2},"end":{"line":22,"column":54}},"15":{"start":{"line":22,"column":4},"end":{"line":22,"column":54}},"16":{"start":{"line":24,"column":2},"end":{"line":24,"column":26}},"17":{"start":{"line":27,"column":0},"end":{"line":43,"column":1}},"18":{"start":{"line":28,"column":2},"end":{"line":28,"column":32}},"19":{"start":{"line":30,"column":2},"end":{"line":40,"column":3}},"20":{"start":{"line":31,"column":4},"end":{"line":34,"column":5}},"21":{"start":{"line":32,"column":6},"end":{"line":32,"column":52}},"22":{"start":{"line":33,"column":6},"end":{"line":33,"column":32}},"23":{"start":{"line":36,"column":4},"end":{"line":39,"column":5}},"24":{"start":{"line":37,"column":6},"end":{"line":37,"column":42}},"25":{"start":{"line":38,"column":6},"end":{"line":38,"column":28}},"26":{"start":{"line":42,"column":2},"end":{"line":42,"column":16}},"27":{"start":{"line":45,"column":0},"end":{"line":53,"column":1}},"28":{"start":{"line":46,"column":2},"end":{"line":52,"column":3}},"29":{"start":{"line":47,"column":4},"end":{"line":47,"column":37}},"30":{"start":{"line":48,"column":9},"end":{"line":52,"column":3}},"31":{"start":{"line":49,"column":4},"end":{"line":49,"column":63}},"32":{"start":{"line":51,"column":4},"end":{"line":51,"column":61}},"33":{"start":{"line":55,"column":0},"end":{"line":58,"column":1}},"34":{"start":{"line":56,"column":2},"end":{"line":57,"column":31}},"35":{"start":{"line":57,"column":4},"end":{"line":57,"column":31}},"36":{"start":{"line":60,"column":0},"end":{"line":60,"column":39}},"37":{"start":{"line":61,"column":0},"end":{"line":61,"column":30}},"38":{"start":{"line":63,"column":0},"end":{"line":134,"column":1}},"39":{"start":{"line":64,"column":2},"end":{"line":133,"column":5}},"40":{"start":{"line":65,"column":4},"end":{"line":65,"column":33}},"41":{"start":{"line":66,"column":4},"end":{"line":66,"column":47}},"42":{"start":{"line":68,"column":4},"end":{"line":68,"column":29}},"43":{"start":{"line":70,"column":4},"end":{"line":71,"column":29}},"44":{"start":{"line":71,"column":6},"end":{"line":71,"column":29}},"45":{"start":{"line":73,"column":4},"end":{"line":73,"column":31}},"46":{"start":{"line":74,"column":4},"end":{"line":74,"column":34}},"47":{"start":{"line":76,"column":4},"end":{"line":79,"column":64}},"48":{"start":{"line":77,"column":6},"end":{"line":79,"column":64}},"49":{"start":{"line":78,"column":8},"end":{"line":79,"column":64}},"50":{"start":{"line":79,"column":10},"end":{"line":79,"column":64}},"51":{"start":{"line":81,"column":4},"end":{"line":81,"column":53}},"52":{"start":{"line":82,"column":4},"end":{"line":82,"column":27}},"53":{"start":{"line":84,"column":4},"end":{"line":87,"column":5}},"54":{"start":{"line":85,"column":6},"end":{"line":86,"column":22}},"55":{"start":{"line":86,"column":8},"end":{"line":86,"column":22}},"56":{"start":{"line":89,"column":4},"end":{"line":111,"column":6}},"57":{"start":{"line":90,"column":6},"end":{"line":91,"column":15}},"58":{"start":{"line":91,"column":8},"end":{"line":91,"column":15}},"59":{"start":{"line":93,"column":6},"end":{"line":110,"column":7}},"60":{"start":{"line":94,"column":8},"end":{"line":98,"column":9}},"61":{"start":{"line":95,"column":10},"end":{"line":95,"column":25}},"62":{"start":{"line":97,"column":10},"end":{"line":97,"column":46}},"63":{"start":{"line":99,"column":13},"end":{"line":110,"column":7}},"64":{"start":{"line":100,"column":8},"end":{"line":105,"column":9}},"65":{"start":{"line":101,"column":10},"end":{"line":101,"column":25}},"66":{"start":{"line":102,"column":10},"end":{"line":102,"column":53}},"67":{"start":{"line":104,"column":10},"end":{"line":104,"column":37}},"68":{"start":{"line":106,"column":13},"end":{"line":110,"column":7}},"69":{"start":{"line":107,"column":8},"end":{"line":107,"column":23}},"70":{"start":{"line":108,"column":8},"end":{"line":108,"column":42}},"71":{"start":{"line":109,"column":8},"end":{"line":109,"column":22}},"72":{"start":{"line":113,"column":4},"end":{"line":118,"column":6}},"73":{"start":{"line":117,"column":6},"end":{"line":117,"column":64}},"74":{"start":{"line":120,"column":4},"end":{"line":128,"column":7}},"75":{"start":{"line":121,"column":6},"end":{"line":125,"column":7}},"76":{"start":{"line":122,"column":8},"end":{"line":122,"column":20}},"77":{"start":{"line":127,"column":6},"end":{"line":127,"column":16}},"78":{"start":{"line":130,"column":4},"end":{"line":132,"column":31}},"79":{"start":{"line":131,"column":6},"end":{"line":131,"column":22}},"80":{"start":{"line":136,"column":0},"end":{"line":136,"column":29}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"2":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":11},"end":{"line":16,"column":27}},{"start":{"line":16,"column":31},"end":{"line":16,"column":43}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":2}},{"start":{"line":18,"column":2},"end":{"line":18,"column":2}}]},"4":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"5":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":30,"column":2}},{"start":{"line":30,"column":2},"end":{"line":30,"column":2}}]},"6":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"7":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"8":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":46,"column":2}},{"start":{"line":46,"column":2},"end":{"line":46,"column":2}}]},"9":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":9},"end":{"line":48,"column":9}},{"start":{"line":48,"column":9},"end":{"line":48,"column":9}}]},"10":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":2},"end":{"line":56,"column":2}},{"start":{"line":56,"column":2},"end":{"line":56,"column":2}}]},"11":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"12":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"13":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":8}},{"start":{"line":78,"column":8},"end":{"line":78,"column":8}}]},"14":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":6},"end":{"line":85,"column":6}},{"start":{"line":85,"column":6},"end":{"line":85,"column":6}}]},"15":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":10},"end":{"line":85,"column":17}},{"start":{"line":85,"column":21},"end":{"line":85,"column":67}}]},"16":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":6},"end":{"line":90,"column":6}},{"start":{"line":90,"column":6},"end":{"line":90,"column":6}}]},"17":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":6},"end":{"line":93,"column":6}},{"start":{"line":93,"column":6},"end":{"line":93,"column":6}}]},"18":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":10},"end":{"line":93,"column":30}},{"start":{"line":93,"column":34},"end":{"line":93,"column":61}}]},"19":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":13},"end":{"line":99,"column":13}},{"start":{"line":99,"column":13},"end":{"line":99,"column":13}}]},"20":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":17},"end":{"line":99,"column":37}},{"start":{"line":99,"column":41},"end":{"line":99,"column":59}}]},"21":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":13},"end":{"line":106,"column":13}},{"start":{"line":106,"column":13},"end":{"line":106,"column":13}}]},"22":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":13},"end":{"line":117,"column":24}},{"start":{"line":117,"column":28},"end":{"line":117,"column":62}}]}},"code":["/* jshint -W058 */","var XMLHttpRequest = window.XMLHttpRequest;","var Stream = require('bufferedstream');","var AbortablePromise = require('./AbortablePromise');","","function copyStatusAndHeaders(xhr, conn) {","  conn.response.headers = xhr.getAllResponseHeaders();","  conn.status = xhr.status;","  return conn.status;","}","","function getContent(xhr) {","  var type = String(xhr.responseType).toLowerCase();","","  if (type === 'blob')","    return xhr.responseBlob || xhr.response;","","  if (type === 'arraybuffer')","    return xhr.response;","","  if (typeof VBArray === 'function')","    return new VBArray(client.responseBody).toArray(); // IE9","","  return xhr.responseText;","}","","function pipeContent(xhr, stream, offset) {","  var content = getContent(xhr);","","  if (content != null) {","    if (content.toString().match(/ArrayBuffer/)) {","      stream.write(new Uint8Array(content, offset));","      return content.byteLength;","    }","","    if (content.length > offset) {","      stream.write(content.slice(offset));","      return content.length;","    }","  }","","  return offset;","}","","function enableBinaryContent(xhr) {","  if ('responseType' in xhr) {","    xhr.responseType = 'arraybuffer'; // XHR2","  } else if ('overrideMimeType' in xhr) {","    xhr.overrideMimeType('text/plain; charset=x-user-defined'); // XHR","  } else {","    xhr.setRequestHeader('Accept-Charset', 'x-user-defined'); // IE9","  }","}","","function enableCredentials(xhr) {","  if ('withCredentials' in xhr)","    xhr.withCredentials = true;","}","","var READ_HEADERS_RECEIVED_STATE = true;","var READ_LOADING_STATE = true;","","function sendRequest(conn, location) {","  return new AbortablePromise(function (resolve, reject, onAbort) {","    var xhr = new XMLHttpRequest;","    xhr.open(conn.method, location.href, true);","","    enableBinaryContent(xhr);","","    if (conn.withCredentials)","      enableCredentials(xhr);","","    var request = conn.request;","    var headers = request.headers;","","    if (headers)","      for (var headerName in headers)","        if (headers.hasOwnProperty(headerName))","          xhr.setRequestHeader(headerName, headers[headerName]);","","    var content = conn.response.content = new Stream;","    var offset = 0, status;","","    function tryToResolve() {","      if (!status && (status = copyStatusAndHeaders(xhr, conn)) > 0)","        resolve(conn);","    }","","    xhr.onreadystatechange = function () {","      if (xhr.error)","        return; // readystatechange triggers before error.","","      if (xhr.readyState === 2 && READ_HEADERS_RECEIVED_STATE) {","        try {","          tryToResolve();","        } catch (error) {","          READ_HEADERS_RECEIVED_STATE = false;","        }","      } else if (xhr.readyState === 3 && READ_LOADING_STATE) {","        try {","          tryToResolve();","          offset = pipeContent(xhr, content, offset);","        } catch (error) {","          READ_LOADING_STATE = false;","        }","      } else if (xhr.readyState === 4) {","        tryToResolve();","        pipeContent(xhr, content, offset);","        content.end();","      }","    };","","    xhr.onerror = function (event) {","      // Sometimes XHR fails due to CORS constraints. In those cases","      // we don't have any extra information here, unfortunately.","      // See http://stackoverflow.com/questions/4844643/is-it-possible-to-trap-cors-errors","      reject(event.error || new Error('XMLHttpRequest failed'));","    };","","    onAbort(function () {","      try {","        xhr.abort();","      } catch (error) {","        // Not a problem.","      }","","      resolve();","    });","","    request.bufferContent().then(function (chunk) {","      xhr.send(chunk);","    }).then(undefined, reject);","  });","}","","module.exports = sendRequest;",""],"l":{"2":2,"3":0,"4":0,"6":1,"7":0,"8":0,"9":0,"12":1,"13":0,"15":0,"16":0,"18":0,"19":0,"21":0,"22":0,"24":0,"27":1,"28":0,"30":0,"31":0,"32":0,"33":0,"36":0,"37":0,"38":0,"42":0,"45":1,"46":0,"47":0,"48":0,"49":0,"51":0,"55":1,"56":0,"57":0,"60":0,"61":0,"63":1,"64":0,"65":0,"66":0,"68":0,"70":0,"71":0,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"81":0,"82":0,"84":1,"85":0,"86":0,"89":0,"90":0,"91":0,"93":0,"94":0,"95":0,"97":0,"99":0,"100":0,"101":0,"102":0,"104":0,"106":0,"107":0,"108":0,"109":0,"113":0,"117":0,"120":0,"121":0,"122":0,"127":0,"130":0,"131":0,"136":0}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/MemoryStore.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/MemoryStore.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"makeUniqueKey","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}}},"2":{"name":"pruneStore","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":26},"end":{"line":15,"column":38}}},"4":{"name":"MemoryStore","line":47,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":30}}},"5":{"name":"(anonymous_5)","line":60,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":27}}},"6":{"name":"(anonymous_6)","line":73,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":29}}},"7":{"name":"(anonymous_7)","line":86,"loc":{"start":{"line":86,"column":11},"end":{"line":86,"column":26}}},"8":{"name":"(anonymous_8)","line":94,"loc":{"start":{"line":94,"column":13},"end":{"line":94,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":49}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"4":{"start":{"line":5,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":10}},"6":{"start":{"line":7,"column":2},"end":{"line":9,"column":26}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":31}},"8":{"start":{"line":11,"column":2},"end":{"line":11,"column":13}},"9":{"start":{"line":14,"column":0},"end":{"line":31,"column":1}},"10":{"start":{"line":15,"column":2},"end":{"line":25,"column":15}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":25}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":16}},"13":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"14":{"start":{"line":20,"column":6},"end":{"line":20,"column":36}},"15":{"start":{"line":22,"column":6},"end":{"line":23,"column":25}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":25}},"17":{"start":{"line":28,"column":2},"end":{"line":28,"column":16}},"18":{"start":{"line":30,"column":2},"end":{"line":30,"column":15}},"19":{"start":{"line":47,"column":0},"end":{"line":56,"column":1}},"20":{"start":{"line":48,"column":2},"end":{"line":48,"column":26}},"21":{"start":{"line":50,"column":2},"end":{"line":50,"column":21}},"22":{"start":{"line":51,"column":2},"end":{"line":51,"column":63}},"23":{"start":{"line":52,"column":2},"end":{"line":52,"column":43}},"24":{"start":{"line":53,"column":2},"end":{"line":55,"column":8}},"25":{"start":{"line":58,"column":0},"end":{"line":103,"column":3}},"26":{"start":{"line":61,"column":4},"end":{"line":61,"column":39}},"27":{"start":{"line":63,"column":4},"end":{"line":64,"column":33}},"28":{"start":{"line":64,"column":6},"end":{"line":64,"column":33}},"29":{"start":{"line":67,"column":4},"end":{"line":68,"column":33}},"30":{"start":{"line":68,"column":6},"end":{"line":68,"column":33}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":36}},"32":{"start":{"line":74,"column":4},"end":{"line":74,"column":26}},"33":{"start":{"line":75,"column":4},"end":{"line":76,"column":71}},"34":{"start":{"line":76,"column":6},"end":{"line":76,"column":71}},"35":{"start":{"line":78,"column":4},"end":{"line":79,"column":46}},"36":{"start":{"line":79,"column":6},"end":{"line":79,"column":46}},"37":{"start":{"line":81,"column":4},"end":{"line":81,"column":33}},"38":{"start":{"line":83,"column":4},"end":{"line":83,"column":32}},"39":{"start":{"line":87,"column":4},"end":{"line":91,"column":5}},"40":{"start":{"line":88,"column":6},"end":{"line":88,"column":32}},"41":{"start":{"line":90,"column":6},"end":{"line":90,"column":25}},"42":{"start":{"line":95,"column":4},"end":{"line":95,"column":25}},"43":{"start":{"line":97,"column":4},"end":{"line":100,"column":5}},"44":{"start":{"line":98,"column":6},"end":{"line":98,"column":32}},"45":{"start":{"line":99,"column":6},"end":{"line":99,"column":24}},"46":{"start":{"line":105,"column":0},"end":{"line":105,"column":29}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":6}},{"start":{"line":22,"column":6},"end":{"line":22,"column":6}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":10},"end":{"line":22,"column":25}},{"start":{"line":22,"column":29},"end":{"line":22,"column":50}}]},"3":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":19}},{"start":{"line":48,"column":23},"end":{"line":48,"column":25}}]},"4":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":32},"end":{"line":51,"column":53}},{"start":{"line":51,"column":57},"end":{"line":51,"column":61}}]},"5":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":19},"end":{"line":52,"column":36}},{"start":{"line":52,"column":40},"end":{"line":52,"column":42}}]},"6":{"line":53,"type":"cond-expr","locations":[{"start":{"line":54,"column":7},"end":{"line":54,"column":33}},{"start":{"line":55,"column":6},"end":{"line":55,"column":7}}]},"7":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"8":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"9":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":23}},{"start":{"line":67,"column":27},"end":{"line":67,"column":56}}]},"10":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"11":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"12":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"13":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":97,"column":4}},{"start":{"line":97,"column":4},"end":{"line":97,"column":4}}]}},"code":["var d = require('describe-property');","var makeToken = require('../../utils/makeToken');","var Promise = require('../../utils/Promise');","","function makeUniqueKey(sessions, keyLength) {","  var key;","  do {","    key = makeToken(keyLength);","  } while (sessions[key]);","","  return key;","}","","function pruneStore(store, interval) {","  var timer = setInterval(function () {","    var now = Date.now();","","    var session;","    for (var key in store.sessions) {","      session = store.sessions[key];","","      if (session._expiry && session._expiry < now)","        store.purge(key);","    }","  }, interval);","","  // Don't let this timer keep the event loop running.","  timer.unref();","","  return timer;","}","","/**"," * Basic server-side storage for sessions that exist within a single process."," * This should never be used in production, but can be useful in development"," * and testing scenarios when there is only a single server instance."," *"," * Accepts the following options:"," *"," * - keyLength        The length (in bytes) that will be used for unique cache keys."," *                    Defaults to 32"," * - purgeInterval    The interval (in milliseconds) at which the cache is"," *                    purged of expired sessions. Defaults to 5000"," * - expireAfter      The number of seconds after which sessions expire."," *                    Defaults to 0 (no expiration)"," */","function MemoryStore(options) {","  options = options || {};","","  this.sessions = {};","  this.timer = pruneStore(this, options.purgeInterval || 5000);","  this.keyLength = options.keyLength || 32;","  this.ttl = options.expireAfter","    ? (1000 * options.expireAfter) // expireAfter is given in seconds","    : 0;","}","","Object.defineProperties(MemoryStore.prototype, {","","  load: d(function (value) {","    var session = this.sessions[value];","","    if (!session)","      return Promise.resolve({});","","    // Verify the session is not expired.","    if (session._expiry && session._expiry <= Date.now())","      return Promise.resolve({});","","    return Promise.resolve(session);","  }),","","  save: d(function (session) {","    var key = session._id;","    if (!key)","      key = session._id = makeUniqueKey(this.sessions, this.keyLength);","","    if (this.ttl)","      session._expiry = Date.now() + this.ttl;","","    this.sessions[key] = session;","","    return Promise.resolve(key);","  }),","","  purge: d(function (key) {","    if (key) {","      delete this.sessions[key];","    } else {","      this.sessions = {};","    }","  }),","","  destroy: d(function () {","    delete this.sessions;","","    if (this.timer) {","      clearInterval(this.timer);","      delete this.timer;","    }","  })","","});","","module.exports = MemoryStore;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"7":0,"8":0,"11":0,"14":1,"15":0,"16":0,"18":0,"19":0,"20":0,"22":0,"23":0,"28":0,"30":0,"47":1,"48":0,"50":0,"51":0,"52":0,"53":0,"58":1,"61":0,"63":0,"64":0,"67":0,"68":0,"70":0,"74":0,"75":0,"76":0,"78":0,"79":0,"81":0,"83":0,"87":0,"88":0,"90":0,"95":0,"97":0,"98":0,"99":0,"105":1}},"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/RedisStore.js":{"path":"/home/travis/build/npmtest/node-npmtest-mach/node_modules/mach/modules/middleware/session/RedisStore.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"sendCommand","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":48}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":39},"end":{"line":11,"column":63}}},"4":{"name":"makeUniqueKey","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":42}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":56},"end":{"line":25,"column":74}}},"6":{"name":"RedisStore","line":60,"loc":{"start":{"line":60,"column":0},"end":{"line":60,"column":29}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":15},"end":{"line":72,"column":27}}},"8":{"name":"(anonymous_8)","line":89,"loc":{"start":{"line":89,"column":10},"end":{"line":89,"column":27}}},"9":{"name":"(anonymous_9)","line":90,"loc":{"start":{"line":90,"column":64},"end":{"line":90,"column":80}}},"10":{"name":"(anonymous_10)","line":95,"loc":{"start":{"line":95,"column":10},"end":{"line":95,"column":29}}},"11":{"name":"(anonymous_11)","line":100,"loc":{"start":{"line":100,"column":81},"end":{"line":100,"column":96}}},"12":{"name":"(anonymous_12)","line":112,"loc":{"start":{"line":112,"column":26},"end":{"line":112,"column":38}}},"13":{"name":"(anonymous_13)","line":118,"loc":{"start":{"line":118,"column":11},"end":{"line":118,"column":26}}},"14":{"name":"(anonymous_14)","line":125,"loc":{"start":{"line":125,"column":13},"end":{"line":125,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":45}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":47}},"6":{"start":{"line":7,"column":0},"end":{"line":19,"column":1}},"7":{"start":{"line":8,"column":2},"end":{"line":8,"column":20}},"8":{"start":{"line":10,"column":2},"end":{"line":18,"column":5}},"9":{"start":{"line":11,"column":4},"end":{"line":17,"column":7}},"10":{"start":{"line":12,"column":6},"end":{"line":16,"column":7}},"11":{"start":{"line":13,"column":8},"end":{"line":13,"column":22}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":23}},"13":{"start":{"line":21,"column":0},"end":{"line":31,"column":1}},"14":{"start":{"line":22,"column":2},"end":{"line":22,"column":33}},"15":{"start":{"line":25,"column":2},"end":{"line":30,"column":5}},"16":{"start":{"line":26,"column":4},"end":{"line":27,"column":17}},"17":{"start":{"line":27,"column":6},"end":{"line":27,"column":17}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":44}},"19":{"start":{"line":60,"column":0},"end":{"line":68,"column":1}},"20":{"start":{"line":61,"column":2},"end":{"line":61,"column":26}},"21":{"start":{"line":63,"column":2},"end":{"line":63,"column":25}},"22":{"start":{"line":64,"column":2},"end":{"line":64,"column":43}},"23":{"start":{"line":65,"column":2},"end":{"line":67,"column":8}},"24":{"start":{"line":70,"column":0},"end":{"line":129,"column":3}},"25":{"start":{"line":73,"column":4},"end":{"line":84,"column":5}},"26":{"start":{"line":74,"column":6},"end":{"line":74,"column":33}},"27":{"start":{"line":76,"column":6},"end":{"line":76,"column":25}},"28":{"start":{"line":77,"column":6},"end":{"line":81,"column":7}},"29":{"start":{"line":78,"column":8},"end":{"line":78,"column":46}},"30":{"start":{"line":79,"column":8},"end":{"line":79,"column":38}},"31":{"start":{"line":80,"column":8},"end":{"line":80,"column":30}},"32":{"start":{"line":83,"column":6},"end":{"line":83,"column":65}},"33":{"start":{"line":86,"column":4},"end":{"line":86,"column":24}},"34":{"start":{"line":90,"column":4},"end":{"line":92,"column":7}},"35":{"start":{"line":91,"column":6},"end":{"line":91,"column":42}},"36":{"start":{"line":96,"column":4},"end":{"line":96,"column":34}},"37":{"start":{"line":97,"column":4},"end":{"line":97,"column":35}},"38":{"start":{"line":98,"column":4},"end":{"line":98,"column":23}},"39":{"start":{"line":100,"column":4},"end":{"line":115,"column":7}},"40":{"start":{"line":101,"column":6},"end":{"line":101,"column":24}},"41":{"start":{"line":103,"column":6},"end":{"line":103,"column":41}},"42":{"start":{"line":105,"column":6},"end":{"line":105,"column":18}},"43":{"start":{"line":106,"column":6},"end":{"line":110,"column":7}},"44":{"start":{"line":107,"column":8},"end":{"line":107,"column":68}},"45":{"start":{"line":109,"column":8},"end":{"line":109,"column":60}},"46":{"start":{"line":112,"column":6},"end":{"line":114,"column":9}},"47":{"start":{"line":113,"column":8},"end":{"line":113,"column":19}},"48":{"start":{"line":119,"column":4},"end":{"line":120,"column":59}},"49":{"start":{"line":120,"column":6},"end":{"line":120,"column":59}},"50":{"start":{"line":122,"column":4},"end":{"line":122,"column":52}},"51":{"start":{"line":126,"column":4},"end":{"line":126,"column":49}},"52":{"start":{"line":131,"column":0},"end":{"line":131,"column":28}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":9},"end":{"line":8,"column":13}},{"start":{"line":8,"column":17},"end":{"line":8,"column":19}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":6}},{"start":{"line":12,"column":6},"end":{"line":12,"column":6}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"4":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":12},"end":{"line":61,"column":19}},{"start":{"line":61,"column":23},"end":{"line":61,"column":25}}]},"5":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":19},"end":{"line":64,"column":36}},{"start":{"line":64,"column":40},"end":{"line":64,"column":42}}]},"6":{"line":65,"type":"cond-expr","locations":[{"start":{"line":66,"column":7},"end":{"line":66,"column":33}},{"start":{"line":67,"column":6},"end":{"line":67,"column":7}}]},"7":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"8":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":6},"end":{"line":77,"column":6}},{"start":{"line":77,"column":6},"end":{"line":77,"column":6}}]},"9":{"line":91,"type":"cond-expr","locations":[{"start":{"line":91,"column":20},"end":{"line":91,"column":36}},{"start":{"line":91,"column":39},"end":{"line":91,"column":41}}]},"10":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":27},"end":{"line":100,"column":38}},{"start":{"line":100,"column":42},"end":{"line":100,"column":74}}]},"11":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":6},"end":{"line":106,"column":6}},{"start":{"line":106,"column":6},"end":{"line":106,"column":6}}]},"12":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]}},"code":["var d = require('describe-property');","var redis = require('redis');","var makeToken = require('../../utils/makeToken');","var Promise = require('../../utils/Promise');","var parseURL = require('../../utils/parseURL');","","function sendCommand(client, command, args) {","  args = args || [];","","  return new Promise(function (resolve, reject) {","    client.send_command(command, args, function (error, value) {","      if (error) {","        reject(error);","      } else {","        resolve(value);","      }","    });","  });","}","","function makeUniqueKey(client, keyLength) {","  var key = makeToken(keyLength);","","  // Try to set an empty string to reserve the key.","  return sendCommand(client, 'setnx', [ key, '' ]).then(function (result) {","    if (result === 1)","      return key; // The key was available.","","    return makeUniqueKey(client, keyLength); // Try again.","  });","}","","/**"," * Server-side storage for sessions using Redis."," *"," * Options may be any of the following:"," *"," * - url              The URL of the Redis instance"," * - keyLength        The length (in bytes) that will be used for unique"," *                    cache keys. Defaults to 32"," * - expireAfter      The number of seconds after which sessions expire."," *                    Defaults to 0 (no expiration)"," *"," * Additionally, all options are passed through to `redis.createClient`."," *"," * Example:"," *"," *   var RedisStore = require('mach/middleware/session/RedisStore');"," *"," *   app.use(mach.session, {"," *     store: new RedisStore({ url: 'redis://127.0.0.1:6379' })"," *   });"," *"," * Note: This store always checks for availability of keys in Redis before"," * using them, so it should be safe to use alongside other programs that are"," * using the same database. However, if you purge the store of all keys it will"," * issue a FLUSHDB command to the database, so be careful. This operation never"," * happens automatically."," */","function RedisStore(options) {","  options = options || {};","","  this.options = options;","  this.keyLength = options.keyLength || 32;","  this.ttl = options.expireAfter","    ? (1000 * options.expireAfter) // expireAfter is given in seconds","    : 0;","}","","Object.defineProperties(RedisStore.prototype, {","","  getClient: d(function () {","    if (!this._client) {","      var options = this.options;","","      var hostname, port;","      if (typeof options.url === 'string') {","        var parsedURL = parseURL(options.url);","        hostname = parsedURL.hostname;","        port = parsedURL.port;","      }","","      this._client = redis.createClient(port, hostname, options);","    }","","    return this._client;","  }),","","  load: d(function (value) {","    return sendCommand(this.getClient(), 'get', [ value ]).then(function (json) {","      return json ? JSON.parse(json) : {};","    });","  }),","","  save: d(function (session) {","    var client = this.getClient();","    var keyLength = this.keyLength;","    var ttl = this.ttl;","","    return Promise.resolve(session._id || makeUniqueKey(client, keyLength)).then(function (key) {","      session._id = key;","","      var json = JSON.stringify(session);","","      var promise;","      if (ttl) {","        promise = sendCommand(client, 'psetex', [ key, ttl, json ]);","      } else {","        promise = sendCommand(client, 'set', [ key, json ]);","      }","","      return promise.then(function () {","        return key;","      });","    });","  }),","","  purge: d(function (key) {","    if (key)","      return sendCommand(this.getClient(), 'del', [ key ]);","","    return sendCommand(this.getClient(), 'flushdb');","  }),","","  destroy: d(function () {","    return sendCommand(this.getClient(), 'quit');","  })","","});","","module.exports = RedisStore;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"12":0,"13":0,"15":0,"21":1,"22":0,"25":0,"26":0,"27":0,"29":0,"60":1,"61":0,"63":0,"64":0,"65":0,"70":1,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"80":0,"83":0,"86":0,"90":0,"91":0,"96":0,"97":0,"98":0,"100":0,"101":0,"103":0,"105":0,"106":0,"107":0,"109":0,"112":0,"113":0,"119":0,"120":0,"122":0,"126":0,"131":1}}}